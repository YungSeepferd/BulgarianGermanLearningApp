{{ define "title" }}{{ .Title }} - {{ .Site.Title }}{{ end }}
{{ define "main" }}

<article class="single-content">
    <header class="content-header">
        <h1>{{ .Title }}</h1>
        
        {{ if .Params.level }}
        <div class="content-meta">
            <span class="level-badge level-{{ .Params.level | lower }}">{{ .Params.level }}</span>
            {{ if .Params.category }}
            <span class="category-tag">{{ .Params.category }}</span>
            {{ end }}
            {{ if .Date }}
            <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "January 2, 2006" }}</time>
            {{ end }}
        </div>
        {{ end }}
    </header>
    
    <div class="content-body">
        {{ .Content }}
    </div>
    
    {{ if .Params.examples }}
    <section class="examples-section">
        <h2>Examples</h2>
        <div class="examples-list">
            {{ range .Params.examples }}
            <div class="example-item">{{ . | markdownify }}</div>
            {{ end }}
        </div>
    </section>
    {{ end }}
    
    {{ if .Params.exercises }}
    <section class="exercises-section">
        <h2>Practice Exercises</h2>
        <div class="exercises-list">
            {{ range .Params.exercises }}
            <div class="exercise-item">
                <div class="exercise-question">{{ .question }}</div>
                <div class="exercise-answer hidden">{{ .answer }}</div>
                <button class="show-answer-btn">Show Answer</button>
            </div>
            {{ end }}
        </div>
    </section>
    {{ end }}
    
    <footer class="content-footer">
        <div class="content-actions">
            <button class="bookmark-btn" data-content="{{ .RelPermalink }}">
                <span class="icon">‚≠ê</span>
                <span class="text">Bookmark</span>
            </button>
            
            {{ if eq .Section "vocabulary" }}
            <button class="practice-btn" data-word="{{ .Title }}">
                <span class="icon">üéØ</span>
                <span class="text">Practice This Word</span>
            </button>
            {{ end }}
            
            {{ if eq .Section "grammar" }}
            <button class="practice-grammar-btn" data-grammar="{{ .Title }}">
                <span class="icon">üìù</span>
                <span class="text">Practice This Rule</span>
            </button>
            {{ end }}
        </div>
        
        <nav class="content-navigation">
            {{ with .PrevInSection }}
            <a href="{{ .RelPermalink }}" class="nav-link nav-prev">
                <span class="nav-direction">‚Üê Previous</span>
                <span class="nav-title">{{ .Title }}</span>
            </a>
            {{ end }}
            
            {{ with .NextInSection }}
            <a href="{{ .RelPermalink }}" class="nav-link nav-next">
                <span class="nav-direction">Next ‚Üí</span>
                <span class="nav-title">{{ .Title }}</span>
            </a>
            {{ end }}
        </nav>
    </footer>
</article>

{{ end }}

{{ define "scripts" }}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Show/hide exercise answers
    document.querySelectorAll('.show-answer-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const answer = this.parentElement.querySelector('.exercise-answer');
            answer.classList.toggle('hidden');
            this.textContent = answer.classList.contains('hidden') ? 'Show Answer' : 'Hide Answer';
        });
    });
    
    // Bookmark functionality
    const bookmarkBtn = document.querySelector('.bookmark-btn');
    if (bookmarkBtn) {
        bookmarkBtn.addEventListener('click', function() {
            const contentUrl = this.dataset.content;
            // Implement bookmark functionality
            console.log('Bookmarking:', contentUrl);
        });
    }
});
</script>
{{ end }}
