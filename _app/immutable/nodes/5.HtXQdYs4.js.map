{"version":3,"file":"5.HtXQdYs4.js","sources":["../../../../../../node_modules/.pnpm/svelte@5.45.8/node_modules/svelte/src/attachments/index.js","../../../../../../src/lib/schemas/lesson.js","../../../../../../src/lib/components/LessonCard.svelte","../../../../../../src/lib/components/GeneratedLesson.svelte","../../../../../../src/lib/services/lesson.ts","../../../../../../src/lib/services/enhanced-lesson.ts","../../../../../../node_modules/.pnpm/svelte-toolbelt@0.10.6_@sveltejs+kit@2.49.2_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5_d877ea8609f757f8dc66da48a36c94a6/node_modules/svelte-toolbelt/dist/utils/is.js","../../../../../../node_modules/.pnpm/svelte-toolbelt@0.10.6_@sveltejs+kit@2.49.2_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5_d877ea8609f757f8dc66da48a36c94a6/node_modules/svelte-toolbelt/dist/box/box-extras.svelte.js","../../../../../../node_modules/.pnpm/svelte-toolbelt@0.10.6_@sveltejs+kit@2.49.2_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5_d877ea8609f757f8dc66da48a36c94a6/node_modules/svelte-toolbelt/dist/utils/compose-handlers.js","../../../../../../node_modules/.pnpm/inline-style-parser@0.2.7/node_modules/inline-style-parser/esm/index.mjs","../../../../../../node_modules/.pnpm/style-to-object@1.0.14/node_modules/style-to-object/esm/index.mjs","../../../../../../node_modules/.pnpm/svelte-toolbelt@0.10.6_@sveltejs+kit@2.49.2_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5_d877ea8609f757f8dc66da48a36c94a6/node_modules/svelte-toolbelt/dist/utils/strings.js","../../../../../../node_modules/.pnpm/svelte-toolbelt@0.10.6_@sveltejs+kit@2.49.2_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5_d877ea8609f757f8dc66da48a36c94a6/node_modules/svelte-toolbelt/dist/utils/css-to-style-obj.js","../../../../../../node_modules/.pnpm/svelte-toolbelt@0.10.6_@sveltejs+kit@2.49.2_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5_d877ea8609f757f8dc66da48a36c94a6/node_modules/svelte-toolbelt/dist/utils/execute-callbacks.js","../../../../../../node_modules/.pnpm/svelte-toolbelt@0.10.6_@sveltejs+kit@2.49.2_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5_d877ea8609f757f8dc66da48a36c94a6/node_modules/svelte-toolbelt/dist/utils/style-to-css.js","../../../../../../node_modules/.pnpm/svelte-toolbelt@0.10.6_@sveltejs+kit@2.49.2_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5_d877ea8609f757f8dc66da48a36c94a6/node_modules/svelte-toolbelt/dist/utils/style.js","../../../../../../node_modules/.pnpm/svelte-toolbelt@0.10.6_@sveltejs+kit@2.49.2_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5_d877ea8609f757f8dc66da48a36c94a6/node_modules/svelte-toolbelt/dist/utils/event-list.js","../../../../../../node_modules/.pnpm/svelte-toolbelt@0.10.6_@sveltejs+kit@2.49.2_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5_d877ea8609f757f8dc66da48a36c94a6/node_modules/svelte-toolbelt/dist/utils/merge-props.js","../../../../../../node_modules/.pnpm/runed@0.35.1_@sveltejs+kit@2.49.2_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.8_vite_78f42d6cf0bb12acf2a139bfd76e7c39/node_modules/runed/dist/internal/configurable-globals.js","../../../../../../node_modules/.pnpm/svelte@5.45.8/node_modules/svelte/src/reactivity/map.js","../../../../../../node_modules/.pnpm/runed@0.35.1_@sveltejs+kit@2.49.2_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.8_vite_78f42d6cf0bb12acf2a139bfd76e7c39/node_modules/runed/dist/utilities/active-element/active-element.svelte.js","../../../../../../node_modules/.pnpm/runed@0.35.1_@sveltejs+kit@2.49.2_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.8_vite_78f42d6cf0bb12acf2a139bfd76e7c39/node_modules/runed/dist/internal/utils/dom.js","../../../../../../node_modules/.pnpm/runed@0.35.1_@sveltejs+kit@2.49.2_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.8_vite_78f42d6cf0bb12acf2a139bfd76e7c39/node_modules/runed/dist/utilities/context/context.js","../../../../../../node_modules/.pnpm/runed@0.35.1_@sveltejs+kit@2.49.2_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.8_vite_78f42d6cf0bb12acf2a139bfd76e7c39/node_modules/runed/dist/utilities/watch/watch.svelte.js","../../../../../../node_modules/.pnpm/svelte-toolbelt@0.10.6_@sveltejs+kit@2.49.2_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5_d877ea8609f757f8dc66da48a36c94a6/node_modules/svelte-toolbelt/dist/utils/on-destroy-effect.svelte.js","../../../../../../node_modules/.pnpm/svelte-toolbelt@0.10.6_@sveltejs+kit@2.49.2_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5_d877ea8609f757f8dc66da48a36c94a6/node_modules/svelte-toolbelt/dist/utils/after-tick.js","../../../../../../node_modules/.pnpm/svelte-toolbelt@0.10.6_@sveltejs+kit@2.49.2_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5_d877ea8609f757f8dc66da48a36c94a6/node_modules/svelte-toolbelt/dist/utils/dom.js","../../../../../../node_modules/.pnpm/svelte-toolbelt@0.10.6_@sveltejs+kit@2.49.2_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5_d877ea8609f757f8dc66da48a36c94a6/node_modules/svelte-toolbelt/dist/utils/dom-context.svelte.js","../../../../../../node_modules/.pnpm/svelte-toolbelt@0.10.6_@sveltejs+kit@2.49.2_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5_d877ea8609f757f8dc66da48a36c94a6/node_modules/svelte-toolbelt/dist/utils/attach-ref.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/internal/attrs.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/internal/kbd-constants.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/internal/is.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/internal/animations-complete.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/internal/presence-manager.svelte.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/internal/noop.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/internal/create-id.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/dialog/dialog.svelte.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/dialog/components/dialog-title.svelte","../../../../../../node_modules/.pnpm/svelte@5.45.8/node_modules/svelte/src/internal/client/dom/blocks/key.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/utilities/portal/portal-consumer.svelte","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/utilities/config/bits-config.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/utilities/config/prop-resolvers.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/utilities/portal/portal.svelte","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/internal/debounce.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/internal/elements.js","../../../../../../node_modules/.pnpm/tabbable@6.3.0/node_modules/tabbable/dist/index.esm.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/menu/menu.svelte.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/utilities/dismissible-layer/use-dismissable-layer.svelte.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/internal/dom.js","../../../../../../node_modules/.pnpm/svelte-toolbelt@0.10.6_@sveltejs+kit@2.49.2_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5_d877ea8609f757f8dc66da48a36c94a6/node_modules/svelte-toolbelt/dist/utils/after-sleep.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/utilities/escape-layer/use-escape-layer.svelte.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/utilities/focus-scope/focus-scope-manager.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/utilities/focus-scope/focus-scope.svelte.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/utilities/text-selection-layer/use-text-selection-layer.svelte.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/internal/use-id.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/internal/shared-state.svelte.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/internal/body-scroll-lock.svelte.js","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/utilities/scroll-lock/scroll-lock.svelte","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/dialog/components/dialog-overlay.svelte","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/dialog/components/dialog-description.svelte","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/dialog/components/dialog.svelte","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/dialog/components/dialog-close.svelte","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/dialog/components/dialog-content.svelte","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/utilities/escape-layer/escape-layer.svelte","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/utilities/dismissible-layer/dismissible-layer.svelte","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/utilities/text-selection-layer/text-selection-layer.svelte","../../../../../../node_modules/.pnpm/bits-ui@2.14.4_@internationalized+date@3.10.0_@sveltejs+kit@2.49.2_@sveltejs+vite-plugi_e8c3fceaa3a840e8697e9d6726308986/node_modules/bits-ui/dist/bits/utilities/focus-scope/focus-scope.svelte","../../../../../../src/lib/components/ui/icons/X.svelte","../../../../../../node_modules/.pnpm/svelte@5.45.8/node_modules/svelte/src/internal/client/dom/blocks/svelte-element.js","../../../../../../src/lib/components/ui/dialog/dialog-content.svelte","../../../../../../src/lib/components/ui/dialog/dialog-portal.svelte","../../../../../../src/lib/components/ui/dialog/dialog-overlay.svelte","../../../../../../src/lib/components/ui/button/button.svelte","../../../../../../node_modules/.pnpm/tailwind-variants@3.2.2_tailwind-merge@3.4.0_tailwindcss@4.1.17/node_modules/tailwind-variants/dist/chunk-LQJYWU4O.js","../../../../../../node_modules/.pnpm/tailwind-variants@3.2.2_tailwind-merge@3.4.0_tailwindcss@4.1.17/node_modules/tailwind-variants/dist/chunk-RZF76H2U.js","../../../../../../node_modules/.pnpm/tailwind-variants@3.2.2_tailwind-merge@3.4.0_tailwindcss@4.1.17/node_modules/tailwind-variants/dist/index.js","../../../../../../src/lib/components/ui/button/index.js","../../../../../../src/lib/components/LessonGenerator.svelte","../../../../../../src/lib/components/ui/dialog/dialog.svelte","../../../../../../src/lib/components/ui/dialog/dialog-header.svelte","../../../../../../src/lib/components/ui/dialog/dialog-title.svelte","../../../../../../src/lib/components/ui/dialog/dialog-description.svelte","../../../../../../src/lib/components/ui/dialog/dialog-footer.svelte","../../../../../../src/routes/lessons/+page.svelte"],"sourcesContent":["/** @import { Action, ActionReturn } from '../action/public' */\n/** @import { Attachment } from './public' */\nimport { noop, render_effect } from 'svelte/internal/client';\nimport { ATTACHMENT_KEY } from '../constants.js';\nimport { untrack } from '../index-client.js';\nimport { teardown } from '../internal/client/reactivity/effects.js';\n\n/**\n * Creates an object key that will be recognised as an attachment when the object is spread onto an element,\n * as a programmatic alternative to using `{@attach ...}`. This can be useful for library authors, though\n * is generally not needed when building an app.\n *\n * ```svelte\n * <script>\n * \timport { createAttachmentKey } from 'svelte/attachments';\n *\n * \tconst props = {\n * \t\tclass: 'cool',\n * \t\tonclick: () => alert('clicked'),\n * \t\t[createAttachmentKey()]: (node) => {\n * \t\t\tnode.textContent = 'attached!';\n * \t\t}\n * \t};\n * </script>\n *\n * <button {...props}>click me</button>\n * ```\n * @since 5.29\n */\nexport function createAttachmentKey() {\n\treturn Symbol(ATTACHMENT_KEY);\n}\n\n/**\n * Converts an [action](https://svelte.dev/docs/svelte/use) into an [attachment](https://svelte.dev/docs/svelte/@attach) keeping the same behavior.\n * It's useful if you want to start using attachments on components but you have actions provided by a library.\n *\n * Note that the second argument, if provided, must be a function that _returns_ the argument to the\n * action function, not the argument itself.\n *\n * ```svelte\n * <!-- with an action -->\n * <div use:foo={bar}>...</div>\n *\n * <!-- with an attachment -->\n * <div {@attach fromAction(foo, () => bar)}>...</div>\n * ```\n * @template {EventTarget} E\n * @template {unknown} T\n * @overload\n * @param {Action<E, T> | ((element: E, arg: T) => void | ActionReturn<T>)} action The action function\n * @param {() => T} fn A function that returns the argument for the action\n * @returns {Attachment<E>}\n */\n/**\n * Converts an [action](https://svelte.dev/docs/svelte/use) into an [attachment](https://svelte.dev/docs/svelte/@attach) keeping the same behavior.\n * It's useful if you want to start using attachments on components but you have actions provided by a library.\n *\n * Note that the second argument, if provided, must be a function that _returns_ the argument to the\n * action function, not the argument itself.\n *\n * ```svelte\n * <!-- with an action -->\n * <div use:foo={bar}>...</div>\n *\n * <!-- with an attachment -->\n * <div {@attach fromAction(foo, () => bar)}>...</div>\n * ```\n * @template {EventTarget} E\n * @overload\n * @param {Action<E, void> | ((element: E) => void | ActionReturn<void>)} action The action function\n * @returns {Attachment<E>}\n */\n/**\n * Converts an [action](https://svelte.dev/docs/svelte/use) into an [attachment](https://svelte.dev/docs/svelte/@attach) keeping the same behavior.\n * It's useful if you want to start using attachments on components but you have actions provided by a library.\n *\n * Note that the second argument, if provided, must be a function that _returns_ the argument to the\n * action function, not the argument itself.\n *\n * ```svelte\n * <!-- with an action -->\n * <div use:foo={bar}>...</div>\n *\n * <!-- with an attachment -->\n * <div {@attach fromAction(foo, () => bar)}>...</div>\n * ```\n *\n * @template {EventTarget} E\n * @template {unknown} T\n * @param {Action<E, T> | ((element: E, arg: T) => void | ActionReturn<T>)} action The action function\n * @param {() => T} fn A function that returns the argument for the action\n * @returns {Attachment<E>}\n * @since 5.32\n */\nexport function fromAction(action, fn = /** @type {() => T} */ (noop)) {\n\treturn (element) => {\n\t\tconst { update, destroy } = untrack(() => action(element, fn()) ?? {});\n\n\t\tif (update) {\n\t\t\tvar ran = false;\n\t\t\trender_effect(() => {\n\t\t\t\tconst arg = fn();\n\t\t\t\tif (ran) update(arg);\n\t\t\t});\n\t\t\tran = true;\n\t\t}\n\n\t\tif (destroy) {\n\t\t\tteardown(destroy);\n\t\t}\n\t};\n}\n","// Lesson Schema for Bulgarian-German Language Learning Application\nimport { z } from 'zod';\nimport { VocabularyCategorySchemaWithFallback, VocabularyMetadataSchema, LegacyIdSchema, PartOfSpeechSchema } from './vocabulary';\n// Create a base schema without catch for omit operations\nconst VocabularyItemBaseSchema = z.object({\n    id: LegacyIdSchema,\n    german: z.string().min(1).max(100),\n    bulgarian: z.string().min(1).max(100),\n    partOfSpeech: PartOfSpeechSchema.default('noun'),\n    difficulty: z.number().min(1).max(5).default(1).describe('1-5 scale where 1 is easiest'),\n    categories: z.array(VocabularyCategorySchemaWithFallback).min(1).default(['uncategorized']),\n    metadata: VocabularyMetadataSchema.optional(),\n    createdAt: z.union([\n        z.date(),\n        z.string().datetime().transform(str => new Date(str))\n    ]).default(new Date()).transform(val => val instanceof Date ? val : new Date(val)),\n    updatedAt: z.union([\n        z.date(),\n        z.string().datetime().transform(str => new Date(str))\n    ]).default(new Date()).transform(val => val instanceof Date ? val : new Date(val)),\n    isCommon: z.boolean().default(false),\n    isVerified: z.boolean().default(false)\n});\n// Vocabulary reference schema\nexport const VocabularyReferenceSchema = z.union([\n    VocabularyItemBaseSchema.omit({ id: true }), // Use base schema for omit()\n    LegacyIdSchema,\n    z.string().uuid()\n]);\n// Lesson difficulty levels\nexport const LessonDifficultySchema = z.enum(['A1', 'A2', 'B1', 'B2', 'C1']);\n// Lesson types\nexport const LessonTypeSchema = z.enum([\n    'vocabulary', 'grammar', 'conversation', 'reading', 'listening', 'writing', 'culture', 'mixed'\n]);\n// Learning objective schema\nexport const LearningObjectiveSchema = z.object({\n    id: z.string().uuid(),\n    description: z.string().min(5).max(200),\n    isCompleted: z.boolean().default(false),\n    createdAt: z.date().default(new Date())\n});\n// Lesson metadata\nexport const LessonMetadataSchema = z.object({\n    tags: z.array(z.string()).default([]),\n    prerequisites: z.array(LegacyIdSchema).default([]),\n    relatedLessons: z.array(LegacyIdSchema).default([]),\n    isPremium: z.boolean().default(false)\n}).default({});\n// Main Lesson Schema\nexport const LessonSchema = z.object({\n    id: LegacyIdSchema,\n    title: z.string().min(3).max(100),\n    description: z.string().min(10).max(1000),\n    difficulty: LessonDifficultySchema.default('A1'),\n    type: LessonTypeSchema.default('vocabulary'),\n    duration: z.number().min(5).max(120).default(15),\n    vocabulary: z.array(VocabularyReferenceSchema).default([]),\n    objectives: z.array(LearningObjectiveSchema).default([]),\n    content: z.string().optional(),\n    isCompleted: z.boolean().default(false),\n    completionPercentage: z.number().min(0).max(100).default(0),\n    createdAt: z.union([z.date(), z.string().datetime().transform(str => new Date(str))]).default(new Date()),\n    updatedAt: z.union([z.date(), z.string().datetime().transform(str => new Date(str))]).default(new Date()),\n    metadata: LessonMetadataSchema\n}).catch((_ctx) => {\n  return {\n        id: `fallback-${Date.now()}`,\n        title: 'Invalid Lesson',\n        description: 'This lesson failed validation',\n        difficulty: 'A1',\n        type: 'vocabulary',\n        duration: 15,\n        vocabulary: [],\n        objectives: [],\n        createdAt: new Date(),\n        updatedAt: new Date(),\n        metadata: {}\n    };\n});\n//# sourceMappingURL=lesson.js.map","<script lang=\"ts\">\n  /**\n   * LessonCard Component\n   *\n   * Displays a lesson with vocabulary items and progress tracking.\n   */\n\n  import { z } from 'zod';\n  import { LessonSchema, type Lesson } from '../schemas/lesson';\n\n  // Props\n  let { lesson, onStart } = $props<{ lesson: Lesson; onStart?: () => void }>();\n\n  // State\n  let isFlipped = $state(false);\n  let currentVocabularyIndex = $state(0);\n  let showAllVocabulary = $state(false);\n\n  // Computed\n  let vocabularyItems = $derived(\n    lesson.vocabulary.map((vocab: any) => {\n      if (typeof vocab === 'string') {\n        return {\n          id: vocab,\n          german: vocab.split('-')[0] || vocab,\n          bulgarian: vocab.split('-')[1] || vocab,\n          partOfSpeech: 'noun',\n          difficulty: 1\n        };\n      } else if (vocab && typeof vocab === 'object') {\n        return {\n          id: vocab.id || `vocab-${Date.now()}`,\n          german: vocab.german || vocab.bulgarian || 'Unknown',\n          bulgarian: vocab.bulgarian || vocab.german || 'Unknown',\n          partOfSpeech: vocab.partOfSpeech || 'noun',\n          difficulty: vocab.difficulty || 1\n        };\n      } else {\n        return {\n          id: `vocab-${Date.now()}`,\n          german: 'Unknown',\n          bulgarian: 'Unknown',\n          partOfSpeech: 'noun',\n          difficulty: 1\n        };\n      }\n    })\n  );\n\n  // Ensure vocabularyItems is never empty and currentVocabulary is always valid\n  let safeVocabularyItems = $derived(vocabularyItems.length > 0 ? vocabularyItems : [{\n    id: 'fallback-vocab',\n    german: 'Example',\n    bulgarian: '–ü—Ä–∏–º–µ—Ä',\n    partOfSpeech: 'noun',\n    difficulty: 1\n  }]);\n\n  let currentVocabulary = $derived(safeVocabularyItems[currentVocabularyIndex] || safeVocabularyItems[0]);\n  let completionPercentage = $derived(\n    Math.round((lesson.objectives.filter((obj: any) => obj.isCompleted).length / lesson.objectives.length) * 100)\n  );\n\n  // Methods\n  function toggleFlip() {\n    isFlipped = !isFlipped;\n  }\n\n  function nextVocabulary() {\n    if (currentVocabularyIndex < vocabularyItems.length - 1) {\n      currentVocabularyIndex++;\n    }\n  }\n\n  function prevVocabulary() {\n    if (currentVocabularyIndex > 0) {\n      currentVocabularyIndex--;\n    }\n  }\n\n  function toggleObjective(objectiveId: string) {\n    lesson.objectives = lesson.objectives.map((obj: any) =>\n      obj.id === objectiveId ? { ...obj, isCompleted: !obj.isCompleted } : obj\n    );\n    lesson.updatedAt = new Date();\n  }\n\n  function getDifficultyColor(difficulty: LessonDifficulty): string {\n    const colors: Record<LessonDifficulty, string> = {\n      'A1': 'bg-green-100 text-green-800 border-green-300',\n      'A2': 'bg-green-200 text-green-900 border-green-400',\n      'B1': 'bg-blue-100 text-blue-800 border-blue-300',\n      'B2': 'bg-blue-200 text-blue-900 border-blue-400',\n      'C1': 'bg-purple-100 text-purple-800 border-purple-300'\n    };\n    return colors[difficulty] || 'bg-gray-100 text-gray-800 border-gray-300';\n  }\n\n  function getLessonTypeIcon(type: LessonType): string {\n    const icons: Record<LessonType, string> = {\n      'vocabulary': 'üìö',\n      'grammar': 'üìñ',\n      'conversation': 'üí¨',\n      'reading': 'üìÑ',\n      'listening': 'üîä',\n      'writing': '‚úçÔ∏è',\n      'culture': 'üèõÔ∏è',\n      'mixed': 'üéØ'\n    };\n    return icons[type] || 'üìö';\n  }\n</script>\n\n<!-- Lesson Card Container -->\n<div class=\"lesson-card-container\">\n  <!-- Lesson Card -->\n  <div\n    class=\"lesson-card {isFlipped ? 'flipped' : ''}\"\n    tabindex=\"0\"\n    onkeydown={e => e.key === 'Enter' || e.key === ' ' ? toggleFlip() : null}\n    aria-label={`Lesson: ${lesson.title}`}\n    role=\"button\"\n  >\n    <!-- Front Side -->\n    <div class=\"lesson-card-front\">\n      <div class=\"lesson-header\">\n        <div class=\"lesson-badge {getDifficultyColor(lesson.difficulty)}\">\n          {lesson.difficulty} ‚Ä¢ {lesson.duration} min\n        </div>\n        <div class=\"lesson-type-icon\" aria-label={`Lesson type: ${lesson.type}`}>\n          {getLessonTypeIcon(lesson.type)}\n        </div>\n      </div>\n\n      <h3 class=\"lesson-title\">{lesson.title}</h3>\n\n      <p class=\"lesson-description\">\n        {lesson.description}\n      </p>\n\n      <div class=\"lesson-progress\">\n        <div class=\"progress-bar-container\">\n          <div\n            class=\"progress-bar\"\n            style={`width: ${completionPercentage}%`}\n            role=\"progressbar\"\n            aria-valuenow={completionPercentage}\n            aria-valuemin=\"0\"\n            aria-valuemax=\"100\"\n          ></div>\n        </div>\n        <span class=\"progress-text\">{completionPercentage}% complete</span>\n      </div>\n\n      <div class=\"lesson-vocabulary-preview\">\n        <div class=\"vocabulary-tags\">\n          {#if showAllVocabulary}\n            {#each vocabularyItems.slice(0, 5) as vocab}\n              <span class=\"vocabulary-tag\" title={vocab.german}>\n                {vocab.german}\n              </span>\n            {/each}\n            {#if vocabularyItems.length > 5}\n              <span class=\"vocabulary-tag more\">+{vocabularyItems.length - 5}</span>\n            {/if}\n          {:else}\n            {#each vocabularyItems.slice(0, 3) as vocab}\n              <span class=\"vocabulary-tag\" title={vocab.german}>\n                {vocab.german}\n              </span>\n            {/each}\n            {#if vocabularyItems.length > 3}\n              <button\n                class=\"show-more-button\"\n                onclick={() => showAllVocabulary = true}\n                aria-label={`Show all ${vocabularyItems.length} vocabulary items`}\n              >\n                +{vocabularyItems.length - 3}\n              </button>\n            {/if}\n          {/if}\n        </div>\n      </div>\n\n      <div class=\"lesson-actions\">\n        <button\n          class=\"action-button primary\"\n          onclick={toggleFlip}\n          aria-label=\"View lesson details\"\n        >\n          View Details\n        </button>\n        <button\n          class=\"action-button secondary\"\n          onclick={() => onStart?.()}\n          aria-label=\"Start this lesson\"\n        >\n          ‚ñ∂Ô∏è Start\n        </button>\n      </div>\n    </div>\n\n    <!-- Back Side -->\n    <div class=\"lesson-card-back\">\n      <div class=\"lesson-header\">\n        <button\n          class=\"back-button\"\n          onclick={toggleFlip}\n          aria-label=\"Back to lesson overview\"\n        >\n          ‚Üê Back\n        </button>\n        <div class=\"lesson-badge {getDifficultyColor(lesson.difficulty)}\">\n          {lesson.difficulty} ‚Ä¢ {lesson.duration} min\n        </div>\n      </div>\n\n      <h3 class=\"lesson-title\">{lesson.title}</h3>\n\n      <div class=\"lesson-objectives\">\n        <h4>Learning Objectives</h4>\n        <ul class=\"objectives-list\">\n          {#each lesson.objectives as objective (objective.id)}\n            <li class=\"objective-item\">\n              <label class=\"objective-checkbox\">\n                <input\n                  type=\"checkbox\"\n                  checked={objective.isCompleted}\n                  onchange={() => toggleObjective(objective.id)}\n                />\n                <span class:completed={objective.isCompleted}>\n                  {objective.description}\n                </span>\n              </label>\n            </li>\n          {/each}\n        </ul>\n      </div>\n\n      <div class=\"lesson-vocabulary-details\">\n        <h4>Vocabulary ({vocabularyItems.length})</h4>\n\n        <div class=\"vocabulary-navigation\">\n          <button\n            onclick={prevVocabulary}\n            disabled={currentVocabularyIndex === 0}\n            aria-label=\"Previous vocabulary item\"\n          >\n            ‚óÄÔ∏è\n          </button>\n          <span class=\"vocabulary-counter\">\n            {currentVocabularyIndex + 1} / {vocabularyItems.length}\n          </span>\n          <button\n            onclick={nextVocabulary}\n            disabled={currentVocabularyIndex === vocabularyItems.length - 1}\n            aria-label=\"Next vocabulary item\"\n          >\n            ‚ñ∂Ô∏è\n          </button>\n        </div>\n\n        <div class=\"vocabulary-card\">\n          <div class=\"vocabulary-language german\">\n            {currentVocabulary.german}\n          </div>\n          <div class=\"vocabulary-language bulgarian\">\n            {currentVocabulary.bulgarian}\n          </div>\n          <div class=\"vocabulary-meta\">\n            {#if currentVocabulary?.partOfSpeech}\n              <span class=\"part-of-speech\">\n                {currentVocabulary.partOfSpeech}\n              </span>\n            {/if}\n            {#if currentVocabulary?.difficulty}\n              <span class=\"difficulty-indicator\">\n                {'‚≠ê'.repeat(currentVocabulary.difficulty)}\n              </span>\n            {/if}\n          </div>\n        </div>\n\n        <div class=\"vocabulary-list\">\n          {#each vocabularyItems as vocab, index}\n            <div\n              class=\"vocabulary-list-item {index === currentVocabularyIndex ? 'active' : ''}\"\n              onclick={() => currentVocabularyIndex = index}\n              role=\"button\"\n              tabindex=\"0\"\n              onkeydown={e => e.key === 'Enter' ? currentVocabularyIndex = index : null}\n            >\n              <span class=\"vocab-german\">{vocab?.german || 'Unknown'}</span>\n              <span class=\"vocab-bulgarian\">{vocab?.bulgarian || 'Unknown'}</span>\n            </div>\n          {/each}\n        </div>\n      </div>\n\n      <div class=\"lesson-actions\">\n        <button\n          class=\"action-button primary\"\n          onclick={() => onStart?.()}\n          aria-label=\"Start this lesson\"\n        >\n          Start Lesson\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Styles -->\n<style>\n  .lesson-card-container {\n    perspective: 1000px;\n    width: 100%;\n    max-width: 400px;\n    height: 500px;\n  }\n\n  .lesson-card {\n    width: 100%;\n    height: 100%;\n    position: relative;\n    transform-style: preserve-3d;\n    transition: transform 0.6s;\n    border-radius: 12px;\n    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n    background: white;\n    overflow: hidden;\n  }\n\n  .lesson-card.flipped {\n    transform: rotateY(180deg);\n  }\n\n  .lesson-card-front, .lesson-card-back {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    backface-visibility: hidden;\n    padding: 20px;\n    display: flex;\n    flex-direction: column;\n    overflow-y: auto;\n  }\n\n  .lesson-card-front {\n    z-index: 2;\n  }\n\n  .lesson-card-back {\n    transform: rotateY(180deg);\n    background: #f8fafc;\n  }\n\n  .lesson-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 12px;\n  }\n\n  .lesson-badge {\n    padding: 4px 10px;\n    border-radius: 20px;\n    font-size: 0.75rem;\n    font-weight: 600;\n    border: 1px solid;\n    display: inline-block;\n  }\n\n  .lesson-type-icon {\n    font-size: 1.5rem;\n    width: 36px;\n    height: 36px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 50%;\n    background: rgba(59, 130, 246, 0.1);\n  }\n\n  .lesson-title {\n    font-size: 1.25rem;\n    font-weight: 600;\n    color: #1e293b;\n    margin-bottom: 8px;\n    line-height: 1.5;\n  }\n\n  .lesson-description {\n    color: #64748b;\n    font-size: 0.875rem;\n    line-height: 1.5;\n    margin-bottom: 16px;\n  }\n\n  .lesson-progress {\n    margin-bottom: 16px;\n  }\n\n  .progress-bar-container {\n    height: 6px;\n    background: #e2e8f0;\n    border-radius: 3px;\n    margin-bottom: 6px;\n    overflow: hidden;\n  }\n\n  .progress-bar {\n    height: 100%;\n    background: #3b82f6;\n    border-radius: 3px;\n    transition: width 0.3s ease;\n  }\n\n  .progress-text {\n    font-size: 0.75rem;\n    color: #64748b;\n    font-weight: 500;\n  }\n\n  .lesson-vocabulary-preview {\n    margin-bottom: 16px;\n  }\n\n  .vocabulary-tags {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 6px;\n  }\n\n  .vocabulary-tag {\n    padding: 4px 10px;\n    background: #f1f5f9;\n    border-radius: 20px;\n    font-size: 0.75rem;\n    color: #475569;\n    border: 1px solid #e2e8f0;\n    max-width: 100px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n  .vocabulary-tag.more {\n    background: #e2e8f0;\n  }\n\n  .show-more-button {\n    padding: 4px 8px;\n    background: #f1f5f9;\n    border-radius: 20px;\n    font-size: 0.75rem;\n    color: #475569;\n    border: 1px solid #e2e8f0;\n    cursor: pointer;\n    margin-left: 4px;\n  }\n\n  .lesson-actions {\n    display: flex;\n    gap: 8px;\n    margin-top: auto;\n  }\n\n  .action-button {\n    flex: 1;\n    padding: 10px;\n    border-radius: 8px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    border: none;\n    font-size: 0.875rem;\n  }\n\n  .action-button.primary {\n    background: #3b82f6;\n    color: white;\n  }\n\n  .action-button.primary:hover {\n    background: #2563eb;\n  }\n\n  .action-button.secondary {\n    background: #e2e8f0;\n    color: #475569;\n  }\n\n  .action-button.secondary:hover {\n    background: #cbd5e1;\n  }\n\n  .back-button {\n    padding: 6px 12px;\n    background: #f1f5f9;\n    border-radius: 6px;\n    font-size: 0.875rem;\n    color: #475569;\n    border: 1px solid #e2e8f0;\n    cursor: pointer;\n  }\n\n  .lesson-objectives {\n    margin-bottom: 20px;\n  }\n\n  .lesson-objectives h4 {\n    font-size: 1rem;\n    font-weight: 600;\n    color: #1e293b;\n    margin-bottom: 12px;\n  }\n\n  .objectives-list {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n  }\n\n  .objective-item {\n    margin-bottom: 8px;\n  }\n\n  .objective-checkbox {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    cursor: pointer;\n  }\n\n  .objective-checkbox input {\n    margin: 0;\n  }\n\n  .objective-checkbox span {\n    font-size: 0.875rem;\n    color: #475569;\n  }\n\n  .objective-checkbox span.completed {\n    text-decoration: line-through;\n    color: #94a3b8;\n  }\n\n  .lesson-vocabulary-details h4 {\n    font-size: 1rem;\n    font-weight: 600;\n    color: #1e293b;\n    margin-bottom: 12px;\n  }\n\n  .vocabulary-navigation {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 16px;\n    margin-bottom: 16px;\n  }\n\n  .vocabulary-counter {\n    font-size: 0.875rem;\n    color: #64748b;\n  }\n\n  .vocabulary-navigation button {\n    padding: 6px;\n    background: #f1f5f9;\n    border-radius: 50%;\n    border: 1px solid #e2e8f0;\n    cursor: pointer;\n    width: 32px;\n    height: 32px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .vocabulary-navigation button:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  .vocabulary-card {\n    background: white;\n    border-radius: 12px;\n    padding: 20px;\n    margin-bottom: 16px;\n    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);\n    text-align: center;\n  }\n\n  .vocabulary-language {\n    font-size: 1.5rem;\n    font-weight: 600;\n    margin-bottom: 8px;\n  }\n\n  .vocabulary-language.german {\n    color: #1e293b;\n  }\n\n  .vocabulary-language.bulgarian {\n    color: #3b82f6;\n    font-size: 1.25rem;\n  }\n\n  .vocabulary-meta {\n    display: flex;\n    justify-content: center;\n    gap: 8px;\n    margin-top: 12px;\n  }\n\n  .part-of-speech {\n    padding: 2px 8px;\n    background: #f1f5f9;\n    border-radius: 12px;\n    font-size: 0.75rem;\n    color: #475569;\n  }\n\n  .difficulty-indicator {\n    color: #f59e0b;\n  }\n\n  .vocabulary-list {\n    max-height: 200px;\n    overflow-y: auto;\n    border: 1px solid #e2e8f0;\n    border-radius: 8px;\n  }\n\n  .vocabulary-list-item {\n    padding: 12px 16px;\n    border-bottom: 1px solid #e2e8f0;\n    cursor: pointer;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n\n  .vocabulary-list-item:last-child {\n    border-bottom: none;\n  }\n\n  .vocabulary-list-item.active {\n    background: #f1f5f9;\n  }\n\n  .vocabulary-list-item:hover {\n    background: #f8fafc;\n  }\n\n  .vocab-german {\n    font-weight: 500;\n    color: #1e293b;\n  }\n\n  .vocab-bulgarian {\n    color: #64748b;\n    font-size: 0.875rem;\n  }\n\n  @media (max-width: 640px) {\n    .lesson-card-container {\n      height: 480px;\n    }\n\n    .lesson-title {\n      font-size: 1.125rem;\n    }\n  }\n</style>","<script>\n  /**\n   * GeneratedLesson Component\n   *\n   * Displays a dynamically generated lesson with all its sections and content.\n   * Supports different section types (introduction, vocabulary, grammar, exercise, cultural, summary)\n   * and provides a rich, interactive learning experience with bilingual support.\n   */\n\n  import { t } from '$lib/services/localization';\n  import { appState } from '$lib/state/app-state';\n\n  // Language adapter functions\n  function getSourceText(item) {\n    return appState.languageMode === 'DE_BG' ? item.german : item.bulgarian;\n  }\n\n  function getTargetText(item) {\n    return appState.languageMode === 'DE_BG' ? item.bulgarian : item.german;\n  }\n\n  function correctPartOfSpeech(pos) {\n    const parts = {\n      'noun': 'Noun', 'verb': 'Verb', 'adjective': 'Adjective',\n      'adverb': 'Adverb', 'preposition': 'Preposition', 'conjunction': 'Conjunction'\n    };\n    return parts[pos] || pos;\n  }\n\n  // Props\n  let { lesson } = $props();\n\n  // Error state\n  let hasError = $state(false);\n  let errorMessage = $state(null);\n\n  // Simple error handler\n  function handleError(error, context) {\n    console.error(`[${context}]`, error);\n  }\n\n  // State\n  let currentSectionIndex = $state(0);\n  let showAllVocabulary = $state(false);\n  let showAllObjectives = $state(false);\n  let showSectionDetails = $state({});\n\n  // Initialize with error handling\n  $effect(() => {\n    try {\n      // Validate lesson data on initialization\n      if (!lesson) {\n        throw new Error('Lesson data is required');\n      }\n    } catch (err) {\n      handleError(err, 'Failed to initialize GeneratedLesson component');\n      hasError = true;\n      errorMessage = err instanceof Error ? err.message : 'Invalid lesson data';\n    }\n  });\n\n  // Computed\n  // Derived state with error handling\n  let sections = $derived.by(() => {\n    try {\n      if (!lesson.sections || lesson.sections.length === 0) {\n        return [{\n          id: 'default-section',\n          title: 'Lesson Content',\n          content: lesson.content || 'No content available',\n          type: 'summary',\n          metadata: {}\n        }];\n      }\n      return lesson.sections;\n    } catch (err) {\n      handleError(err, 'Failed to derive lesson sections');\n      hasError = true;\n      errorMessage = 'Failed to load lesson sections';\n      return [{\n        id: 'error-section',\n        title: 'Error',\n        content: 'Failed to load lesson content',\n        type: 'summary',\n        metadata: {}\n      }];\n    }\n  });\n\n  // Current section with error handling\n  let currentSection = $derived.by(() => {\n    try {\n      return sections[currentSectionIndex] || null;\n    } catch (err) {\n      handleError(err, 'Failed to get current section');\n      hasError = true;\n      errorMessage = 'Failed to load section content';\n      return null;\n    }\n  });\n  // Completion percentage with error handling\n  let completionPercentage = $derived.by(() => {\n    try {\n      if (!lesson.objectives || lesson.objectives.length === 0) return 0;\n      return Math.round((lesson.objectives.filter((obj) => obj.isCompleted).length / lesson.objectives.length) * 100);\n    } catch (err) {\n      handleError(err, 'Failed to calculate completion percentage');\n      hasError = true;\n      errorMessage = 'Failed to calculate progress';\n      return 0;\n    }\n  });\n  // Vocabulary items with error handling\n  let vocabularyItems = $derived.by(() => {\n    try {\n      return lesson.vocabulary || [];\n    } catch (err) {\n      handleError(err, 'Failed to load vocabulary items');\n      hasError = true;\n      errorMessage = 'Failed to load vocabulary';\n      return [];\n    }\n  });\n  // Derived boolean states with error handling\n  let hasVocabulary = $derived.by(() => {\n    try {\n      return vocabularyItems.length > 0;\n    } catch (err) {\n      handleError(err, 'Failed to check vocabulary availability');\n      return false;\n    }\n  });\n\n  let hasObjectives = $derived.by(() => {\n    try {\n      return lesson.objectives && lesson.objectives.length > 0;\n    } catch (err) {\n      handleError(err, 'Failed to check objectives availability');\n      return false;\n    }\n  });\n\n  let hasSections = $derived.by(() => {\n    try {\n      return sections.length > 0;\n    } catch (err) {\n      handleError(err, 'Failed to check sections availability');\n      return false;\n    }\n  });\n\n  let isFallbackLesson = $derived.by(() => {\n    try {\n      return lesson.metadata?.fallback === true;\n    } catch (err) {\n      handleError(err, 'Failed to check fallback status');\n      return false;\n    }\n  });\n\n  // Methods\n  /**\n   * Toggle objective completion status with error handling\n   */\n  function toggleObjective(objectiveId) {\n    try {\n      if (!lesson.objectives) {\n        throw new Error('Lesson objectives are not available');\n      }\n\n      lesson.objectives = lesson.objectives.map((obj) =>\n        obj.id === objectiveId ? { ...obj, isCompleted: !obj.isCompleted } : obj\n      );\n      lesson.updatedAt = new Date();\n    } catch (err) {\n      handleError(err, 'Failed to toggle objective');\n      hasError = true;\n      errorMessage = 'Failed to update objective status';\n    }\n  }\n\n  /**\n   * Navigate to next section with error handling\n   */\n  function nextSection() {\n    try {\n      if (currentSectionIndex < sections.length - 1) {\n        currentSectionIndex++;\n      }\n    } catch (err) {\n      handleError(err, 'Failed to navigate to next section');\n      hasError = true;\n      errorMessage = 'Failed to navigate sections';\n    }\n  }\n\n  /**\n   * Navigate to previous section with error handling\n   */\n  function prevSection() {\n    try {\n      if (currentSectionIndex > 0) {\n        currentSectionIndex--;\n      }\n    } catch (err) {\n      handleError(err, 'Failed to navigate to previous section');\n      hasError = true;\n      errorMessage = 'Failed to navigate sections';\n    }\n  }\n\n  /**\n   * Toggle section details visibility with error handling\n   */\n  function toggleSectionDetails(sectionId) {\n    try {\n      showSectionDetails[sectionId] = !showSectionDetails[sectionId];\n    } catch (err) {\n      handleError(err, 'Failed to toggle section details');\n      hasError = true;\n      errorMessage = 'Failed to toggle section details';\n    }\n  }\n\n  function getSectionIcon(type) {\n    const icons = {\n      'introduction': 'üìò',\n      'vocabulary': 'üìö',\n      'grammar': 'üìñ',\n      'exercise': '‚úèÔ∏è',\n      'cultural': 'üèõÔ∏è',\n      'summary': 'üìù',\n      'conversation': 'üí¨',\n      'reading': 'üìÑ',\n      'listening': 'üîä',\n      'writing': '‚úçÔ∏è'\n    };\n    return icons[type] || 'üìñ';\n  }\n\n  function getDifficultyColor(difficulty) {\n    const colors = {\n      'A1': 'bg-green-100 text-green-800 border-green-300',\n      'A2': 'bg-green-200 text-green-900 border-green-400',\n      'B1': 'bg-blue-100 text-blue-800 border-blue-300',\n      'B2': 'bg-blue-200 text-blue-900 border-blue-400',\n      'C1': 'bg-purple-100 text-purple-800 border-purple-300'\n    };\n    return colors[difficulty] || 'bg-gray-100 text-gray-800 border-gray-300';\n  }\n\n  function getLessonTypeIcon(type) {\n    const icons = {\n      'vocabulary': 'üìö',\n      'grammar': 'üìñ',\n      'conversation': 'üí¨',\n      'reading': 'üìÑ',\n      'listening': 'üîä',\n      'writing': '‚úçÔ∏è',\n      'culture': 'üèõÔ∏è',\n      'mixed': 'üéØ',\n      'contextual': 'üåç'\n    };\n    return icons[type] || 'üìö';\n  }\n\n  function getSectionTypeName(type) {\n    // Reactive section names\n    $: names = {\n      'introduction': t('sections.introduction') || 'Introduction',\n      'vocabulary': t('sections.vocabulary') || 'Vocabulary',\n      'grammar': t('sections.grammar') || 'Grammar',\n      'exercise': t('sections.exercise') || 'Exercise',\n      'cultural': t('sections.cultural_note') || 'Cultural Note',\n      'summary': t('sections.summary') || 'Summary',\n      'conversation': t('sections.conversation') || 'Conversation',\n      'reading': t('sections.reading') || 'Reading',\n      'listening': t('sections.listening') || 'Listening',\n      'writing': t('sections.writing') || 'Writing'\n    };\n    return names[type] || type;\n  }\n\n  function renderSectionContent(content) {\n    // Simple markdown-like rendering for basic formatting\n    return content\n      .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\n      .replace(/\\*(.*?)\\*/g, '<em>$1</em>')\n      .replace(/`(.*?)`/g, '<code>$1</code>')\n      .replace(/\\n/g, '<br>');\n  }\n\n  function getVocabularyPreview(count) {\n    if (vocabularyItems.length === 0) return '';\n\n    const previewItems = vocabularyItems.slice(0, count);\n    // Show only the source language based on current direction\n    return previewItems.map((item) => getSourceText(item)).join(', ');\n  }\n</script>\n\n<div class=\"generated-lesson-container\">\n  {#if hasError}\n    <div class=\"error-message\">\n      <div class=\"error-icon\">‚ö†Ô∏è</div>\n      <h3>{t('errors.lesson_load_error')}</h3>\n      <p>{errorMessage || t('errors.unknown_error')}</p>\n      <button class=\"btn btn-secondary\" onclick={() => window.location.reload()}>\n        {t('common.reload_page')}\n      </button>\n    </div>\n  {:else if isFallbackLesson}\n    <div class=\"fallback-lesson-message\">\n      <div class=\"fallback-icon\">‚ö†Ô∏è</div>\n      <h3>{t('lesson.unavailable')}</h3>\n      <p>{lesson.description}</p>\n      <button class=\"btn btn-secondary\" onclick={() => window.location.reload()}>\n        {t('common.try_again')}\n      </button>\n    </div>\n  {:else}\n    <div class=\"lesson-header\">\n      <div class=\"lesson-title-section\">\n        <div class=\"lesson-type-icon\" aria-label={`Lesson type: ${lesson.type}`}>\n          {getLessonTypeIcon(lesson.type)}\n        </div>\n        <h1 class=\"lesson-title\">{lesson.title}</h1>\n      </div>\n\n      <div class=\"lesson-meta\">\n        <div class=\"lesson-badge {getDifficultyColor(lesson.difficulty)}\">\n          {lesson.difficulty} ‚Ä¢ {lesson.duration} {t('common.minutes')}\n        </div>\n        {#if lesson.metadata?.tags && lesson.metadata.tags.length > 0}\n          <div class=\"lesson-tags\">\n            {#each lesson.metadata.tags.slice(0, 3) as tag}\n              <span class=\"lesson-tag\">{tag}</span>\n            {/each}\n            {#if lesson.metadata.tags.length > 3}\n              <span class=\"lesson-tag more\">+{lesson.metadata.tags.length - 3}</span>\n            {/if}\n          </div>\n        {/if}\n      </div>\n    </div>\n\n    <div class=\"lesson-description\">\n      {lesson.description}\n    </div>\n\n    <div class=\"lesson-progress-container\">\n      <div class=\"progress-bar-container\">\n        <div\n          class=\"progress-bar\"\n          style={`width: ${completionPercentage}%`}\n          role=\"progressbar\"\n          aria-valuenow={completionPercentage}\n          aria-valuemin=\"0\"\n          aria-valuemax=\"100\"\n        ></div>\n      </div>\n      <span class=\"progress-text\">{completionPercentage}% complete</span>\n    </div>\n\n    {#if hasObjectives}\n      <div class=\"lesson-objectives\">\n        <div class=\"objectives-header\">\n          <h3>{t('sections.learning_objectives')}</h3>\n          <button\n            class=\"toggle-objectives\"\n            onclick={() => showAllObjectives = !showAllObjectives}\n          >\n            {showAllObjectives ? t('common.show_less') : t('common.show_all')}\n          </button>\n        </div>\n\n        <ul class=\"objectives-list\">\n          {#each (showAllObjectives ? lesson.objectives : lesson.objectives.slice(0, 3)) as objective (objective.id)}\n            <li class=\"objective-item\">\n              <label class=\"objective-checkbox\">\n                <input\n                  type=\"checkbox\"\n                  checked={objective.isCompleted}\n                  onchange={() => toggleObjective(objective.id)}\n                />\n                <span class:completed={objective.isCompleted}>\n                  {objective.description}\n                </span>\n              </label>\n            </li>\n          {/each}\n          {#if lesson.objectives.length > 3 && !showAllObjectives}\n            <li class=\"objective-item more-objectives\">\n              <button onclick={() => showAllObjectives = true}>\n                +{lesson.objectives.length - 3} {t('common.more_objectives')}\n              </button>\n            </li>\n          {/if}\n        </ul>\n      </div>\n    {/if}\n\n    {#if hasVocabulary}\n      <div class=\"lesson-vocabulary\">\n        <div class=\"vocabulary-header\">\n          <h3>{t('sections.vocabulary')} ({vocabularyItems.length})</h3>\n          <button\n            class=\"toggle-vocabulary\"\n            onclick={() => showAllVocabulary = !showAllVocabulary}\n          >\n            {showAllVocabulary ? t('common.show_less') : t('common.show_all')}\n          </button>\n        </div>\n\n        <div class=\"vocabulary-preview\">\n          {getVocabularyPreview(showAllVocabulary ? vocabularyItems.length : 5)}\n          {#if vocabularyItems.length > 5 && !showAllVocabulary}\n            <span class=\"more-vocabulary\">+{vocabularyItems.length - 5} {t('common.more_words')}</span>\n          {/if}\n        </div>\n\n        {#if showAllVocabulary}\n          <div class=\"vocabulary-list\">\n            {#each vocabularyItems as vocab (vocab.german)}\n              <div class=\"vocabulary-item\">\n                <!-- Show source language prominently -->\n                <div class=\"vocabulary-source\">\n                  {getSourceText(vocab)}\n                </div>\n                <!-- Show target language on hover/click or as secondary info -->\n                <div class=\"vocabulary-target\">\n                  {getTargetText(vocab)}\n                </div>\n                {#if vocab.partOfSpeech}\n                  <div class=\"vocabulary-part-of-speech\">\n                    {correctPartOfSpeech(vocab.partOfSpeech)}\n                  </div>\n                {/if}\n                {#if vocab.difficulty}\n                  <div class=\"vocabulary-difficulty\">\n                    {'‚≠ê'.repeat(Math.round(vocab.difficulty))}\n                  </div>\n                {/if}\n              </div>\n            {/each}\n          </div>\n        {/if}\n      </div>\n    {/if}\n\n    {#if hasSections}\n      <div class=\"lesson-sections\">\n        <div class=\"sections-navigation\">\n          <button\n            onclick={prevSection}\n            disabled={currentSectionIndex === 0}\n            aria-label={t('common.previous_section')}\n          >\n            ‚óÄÔ∏è {t('common.previous')}\n          </button>\n\n          <div class=\"section-indicator\">\n            {t('common.section')} {currentSectionIndex + 1} {t('common.of')} {sections.length}\n          </div>\n\n          <button\n            onclick={nextSection}\n            disabled={currentSectionIndex === sections.length - 1}\n            aria-label={t('common.next_section')}\n          >\n            {t('common.next')} ‚ñ∂Ô∏è\n          </button>\n        </div>\n\n        <div class=\"section-content\">\n          <div class=\"section-header\">\n            <div class=\"section-icon\">\n              {getSectionIcon(currentSection.type)}\n            </div>\n            <h2 class=\"section-title\">\n              {currentSection.title}\n            </h2>\n            <div class=\"section-type\">\n              {getSectionTypeName(currentSection.type)}\n            </div>\n          </div>\n\n          <div class=\"section-body\">\n            <div class=\"section-content-text\" innerHTML={renderSectionContent(currentSection.content)}></div>\n\n            {#if currentSection.metadata?.templateId}\n              <div class=\"section-meta\">\n                <span class=\"template-id\">\n                  Template: {currentSection.metadata.templateId}\n                </span>\n              </div>\n            {/if}\n          </div>\n        </div>\n\n        <div class=\"sections-overview\">\n          <h3>Lesson Sections</h3>\n          <div class=\"sections-list\">\n            {#each sections as section, index (section.id)}\n              <div\n                class=\"section-overview-item {index === currentSectionIndex ? 'active' : ''}\"\n                onclick={() => currentSectionIndex = index}\n                role=\"button\"\n                tabindex=\"0\"\n                onkeydown={e => e.key === 'Enter' || e.key === ' ' ? currentSectionIndex = index : null}\n              >\n                <div class=\"section-overview-icon\">\n                  {getSectionIcon(section.type)}\n                </div>\n                <div class=\"section-overview-title\">\n                  {section.title}\n                </div>\n                <div class=\"section-overview-type\">\n                  {getSectionTypeName(section.type)}\n                </div>\n              </div>\n            {/each}\n          </div>\n        </div>\n      </div>\n    {:else}\n      <div class=\"no-sections-message\">\n        {t('lesson.no_sections')}\n      </div>\n    {/if}\n\n    <div class=\"lesson-actions\">\n      <button class=\"btn btn-secondary\" onclick={() => window.history.back()}>\n        {t('common.back_to_lessons')}\n      </button>\n      <button class=\"btn btn-primary\" onclick={() => alert(t('lesson.start_alert'))}>\n        {t('common.start_lesson')}\n      </button>\n    </div>\n  {/if}\n</div>\n\n<style>\n  .generated-lesson-container {\n    max-width: 800px;\n    margin: 0 auto;\n    padding: 2rem;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n  }\n\n  .fallback-lesson-message {\n    text-align: center;\n    padding: 2rem;\n    background: #fef2f2;\n    border-radius: 12px;\n    margin: 2rem 0;\n  }\n\n  .fallback-icon {\n    font-size: 3rem;\n    margin-bottom: 1rem;\n  }\n\n  .lesson-header {\n    margin-bottom: 1.5rem;\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n  }\n\n  .lesson-title-section {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n  }\n\n  .lesson-type-icon {\n    font-size: 2rem;\n    width: 50px;\n    height: 50px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 50%;\n    background: rgba(59, 130, 246, 0.1);\n  }\n\n  .lesson-title {\n    font-size: 2rem;\n    font-weight: 700;\n    color: #1e293b;\n    margin: 0;\n  }\n\n  .lesson-meta {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 0.5rem;\n    align-items: center;\n  }\n\n  .lesson-badge {\n    padding: 0.25rem 0.75rem;\n    border-radius: 20px;\n    font-size: 0.875rem;\n    font-weight: 600;\n    border: 1px solid;\n    display: inline-block;\n  }\n\n  .lesson-tags {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 0.5rem;\n  }\n\n  .lesson-tag {\n    padding: 0.25rem 0.75rem;\n    background: #f1f5f9;\n    border-radius: 20px;\n    font-size: 0.75rem;\n    color: #475569;\n    border: 1px solid #e2e8f0;\n  }\n\n  .lesson-tag.more {\n    background: #e2e8f0;\n  }\n\n  .lesson-description {\n    color: #64748b;\n    font-size: 1rem;\n    line-height: 1.6;\n    margin-bottom: 1.5rem;\n  }\n\n  .lesson-progress-container {\n    margin-bottom: 2rem;\n  }\n\n  .progress-text {\n    display: block;\n    text-align: right;\n    font-size: 0.875rem;\n    color: #64748b;\n    margin-top: 0.5rem;\n  }\n\n  .lesson-objectives {\n    background: #f8fafc;\n    border-radius: 12px;\n    padding: 1.5rem;\n    margin-bottom: 2rem;\n  }\n\n  .objectives-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1rem;\n  }\n\n  .objectives-header h3 {\n    font-size: 1.25rem;\n    font-weight: 600;\n    color: #1e293b;\n    margin: 0;\n  }\n\n  .toggle-objectives {\n    background: none;\n    border: none;\n    color: #3b82f6;\n    cursor: pointer;\n    font-size: 0.875rem;\n    text-decoration: underline;\n  }\n\n  .objectives-list {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n  }\n\n  .objective-item {\n    margin-bottom: 0.75rem;\n    padding: 0.5rem 0;\n  }\n\n  .objective-item:last-child {\n    margin-bottom: 0;\n  }\n\n  .objective-checkbox {\n    display: flex;\n    align-items: center;\n    gap: 0.75rem;\n    cursor: pointer;\n  }\n\n  .objective-checkbox input {\n    margin: 0;\n  }\n\n  .objective-checkbox span {\n    font-size: 0.95rem;\n    color: #475569;\n  }\n\n  .objective-checkbox span.completed {\n    text-decoration: line-through;\n    color: #94a3b8;\n  }\n\n  .more-objectives {\n    color: #3b82f6;\n    font-size: 0.875rem;\n  }\n\n  .more-objectives button {\n    background: none;\n    border: none;\n    color: #3b82f6;\n    cursor: pointer;\n    text-decoration: underline;\n    padding: 0;\n  }\n\n  .lesson-vocabulary {\n    background: #f8fafc;\n    border-radius: 12px;\n    padding: 1.5rem;\n    margin-bottom: 2rem;\n  }\n\n  .vocabulary-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1rem;\n  }\n\n  .vocabulary-header h3 {\n    font-size: 1.25rem;\n    font-weight: 600;\n    color: #1e293b;\n    margin: 0;\n  }\n\n  .toggle-vocabulary {\n    background: none;\n    border: none;\n    color: #3b82f6;\n    cursor: pointer;\n    font-size: 0.875rem;\n    text-decoration: underline;\n  }\n\n  .vocabulary-preview {\n    font-size: 0.95rem;\n    color: #475569;\n    line-height: 1.5;\n  }\n\n  .more-vocabulary {\n    color: #3b82f6;\n    font-size: 0.875rem;\n  }\n\n  .vocabulary-list {\n    margin-top: 1rem;\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n    gap: 1rem;\n  }\n\n  .vocabulary-item {\n    background: white;\n    border-radius: 8px;\n    padding: 1rem;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  }\n\n  .vocabulary-source {\n    font-weight: 600;\n    color: #1e293b;\n    margin-bottom: 0.5rem;\n    font-size: 1.1rem;\n  }\n\n  .vocabulary-target {\n    color: #3b82f6;\n    margin-bottom: 0.5rem;\n    opacity: 0.8;\n    font-size: 0.95rem;\n  }\n\n  .vocabulary-part-of-speech {\n    font-size: 0.75rem;\n    color: #64748b;\n    background: #f1f5f9;\n    padding: 0.25rem 0.5rem;\n    border-radius: 4px;\n    display: inline-block;\n    margin-right: 0.5rem;\n  }\n\n  .vocabulary-difficulty {\n    font-size: 0.75rem;\n    color: #f59e0b;\n  }\n\n  .lesson-sections {\n    margin-bottom: 2rem;\n  }\n\n  .sections-navigation {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1.5rem;\n  }\n\n  .sections-navigation button {\n    padding: 0.5rem 1rem;\n    background: #f1f5f9;\n    border: 1px solid #e2e8f0;\n    border-radius: 6px;\n    cursor: pointer;\n    font-size: 0.875rem;\n  }\n\n  .sections-navigation button:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  .section-indicator {\n    font-size: 0.875rem;\n    color: #64748b;\n  }\n\n  .section-content {\n    background: white;\n    border-radius: 12px;\n    padding: 2rem;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  }\n\n  .section-header {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n    margin-bottom: 1.5rem;\n    border-bottom: 1px solid #e2e8f0;\n    padding-bottom: 1rem;\n  }\n\n  .section-icon {\n    font-size: 1.5rem;\n  }\n\n  .section-title {\n    font-size: 1.5rem;\n    font-weight: 600;\n    color: #1e293b;\n    margin: 0;\n    flex: 1;\n  }\n\n  .section-type {\n    padding: 0.25rem 0.75rem;\n    background: #f1f5f9;\n    border-radius: 20px;\n    font-size: 0.75rem;\n    color: #475569;\n  }\n\n  .section-body {\n    line-height: 1.7;\n  }\n\n  .section-content-text {\n    font-size: 1rem;\n    color: #334155;\n  }\n\n  .section-content-text :global(strong) {\n    font-weight: 600;\n    color: #1e293b;\n  }\n\n  .section-content-text :global(em) {\n    font-style: italic;\n  }\n\n  .section-content-text :global(code) {\n    background: #f1f5f9;\n    padding: 0.1rem 0.3rem;\n    border-radius: 4px;\n    font-family: monospace;\n  }\n\n  .section-meta {\n    margin-top: 1rem;\n    font-size: 0.75rem;\n    color: #94a3b8;\n  }\n\n  .sections-overview {\n    margin-top: 2rem;\n  }\n\n  .sections-overview h3 {\n    font-size: 1.25rem;\n    font-weight: 600;\n    color: #1e293b;\n    margin-bottom: 1rem;\n  }\n\n  .sections-list {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n    gap: 1rem;\n  }\n\n  .section-overview-item {\n    background: #f8fafc;\n    border-radius: 8px;\n    padding: 1rem;\n    cursor: pointer;\n    transition: background 0.2s ease;\n  }\n\n  .section-overview-item:hover {\n    background: #f1f5f9;\n  }\n\n  .section-overview-item.active {\n    background: #e2e8f0;\n    border-left: 3px solid #3b82f6;\n  }\n\n  .section-overview-icon {\n    font-size: 1.25rem;\n    margin-bottom: 0.5rem;\n  }\n\n  .section-overview-title {\n    font-weight: 500;\n    color: #1e293b;\n    margin-bottom: 0.25rem;\n  }\n\n  .section-overview-type {\n    font-size: 0.75rem;\n    color: #64748b;\n  }\n\n  .no-sections-message {\n    text-align: center;\n    padding: 2rem;\n    color: #64748b;\n    font-size: 1rem;\n  }\n\n  .lesson-actions {\n    display: flex;\n    justify-content: flex-end;\n    gap: 1rem;\n    margin-top: 2rem;\n  }\n\n  @media (max-width: 768px) {\n    .generated-lesson-container {\n      padding: 1rem;\n    }\n\n    .lesson-title {\n      font-size: 1.5rem;\n    }\n\n    .sections-list {\n      grid-template-columns: 1fr;\n    }\n\n    .vocabulary-list {\n      grid-template-columns: 1fr;\n    }\n\n    .lesson-actions {\n      flex-direction: column;\n    }\n  }\n</style>","/**\n * Lesson Service for Bulgarian-German Language Learning Application\n *\n * This service provides comprehensive business logic for creating, managing, and delivering\n * curriculum-based lessons with robust vocabulary integration, error handling, and performance optimization.\n */\n\nimport { LessonSchema } from '../schemas/lesson';\nimport type { Lesson, LearningObjective, LessonDifficulty, LessonType } from '../schemas/lesson';\nimport type { VocabularyItem, VocabularyCategory, PartOfSpeech } from '../schemas/vocabulary';\nimport { vocabularyDb as db } from '../data/db.svelte.js';\n\n/**\n * Lesson Service Class\n */\nexport class LessonService {\n  private lessons: Lesson[] = [];\n  private vocabularyData: VocabularyItem[] = [];\n  private initialized = false;\n\n  constructor() {\n    // Initialize will be called explicitly to prevent SSR issues\n  }\n\n  /**\n   * Initialize the lesson service with vocabulary data\n   */\n  async initialize() {\n    if (this.initialized) return;\n\n    try {\n      await db.initialize();\n      const vocabData = await db.getVocabulary();\n      this.vocabularyData = vocabData;\n      this.initialized = true;\n    } catch (_error) {\n      // Failed to initialize LessonService\n      this.vocabularyData = [];\n      this.initialized = false;\n      throw _error;\n    }\n  }\n\n  /**\n   * Check if service is initialized\n   */\n  isInitialized(): boolean {\n    return this.initialized;\n  }\n\n  /**\n   * Generate a lesson from specific vocabulary items\n   */\n  generateLessonFromVocabulary(\n    vocabularyItems: VocabularyItem[],\n    options: {\n      title?: string;\n      difficulty?: LessonDifficulty;\n      type?: LessonType;\n      description?: string;\n    } = {}\n  ): Lesson {\n    // Validate input\n    if (!vocabularyItems || vocabularyItems.length === 0) {\n      return this.createFallbackLesson('No vocabulary items provided');\n    }\n\n    const { title, difficulty, type = 'vocabulary', description } = options;\n\n    // Determine lesson title\n    const lessonTitle = title || this.generateLessonTitle(vocabularyItems, type);\n\n    // Determine difficulty if not provided\n    const lessonDifficulty = difficulty || this.determineLessonDifficulty(vocabularyItems);\n\n    // Create learning objectives\n    const objectives = this.createLearningObjectives(vocabularyItems, lessonDifficulty, type);\n\n    // Create the lesson\n    const lesson: Lesson = {\n      id: crypto.randomUUID(),\n      title: lessonTitle,\n      description: description || this.generateLessonDescription(vocabularyItems, lessonDifficulty, type),\n      difficulty: lessonDifficulty,\n      type,\n      duration: this.calculateLessonDuration(vocabularyItems.length),\n      vocabulary: vocabularyItems.map(item => ({\n        id: item.id,\n        german: item.german,\n        bulgarian: item.bulgarian,\n        partOfSpeech: item.partOfSpeech,\n        difficulty: item.difficulty,\n        categories: item.categories\n      })),\n      objectives,\n      isCompleted: false,\n      completionPercentage: 0,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      metadata: {\n        tags: this.generateLessonTags(vocabularyItems, lessonDifficulty, type),\n        prerequisites: [],\n        relatedLessons: [],\n        isPremium: false\n      }\n    };\n\n    // Validate the lesson\n    return this.validateLesson(lesson);\n  }\n\n  /**\n   * Generate a lesson from criteria (difficulty, type, theme, etc.)\n   */\n  async generateLessonFromCriteria(\n    criteria: {\n      difficulty?: LessonDifficulty;\n      type?: LessonType;\n      categories?: VocabularyCategory[];\n      partOfSpeech?: PartOfSpeech;\n      limit?: number;\n      title?: string;\n      description?: string;\n    } = {}\n  ): Promise<Lesson> {\n    try {\n      // Ensure service is initialized\n      if (!this.initialized) {\n        await this.initialize();\n      }\n\n      // Query vocabulary based on criteria\n      const vocabularyItems = this.queryVocabulary(criteria);\n\n      // Apply limit if specified\n      const limitedItems = criteria.limit\n        ? vocabularyItems.slice(0, criteria.limit)\n        : vocabularyItems;\n\n      // Generate lesson\n      return this.generateLessonFromVocabulary(limitedItems, {\n        title: criteria.title,\n        difficulty: criteria.difficulty,\n        type: criteria.type,\n        description: criteria.description\n      });\n\n    } catch (_error) {\n      // Failed to generate lesson from criteria\n      return this.createFallbackLesson('Failed to generate lesson from criteria');\n    }\n  }\n\n  /**\n   * Query vocabulary based on criteria\n   */\n  private queryVocabulary(criteria: {\n    difficulty?: LessonDifficulty;\n    categories?: VocabularyCategory[];\n    partOfSpeech?: PartOfSpeech;\n    limit?: number;\n  }): VocabularyItem[] {\n    if (this.vocabularyData.length === 0) {\n      // No vocabulary data available\n      return [];\n    }\n\n    // Convert difficulty level to numeric range if provided\n    const difficultyRange = criteria.difficulty\n      ? this.getDifficultyRange(criteria.difficulty)\n      : null;\n\n    return this.vocabularyData.filter(item => {\n      // Filter by difficulty\n      const difficultyMatch = difficultyRange\n        ? item.difficulty >= difficultyRange.min && item.difficulty <= difficultyRange.max\n        : true;\n\n      // Filter by categories\n      const categoryMatch = criteria.categories && criteria.categories.length > 0\n        ? item.categories.some(category => criteria.categories?.includes(category))\n        : true;\n\n      // Filter by part of speech\n      const partOfSpeechMatch = criteria.partOfSpeech\n        ? item.partOfSpeech === criteria.partOfSpeech\n        : true;\n\n      return difficultyMatch && categoryMatch && partOfSpeechMatch;\n    });\n  }\n\n  /**\n   * Get numeric difficulty range for a CEFR level\n   */\n  private getDifficultyRange(difficulty: LessonDifficulty): { min: number; max: number } {\n    const ranges: Record<LessonDifficulty, { min: number; max: number }> = {\n      'A1': { min: 1, max: 1.5 },\n      'A2': { min: 1.5, max: 2.5 },\n      'B1': { min: 2.5, max: 3.5 },\n      'B2': { min: 3.5, max: 4.5 },\n      'C1': { min: 4.5, max: 5 }\n    };\n    return ranges[difficulty];\n  }\n\n  /**\n   * Generate a lesson title based on vocabulary content\n   */\n  private generateLessonTitle(vocabularyItems: VocabularyItem[], type: LessonType): string {\n    if (vocabularyItems.length === 0) return 'New Lesson';\n\n    // Extract unique categories\n    const categories = new Set<VocabularyCategory>();\n    vocabularyItems.forEach(item => {\n      item.categories.forEach(category => categories.add(category));\n    });\n\n    // Determine lesson type name\n    const typeNames: Record<LessonType, string> = {\n      'vocabulary': 'Vocabulary',\n      'grammar': 'Grammar',\n      'conversation': 'Conversation',\n      'reading': 'Reading',\n      'listening': 'Listening',\n      'writing': 'Writing',\n      'culture': 'Culture',\n      'mixed': 'Mixed Topics'\n    };\n\n    const typeName = typeNames[type] || 'Lesson';\n\n    // If single category, use it in the title\n    if (categories.size === 1) {\n      const category = categories.values().next().value;\n      return `${typeName}: ${this.getCategoryDisplayName(category)}`;\n    }\n\n    // If multiple categories, use a generic title\n    return `${typeName} Lesson (${vocabularyItems.length} items)`;\n  }\n\n  /**\n   * Generate a lesson description\n   */\n  private generateLessonDescription(\n    vocabularyItems: VocabularyItem[],\n    difficulty: LessonDifficulty,\n    type: LessonType\n  ): string {\n    const typeDescriptions: Record<LessonType, string> = {\n      'vocabulary': 'vocabulary building',\n      'grammar': 'grammar concepts',\n      'conversation': 'conversation practice',\n      'reading': 'reading comprehension',\n      'listening': 'listening skills',\n      'writing': 'writing practice',\n      'culture': 'cultural insights',\n      'mixed': 'various language skills'\n    };\n\n    const partsOfSpeech = new Set<PartOfSpeech>();\n    vocabularyItems.forEach(item => partsOfSpeech.add(item.partOfSpeech));\n\n    const partOfSpeechList = Array.from(partsOfSpeech)\n      .map(pos => this.getPartOfSpeechDisplayName(pos))\n      .join(', ');\n\n    return `This ${difficulty} level lesson focuses on ${typeDescriptions[type]} with ${vocabularyItems.length} vocabulary items covering ${partOfSpeechList}.`;\n  }\n\n  /**\n   * Calculate lesson duration based on number of vocabulary items\n   */\n  private calculateLessonDuration(itemCount: number): number {\n    // Base duration: 2 minutes per item\n    const baseDuration = itemCount * 2;\n\n    // Add buffer time for lessons with many items\n    if (itemCount > 15) {\n      return Math.min(baseDuration + 10, 120); // Max 120 minutes\n    } else if (itemCount > 10) {\n      return baseDuration + 5;\n    } else {\n      return Math.max(baseDuration, 15); // Minimum 15 minutes\n    }\n  }\n\n  /**\n   * Create learning objectives for a lesson\n   */\n  private createLearningObjectives(\n    vocabularyItems: VocabularyItem[],\n    difficulty: LessonDifficulty,\n    type: LessonType\n  ): LearningObjective[] {\n    const objectives: LearningObjective[] = [];\n\n    // Base objectives\n    objectives.push({\n      id: crypto.randomUUID(),\n      description: `Learn ${vocabularyItems.length} new vocabulary items at ${difficulty} level`,\n      isCompleted: false,\n      createdAt: new Date()\n    });\n\n    // Type-specific objectives\n    const typeObjectives: Record<LessonType, string> = {\n      'vocabulary': 'Practice using new vocabulary in context',\n      'grammar': 'Understand and apply grammar concepts',\n      'conversation': 'Engage in conversation using learned vocabulary',\n      'reading': 'Read and comprehend texts using learned vocabulary',\n      'listening': 'Listen and understand spoken language at this level',\n      'writing': 'Write sentences or paragraphs using learned vocabulary',\n      'culture': 'Understand cultural context of vocabulary',\n      'mixed': 'Practice various language skills at this level'\n    };\n\n    objectives.push({\n      id: crypto.randomUUID(),\n      description: typeObjectives[type],\n      isCompleted: false,\n      createdAt: new Date()\n    });\n\n    // Difficulty-specific objectives\n    if (difficulty === 'A1' || difficulty === 'A2') {\n      objectives.push({\n        id: crypto.randomUUID(),\n        description: 'Recognize basic words and phrases in context',\n        isCompleted: false,\n        createdAt: new Date()\n      });\n    } else if (difficulty === 'B1' || difficulty === 'B2') {\n      objectives.push({\n        id: crypto.randomUUID(),\n        description: 'Use vocabulary in complete sentences and questions',\n        isCompleted: false,\n        createdAt: new Date()\n      });\n    } else {\n      objectives.push({\n        id: crypto.randomUUID(),\n        description: 'Use advanced vocabulary in complex sentences and discussions',\n        isCompleted: false,\n        createdAt: new Date()\n      });\n    }\n\n    return objectives;\n  }\n\n  /**\n   * Generate tags for a lesson\n   */\n  private generateLessonTags(\n    vocabularyItems: VocabularyItem[],\n    difficulty: LessonDifficulty,\n    type: LessonType\n  ): string[] {\n    const tags: string[] = [type, difficulty];\n\n    // Add categories as tags\n    const categories = new Set<string>();\n    vocabularyItems.forEach(item => {\n      item.categories.forEach(category => categories.add(category));\n    });\n\n    // Add up to 3 categories as tags\n    Array.from(categories).slice(0, 3).forEach(category => {\n      tags.push(this.getCategoryDisplayName(category));\n    });\n\n    return tags;\n  }\n\n  /**\n   * Get display name for a vocabulary category\n   */\n  private getCategoryDisplayName(category: VocabularyCategory): string {\n    const displayNames: Record<VocabularyCategory, string> = {\n      'greetings': 'Greetings',\n      'numbers': 'Numbers',\n      'family': 'Family',\n      'food': 'Food',\n      'colors': 'Colors',\n      'animals': 'Animals',\n      'body': 'Body Parts',\n      'clothing': 'Clothing',\n      'house': 'House & Home',\n      'nature': 'Nature',\n      'transport': 'Transportation',\n      'technology': 'Technology',\n      'time': 'Time & Date',\n      'weather': 'Weather',\n      'professions': 'Professions',\n      'places': 'Places',\n      'grammar': 'Grammar',\n      'culture': 'Culture',\n      'common_phrases': 'Common Phrases',\n      'verbs': 'Verbs',\n      'uncategorized': 'Uncategorized'\n    };\n\n    return displayNames[category] || category;\n  }\n\n  /**\n   * Get display name for part of speech\n   */\n  private getPartOfSpeechDisplayName(partOfSpeech: PartOfSpeech): string {\n    const displayNames: Record<PartOfSpeech, string> = {\n      'noun': 'Nouns',\n      'verb': 'Verbs',\n      'adjective': 'Adjectives',\n      'adverb': 'Adverbs',\n      'pronoun': 'Pronouns',\n      'preposition': 'Prepositions',\n      'conjunction': 'Conjunctions',\n      'interjection': 'Interjections',\n      'article': 'Articles',\n      'number': 'Numbers',\n      'phrase': 'Phrases',\n      'expression': 'Expressions'\n    };\n\n    return displayNames[partOfSpeech] || partOfSpeech;\n  }\n\n  /**\n   * Determine lesson difficulty based on vocabulary items\n   */\n  private determineLessonDifficulty(vocabularyItems: VocabularyItem[]): LessonDifficulty {\n    if (vocabularyItems.length === 0) return 'A1';\n\n    const totalDifficulty = vocabularyItems.reduce((sum, item) => sum + item.difficulty, 0);\n    const avgDifficulty = totalDifficulty / vocabularyItems.length;\n\n    if (avgDifficulty <= 1.5) return 'A1';\n    if (avgDifficulty <= 2.5) return 'A2';\n    if (avgDifficulty <= 3.5) return 'B1';\n    if (avgDifficulty <= 4.5) return 'B2';\n    return 'C1';\n  }\n\n  /**\n   * Validate a lesson against the schema\n   */\n  private validateLesson(lesson: Lesson): Lesson {\n    const result = LessonSchema.safeParse(lesson);\n    if (result.success) {\n      return result.data;\n    } else {\n      // Lesson validation failed\n      return this.createFallbackLesson('Lesson validation failed');\n    }\n  }\n\n  /**\n   * Create a fallback lesson when validation or generation fails\n   */\n  private createFallbackLesson(_errorMessage: string): Lesson {\n    // Creating fallback lesson\n\n    return {\n      id: `fallback-${Date.now()}-${crypto.randomUUID()}`,\n      title: 'Lesson Unavailable',\n      description: 'This lesson could not be generated. Please try again later.',\n      difficulty: 'A1',\n      type: 'vocabulary',\n      duration: 15,\n      vocabulary: [],\n      objectives: [\n        {\n          id: crypto.randomUUID(),\n          description: 'Lesson generation failed - please try again',\n          isCompleted: false,\n          createdAt: new Date()\n        }\n      ],\n      isCompleted: false,\n      completionPercentage: 0,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      metadata: {\n        tags: ['error'],\n        prerequisites: [],\n        relatedLessons: [],\n        isPremium: false\n      }\n    };\n  }\n\n  /**\n   * Get all lessons\n   */\n  getLessons(): Lesson[] {\n    return this.lessons;\n  }\n\n  /**\n   * Get a specific lesson by ID\n   */\n  getLessonById(id: string): Lesson | undefined {\n    return this.lessons.find(lesson => lesson.id === id);\n  }\n\n  /**\n   * Add a lesson to the collection\n   */\n  addLesson(lesson: Lesson): void {\n    const validatedLesson = this.validateLesson(lesson);\n    this.lessons.push(validatedLesson);\n  }\n\n  /**\n   * Update a lesson\n   */\n  updateLesson(id: string, updates: Partial<Lesson>): Lesson | undefined {\n    const index = this.lessons.findIndex(lesson => lesson.id === id);\n    if (index === -1) return undefined;\n\n    const currentLesson = this.lessons[index];\n    const updatedLesson = {\n      ...currentLesson,\n      ...updates,\n      updatedAt: new Date()\n    };\n\n    const validatedLesson = this.validateLesson(updatedLesson);\n    this.lessons[index] = validatedLesson;\n    return validatedLesson;\n  }\n\n  /**\n   * Remove a lesson\n   */\n  removeLesson(id: string): boolean {\n    const initialLength = this.lessons.length;\n    this.lessons = this.lessons.filter(lesson => lesson.id !== id);\n    return this.lessons.length !== initialLength;\n  }\n\n  /**\n   * Get lessons by difficulty level\n   */\n  getLessonsByDifficulty(difficulty: LessonDifficulty): Lesson[] {\n    return this.lessons.filter(lesson => lesson.difficulty === difficulty);\n  }\n\n  /**\n   * Get lessons by type\n   */\n  getLessonsByType(type: LessonType): Lesson[] {\n    return this.lessons.filter(lesson => lesson.type === type);\n  }\n\n  /**\n   * Get lessons by tag\n   */\n  getLessonsByTag(tag: string): Lesson[] {\n    return this.lessons.filter(lesson =>\n      lesson.metadata.tags.includes(tag)\n    );\n  }\n\n  /**\n   * Get random lessons for recommendation\n   */\n  getRandomLessons(count: number = 3): Lesson[] {\n    if (this.lessons.length === 0) return [];\n\n    // Shuffle array and take first N items\n    const shuffled = [...this.lessons].sort(() => 0.5 - Math.random());\n    return shuffled.slice(0, Math.min(count, this.lessons.length));\n  }\n}\n\n// Export a singleton instance\nexport const lessonService = new LessonService();","/**\n * EnhancedLessonService - Extends the base LessonService to support dynamic lesson generation\n * while maintaining backward compatibility with existing functionality.\n *\n * This service integrates with the LessonGenerationEngine to provide dynamic lesson creation\n * based on templates, vocabulary, grammar concepts, and cultural context.\n */\nimport { lessonService } from './lesson';\nimport { lessonGenerationEngine } from './lesson-generation/lesson-generator';\nimport type { LessonGenerationParams, GeneratedLesson, EnhancedLessonCriteria, VocabularyItem } from './lesson-generation/types';\nimport { isLessonDifficulty, isLessonType } from './lesson-generation/types';\nimport type { Lesson, LessonSection, LearningObjective } from '../schemas/lesson';\nimport { v4 as uuidv4 } from 'uuid';\n\nclass EnhancedLessonService {\n  private initialized = false;\n\n  /**\n   * Initialize the service\n   */\n  async initialize(): Promise<void> {\n    await lessonService.initialize();\n    this.initialized = true;\n  }\n\n  /**\n   * Check if the service is initialized\n   */\n  isInitialized(): boolean {\n    return this.initialized;\n  }\n\n  /**\n   * Generate a dynamic lesson based on the provided parameters\n   * @param params Lesson generation parameters\n   * @returns Generated lesson in standard Lesson format\n   */\n  async generateDynamicLesson(params: LessonGenerationParams): Promise<Lesson> {\n    try {\n      // Validate parameters\n      const validatedParams = this.validateLessonGenerationParams(params);\n\n      // Generate the lesson using the LessonGenerationEngine\n      const generatedLesson = await lessonGenerationEngine.generateLesson(validatedParams);\n\n      // Convert the generated lesson to the standard Lesson format\n      return this.convertGeneratedLessonToLesson(generatedLesson);\n    } catch (_error) {\n      // Error handling is done by returning a fallback lesson\n      return this.createFallbackLesson(params.type || 'vocabulary', params.difficulty || 'A1');\n    }\n  }\n\n  /**\n   * Generate a thematic lesson focused on specific vocabulary categories\n   * @param categories Array of vocabulary categories\n   * @param difficulty Lesson difficulty level\n   * @param options Additional options for lesson generation\n   * @returns Generated lesson in standard Lesson format\n   */\n  async generateThematicLesson(categories: string[], difficulty: string, options?: { includePractice?: boolean; includeReview?: boolean }): Promise<Lesson> {\n    const validatedDifficulty = isLessonDifficulty(difficulty) ? difficulty : 'A1';\n    const params: LessonGenerationParams = {\n      userId: 'default',\n      type: 'vocabulary',\n      difficulty: validatedDifficulty,\n      criteria: { categories },\n      metadata: {\n        includePractice: options?.includePractice ?? true,\n        includeReview: options?.includeReview ?? false\n      }\n    };\n\n    return this.generateDynamicLesson(params);\n  }\n\n  /**\n   * Generate a grammar lesson focused on a specific grammar concept\n   * @param conceptType Grammar concept type\n   * @param difficulty Lesson difficulty level\n   * @param options Additional options for lesson generation\n   * @returns Generated lesson in standard Lesson format\n   */\n  async generateGrammarLesson(conceptType: string, difficulty: string, options?: { includePractice?: boolean; includeComparison?: boolean }): Promise<Lesson> {\n    const validatedDifficulty = isLessonDifficulty(difficulty) ? difficulty : 'A1';\n    const params: LessonGenerationParams = {\n      userId: 'default',\n      type: 'grammar',\n      difficulty: validatedDifficulty,\n      criteria: { conceptType },\n      metadata: {\n        includePractice: options?.includePractice ?? true,\n        includeComparison: options?.includeComparison ?? false\n      }\n    };\n\n    return this.generateDynamicLesson(params);\n  }\n\n  /**\n   * Generate a mixed lesson combining vocabulary and grammar\n   * @param category Vocabulary category\n   * @param difficulty Lesson difficulty level\n   * @param options Additional options for lesson generation\n   * @returns Generated lesson in standard Lesson format\n   */\n  async generateMixedLesson(category: string, difficulty: string, options?: { includePractice?: boolean; includeReview?: boolean }): Promise<Lesson> {\n    const validatedDifficulty = isLessonDifficulty(difficulty) ? difficulty : 'A1';\n    const params: LessonGenerationParams = {\n      userId: 'default',\n      type: 'mixed',\n      difficulty: validatedDifficulty,\n      criteria: { categories: [category] },\n      metadata: {\n        includePractice: options?.includePractice ?? true,\n        includeReview: options?.includeReview ?? false\n      }\n    };\n\n    return this.generateDynamicLesson(params);\n  }\n\n  /**\n   * Validate lesson generation parameters and provide defaults for invalid values\n   * @param params Lesson generation parameters\n   * @returns Validated parameters with defaults applied\n   */\n  private validateLessonGenerationParams(params: LessonGenerationParams): LessonGenerationParams {\n    // Default values\n    const defaults = {\n      userId: 'default',\n      type: 'vocabulary' as const,\n      difficulty: 'A1' as const,\n      criteria: {},\n      metadata: {}\n    };\n\n    // Validate and apply defaults\n    const validatedParams: LessonGenerationParams = {\n      userId: params.userId || defaults.userId,\n      type: (['vocabulary', 'grammar', 'mixed', 'culture', 'contextual'] as const).includes(params.type as any) ? params.type : defaults.type,\n      difficulty: (['A1', 'A2', 'B1', 'B2', 'C1'] as const).includes(params.difficulty as any) ? params.difficulty : defaults.difficulty,\n      criteria: params.criteria || defaults.criteria,\n      metadata: params.metadata || defaults.metadata\n    };\n\n    return validatedParams;\n  }\n\n  /**\n   * Convert a GeneratedLesson to the standard Lesson format\n   * @param generatedLesson The lesson generated by the LessonGenerationEngine\n   * @returns Lesson in standard format\n   */\n  private convertGeneratedLessonToLesson(generatedLesson: GeneratedLesson): Lesson {\n    // Converting generated lesson to standard format\n\n    // Convert sections\n    const sections: LessonSection[] = generatedLesson.sections.map(section => {\n      // Use the section's original type if available, otherwise fall back to lesson type\n      const sectionType = section.type || generatedLesson.type;\n      // Section converted to standard format\n      return {\n        ...section,\n        type: sectionType,\n        isCompleted: false,\n        completionPercentage: 0,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      };\n    });\n\n    // Convert learning objectives\n    const objectives: LearningObjective[] = generatedLesson.learningObjectives.map(objective => ({\n      id: uuidv4(),\n      description: objective,\n      isCompleted: false,\n      createdAt: new Date()\n    }));\n\n    // Calculate duration (5 minutes per section + 5 minutes buffer)\n    const duration = sections.length * 5 + 5;\n\n    // Generate tags\n    const tags = this.generateLessonTags(generatedLesson);\n\n    // Create the lesson object\n    const lesson: Lesson = {\n      id: generatedLesson.id,\n      title: generatedLesson.title,\n      description: this.generateLessonDescription(generatedLesson),\n      difficulty: generatedLesson.difficulty,\n      type: generatedLesson.type,\n      duration,\n      vocabulary: generatedLesson.vocabulary || [],\n      objectives,\n      sections,\n      isCompleted: false,\n      completionPercentage: 0,\n      createdAt: generatedLesson.createdAt || new Date(),\n      updatedAt: generatedLesson.updatedAt || new Date(),\n      metadata: {\n        tags,\n        prerequisites: [],\n        relatedLessons: [],\n        generated: true,\n        templateIds: generatedLesson.sections.map(s => s.metadata?.templateId).filter(Boolean) as string[],\n        ...generatedLesson.metadata\n      }\n    };\n\n    // Lesson object created successfully\n    return lesson;\n  }\n\n  /**\n   * Generate appropriate tags for the lesson\n   * @param generatedLesson The generated lesson\n   * @returns Array of tags\n   */\n  private generateLessonTags(generatedLesson: GeneratedLesson): string[] {\n    const tags: string[] = [];\n\n    // Add basic type and difficulty tags\n    tags.push(generatedLesson.type);\n    tags.push(generatedLesson.difficulty);\n\n    // Add grammar concept names if available\n    if (generatedLesson.grammarConcepts && generatedLesson.grammarConcepts.length > 0) {\n      generatedLesson.grammarConcepts.forEach(concept => {\n        if (concept.name?.german) {\n          tags.push(concept.name.german);\n        }\n      });\n    }\n\n    // Add vocabulary categories if available\n    if (generatedLesson.vocabulary && generatedLesson.vocabulary.length > 0) {\n      const categories = new Set<string>();\n      generatedLesson.vocabulary.forEach(vocab => {\n        if (vocab.categories) {\n          vocab.categories.forEach(category => {\n            // Add both display name and raw category name\n            const displayName = lessonService.getCategoryDisplayName(category);\n            categories.add(displayName);\n            categories.add(category); // Add raw category name as well\n          });\n        }\n      });\n      tags.push(...Array.from(categories));\n    }\n\n    return tags;\n  }\n\n  /**\n   * Generate a meaningful description for the lesson\n   * @param generatedLesson The generated lesson\n   * @returns Lesson description\n   */\n  private generateLessonDescription(generatedLesson: GeneratedLesson): string {\n    const difficultyMap: Record<string, string> = {\n      'A1': 'beginner',\n      'A2': 'elementary',\n      'B1': 'intermediate',\n      'B2': 'upper intermediate',\n      'C1': 'advanced'\n    };\n\n    const typeMap: Record<string, string> = {\n      'vocabulary': 'vocabulary building',\n      'grammar': 'grammar concepts',\n      'mixed': 'various language skills',\n      'contextual': 'contextual learning'\n    };\n\n    const difficultyLevel = difficultyMap[generatedLesson.difficulty] || 'beginner';\n    const focusArea = typeMap[generatedLesson.type] || 'language learning';\n\n    // Count vocabulary items\n    const vocabCount = generatedLesson.vocabulary?.length || 0;\n\n    // List grammar concepts\n    let grammarConceptsText = '';\n    if (generatedLesson.grammarConcepts && generatedLesson.grammarConcepts.length > 0) {\n      const conceptNames = generatedLesson.grammarConcepts\n        .map(concept => concept.name?.german || concept.id)\n        .join(', ');\n      grammarConceptsText = `. It covers grammar concepts including ${conceptNames}.`;\n    }\n\n    return `This ${difficultyLevel} level lesson focuses on ${focusArea} with ${vocabCount} vocabulary items${grammarConceptsText}`;\n  }\n\n  /**\n   * Create a fallback lesson when generation fails\n   * @param type Lesson type\n   * @param difficulty Lesson difficulty\n   * @returns Fallback lesson\n   */\n  private createFallbackLesson(type: string, difficulty: string): Lesson {\n    return {\n      id: `fallback-lesson-${uuidv4()}`,\n      title: 'Lesson Unavailable',\n      description: 'Dynamic lesson generation failed. Please try again or select a different lesson.',\n      difficulty: isLessonDifficulty(difficulty) ? difficulty : 'A1',\n      type: isLessonType(type) ? type : 'vocabulary',\n      duration: 10,\n      vocabulary: [],\n      objectives: [],\n      sections: [],\n      isCompleted: false,\n      completionPercentage: 0,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      metadata: {\n        tags: [type, difficulty],\n        prerequisites: [],\n        relatedLessons: [],\n        generated: true,\n        fallback: true\n      }\n    };\n  }\n\n  // Proxy methods for backward compatibility with existing LessonService\n  getLessons() {\n    return lessonService.getLessons() || [];\n  }\n\n  getLessonById(id: string) {\n    return lessonService.getLessonById(id);\n  }\n\n  generateLessonFromVocabulary(vocabularyItems: VocabularyItem[]) {\n    return lessonService.generateLessonFromVocabulary(vocabularyItems);\n  }\n\n  async generateLessonFromCriteria(criteria: EnhancedLessonCriteria) {\n    const result = await lessonService.generateLessonFromCriteria(criteria);\n    return result || this.createFallbackLesson('vocabulary', 'A1');\n  }\n\n  getLessonsByDifficulty(difficulty: string) {\n    return lessonService.getLessonsByDifficulty(difficulty) || [];\n  }\n\n  getLessonsByType(type: string) {\n    return lessonService.getLessonsByType(type) || [];\n  }\n\n  getLessonsByTag(tag: string) {\n    return lessonService.getLessonsByTag(tag) || [];\n  }\n\n  getRandomLessons(count: number) {\n    return lessonService.getRandomLessons(count) || [];\n  }\n\n  addLesson(lesson: Lesson) {\n    return lessonService.addLesson(lesson);\n  }\n\n  updateLesson(id: string, updates: Partial<Lesson>) {\n    return lessonService.updateLesson(id, updates);\n  }\n\n  removeLesson(id: string) {\n    return lessonService.removeLesson(id);\n  }\n}\n\n// Export a singleton instance\nexport const enhancedLessonService = new EnhancedLessonService();","export function isFunction(value) {\n    return typeof value === \"function\";\n}\nexport function isObject(value) {\n    return value !== null && typeof value === \"object\";\n}\nconst CLASS_VALUE_PRIMITIVE_TYPES = [\"string\", \"number\", \"bigint\", \"boolean\"];\nexport function isClassValue(value) {\n    // handle primitive types\n    if (value === null || value === undefined)\n        return true;\n    if (CLASS_VALUE_PRIMITIVE_TYPES.includes(typeof value))\n        return true;\n    // handle arrays (ClassArray)\n    if (Array.isArray(value))\n        return value.every((item) => isClassValue(item));\n    // handle objects (ClassDictionary)\n    if (typeof value === \"object\") {\n        // ensure it's a plain object and not some other object type\n        if (Object.getPrototypeOf(value) !== Object.prototype)\n            return false;\n        return true;\n    }\n    return false;\n}\n","import { isFunction, isObject } from \"../utils/is.js\";\nexport const BoxSymbol = Symbol(\"box\");\nexport const isWritableSymbol = Symbol(\"is-writable\");\nfunction boxWith(getter, setter) {\n    const derived = $derived.by(getter);\n    if (setter) {\n        return {\n            [BoxSymbol]: true,\n            [isWritableSymbol]: true,\n            get current() {\n                return derived;\n            },\n            set current(v) {\n                setter(v);\n            }\n        };\n    }\n    return {\n        [BoxSymbol]: true,\n        get current() {\n            return getter();\n        }\n    };\n}\n/**\n * @returns Whether the value is a Box\n *\n * @see {@link https://runed.dev/docs/functions/box}\n */\nfunction isBox(value) {\n    return isObject(value) && BoxSymbol in value;\n}\n/**\n * @returns Whether the value is a WritableBox\n *\n * @see {@link https://runed.dev/docs/functions/box}\n */\nfunction isWritableBox(value) {\n    return isBox(value) && isWritableSymbol in value;\n}\nfunction boxFrom(value) {\n    if (isBox(value))\n        return value;\n    if (isFunction(value))\n        return boxWith(value);\n    return simpleBox(value);\n}\n/**\n * Function that gets an object of boxes, and returns an object of reactive values\n *\n * @example\n * const count = box(0)\n * const flat = box.flatten({ count, double: box.with(() => count.current) })\n * // type of flat is { count: number, readonly double: number }\n *\n * @see {@link https://runed.dev/docs/functions/box}\n */\nfunction boxFlatten(boxes) {\n    return Object.entries(boxes).reduce((acc, [key, b]) => {\n        if (!isBox(b)) {\n            return Object.assign(acc, { [key]: b });\n        }\n        if (isWritableBox(b)) {\n            Object.defineProperty(acc, key, {\n                get() {\n                    return b.current;\n                },\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                set(v) {\n                    b.current = v;\n                }\n            });\n        }\n        else {\n            Object.defineProperty(acc, key, {\n                get() {\n                    return b.current;\n                }\n            });\n        }\n        return acc;\n    }, {});\n}\n/**\n * Function that converts a box to a readonly box.\n *\n * @example\n * const count = box(0) // WritableBox<number>\n * const countReadonly = box.readonly(count) // ReadableBox<number>\n *\n * @see {@link https://runed.dev/docs/functions/box}\n */\nfunction toReadonlyBox(b) {\n    if (!isWritableBox(b))\n        return b;\n    return {\n        [BoxSymbol]: true,\n        get current() {\n            return b.current;\n        }\n    };\n}\nfunction simpleBox(initialValue) {\n    let current = $state(initialValue);\n    return {\n        [BoxSymbol]: true,\n        [isWritableSymbol]: true,\n        get current() {\n            return current;\n        },\n        set current(v) {\n            current = v;\n        }\n    };\n}\nexport { boxWith, isBox, isWritableBox, boxFrom, boxFlatten, toReadonlyBox, simpleBox };\n","/**\n * Composes event handlers into a single function that can be called with an event.\n * If the previous handler cancels the event using `event.preventDefault()`, the handlers\n * that follow will not be called.\n */\nexport function composeHandlers(...handlers) {\n    return function (e) {\n        for (const handler of handlers) {\n            if (!handler)\n                continue;\n            if (e.defaultPrevented)\n                return;\n            if (typeof handler === \"function\") {\n                handler.call(this, e);\n            }\n            else {\n                handler.current?.call(this, e);\n            }\n        }\n    };\n}\n","// http://www.w3.org/TR/CSS21/grammar.html\n// https://github.com/visionmedia/css-parse/pull/49#issuecomment-30088027\nvar COMMENT_REGEX = /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//g;\n\nvar NEWLINE_REGEX = /\\n/g;\nvar WHITESPACE_REGEX = /^\\s*/;\n\n// declaration\nvar PROPERTY_REGEX = /^(\\*?[-#/*\\\\\\w]+(\\[[0-9a-z_-]+\\])?)\\s*/;\nvar COLON_REGEX = /^:\\s*/;\nvar VALUE_REGEX = /^((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^)]*?\\)|[^};])+)/;\nvar SEMICOLON_REGEX = /^[;\\s]*/;\n\n// https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String/Trim#Polyfill\nvar TRIM_REGEX = /^\\s+|\\s+$/g;\n\n// strings\nvar NEWLINE = '\\n';\nvar FORWARD_SLASH = '/';\nvar ASTERISK = '*';\nvar EMPTY_STRING = '';\n\n// types\nvar TYPE_COMMENT = 'comment';\nvar TYPE_DECLARATION = 'declaration';\n\n/**\n * @param {String} style\n * @param {Object} [options]\n * @return {Object[]}\n * @throws {TypeError}\n * @throws {Error}\n */\nfunction index (style, options) {\n  if (typeof style !== 'string') {\n    throw new TypeError('First argument must be a string');\n  }\n\n  if (!style) return [];\n\n  options = options || {};\n\n  /**\n   * Positional.\n   */\n  var lineno = 1;\n  var column = 1;\n\n  /**\n   * Update lineno and column based on `str`.\n   *\n   * @param {String} str\n   */\n  function updatePosition(str) {\n    var lines = str.match(NEWLINE_REGEX);\n    if (lines) lineno += lines.length;\n    var i = str.lastIndexOf(NEWLINE);\n    column = ~i ? str.length - i : column + str.length;\n  }\n\n  /**\n   * Mark position and patch `node.position`.\n   *\n   * @return {Function}\n   */\n  function position() {\n    var start = { line: lineno, column: column };\n    return function (node) {\n      node.position = new Position(start);\n      whitespace();\n      return node;\n    };\n  }\n\n  /**\n   * Store position information for a node.\n   *\n   * @constructor\n   * @property {Object} start\n   * @property {Object} end\n   * @property {undefined|String} source\n   */\n  function Position(start) {\n    this.start = start;\n    this.end = { line: lineno, column: column };\n    this.source = options.source;\n  }\n\n  /**\n   * Non-enumerable source string.\n   */\n  Position.prototype.content = style;\n\n  /**\n   * Error `msg`.\n   *\n   * @param {String} msg\n   * @throws {Error}\n   */\n  function error(msg) {\n    var err = new Error(\n      options.source + ':' + lineno + ':' + column + ': ' + msg\n    );\n    err.reason = msg;\n    err.filename = options.source;\n    err.line = lineno;\n    err.column = column;\n    err.source = style;\n\n    if (options.silent) ; else {\n      throw err;\n    }\n  }\n\n  /**\n   * Match `re` and return captures.\n   *\n   * @param {RegExp} re\n   * @return {undefined|Array}\n   */\n  function match(re) {\n    var m = re.exec(style);\n    if (!m) return;\n    var str = m[0];\n    updatePosition(str);\n    style = style.slice(str.length);\n    return m;\n  }\n\n  /**\n   * Parse whitespace.\n   */\n  function whitespace() {\n    match(WHITESPACE_REGEX);\n  }\n\n  /**\n   * Parse comments.\n   *\n   * @param {Object[]} [rules]\n   * @return {Object[]}\n   */\n  function comments(rules) {\n    var c;\n    rules = rules || [];\n    while ((c = comment())) {\n      if (c !== false) {\n        rules.push(c);\n      }\n    }\n    return rules;\n  }\n\n  /**\n   * Parse comment.\n   *\n   * @return {Object}\n   * @throws {Error}\n   */\n  function comment() {\n    var pos = position();\n    if (FORWARD_SLASH != style.charAt(0) || ASTERISK != style.charAt(1)) return;\n\n    var i = 2;\n    while (\n      EMPTY_STRING != style.charAt(i) &&\n      (ASTERISK != style.charAt(i) || FORWARD_SLASH != style.charAt(i + 1))\n    ) {\n      ++i;\n    }\n    i += 2;\n\n    if (EMPTY_STRING === style.charAt(i - 1)) {\n      return error('End of comment missing');\n    }\n\n    var str = style.slice(2, i - 2);\n    column += 2;\n    updatePosition(str);\n    style = style.slice(i);\n    column += 2;\n\n    return pos({\n      type: TYPE_COMMENT,\n      comment: str\n    });\n  }\n\n  /**\n   * Parse declaration.\n   *\n   * @return {Object}\n   * @throws {Error}\n   */\n  function declaration() {\n    var pos = position();\n\n    // prop\n    var prop = match(PROPERTY_REGEX);\n    if (!prop) return;\n    comment();\n\n    // :\n    if (!match(COLON_REGEX)) return error(\"property missing ':'\");\n\n    // val\n    var val = match(VALUE_REGEX);\n\n    var ret = pos({\n      type: TYPE_DECLARATION,\n      property: trim(prop[0].replace(COMMENT_REGEX, EMPTY_STRING)),\n      value: val\n        ? trim(val[0].replace(COMMENT_REGEX, EMPTY_STRING))\n        : EMPTY_STRING\n    });\n\n    // ;\n    match(SEMICOLON_REGEX);\n\n    return ret;\n  }\n\n  /**\n   * Parse declarations.\n   *\n   * @return {Object[]}\n   */\n  function declarations() {\n    var decls = [];\n\n    comments(decls);\n\n    // declarations\n    var decl;\n    while ((decl = declaration())) {\n      if (decl !== false) {\n        decls.push(decl);\n        comments(decls);\n      }\n    }\n\n    return decls;\n  }\n\n  whitespace();\n  return declarations();\n}\n\n/**\n * Trim `str`.\n *\n * @param {String} str\n * @return {String}\n */\nfunction trim(str) {\n  return str ? str.replace(TRIM_REGEX, EMPTY_STRING) : EMPTY_STRING;\n}\n\nexport { index as default };\n//# sourceMappingURL=index.mjs.map\n","import parse from 'inline-style-parser';\n\n/**\n * Parses inline style to object.\n *\n * @param style - Inline style.\n * @param iterator - Iterator.\n * @returns - Style object or null.\n *\n * @example Parsing inline style to object:\n *\n * ```js\n * import parse from 'style-to-object';\n * parse('line-height: 42;'); // { 'line-height': '42' }\n * ```\n */\nfunction StyleToObject(style, iterator) {\n    let styleObject = null;\n    if (!style || typeof style !== 'string') {\n        return styleObject;\n    }\n    const declarations = parse(style);\n    const hasIterator = typeof iterator === 'function';\n    declarations.forEach((declaration) => {\n        if (declaration.type !== 'declaration') {\n            return;\n        }\n        const { property, value } = declaration;\n        if (hasIterator) {\n            iterator(property, value, declaration);\n        }\n        else if (value) {\n            styleObject = styleObject || {};\n            styleObject[property] = value;\n        }\n    });\n    return styleObject;\n}\n\nexport { StyleToObject as default };\n//# sourceMappingURL=index.mjs.map\n","const NUMBER_CHAR_RE = /\\d/;\nconst STR_SPLITTERS = [\"-\", \"_\", \"/\", \".\"];\nfunction isUppercase(char = \"\") {\n    if (NUMBER_CHAR_RE.test(char))\n        return undefined;\n    return char !== char.toLowerCase();\n}\nfunction splitByCase(str) {\n    const parts = [];\n    let buff = \"\";\n    let previousUpper;\n    let previousSplitter;\n    for (const char of str) {\n        // Splitter\n        const isSplitter = STR_SPLITTERS.includes(char);\n        if (isSplitter === true) {\n            parts.push(buff);\n            buff = \"\";\n            previousUpper = undefined;\n            continue;\n        }\n        const isUpper = isUppercase(char);\n        if (previousSplitter === false) {\n            // Case rising edge\n            if (previousUpper === false && isUpper === true) {\n                parts.push(buff);\n                buff = char;\n                previousUpper = isUpper;\n                continue;\n            }\n            // Case falling edge\n            if (previousUpper === true && isUpper === false && buff.length > 1) {\n                const lastChar = buff.at(-1);\n                parts.push(buff.slice(0, Math.max(0, buff.length - 1)));\n                buff = lastChar + char;\n                previousUpper = isUpper;\n                continue;\n            }\n        }\n        // Normal char\n        buff += char;\n        previousUpper = isUpper;\n        previousSplitter = isSplitter;\n    }\n    parts.push(buff);\n    return parts;\n}\nexport function pascalCase(str) {\n    if (!str)\n        return \"\";\n    return splitByCase(str)\n        .map((p) => upperFirst(p))\n        .join(\"\");\n}\nexport function camelCase(str) {\n    return lowerFirst(pascalCase(str || \"\"));\n}\nexport function kebabCase(str) {\n    return str\n        ? splitByCase(str)\n            .map((p) => p.toLowerCase())\n            .join(\"-\")\n        : \"\";\n}\nfunction upperFirst(str) {\n    return str ? str[0].toUpperCase() + str.slice(1) : \"\";\n}\nfunction lowerFirst(str) {\n    return str ? str[0].toLowerCase() + str.slice(1) : \"\";\n}\n","import parse from \"style-to-object\";\nimport { camelCase, pascalCase } from \"./strings.js\";\nexport function cssToStyleObj(css) {\n    if (!css)\n        return {};\n    const styleObj = {};\n    function iterator(name, value) {\n        if (name.startsWith(\"-moz-\") ||\n            name.startsWith(\"-webkit-\") ||\n            name.startsWith(\"-ms-\") ||\n            name.startsWith(\"-o-\")) {\n            styleObj[pascalCase(name)] = value;\n            return;\n        }\n        if (name.startsWith(\"--\")) {\n            styleObj[name] = value;\n            return;\n        }\n        styleObj[camelCase(name)] = value;\n    }\n    parse(css, iterator);\n    return styleObj;\n}\n","/**\n * Executes an array of callback functions with the same arguments.\n * @template T The types of the arguments that the callback functions take.\n * @param callbacks array of callback functions to execute.\n * @returns A new function that executes all of the original callback functions with the same arguments.\n */\nexport function executeCallbacks(...callbacks) {\n    return (...args) => {\n        for (const callback of callbacks) {\n            if (typeof callback === \"function\") {\n                callback(...args);\n            }\n        }\n    };\n}\n","function createParser(matcher, replacer) {\n    const regex = RegExp(matcher, \"g\");\n    return (str) => {\n        // throw an error if not a string\n        if (typeof str !== \"string\") {\n            throw new TypeError(`expected an argument of type string, but got ${typeof str}`);\n        }\n        // if no match between string and matcher\n        if (!str.match(regex))\n            return str;\n        // executes the replacer function for each match\n        return str.replace(regex, replacer);\n    };\n}\nconst camelToKebab = createParser(/[A-Z]/, (match) => `-${match.toLowerCase()}`);\nexport function styleToCSS(styleObj) {\n    if (!styleObj || typeof styleObj !== \"object\" || Array.isArray(styleObj)) {\n        throw new TypeError(`expected an argument of type object, but got ${typeof styleObj}`);\n    }\n    return Object.keys(styleObj)\n        .map((property) => `${camelToKebab(property)}: ${styleObj[property]};`)\n        .join(\"\\n\");\n}\n","import { styleToCSS } from \"./style-to-css.js\";\nexport function styleToString(style = {}) {\n    return styleToCSS(style).replace(\"\\n\", \" \");\n}\n","const EVENT_LIST = [\n    \"onabort\",\n    \"onanimationcancel\",\n    \"onanimationend\",\n    \"onanimationiteration\",\n    \"onanimationstart\",\n    \"onauxclick\",\n    \"onbeforeinput\",\n    \"onbeforetoggle\",\n    \"onblur\",\n    \"oncancel\",\n    \"oncanplay\",\n    \"oncanplaythrough\",\n    \"onchange\",\n    \"onclick\",\n    \"onclose\",\n    \"oncompositionend\",\n    \"oncompositionstart\",\n    \"oncompositionupdate\",\n    \"oncontextlost\",\n    \"oncontextmenu\",\n    \"oncontextrestored\",\n    \"oncopy\",\n    \"oncuechange\",\n    \"oncut\",\n    \"ondblclick\",\n    \"ondrag\",\n    \"ondragend\",\n    \"ondragenter\",\n    \"ondragleave\",\n    \"ondragover\",\n    \"ondragstart\",\n    \"ondrop\",\n    \"ondurationchange\",\n    \"onemptied\",\n    \"onended\",\n    \"onerror\",\n    \"onfocus\",\n    \"onfocusin\",\n    \"onfocusout\",\n    \"onformdata\",\n    \"ongotpointercapture\",\n    \"oninput\",\n    \"oninvalid\",\n    \"onkeydown\",\n    \"onkeypress\",\n    \"onkeyup\",\n    \"onload\",\n    \"onloadeddata\",\n    \"onloadedmetadata\",\n    \"onloadstart\",\n    \"onlostpointercapture\",\n    \"onmousedown\",\n    \"onmouseenter\",\n    \"onmouseleave\",\n    \"onmousemove\",\n    \"onmouseout\",\n    \"onmouseover\",\n    \"onmouseup\",\n    \"onpaste\",\n    \"onpause\",\n    \"onplay\",\n    \"onplaying\",\n    \"onpointercancel\",\n    \"onpointerdown\",\n    \"onpointerenter\",\n    \"onpointerleave\",\n    \"onpointermove\",\n    \"onpointerout\",\n    \"onpointerover\",\n    \"onpointerup\",\n    \"onprogress\",\n    \"onratechange\",\n    \"onreset\",\n    \"onresize\",\n    \"onscroll\",\n    \"onscrollend\",\n    \"onsecuritypolicyviolation\",\n    \"onseeked\",\n    \"onseeking\",\n    \"onselect\",\n    \"onselectionchange\",\n    \"onselectstart\",\n    \"onslotchange\",\n    \"onstalled\",\n    \"onsubmit\",\n    \"onsuspend\",\n    \"ontimeupdate\",\n    \"ontoggle\",\n    \"ontouchcancel\",\n    \"ontouchend\",\n    \"ontouchmove\",\n    \"ontouchstart\",\n    \"ontransitioncancel\",\n    \"ontransitionend\",\n    \"ontransitionrun\",\n    \"ontransitionstart\",\n    \"onvolumechange\",\n    \"onwaiting\",\n    \"onwebkitanimationend\",\n    \"onwebkitanimationiteration\",\n    \"onwebkitanimationstart\",\n    \"onwebkittransitionend\",\n    \"onwheel\"\n];\nexport const EVENT_LIST_SET = new Set(EVENT_LIST);\n","/**\n * Modified from https://github.com/adobe/react-spectrum/blob/main/packages/%40react-aria/utils/src/mergeProps.ts (see NOTICE.txt for source)\n */\nimport { clsx } from \"clsx\";\nimport { composeHandlers } from \"./compose-handlers.js\";\nimport { cssToStyleObj } from \"./css-to-style-obj.js\";\nimport { isClassValue } from \"./is.js\";\nimport { executeCallbacks } from \"./execute-callbacks.js\";\nimport { styleToString } from \"./style.js\";\nimport { EVENT_LIST_SET } from \"./event-list.js\";\nfunction isEventHandler(key) {\n    return EVENT_LIST_SET.has(key);\n}\n/**\n * Given a list of prop objects, merges them into a single object.\n * - Automatically composes event handlers (e.g. `onclick`, `oninput`, etc.)\n * - Chains regular functions with the same name so they are called in order\n * - Merges class strings with `clsx`\n * - Merges style objects and converts them to strings\n * - Handles a bug with Svelte where setting the `hidden` attribute to `false` doesn't remove it\n * - Overrides other values with the last one\n */\nexport function mergeProps(...args) {\n    const result = { ...args[0] };\n    for (let i = 1; i < args.length; i++) {\n        const props = args[i];\n        if (!props)\n            continue;\n        // Handle string keys\n        for (const key of Object.keys(props)) {\n            const a = result[key];\n            const b = props[key];\n            const aIsFunction = typeof a === \"function\";\n            const bIsFunction = typeof b === \"function\";\n            // compose event handlers\n            if (aIsFunction && typeof bIsFunction && isEventHandler(key)) {\n                // handle merging of event handlers\n                const aHandler = a;\n                const bHandler = b;\n                result[key] = composeHandlers(aHandler, bHandler);\n            }\n            else if (aIsFunction && bIsFunction) {\n                // chain non-event handler functions\n                result[key] = executeCallbacks(a, b);\n            }\n            else if (key === \"class\") {\n                // handle merging acceptable class values from clsx\n                const aIsClassValue = isClassValue(a);\n                const bIsClassValue = isClassValue(b);\n                if (aIsClassValue && bIsClassValue) {\n                    result[key] = clsx(a, b);\n                }\n                else if (aIsClassValue) {\n                    result[key] = clsx(a);\n                }\n                else if (bIsClassValue) {\n                    result[key] = clsx(b);\n                }\n            }\n            else if (key === \"style\") {\n                const aIsObject = typeof a === \"object\";\n                const bIsObject = typeof b === \"object\";\n                const aIsString = typeof a === \"string\";\n                const bIsString = typeof b === \"string\";\n                if (aIsObject && bIsObject) {\n                    // both are style objects, merge them\n                    result[key] = { ...a, ...b };\n                }\n                else if (aIsObject && bIsString) {\n                    // a is style object, b is string, convert b to style object and merge\n                    const parsedStyle = cssToStyleObj(b);\n                    result[key] = { ...a, ...parsedStyle };\n                }\n                else if (aIsString && bIsObject) {\n                    // a is string, b is style object, convert a to style object and merge\n                    const parsedStyle = cssToStyleObj(a);\n                    result[key] = { ...parsedStyle, ...b };\n                }\n                else if (aIsString && bIsString) {\n                    // both are strings, convert both to objects and merge\n                    const parsedStyleA = cssToStyleObj(a);\n                    const parsedStyleB = cssToStyleObj(b);\n                    result[key] = { ...parsedStyleA, ...parsedStyleB };\n                }\n                else if (aIsObject) {\n                    result[key] = a;\n                }\n                else if (bIsObject) {\n                    result[key] = b;\n                }\n                else if (aIsString) {\n                    result[key] = a;\n                }\n                else if (bIsString) {\n                    result[key] = b;\n                }\n            }\n            else {\n                // override other values\n                result[key] = b !== undefined ? b : a;\n            }\n        }\n        // handle symbol keys (mostly for `Attachments`)\n        for (const key of Object.getOwnPropertySymbols(props)) {\n            const a = result[key];\n            const b = props[key];\n            // for matching symbols, we just override\n            result[key] = b !== undefined ? b : a;\n        }\n    }\n    // convert style object to string\n    if (typeof result.style === \"object\") {\n        result.style = styleToString(result.style).replaceAll(\"\\n\", \" \");\n    }\n    // handle weird svelte bug where `hidden` is not removed when set to `false`\n    if (result.hidden === false) {\n        result.hidden = undefined;\n        delete result.hidden;\n    }\n    // handle weird svelte bug where `disabled` is not removed when set to `false`\n    if (result.disabled === false) {\n        result.disabled = undefined;\n        delete result.disabled;\n    }\n    return result;\n}\n","import { BROWSER } from \"esm-env\";\nexport const defaultWindow = BROWSER && typeof window !== \"undefined\" ? window : undefined;\nexport const defaultDocument = BROWSER && typeof window !== \"undefined\" ? window.document : undefined;\nexport const defaultNavigator = BROWSER && typeof window !== \"undefined\" ? window.navigator : undefined;\nexport const defaultLocation = BROWSER && typeof window !== \"undefined\" ? window.location : undefined;\n","/** @import { Source } from '#client' */\nimport { DEV } from 'esm-env';\nimport { set, source, state, increment } from '../internal/client/reactivity/sources.js';\nimport { label, tag } from '../internal/client/dev/tracing.js';\nimport { get, update_version } from '../internal/client/runtime.js';\n\n/**\n * A reactive version of the built-in [`Map`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map) object.\n * Reading contents of the map (by iterating, or by reading `map.size` or calling `map.get(...)` or `map.has(...)` as in the [tic-tac-toe example](https://svelte.dev/playground/0b0ff4aa49c9443f9b47fe5203c78293) below) in an [effect](https://svelte.dev/docs/svelte/$effect) or [derived](https://svelte.dev/docs/svelte/$derived)\n * will cause it to be re-evaluated as necessary when the map is updated.\n *\n * Note that values in a reactive map are _not_ made [deeply reactive](https://svelte.dev/docs/svelte/$state#Deep-state).\n *\n * ```svelte\n * <script>\n * \timport { SvelteMap } from 'svelte/reactivity';\n * \timport { result } from './game.js';\n *\n * \tlet board = new SvelteMap();\n * \tlet player = $state('x');\n * \tlet winner = $derived(result(board));\n *\n * \tfunction reset() {\n * \t\tplayer = 'x';\n * \t\tboard.clear();\n * \t}\n * </script>\n *\n * <div class=\"board\">\n * \t{#each Array(9), i}\n * \t\t<button\n * \t\t\tdisabled={board.has(i) || winner}\n * \t\t\tonclick={() => {\n * \t\t\t\tboard.set(i, player);\n * \t\t\t\tplayer = player === 'x' ? 'o' : 'x';\n * \t\t\t}}\n * \t\t>{board.get(i)}</button>\n * \t{/each}\n * </div>\n *\n * {#if winner}\n * \t<p>{winner} wins!</p>\n * \t<button onclick={reset}>reset</button>\n * {:else}\n * \t<p>{player} is next</p>\n * {/if}\n * ```\n *\n * @template K\n * @template V\n * @extends {Map<K, V>}\n */\nexport class SvelteMap extends Map {\n\t/** @type {Map<K, Source<number>>} */\n\t#sources = new Map();\n\t#version = state(0);\n\t#size = state(0);\n\t#update_version = update_version || -1;\n\n\t/**\n\t * @param {Iterable<readonly [K, V]> | null | undefined} [value]\n\t */\n\tconstructor(value) {\n\t\tsuper();\n\n\t\tif (DEV) {\n\t\t\t// If the value is invalid then the native exception will fire here\n\t\t\tvalue = new Map(value);\n\n\t\t\ttag(this.#version, 'SvelteMap version');\n\t\t\ttag(this.#size, 'SvelteMap.size');\n\t\t}\n\n\t\tif (value) {\n\t\t\tfor (var [key, v] of value) {\n\t\t\t\tsuper.set(key, v);\n\t\t\t}\n\t\t\tthis.#size.v = super.size;\n\t\t}\n\t}\n\n\t/**\n\t * If the source is being created inside the same reaction as the SvelteMap instance,\n\t * we use `state` so that it will not be a dependency of the reaction. Otherwise we\n\t * use `source` so it will be.\n\t *\n\t * @template T\n\t * @param {T} value\n\t * @returns {Source<T>}\n\t */\n\t#source(value) {\n\t\treturn update_version === this.#update_version ? state(value) : source(value);\n\t}\n\n\t/** @param {K} key */\n\thas(key) {\n\t\tvar sources = this.#sources;\n\t\tvar s = sources.get(key);\n\n\t\tif (s === undefined) {\n\t\t\tvar ret = super.get(key);\n\t\t\tif (ret !== undefined) {\n\t\t\t\ts = this.#source(0);\n\n\t\t\t\tif (DEV) {\n\t\t\t\t\ttag(s, `SvelteMap get(${label(key)})`);\n\t\t\t\t}\n\n\t\t\t\tsources.set(key, s);\n\t\t\t} else {\n\t\t\t\t// We should always track the version in case\n\t\t\t\t// the Set ever gets this value in the future.\n\t\t\t\tget(this.#version);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tget(s);\n\t\treturn true;\n\t}\n\n\t/**\n\t * @param {(value: V, key: K, map: Map<K, V>) => void} callbackfn\n\t * @param {any} [this_arg]\n\t */\n\tforEach(callbackfn, this_arg) {\n\t\tthis.#read_all();\n\t\tsuper.forEach(callbackfn, this_arg);\n\t}\n\n\t/** @param {K} key */\n\tget(key) {\n\t\tvar sources = this.#sources;\n\t\tvar s = sources.get(key);\n\n\t\tif (s === undefined) {\n\t\t\tvar ret = super.get(key);\n\t\t\tif (ret !== undefined) {\n\t\t\t\ts = this.#source(0);\n\n\t\t\t\tif (DEV) {\n\t\t\t\t\ttag(s, `SvelteMap get(${label(key)})`);\n\t\t\t\t}\n\n\t\t\t\tsources.set(key, s);\n\t\t\t} else {\n\t\t\t\t// We should always track the version in case\n\t\t\t\t// the Set ever gets this value in the future.\n\t\t\t\tget(this.#version);\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\n\t\tget(s);\n\t\treturn super.get(key);\n\t}\n\n\t/**\n\t * @param {K} key\n\t * @param {V} value\n\t * */\n\tset(key, value) {\n\t\tvar sources = this.#sources;\n\t\tvar s = sources.get(key);\n\t\tvar prev_res = super.get(key);\n\t\tvar res = super.set(key, value);\n\t\tvar version = this.#version;\n\n\t\tif (s === undefined) {\n\t\t\ts = this.#source(0);\n\n\t\t\tif (DEV) {\n\t\t\t\ttag(s, `SvelteMap get(${label(key)})`);\n\t\t\t}\n\n\t\t\tsources.set(key, s);\n\t\t\tset(this.#size, super.size);\n\t\t\tincrement(version);\n\t\t} else if (prev_res !== value) {\n\t\t\tincrement(s);\n\n\t\t\t// if not every reaction of s is a reaction of version we need to also include version\n\t\t\tvar v_reactions = version.reactions === null ? null : new Set(version.reactions);\n\t\t\tvar needs_version_increase =\n\t\t\t\tv_reactions === null ||\n\t\t\t\t!s.reactions?.every((r) =>\n\t\t\t\t\t/** @type {NonNullable<typeof v_reactions>} */ (v_reactions).has(r)\n\t\t\t\t);\n\t\t\tif (needs_version_increase) {\n\t\t\t\tincrement(version);\n\t\t\t}\n\t\t}\n\n\t\treturn res;\n\t}\n\n\t/** @param {K} key */\n\tdelete(key) {\n\t\tvar sources = this.#sources;\n\t\tvar s = sources.get(key);\n\t\tvar res = super.delete(key);\n\n\t\tif (s !== undefined) {\n\t\t\tsources.delete(key);\n\t\t\tset(this.#size, super.size);\n\t\t\tset(s, -1);\n\t\t\tincrement(this.#version);\n\t\t}\n\n\t\treturn res;\n\t}\n\n\tclear() {\n\t\tif (super.size === 0) {\n\t\t\treturn;\n\t\t}\n\t\t// Clear first, so we get nice console.log outputs with $inspect\n\t\tsuper.clear();\n\t\tvar sources = this.#sources;\n\t\tset(this.#size, 0);\n\t\tfor (var s of sources.values()) {\n\t\t\tset(s, -1);\n\t\t}\n\t\tincrement(this.#version);\n\t\tsources.clear();\n\t}\n\n\t#read_all() {\n\t\tget(this.#version);\n\n\t\tvar sources = this.#sources;\n\t\tif (this.#size.v !== sources.size) {\n\t\t\tfor (var key of super.keys()) {\n\t\t\t\tif (!sources.has(key)) {\n\t\t\t\t\tvar s = this.#source(0);\n\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\ttag(s, `SvelteMap get(${label(key)})`);\n\t\t\t\t\t}\n\n\t\t\t\t\tsources.set(key, s);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor ([, s] of this.#sources) {\n\t\t\tget(s);\n\t\t}\n\t}\n\n\tkeys() {\n\t\tget(this.#version);\n\t\treturn super.keys();\n\t}\n\n\tvalues() {\n\t\tthis.#read_all();\n\t\treturn super.values();\n\t}\n\n\tentries() {\n\t\tthis.#read_all();\n\t\treturn super.entries();\n\t}\n\n\t[Symbol.iterator]() {\n\t\treturn this.entries();\n\t}\n\n\tget size() {\n\t\tget(this.#size);\n\t\treturn super.size;\n\t}\n}\n","import { defaultWindow, } from \"../../internal/configurable-globals.js\";\nimport { getActiveElement } from \"../../internal/utils/dom.js\";\nimport { on } from \"svelte/events\";\nimport { createSubscriber } from \"svelte/reactivity\";\nexport class ActiveElement {\n    #document;\n    #subscribe;\n    constructor(options = {}) {\n        const { window = defaultWindow, document = window?.document } = options;\n        if (window === undefined)\n            return;\n        this.#document = document;\n        this.#subscribe = createSubscriber((update) => {\n            const cleanupFocusIn = on(window, \"focusin\", update);\n            const cleanupFocusOut = on(window, \"focusout\", update);\n            return () => {\n                cleanupFocusIn();\n                cleanupFocusOut();\n            };\n        });\n    }\n    get current() {\n        this.#subscribe?.();\n        if (!this.#document)\n            return null;\n        return getActiveElement(this.#document);\n    }\n}\n/**\n * An object holding a reactive value that is equal to `document.activeElement`.\n * It automatically listens for changes, keeping the reference up to date.\n *\n * If you wish to use a custom document or shadowRoot, you should use\n * [useActiveElement](https://runed.dev/docs/utilities/active-element) instead.\n *\n * @see {@link https://runed.dev/docs/utilities/active-element}\n */\nexport const activeElement = new ActiveElement();\n","import { defaultDocument } from \"../configurable-globals.js\";\n/**\n * Handles getting the active element in a document or shadow root.\n * If the active element is within a shadow root, it will traverse the shadow root\n * to find the active element.\n * If not, it will return the active element in the document.\n *\n * @param document A document or shadow root to get the active element from.\n * @returns The active element in the document or shadow root.\n */\nexport function getActiveElement(document) {\n    let activeElement = document.activeElement;\n    while (activeElement?.shadowRoot) {\n        const node = activeElement.shadowRoot.activeElement;\n        if (node === activeElement)\n            break;\n        else\n            activeElement = node;\n    }\n    return activeElement;\n}\n/**\n * Returns the owner document of a given element.\n *\n * @param node The element to get the owner document from.\n * @returns\n */\nexport function getOwnerDocument(node, fallback = defaultDocument) {\n    return node?.ownerDocument ?? fallback;\n}\n/**\n * Checks if an element is or is contained by another element.\n *\n * @param node The element to check if it or its descendants contain the target element.\n * @param target The element to check if it is contained by the node.\n * @returns\n */\nexport function isOrContainsTarget(node, target) {\n    return node === target || node.contains(target);\n}\n","import { getContext, hasContext, setContext } from \"svelte\";\nexport class Context {\n    #name;\n    #key;\n    /**\n     * @param name The name of the context.\n     * This is used for generating the context key and error messages.\n     */\n    constructor(name) {\n        this.#name = name;\n        this.#key = Symbol(name);\n    }\n    /**\n     * The key used to get and set the context.\n     *\n     * It is not recommended to use this value directly.\n     * Instead, use the methods provided by this class.\n     */\n    get key() {\n        return this.#key;\n    }\n    /**\n     * Checks whether this has been set in the context of a parent component.\n     *\n     * Must be called during component initialisation.\n     */\n    exists() {\n        return hasContext(this.#key);\n    }\n    /**\n     * Retrieves the context that belongs to the closest parent component.\n     *\n     * Must be called during component initialisation.\n     *\n     * @throws An error if the context does not exist.\n     */\n    get() {\n        const context = getContext(this.#key);\n        if (context === undefined) {\n            throw new Error(`Context \"${this.#name}\" not found`);\n        }\n        return context;\n    }\n    /**\n     * Retrieves the context that belongs to the closest parent component,\n     * or the given fallback value if the context does not exist.\n     *\n     * Must be called during component initialisation.\n     */\n    getOr(fallback) {\n        const context = getContext(this.#key);\n        if (context === undefined) {\n            return fallback;\n        }\n        return context;\n    }\n    /**\n     * Associates the given value with the current component and returns it.\n     *\n     * Must be called during component initialisation.\n     */\n    set(context) {\n        return setContext(this.#key, context);\n    }\n}\n","import { untrack } from \"svelte\";\nfunction runEffect(flush, effect) {\n    switch (flush) {\n        case \"post\":\n            $effect(effect);\n            break;\n        case \"pre\":\n            $effect.pre(effect);\n            break;\n    }\n}\nfunction runWatcher(sources, flush, effect, options = {}) {\n    const { lazy = false } = options;\n    // Run the effect immediately if `lazy` is `false`.\n    let active = !lazy;\n    // On the first run, if the dependencies are an array, pass an empty array\n    // to the previous value instead of `undefined` to allow destructuring.\n    //\n    // watch(() => [a, b], ([a, b], [prevA, prevB]) => { ... });\n    let previousValues = Array.isArray(sources)\n        ? []\n        : undefined;\n    runEffect(flush, () => {\n        const values = Array.isArray(sources) ? sources.map((source) => source()) : sources();\n        if (!active) {\n            active = true;\n            previousValues = values;\n            return;\n        }\n        const cleanup = untrack(() => effect(values, previousValues));\n        previousValues = values;\n        return cleanup;\n    });\n}\nfunction runWatcherOnce(sources, flush, effect) {\n    const cleanupRoot = $effect.root(() => {\n        let stop = false;\n        runWatcher(sources, flush, (values, previousValues) => {\n            if (stop) {\n                cleanupRoot();\n                return;\n            }\n            // Since `lazy` is `true`, `previousValues` is always defined.\n            const cleanup = effect(values, previousValues);\n            stop = true;\n            return cleanup;\n        }, \n        // Running the effect immediately just once makes no sense at all.\n        // That's just `onMount` with extra steps.\n        { lazy: true });\n    });\n    $effect(() => {\n        return cleanupRoot;\n    });\n}\nexport function watch(sources, effect, options) {\n    runWatcher(sources, \"post\", effect, options);\n}\nfunction watchPre(sources, effect, options) {\n    runWatcher(sources, \"pre\", effect, options);\n}\nwatch.pre = watchPre;\nexport function watchOnce(source, effect) {\n    runWatcherOnce(source, \"post\", effect);\n}\nfunction watchOncePre(source, effect) {\n    runWatcherOnce(source, \"pre\", effect);\n}\nwatchOnce.pre = watchOncePre;\n","export function onDestroyEffect(fn) {\n    $effect(() => {\n        return () => {\n            fn();\n        };\n    });\n}\n","import { tick } from \"svelte\";\nexport function afterTick(fn) {\n    tick().then(fn);\n}\n","import { isObject } from \"./is.js\";\nconst ELEMENT_NODE = 1;\nconst DOCUMENT_NODE = 9;\nconst DOCUMENT_FRAGMENT_NODE = 11;\nexport function isHTMLElement(node) {\n    return isObject(node) && node.nodeType === ELEMENT_NODE && typeof node.nodeName === \"string\";\n}\nexport function isDocument(node) {\n    return isObject(node) && node.nodeType === DOCUMENT_NODE;\n}\nexport function isWindow(node) {\n    return isObject(node) && node.constructor?.name === \"VisualViewport\";\n}\nexport function getNodeName(node) {\n    if (isHTMLElement(node))\n        return node.localName ?? \"\";\n    return \"#document\";\n}\nexport function isNode(node) {\n    return isObject(node) && node.nodeType !== undefined;\n}\nexport function isShadowRoot(node) {\n    return isNode(node) && node.nodeType === DOCUMENT_FRAGMENT_NODE && \"host\" in node;\n}\nexport function contains(parent, child) {\n    if (!parent || !child)\n        return false;\n    if (!isHTMLElement(parent) || !isHTMLElement(child))\n        return false;\n    const rootNode = child.getRootNode?.();\n    if (parent === child)\n        return true;\n    if (parent.contains(child))\n        return true;\n    if (rootNode && isShadowRoot(rootNode)) {\n        let next = child;\n        while (next) {\n            if (parent === next)\n                return true;\n            // @ts-expect-error - host is not typed\n            next = next.parentNode || next.host;\n        }\n    }\n    return false;\n}\nexport function getDocument(node) {\n    if (isDocument(node))\n        return node;\n    if (isWindow(node))\n        return node.document;\n    return node?.ownerDocument ?? document;\n}\nexport function getDocumentElement(node) {\n    return getDocument(node).documentElement;\n}\nexport function getWindow(node) {\n    if (isShadowRoot(node))\n        return getWindow(node.host);\n    if (isDocument(node))\n        return node.defaultView ?? window;\n    if (isHTMLElement(node))\n        return node.ownerDocument?.defaultView ?? window;\n    return window;\n}\nexport function getActiveElement(rootNode) {\n    let activeElement = rootNode.activeElement;\n    while (activeElement?.shadowRoot) {\n        const el = activeElement.shadowRoot.activeElement;\n        if (el === activeElement)\n            break;\n        else\n            activeElement = el;\n    }\n    return activeElement;\n}\nexport function getParentNode(node) {\n    if (getNodeName(node) === \"html\")\n        return node;\n    const result = \n    // @ts-expect-error - assignedSlot is not typed\n    node.assignedSlot ||\n        node.parentNode ||\n        (isShadowRoot(node) && node.host) ||\n        getDocumentElement(node);\n    return isShadowRoot(result) ? result.host : result;\n}\n","import { boxWith } from \"../box/box-extras.svelte.js\";\nimport { getActiveElement, getDocument } from \"./dom.js\";\nexport class DOMContext {\n    element;\n    root = $derived.by(() => {\n        if (!this.element.current)\n            return document;\n        const rootNode = this.element.current.getRootNode() ?? document;\n        return rootNode;\n    });\n    constructor(element) {\n        if (typeof element === \"function\") {\n            this.element = boxWith(element);\n        }\n        else {\n            this.element = element;\n        }\n    }\n    getDocument = () => {\n        return getDocument(this.root);\n    };\n    getWindow = () => {\n        return this.getDocument().defaultView ?? window;\n    };\n    getActiveElement = () => {\n        return getActiveElement(this.root);\n    };\n    isActiveElement = (node) => {\n        return node === this.getActiveElement();\n    };\n    getElementById(id) {\n        return this.root.getElementById(id);\n    }\n    querySelector = (selector) => {\n        if (!this.root)\n            return null;\n        return this.root.querySelector(selector);\n    };\n    querySelectorAll = (selector) => {\n        if (!this.root)\n            return [];\n        return this.root.querySelectorAll(selector);\n    };\n    setTimeout = (callback, delay) => {\n        return this.getWindow().setTimeout(callback, delay);\n    };\n    clearTimeout = (timeoutId) => {\n        return this.getWindow().clearTimeout(timeoutId);\n    };\n}\n","import { untrack } from \"svelte\";\nimport { isBox } from \"../box/box-extras.svelte.js\";\nimport { createAttachmentKey } from \"svelte/attachments\";\n/**\n * Creates a Svelte Attachment that attaches a DOM element to a ref.\n * The ref can be either a WritableBox or a callback function.\n *\n * @param ref - Either a WritableBox to store the element in, or a callback function that receives the element\n * @param onChange - Optional callback that fires when the ref changes\n * @returns An object with a spreadable attachment key that should be spread onto the element\n *\n * @example\n * // Using with WritableBox\n * const ref = box<HTMLDivElement | null>(null);\n * <div {...attachRef(ref)}>Content</div>\n *\n * @example\n * // Using with callback\n * <div {...attachRef((node) => myNode = node)}>Content</div>\n *\n * @example\n * // Using with onChange\n * <div {...attachRef(ref, (node) => console.log(node))}>Content</div>\n */\nexport function attachRef(ref, onChange) {\n    return {\n        [createAttachmentKey()]: (node) => {\n            if (isBox(ref)) {\n                ref.current = node;\n                untrack(() => onChange?.(node));\n                return () => {\n                    // we don't want to detach the node if it's still connected\n                    if (\"isConnected\" in node && node.isConnected)\n                        return;\n                    ref.current = null;\n                    onChange?.(null);\n                };\n            }\n            ref(node);\n            untrack(() => onChange?.(node));\n            return () => {\n                // we don't want to detach the node if it's still connected\n                if (\"isConnected\" in node && node.isConnected)\n                    return;\n                ref(null);\n                onChange?.(null);\n            };\n        }\n    };\n}\n","export function boolToStr(condition) {\n    return condition ? \"true\" : \"false\";\n}\nexport function boolToStrTrueOrUndef(condition) {\n    return condition ? \"true\" : undefined;\n}\nexport function boolToEmptyStrOrUndef(condition) {\n    return condition ? \"\" : undefined;\n}\nexport function boolToTrueOrUndef(condition) {\n    return condition ? true : undefined;\n}\nexport function getDataOpenClosed(condition) {\n    return condition ? \"open\" : \"closed\";\n}\nexport function getDataChecked(condition) {\n    return condition ? \"checked\" : \"unchecked\";\n}\nexport function getAriaChecked(checked, indeterminate) {\n    if (indeterminate) {\n        return \"mixed\";\n    }\n    return checked ? \"true\" : \"false\";\n}\nexport class BitsAttrs {\n    #variant;\n    #prefix;\n    attrs;\n    constructor(config) {\n        this.#variant = config.getVariant ? config.getVariant() : null;\n        this.#prefix = this.#variant ? `data-${this.#variant}-` : `data-${config.component}-`;\n        this.getAttr = this.getAttr.bind(this);\n        this.selector = this.selector.bind(this);\n        this.attrs = Object.fromEntries(config.parts.map((part) => [part, this.getAttr(part)]));\n    }\n    getAttr(part, variantOverride) {\n        if (variantOverride)\n            return `data-${variantOverride}-${part}`;\n        return `${this.#prefix}${part}`;\n    }\n    selector(part, variantOverride) {\n        return `[${this.getAttr(part, variantOverride)}]`;\n    }\n}\nexport function createBitsAttrs(config) {\n    const bitsAttrs = new BitsAttrs(config);\n    return {\n        ...bitsAttrs.attrs,\n        selector: bitsAttrs.selector,\n        getAttr: bitsAttrs.getAttr,\n    };\n}\n","export const ALT = \"Alt\";\nexport const ARROW_DOWN = \"ArrowDown\";\nexport const ARROW_LEFT = \"ArrowLeft\";\nexport const ARROW_RIGHT = \"ArrowRight\";\nexport const ARROW_UP = \"ArrowUp\";\nexport const BACKSPACE = \"Backspace\";\nexport const CAPS_LOCK = \"CapsLock\";\nexport const CONTROL = \"Control\";\nexport const DELETE = \"Delete\";\nexport const END = \"End\";\nexport const ENTER = \"Enter\";\nexport const ESCAPE = \"Escape\";\nexport const F1 = \"F1\";\nexport const F10 = \"F10\";\nexport const F11 = \"F11\";\nexport const F12 = \"F12\";\nexport const F2 = \"F2\";\nexport const F3 = \"F3\";\nexport const F4 = \"F4\";\nexport const F5 = \"F5\";\nexport const F6 = \"F6\";\nexport const F7 = \"F7\";\nexport const F8 = \"F8\";\nexport const F9 = \"F9\";\nexport const HOME = \"Home\";\nexport const META = \"Meta\";\nexport const PAGE_DOWN = \"PageDown\";\nexport const PAGE_UP = \"PageUp\";\nexport const SHIFT = \"Shift\";\nexport const SPACE = \" \";\nexport const TAB = \"Tab\";\nexport const CTRL = \"Control\";\nexport const ASTERISK = \"*\";\nexport const a = \"a\";\nexport const P = \"P\";\nexport const A = \"A\";\nexport const p = \"p\";\nexport const n = \"n\";\nexport const j = \"j\";\nexport const k = \"k\";\nexport const h = \"h\";\nexport const l = \"l\";\n","export const isBrowser = typeof document !== \"undefined\";\nexport const isIOS = getIsIOS();\nfunction getIsIOS() {\n    return (isBrowser &&\n        window?.navigator?.userAgent &&\n        (/iP(ad|hone|od)/.test(window.navigator.userAgent) ||\n            // The new iPad Pro Gen3 does not identify itself as iPad, but as Macintosh.\n            (window?.navigator?.maxTouchPoints > 2 &&\n                /iPad|Macintosh/.test(window?.navigator.userAgent))));\n}\nexport function isFunction(value) {\n    return typeof value === \"function\";\n}\nexport function isHTMLElement(element) {\n    return element instanceof HTMLElement;\n}\nexport function isElement(element) {\n    return element instanceof Element;\n}\nexport function isElementOrSVGElement(element) {\n    return element instanceof Element || element instanceof SVGElement;\n}\nexport function isNumberString(value) {\n    return !Number.isNaN(Number(value)) && !Number.isNaN(Number.parseFloat(value));\n}\nexport function isNull(value) {\n    return value === null;\n}\nexport function isTouch(e) {\n    return e.pointerType === \"touch\";\n}\nexport function isFocusVisible(element) {\n    return element.matches(\":focus-visible\");\n}\nexport function isNotNull(value) {\n    return value !== null;\n}\n/**\n * Determines if the provided object is a valid `HTMLInputElement` with\n * a `select` method available.\n */\nexport function isSelectableInput(element) {\n    return element instanceof HTMLInputElement && \"select\" in element;\n}\n/**\n * Given a node, determine if it is hidden by walking up the\n * DOM tree until we hit the `stopAt` node (exclusive), if provided)\n * otherwise we stop at the document root.\n */\nexport function isElementHidden(node, stopAt) {\n    if (getComputedStyle(node).visibility === \"hidden\")\n        return true;\n    while (node) {\n        // we stop at `upTo` (excluding it)\n        if (stopAt !== undefined && node === stopAt)\n            return false;\n        if (getComputedStyle(node).display === \"none\")\n            return true;\n        node = node.parentElement;\n    }\n    return false;\n}\n","import { afterTick, onDestroyEffect } from \"svelte-toolbelt\";\nexport class AnimationsComplete {\n    #opts;\n    #currentFrame = null;\n    constructor(opts) {\n        this.#opts = opts;\n        onDestroyEffect(() => this.#cleanup());\n    }\n    #cleanup() {\n        if (!this.#currentFrame)\n            return;\n        window.cancelAnimationFrame(this.#currentFrame);\n        this.#currentFrame = null;\n    }\n    run(fn) {\n        // if already running, cleanup and restart\n        this.#cleanup();\n        const node = this.#opts.ref.current;\n        if (!node)\n            return;\n        if (typeof node.getAnimations !== \"function\") {\n            this.#executeCallback(fn);\n            return;\n        }\n        this.#currentFrame = window.requestAnimationFrame(() => {\n            const animations = node.getAnimations();\n            if (animations.length === 0) {\n                this.#executeCallback(fn);\n                return;\n            }\n            Promise.allSettled(animations.map((animation) => animation.finished)).then(() => {\n                this.#executeCallback(fn);\n            });\n        });\n    }\n    #executeCallback(fn) {\n        const execute = () => {\n            fn();\n        };\n        if (this.#opts.afterTick) {\n            afterTick(execute);\n        }\n        else {\n            execute();\n        }\n    }\n}\n","import { watch } from \"runed\";\nimport { AnimationsComplete } from \"./animations-complete.js\";\nexport class PresenceManager {\n    #opts;\n    #enabled;\n    #afterAnimations;\n    #shouldRender = $state(false);\n    constructor(opts) {\n        this.#opts = opts;\n        this.#shouldRender = opts.open.current;\n        this.#enabled = opts.enabled ?? true;\n        this.#afterAnimations = new AnimationsComplete({\n            ref: this.#opts.ref,\n            afterTick: this.#opts.open,\n        });\n        watch(() => this.#opts.open.current, (isOpen) => {\n            if (isOpen)\n                this.#shouldRender = true;\n            if (!this.#enabled)\n                return;\n            this.#afterAnimations.run(() => {\n                if (isOpen === this.#opts.open.current) {\n                    if (!this.#opts.open.current) {\n                        this.#shouldRender = false;\n                    }\n                    this.#opts.onComplete?.();\n                }\n            });\n        });\n    }\n    get shouldRender() {\n        return this.#shouldRender;\n    }\n}\n","/**\n * A no operation function (does nothing)\n */\nexport function noop() { }\n","export function createId(prefixOrUid, uid) {\n    if (uid === undefined)\n        return `bits-${prefixOrUid}`;\n    return `bits-${prefixOrUid}-${uid}`;\n}\n","import { attachRef, boxWith, onDestroyEffect, } from \"svelte-toolbelt\";\nimport { Context, watch } from \"runed\";\nimport { createBitsAttrs, boolToStr, getDataOpenClosed, boolToEmptyStrOrUndef, } from \"../../internal/attrs.js\";\nimport { kbd } from \"../../internal/kbd.js\";\nimport { PresenceManager } from \"../../internal/presence-manager.svelte.js\";\nconst dialogAttrs = createBitsAttrs({\n    component: \"dialog\",\n    parts: [\"content\", \"trigger\", \"overlay\", \"title\", \"description\", \"close\", \"cancel\", \"action\"],\n});\nconst DialogRootContext = new Context(\"Dialog.Root | AlertDialog.Root\");\nexport class DialogRootState {\n    static create(opts) {\n        const parent = DialogRootContext.getOr(null);\n        return DialogRootContext.set(new DialogRootState(opts, parent));\n    }\n    opts;\n    triggerNode = $state(null);\n    contentNode = $state(null);\n    overlayNode = $state(null);\n    descriptionNode = $state(null);\n    contentId = $state(undefined);\n    titleId = $state(undefined);\n    triggerId = $state(undefined);\n    descriptionId = $state(undefined);\n    cancelNode = $state(null);\n    nestedOpenCount = $state(0);\n    depth;\n    parent;\n    contentPresence;\n    overlayPresence;\n    constructor(opts, parent) {\n        this.opts = opts;\n        this.parent = parent;\n        this.depth = parent ? parent.depth + 1 : 0;\n        this.handleOpen = this.handleOpen.bind(this);\n        this.handleClose = this.handleClose.bind(this);\n        this.contentPresence = new PresenceManager({\n            ref: boxWith(() => this.contentNode),\n            open: this.opts.open,\n            enabled: true,\n            onComplete: () => {\n                this.opts.onOpenChangeComplete.current(this.opts.open.current);\n            },\n        });\n        this.overlayPresence = new PresenceManager({\n            ref: boxWith(() => this.overlayNode),\n            open: this.opts.open,\n            enabled: true,\n        });\n        watch(() => this.opts.open.current, (isOpen) => {\n            if (!this.parent)\n                return;\n            if (isOpen) {\n                this.parent.incrementNested();\n            }\n            else {\n                this.parent.decrementNested();\n            }\n        }, { lazy: true });\n        onDestroyEffect(() => {\n            if (this.opts.open.current) {\n                this.parent?.decrementNested();\n            }\n        });\n    }\n    handleOpen() {\n        if (this.opts.open.current)\n            return;\n        this.opts.open.current = true;\n    }\n    handleClose() {\n        if (!this.opts.open.current)\n            return;\n        this.opts.open.current = false;\n    }\n    getBitsAttr = (part) => {\n        return dialogAttrs.getAttr(part, this.opts.variant.current);\n    };\n    incrementNested() {\n        this.nestedOpenCount++;\n        this.parent?.incrementNested();\n    }\n    decrementNested() {\n        if (this.nestedOpenCount === 0)\n            return;\n        this.nestedOpenCount--;\n        this.parent?.decrementNested();\n    }\n    sharedProps = $derived.by(() => ({\n        \"data-state\": getDataOpenClosed(this.opts.open.current),\n    }));\n}\nexport class DialogTriggerState {\n    static create(opts) {\n        return new DialogTriggerState(opts, DialogRootContext.get());\n    }\n    opts;\n    root;\n    attachment;\n    constructor(opts, root) {\n        this.opts = opts;\n        this.root = root;\n        this.attachment = attachRef(this.opts.ref, (v) => {\n            this.root.triggerNode = v;\n            this.root.triggerId = v?.id;\n        });\n        this.onclick = this.onclick.bind(this);\n        this.onkeydown = this.onkeydown.bind(this);\n    }\n    onclick(e) {\n        if (this.opts.disabled.current)\n            return;\n        if (e.button > 0)\n            return;\n        this.root.handleOpen();\n    }\n    onkeydown(e) {\n        if (this.opts.disabled.current)\n            return;\n        if (e.key === kbd.SPACE || e.key === kbd.ENTER) {\n            e.preventDefault();\n            this.root.handleOpen();\n        }\n    }\n    props = $derived.by(() => ({\n        id: this.opts.id.current,\n        \"aria-haspopup\": \"dialog\",\n        \"aria-expanded\": boolToStr(this.root.opts.open.current),\n        \"aria-controls\": this.root.contentId,\n        [this.root.getBitsAttr(\"trigger\")]: \"\",\n        onkeydown: this.onkeydown,\n        onclick: this.onclick,\n        disabled: this.opts.disabled.current ? true : undefined,\n        ...this.root.sharedProps,\n        ...this.attachment,\n    }));\n}\nexport class DialogCloseState {\n    static create(opts) {\n        return new DialogCloseState(opts, DialogRootContext.get());\n    }\n    opts;\n    root;\n    attachment;\n    constructor(opts, root) {\n        this.opts = opts;\n        this.root = root;\n        this.attachment = attachRef(this.opts.ref);\n        this.onclick = this.onclick.bind(this);\n        this.onkeydown = this.onkeydown.bind(this);\n    }\n    onclick(e) {\n        if (this.opts.disabled.current)\n            return;\n        if (e.button > 0)\n            return;\n        this.root.handleClose();\n    }\n    onkeydown(e) {\n        if (this.opts.disabled.current)\n            return;\n        if (e.key === kbd.SPACE || e.key === kbd.ENTER) {\n            e.preventDefault();\n            this.root.handleClose();\n        }\n    }\n    props = $derived.by(() => ({\n        id: this.opts.id.current,\n        [this.root.getBitsAttr(this.opts.variant.current)]: \"\",\n        onclick: this.onclick,\n        onkeydown: this.onkeydown,\n        disabled: this.opts.disabled.current ? true : undefined,\n        tabindex: 0,\n        ...this.root.sharedProps,\n        ...this.attachment,\n    }));\n}\nexport class DialogActionState {\n    static create(opts) {\n        return new DialogActionState(opts, DialogRootContext.get());\n    }\n    opts;\n    root;\n    attachment;\n    constructor(opts, root) {\n        this.opts = opts;\n        this.root = root;\n        this.attachment = attachRef(this.opts.ref);\n    }\n    props = $derived.by(() => ({\n        id: this.opts.id.current,\n        [this.root.getBitsAttr(\"action\")]: \"\",\n        ...this.root.sharedProps,\n        ...this.attachment,\n    }));\n}\nexport class DialogTitleState {\n    static create(opts) {\n        return new DialogTitleState(opts, DialogRootContext.get());\n    }\n    opts;\n    root;\n    attachment;\n    constructor(opts, root) {\n        this.opts = opts;\n        this.root = root;\n        this.root.titleId = this.opts.id.current;\n        this.attachment = attachRef(this.opts.ref);\n        watch.pre(() => this.opts.id.current, (id) => {\n            this.root.titleId = id;\n        });\n    }\n    props = $derived.by(() => ({\n        id: this.opts.id.current,\n        role: \"heading\",\n        \"aria-level\": this.opts.level.current,\n        [this.root.getBitsAttr(\"title\")]: \"\",\n        ...this.root.sharedProps,\n        ...this.attachment,\n    }));\n}\nexport class DialogDescriptionState {\n    static create(opts) {\n        return new DialogDescriptionState(opts, DialogRootContext.get());\n    }\n    opts;\n    root;\n    attachment;\n    constructor(opts, root) {\n        this.opts = opts;\n        this.root = root;\n        this.root.descriptionId = this.opts.id.current;\n        this.attachment = attachRef(this.opts.ref, (v) => {\n            this.root.descriptionNode = v;\n        });\n        watch.pre(() => this.opts.id.current, (id) => {\n            this.root.descriptionId = id;\n        });\n    }\n    props = $derived.by(() => ({\n        id: this.opts.id.current,\n        [this.root.getBitsAttr(\"description\")]: \"\",\n        ...this.root.sharedProps,\n        ...this.attachment,\n    }));\n}\nexport class DialogContentState {\n    static create(opts) {\n        return new DialogContentState(opts, DialogRootContext.get());\n    }\n    opts;\n    root;\n    attachment;\n    constructor(opts, root) {\n        this.opts = opts;\n        this.root = root;\n        this.attachment = attachRef(this.opts.ref, (v) => {\n            this.root.contentNode = v;\n            this.root.contentId = v?.id;\n        });\n    }\n    snippetProps = $derived.by(() => ({ open: this.root.opts.open.current }));\n    props = $derived.by(() => ({\n        id: this.opts.id.current,\n        role: this.root.opts.variant.current === \"alert-dialog\" ? \"alertdialog\" : \"dialog\",\n        \"aria-modal\": \"true\",\n        \"aria-describedby\": this.root.descriptionId,\n        \"aria-labelledby\": this.root.titleId,\n        [this.root.getBitsAttr(\"content\")]: \"\",\n        style: {\n            pointerEvents: \"auto\",\n            outline: this.root.opts.variant.current === \"alert-dialog\" ? \"none\" : undefined,\n            \"--bits-dialog-depth\": this.root.depth,\n            \"--bits-dialog-nested-count\": this.root.nestedOpenCount,\n        },\n        tabindex: this.root.opts.variant.current === \"alert-dialog\" ? -1 : undefined,\n        \"data-nested-open\": boolToEmptyStrOrUndef(this.root.nestedOpenCount > 0),\n        \"data-nested\": boolToEmptyStrOrUndef(this.root.parent !== null),\n        ...this.root.sharedProps,\n        ...this.attachment,\n    }));\n    get shouldRender() {\n        return this.root.contentPresence.shouldRender;\n    }\n}\nexport class DialogOverlayState {\n    static create(opts) {\n        return new DialogOverlayState(opts, DialogRootContext.get());\n    }\n    opts;\n    root;\n    attachment;\n    constructor(opts, root) {\n        this.opts = opts;\n        this.root = root;\n        this.attachment = attachRef(this.opts.ref, (v) => (this.root.overlayNode = v));\n    }\n    snippetProps = $derived.by(() => ({ open: this.root.opts.open.current }));\n    props = $derived.by(() => ({\n        id: this.opts.id.current,\n        [this.root.getBitsAttr(\"overlay\")]: \"\",\n        style: {\n            pointerEvents: \"auto\",\n            \"--bits-dialog-depth\": this.root.depth,\n            \"--bits-dialog-nested-count\": this.root.nestedOpenCount,\n        },\n        \"data-nested-open\": boolToEmptyStrOrUndef(this.root.nestedOpenCount > 0),\n        \"data-nested\": boolToEmptyStrOrUndef(this.root.parent !== null),\n        ...this.root.sharedProps,\n        ...this.attachment,\n    }));\n    get shouldRender() {\n        return this.root.overlayPresence.shouldRender;\n    }\n}\nexport class AlertDialogCancelState {\n    static create(opts) {\n        return new AlertDialogCancelState(opts, DialogRootContext.get());\n    }\n    opts;\n    root;\n    attachment;\n    constructor(opts, root) {\n        this.opts = opts;\n        this.root = root;\n        this.attachment = attachRef(this.opts.ref, (v) => (this.root.cancelNode = v));\n        this.onclick = this.onclick.bind(this);\n        this.onkeydown = this.onkeydown.bind(this);\n    }\n    onclick(e) {\n        if (this.opts.disabled.current)\n            return;\n        if (e.button > 0)\n            return;\n        this.root.handleClose();\n    }\n    onkeydown(e) {\n        if (this.opts.disabled.current)\n            return;\n        if (e.key === kbd.SPACE || e.key === kbd.ENTER) {\n            e.preventDefault();\n            this.root.handleClose();\n        }\n    }\n    props = $derived.by(() => ({\n        id: this.opts.id.current,\n        [this.root.getBitsAttr(\"cancel\")]: \"\",\n        onclick: this.onclick,\n        onkeydown: this.onkeydown,\n        tabindex: 0,\n        ...this.root.sharedProps,\n        ...this.attachment,\n    }));\n}\n","<script lang=\"ts\">\n\timport { boxWith, mergeProps } from \"svelte-toolbelt\";\n\timport { DialogTitleState } from \"../dialog.svelte.js\";\n\timport type { DialogTitleProps } from \"../types.js\";\n\timport { createId } from \"../../../internal/create-id.js\";\n\n\tconst uid = $props.id();\n\n\tlet {\n\t\tid = createId(uid),\n\t\tref = $bindable(null),\n\t\tchild,\n\t\tchildren,\n\t\tlevel = 2,\n\t\t...restProps\n\t}: DialogTitleProps = $props();\n\n\tconst titleState = DialogTitleState.create({\n\t\tid: boxWith(() => id),\n\t\tlevel: boxWith(() => level),\n\t\tref: boxWith(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t});\n\n\tconst mergedProps = $derived(mergeProps(restProps, titleState.props));\n</script>\n\n{#if child}\n\t{@render child({ props: mergedProps })}\n{:else}\n\t<div {...mergedProps}>\n\t\t{@render children?.()}\n\t</div>\n{/if}\n","/** @import { TemplateNode } from '#client' */\nimport { is_runes } from '../../context.js';\nimport { block } from '../../reactivity/effects.js';\nimport { hydrate_next, hydrating } from '../hydration.js';\nimport { BranchManager } from './branches.js';\n\n/**\n * @template V\n * @param {TemplateNode} node\n * @param {() => V} get_key\n * @param {(anchor: Node) => TemplateNode | void} render_fn\n * @returns {void}\n */\nexport function key(node, get_key, render_fn) {\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\tvar branches = new BranchManager(node);\n\n\tvar legacy = !is_runes();\n\n\tblock(() => {\n\t\tvar key = get_key();\n\n\t\t// key blocks in Svelte <5 had stupid semantics\n\t\tif (legacy && key !== null && typeof key === 'object') {\n\t\t\tkey = /** @type {V} */ ({});\n\t\t}\n\n\t\tbranches.ensure(key, render_fn);\n\t});\n}\n","<script lang=\"ts\">\n\timport type { Snippet } from \"svelte\";\n\n\tconst { children }: { children?: Snippet } = $props();\n</script>\n\n{#key children}\n\t{@render children?.()}\n{/key}\n","import { Context } from \"runed\";\nimport { boxWith } from \"svelte-toolbelt\";\nexport const BitsConfigContext = new Context(\"BitsConfig\");\n/**\n * Gets the current Bits UI configuration state from the context.\n *\n * Returns a default configuration (where all values are `undefined`) if no configuration is found.\n */\nexport function getBitsConfig() {\n    const fallback = new BitsConfigState(null, {});\n    return BitsConfigContext.getOr(fallback).opts;\n}\n/**\n * Creates and sets a new Bits UI configuration state that inherits from parent configs.\n *\n * @param opts - Configuration options for this level\n * @returns The configuration state instance\n *\n * @example\n * ```typescript\n * // In a component that wants to set a default portal target\n * const config = useBitsConfig({ defaultPortalTo: box(\"#some-element\") });\n *\n * // Child components will inherit this config and can override specific values\n * const childConfig = useBitsConfig({ someOtherProp: box(\"value\") });\n * // childConfig still has defaultPortalTo=\"#some-element\" from parent\n * ```\n */\nexport function useBitsConfig(opts) {\n    return BitsConfigContext.set(new BitsConfigState(BitsConfigContext.getOr(null), opts));\n}\n/**\n * Configuration state that inherits from parent configurations.\n *\n * @example\n * Config resolution:\n * ```\n * Level 1: { defaultPortalTo: \"#some-element\", theme: \"dark\" }\n * Level 2: { spacing: \"large\" } // inherits defaultPortalTo=\"#some-element\", theme=\"dark\"\n * Level 3: { theme: \"light\" }   // inherits defaultPortalTo=\"#some-element\", spacing=\"large\", overrides theme=\"light\"\n * ```\n */\nexport class BitsConfigState {\n    opts;\n    constructor(parent, opts) {\n        const resolveConfigOption = createConfigResolver(parent, opts);\n        this.opts = {\n            defaultPortalTo: resolveConfigOption((config) => config.defaultPortalTo),\n            defaultLocale: resolveConfigOption((config) => config.defaultLocale),\n        };\n    }\n}\n/**\n * Returns a config resolver that resolves a given config option's value.\n *\n * The resolver creates reactive boxes that resolve config option values using this priority:\n * 1. Current level's value (if defined)\n * 2. Parent level's value (if defined and current is undefined)\n * 3. `undefined` (if no value is found in either parent or child)\n *\n * @param parent - Parent configuration state (null if this is root level)\n * @param currentOpts - Current level's configuration options\n *\n * @example\n * ```typescript\n * // Given this hierarchy:\n * // Root: { defaultPortalTo: \"#some-element\" }\n * // Child: { someOtherProp: \"value\" } // no defaultPortalTo specified\n *\n * const resolveConfigOption = createConfigResolver(parent, opts);\n * const portalTo = resolveConfigOption(config => config.defaultPortalTo);\n *\n * // portalTo.current === \"#some-element\" (inherited from parent)\n * // even when child didn't specify `defaultPortalTo`\n * ```\n */\nfunction createConfigResolver(parent, currentOpts) {\n    return (getter) => {\n        const configOption = boxWith(() => {\n            // try current opts first\n            const value = getter(currentOpts)?.current;\n            if (value !== undefined)\n                return value;\n            // if no parent, return undefined\n            if (parent === null)\n                return undefined;\n            // get value from parent (which already has its own chain resolved)\n            return getter(parent.opts)?.current;\n        });\n        return configOption;\n    };\n}\n","import { boxWith } from \"svelte-toolbelt\";\nimport { getBitsConfig } from \"./bits-config.js\";\n/**\n * Creates a generic prop resolver that follows a standard priority chain:\n * 1. The getter's prop value (if defined)\n * 2. The config default value (if no getter prop value is defined)\n * 3. The fallback value (if no config value found)\n */\nfunction createPropResolver(configOption, fallback) {\n    return (getProp) => {\n        const config = getBitsConfig();\n        return boxWith(() => {\n            // 1. return the prop's value, if provided\n            const propValue = getProp();\n            if (propValue !== undefined)\n                return propValue;\n            // 2. return the resolved config option value, if available\n            const option = configOption(config).current;\n            if (option !== undefined)\n                return option;\n            // 3. return the fallback if no other value is found\n            return fallback;\n        });\n    };\n}\n/**\n * Resolves a locale value using the prop, the config default, or a fallback.\n *\n * Default value: `\"en\"`\n */\nexport const resolveLocaleProp = createPropResolver((config) => config.defaultLocale, \"en\");\n/**\n * Resolves a portal's `to` value using the prop, the config default, or a fallback.\n *\n * Default value: `\"body\"`\n */\nexport const resolvePortalToProp = createPropResolver((config) => config.defaultPortalTo, \"body\");\n","<script lang=\"ts\">\n\timport { getAllContexts, mount, unmount } from \"svelte\";\n\timport { DEV } from \"esm-env\";\n\timport { watch } from \"runed\";\n\timport PortalConsumer from \"./portal-consumer.svelte\";\n\timport type { PortalProps } from \"./types.js\";\n\timport { isBrowser } from \"../../../internal/is.js\";\n\timport { resolvePortalToProp } from \"../config/prop-resolvers.js\";\n\n\tlet { to: toProp, children, disabled }: PortalProps = $props();\n\n\tconst to = resolvePortalToProp(() => toProp);\n\tconst context = getAllContexts();\n\n\tlet target = $derived(getTarget());\n\n\tfunction getTarget() {\n\t\tif (!isBrowser || disabled) return null;\n\n\t\tlet localTarget: Element | null = null;\n\n\t\tif (typeof to.current === \"string\") {\n\t\t\tconst target = document.querySelector(to.current);\n\t\t\tif (DEV && target === null) {\n\t\t\t\tthrow new Error(`Target element \"${to.current}\" not found.`);\n\t\t\t}\n\t\t\tlocalTarget = target;\n\t\t} else {\n\t\t\tlocalTarget = to.current;\n\t\t}\n\n\t\tif (DEV && !(localTarget instanceof Element)) {\n\t\t\tconst type = localTarget === null ? \"null\" : typeof localTarget;\n\t\t\tthrow new TypeError(\n\t\t\t\t`Unknown portal target type: ${type}. Allowed types: string (query selector) or Element.`\n\t\t\t);\n\t\t}\n\n\t\treturn localTarget;\n\t}\n\n\tlet instance: ReturnType<typeof mount> | null;\n\n\tfunction unmountInstance() {\n\t\tif (instance) {\n\t\t\tunmount(instance);\n\t\t\tinstance = null;\n\t\t}\n\t}\n\n\twatch([() => target, () => disabled], ([target, disabled]) => {\n\t\tif (!target || disabled) {\n\t\t\tunmountInstance();\n\t\t\treturn;\n\t\t}\n\t\tinstance = mount(PortalConsumer, {\n\t\t\ttarget: target,\n\t\t\tprops: { children },\n\t\t\tcontext,\n\t\t});\n\n\t\treturn () => {\n\t\t\tunmountInstance();\n\t\t};\n\t});\n</script>\n\n{#if disabled}\n\t{@render children?.()}\n{/if}\n","// oxlint-disable-next-line no-explicit-any\nexport function debounce(fn, wait = 500) {\n    let timeout = null;\n    const debounced = (...args) => {\n        if (timeout !== null) {\n            clearTimeout(timeout);\n        }\n        timeout = setTimeout(() => {\n            fn(...args);\n        }, wait);\n    };\n    debounced.destroy = () => {\n        if (timeout !== null) {\n            clearTimeout(timeout);\n            timeout = null;\n        }\n    };\n    return debounced;\n}\n","export function isOrContainsTarget(node, target) {\n    return node === target || node.contains(target);\n}\nexport function getOwnerDocument(el) {\n    return el?.ownerDocument ?? document;\n}\n","/*!\n* tabbable 6.3.0\n* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE\n*/\n// NOTE: separate `:not()` selectors has broader browser support than the newer\n//  `:not([inert], [inert] *)` (Feb 2023)\n// CAREFUL: JSDom does not support `:not([inert] *)` as a selector; using it causes\n//  the entire query to fail, resulting in no nodes found, which will break a lot\n//  of things... so we have to rely on JS to identify nodes inside an inert container\nvar candidateSelectors = ['input:not([inert])', 'select:not([inert])', 'textarea:not([inert])', 'a[href]:not([inert])', 'button:not([inert])', '[tabindex]:not(slot):not([inert])', 'audio[controls]:not([inert])', 'video[controls]:not([inert])', '[contenteditable]:not([contenteditable=\"false\"]):not([inert])', 'details>summary:first-of-type:not([inert])', 'details:not([inert])'];\nvar candidateSelector = /* #__PURE__ */candidateSelectors.join(',');\nvar NoElement = typeof Element === 'undefined';\nvar matches = NoElement ? function () {} : Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\nvar getRootNode = !NoElement && Element.prototype.getRootNode ? function (element) {\n  var _element$getRootNode;\n  return element === null || element === void 0 ? void 0 : (_element$getRootNode = element.getRootNode) === null || _element$getRootNode === void 0 ? void 0 : _element$getRootNode.call(element);\n} : function (element) {\n  return element === null || element === void 0 ? void 0 : element.ownerDocument;\n};\n\n/**\n * Determines if a node is inert or in an inert ancestor.\n * @param {Element} [node]\n * @param {boolean} [lookUp] If true and `node` is not inert, looks up at ancestors to\n *  see if any of them are inert. If false, only `node` itself is considered.\n * @returns {boolean} True if inert itself or by way of being in an inert ancestor.\n *  False if `node` is falsy.\n */\nvar _isInert = function isInert(node, lookUp) {\n  var _node$getAttribute;\n  if (lookUp === void 0) {\n    lookUp = true;\n  }\n  // CAREFUL: JSDom does not support inert at all, so we can't use the `HTMLElement.inert`\n  //  JS API property; we have to check the attribute, which can either be empty or 'true';\n  //  if it's `null` (not specified) or 'false', it's an active element\n  var inertAtt = node === null || node === void 0 ? void 0 : (_node$getAttribute = node.getAttribute) === null || _node$getAttribute === void 0 ? void 0 : _node$getAttribute.call(node, 'inert');\n  var inert = inertAtt === '' || inertAtt === 'true';\n\n  // NOTE: this could also be handled with `node.matches('[inert], :is([inert] *)')`\n  //  if it weren't for `matches()` not being a function on shadow roots; the following\n  //  code works for any kind of node\n  // CAREFUL: JSDom does not appear to support certain selectors like `:not([inert] *)`\n  //  so it likely would not support `:is([inert] *)` either...\n  var result = inert || lookUp && node && _isInert(node.parentNode); // recursive\n\n  return result;\n};\n\n/**\n * Determines if a node's content is editable.\n * @param {Element} [node]\n * @returns True if it's content-editable; false if it's not or `node` is falsy.\n */\nvar isContentEditable = function isContentEditable(node) {\n  var _node$getAttribute2;\n  // CAREFUL: JSDom does not support the `HTMLElement.isContentEditable` API so we have\n  //  to use the attribute directly to check for this, which can either be empty or 'true';\n  //  if it's `null` (not specified) or 'false', it's a non-editable element\n  var attValue = node === null || node === void 0 ? void 0 : (_node$getAttribute2 = node.getAttribute) === null || _node$getAttribute2 === void 0 ? void 0 : _node$getAttribute2.call(node, 'contenteditable');\n  return attValue === '' || attValue === 'true';\n};\n\n/**\n * @param {Element} el container to check in\n * @param {boolean} includeContainer add container to check\n * @param {(node: Element) => boolean} filter filter candidates\n * @returns {Element[]}\n */\nvar getCandidates = function getCandidates(el, includeContainer, filter) {\n  // even if `includeContainer=false`, we still have to check it for inertness because\n  //  if it's inert, all its children are inert\n  if (_isInert(el)) {\n    return [];\n  }\n  var candidates = Array.prototype.slice.apply(el.querySelectorAll(candidateSelector));\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n  candidates = candidates.filter(filter);\n  return candidates;\n};\n\n/**\n * @callback GetShadowRoot\n * @param {Element} element to check for shadow root\n * @returns {ShadowRoot|boolean} ShadowRoot if available or boolean indicating if a shadowRoot is attached but not available.\n */\n\n/**\n * @callback ShadowRootFilter\n * @param {Element} shadowHostNode the element which contains shadow content\n * @returns {boolean} true if a shadow root could potentially contain valid candidates.\n */\n\n/**\n * @typedef {Object} CandidateScope\n * @property {Element} scopeParent contains inner candidates\n * @property {Element[]} candidates list of candidates found in the scope parent\n */\n\n/**\n * @typedef {Object} IterativeOptions\n * @property {GetShadowRoot|boolean} getShadowRoot true if shadow support is enabled; falsy if not;\n *  if a function, implies shadow support is enabled and either returns the shadow root of an element\n *  or a boolean stating if it has an undisclosed shadow root\n * @property {(node: Element) => boolean} filter filter candidates\n * @property {boolean} flatten if true then result will flatten any CandidateScope into the returned list\n * @property {ShadowRootFilter} shadowRootFilter filter shadow roots;\n */\n\n/**\n * @param {Element[]} elements list of element containers to match candidates from\n * @param {boolean} includeContainer add container list to check\n * @param {IterativeOptions} options\n * @returns {Array.<Element|CandidateScope>}\n */\nvar _getCandidatesIteratively = function getCandidatesIteratively(elements, includeContainer, options) {\n  var candidates = [];\n  var elementsToCheck = Array.from(elements);\n  while (elementsToCheck.length) {\n    var element = elementsToCheck.shift();\n    if (_isInert(element, false)) {\n      // no need to look up since we're drilling down\n      // anything inside this container will also be inert\n      continue;\n    }\n    if (element.tagName === 'SLOT') {\n      // add shadow dom slot scope (slot itself cannot be focusable)\n      var assigned = element.assignedElements();\n      var content = assigned.length ? assigned : element.children;\n      var nestedCandidates = _getCandidatesIteratively(content, true, options);\n      if (options.flatten) {\n        candidates.push.apply(candidates, nestedCandidates);\n      } else {\n        candidates.push({\n          scopeParent: element,\n          candidates: nestedCandidates\n        });\n      }\n    } else {\n      // check candidate element\n      var validCandidate = matches.call(element, candidateSelector);\n      if (validCandidate && options.filter(element) && (includeContainer || !elements.includes(element))) {\n        candidates.push(element);\n      }\n\n      // iterate over shadow content if possible\n      var shadowRoot = element.shadowRoot ||\n      // check for an undisclosed shadow\n      typeof options.getShadowRoot === 'function' && options.getShadowRoot(element);\n\n      // no inert look up because we're already drilling down and checking for inertness\n      //  on the way down, so all containers to this root node should have already been\n      //  vetted as non-inert\n      var validShadowRoot = !_isInert(shadowRoot, false) && (!options.shadowRootFilter || options.shadowRootFilter(element));\n      if (shadowRoot && validShadowRoot) {\n        // add shadow dom scope IIF a shadow root node was given; otherwise, an undisclosed\n        //  shadow exists, so look at light dom children as fallback BUT create a scope for any\n        //  child candidates found because they're likely slotted elements (elements that are\n        //  children of the web component element (which has the shadow), in the light dom, but\n        //  slotted somewhere _inside_ the undisclosed shadow) -- the scope is created below,\n        //  _after_ we return from this recursive call\n        var _nestedCandidates = _getCandidatesIteratively(shadowRoot === true ? element.children : shadowRoot.children, true, options);\n        if (options.flatten) {\n          candidates.push.apply(candidates, _nestedCandidates);\n        } else {\n          candidates.push({\n            scopeParent: element,\n            candidates: _nestedCandidates\n          });\n        }\n      } else {\n        // there's not shadow so just dig into the element's (light dom) children\n        //  __without__ giving the element special scope treatment\n        elementsToCheck.unshift.apply(elementsToCheck, element.children);\n      }\n    }\n  }\n  return candidates;\n};\n\n/**\n * @private\n * Determines if the node has an explicitly specified `tabindex` attribute.\n * @param {HTMLElement} node\n * @returns {boolean} True if so; false if not.\n */\nvar hasTabIndex = function hasTabIndex(node) {\n  return !isNaN(parseInt(node.getAttribute('tabindex'), 10));\n};\n\n/**\n * Determine the tab index of a given node.\n * @param {HTMLElement} node\n * @returns {number} Tab order (negative, 0, or positive number).\n * @throws {Error} If `node` is falsy.\n */\nvar getTabIndex = function getTabIndex(node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (node.tabIndex < 0) {\n    // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n    // `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n    // yet they are still part of the regular tab order; in FF, they get a default\n    // `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n    // order, consider their tab index to be 0.\n    // Also browsers do not return `tabIndex` correctly for contentEditable nodes;\n    // so if they don't have a tabindex attribute specifically set, assume it's 0.\n    if ((/^(AUDIO|VIDEO|DETAILS)$/.test(node.tagName) || isContentEditable(node)) && !hasTabIndex(node)) {\n      return 0;\n    }\n  }\n  return node.tabIndex;\n};\n\n/**\n * Determine the tab index of a given node __for sort order purposes__.\n * @param {HTMLElement} node\n * @param {boolean} [isScope] True for a custom element with shadow root or slot that, by default,\n *  has tabIndex -1, but needs to be sorted by document order in order for its content to be\n *  inserted into the correct sort position.\n * @returns {number} Tab order (negative, 0, or positive number).\n */\nvar getSortOrderTabIndex = function getSortOrderTabIndex(node, isScope) {\n  var tabIndex = getTabIndex(node);\n  if (tabIndex < 0 && isScope && !hasTabIndex(node)) {\n    return 0;\n  }\n  return tabIndex;\n};\nvar sortOrderedTabbables = function sortOrderedTabbables(a, b) {\n  return a.tabIndex === b.tabIndex ? a.documentOrder - b.documentOrder : a.tabIndex - b.tabIndex;\n};\nvar isInput = function isInput(node) {\n  return node.tagName === 'INPUT';\n};\nvar isHiddenInput = function isHiddenInput(node) {\n  return isInput(node) && node.type === 'hidden';\n};\nvar isDetailsWithSummary = function isDetailsWithSummary(node) {\n  var r = node.tagName === 'DETAILS' && Array.prototype.slice.apply(node.children).some(function (child) {\n    return child.tagName === 'SUMMARY';\n  });\n  return r;\n};\nvar getCheckedRadio = function getCheckedRadio(nodes, form) {\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n};\nvar isTabbableRadio = function isTabbableRadio(node) {\n  if (!node.name) {\n    return true;\n  }\n  var radioScope = node.form || getRootNode(node);\n  var queryRadios = function queryRadios(name) {\n    return radioScope.querySelectorAll('input[type=\"radio\"][name=\"' + name + '\"]');\n  };\n  var radioSet;\n  if (typeof window !== 'undefined' && typeof window.CSS !== 'undefined' && typeof window.CSS.escape === 'function') {\n    radioSet = queryRadios(window.CSS.escape(node.name));\n  } else {\n    try {\n      radioSet = queryRadios(node.name);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error('Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s', err.message);\n      return false;\n    }\n  }\n  var checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n};\nvar isRadio = function isRadio(node) {\n  return isInput(node) && node.type === 'radio';\n};\nvar isNonTabbableRadio = function isNonTabbableRadio(node) {\n  return isRadio(node) && !isTabbableRadio(node);\n};\n\n// determines if a node is ultimately attached to the window's document\nvar isNodeAttached = function isNodeAttached(node) {\n  var _nodeRoot;\n  // The root node is the shadow root if the node is in a shadow DOM; some document otherwise\n  //  (but NOT _the_ document; see second 'If' comment below for more).\n  // If rootNode is shadow root, it'll have a host, which is the element to which the shadow\n  //  is attached, and the one we need to check if it's in the document or not (because the\n  //  shadow, and all nodes it contains, is never considered in the document since shadows\n  //  behave like self-contained DOMs; but if the shadow's HOST, which is part of the document,\n  //  is hidden, or is not in the document itself but is detached, it will affect the shadow's\n  //  visibility, including all the nodes it contains). The host could be any normal node,\n  //  or a custom element (i.e. web component). Either way, that's the one that is considered\n  //  part of the document, not the shadow root, nor any of its children (i.e. the node being\n  //  tested).\n  // To further complicate things, we have to look all the way up until we find a shadow HOST\n  //  that is attached (or find none) because the node might be in nested shadows...\n  // If rootNode is not a shadow root, it won't have a host, and so rootNode should be the\n  //  document (per the docs) and while it's a Document-type object, that document does not\n  //  appear to be the same as the node's `ownerDocument` for some reason, so it's safer\n  //  to ignore the rootNode at this point, and use `node.ownerDocument`. Otherwise,\n  //  using `rootNode.contains(node)` will _always_ be true we'll get false-positives when\n  //  node is actually detached.\n  // NOTE: If `nodeRootHost` or `node` happens to be the `document` itself (which is possible\n  //  if a tabbable/focusable node was quickly added to the DOM, focused, and then removed\n  //  from the DOM as in https://github.com/focus-trap/focus-trap-react/issues/905), then\n  //  `ownerDocument` will be `null`, hence the optional chaining on it.\n  var nodeRoot = node && getRootNode(node);\n  var nodeRootHost = (_nodeRoot = nodeRoot) === null || _nodeRoot === void 0 ? void 0 : _nodeRoot.host;\n\n  // in some cases, a detached node will return itself as the root instead of a document or\n  //  shadow root object, in which case, we shouldn't try to look further up the host chain\n  var attached = false;\n  if (nodeRoot && nodeRoot !== node) {\n    var _nodeRootHost, _nodeRootHost$ownerDo, _node$ownerDocument;\n    attached = !!((_nodeRootHost = nodeRootHost) !== null && _nodeRootHost !== void 0 && (_nodeRootHost$ownerDo = _nodeRootHost.ownerDocument) !== null && _nodeRootHost$ownerDo !== void 0 && _nodeRootHost$ownerDo.contains(nodeRootHost) || node !== null && node !== void 0 && (_node$ownerDocument = node.ownerDocument) !== null && _node$ownerDocument !== void 0 && _node$ownerDocument.contains(node));\n    while (!attached && nodeRootHost) {\n      var _nodeRoot2, _nodeRootHost2, _nodeRootHost2$ownerD;\n      // since it's not attached and we have a root host, the node MUST be in a nested shadow DOM,\n      //  which means we need to get the host's host and check if that parent host is contained\n      //  in (i.e. attached to) the document\n      nodeRoot = getRootNode(nodeRootHost);\n      nodeRootHost = (_nodeRoot2 = nodeRoot) === null || _nodeRoot2 === void 0 ? void 0 : _nodeRoot2.host;\n      attached = !!((_nodeRootHost2 = nodeRootHost) !== null && _nodeRootHost2 !== void 0 && (_nodeRootHost2$ownerD = _nodeRootHost2.ownerDocument) !== null && _nodeRootHost2$ownerD !== void 0 && _nodeRootHost2$ownerD.contains(nodeRootHost));\n    }\n  }\n  return attached;\n};\nvar isZeroArea = function isZeroArea(node) {\n  var _node$getBoundingClie = node.getBoundingClientRect(),\n    width = _node$getBoundingClie.width,\n    height = _node$getBoundingClie.height;\n  return width === 0 && height === 0;\n};\nvar isHidden = function isHidden(node, _ref) {\n  var displayCheck = _ref.displayCheck,\n    getShadowRoot = _ref.getShadowRoot;\n  if (displayCheck === 'full-native') {\n    if ('checkVisibility' in node) {\n      // Chrome >= 105, Edge >= 105, Firefox >= 106, Safari >= 17.4\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/Element/checkVisibility#browser_compatibility\n      var visible = node.checkVisibility({\n        // Checking opacity might be desirable for some use cases, but natively,\n        // opacity zero elements _are_ focusable and tabbable.\n        checkOpacity: false,\n        opacityProperty: false,\n        contentVisibilityAuto: true,\n        visibilityProperty: true,\n        // This is an alias for `visibilityProperty`. Contemporary browsers\n        // support both. However, this alias has wider browser support (Chrome\n        // >= 105 and Firefox >= 106, vs. Chrome >= 121 and Firefox >= 122), so\n        // we include it anyway.\n        checkVisibilityCSS: true\n      });\n      return !visible;\n    }\n    // Fall through to manual visibility checks\n  }\n\n  // NOTE: visibility will be `undefined` if node is detached from the document\n  //  (see notes about this further down), which means we will consider it visible\n  //  (this is legacy behavior from a very long way back)\n  // NOTE: we check this regardless of `displayCheck=\"none\"` because this is a\n  //  _visibility_ check, not a _display_ check\n  if (getComputedStyle(node).visibility === 'hidden') {\n    return true;\n  }\n  var isDirectSummary = matches.call(node, 'details>summary:first-of-type');\n  var nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {\n    return true;\n  }\n  if (!displayCheck || displayCheck === 'full' ||\n  // full-native can run this branch when it falls through in case\n  // Element#checkVisibility is unsupported\n  displayCheck === 'full-native' || displayCheck === 'legacy-full') {\n    if (typeof getShadowRoot === 'function') {\n      // figure out if we should consider the node to be in an undisclosed shadow and use the\n      //  'non-zero-area' fallback\n      var originalNode = node;\n      while (node) {\n        var parentElement = node.parentElement;\n        var rootNode = getRootNode(node);\n        if (parentElement && !parentElement.shadowRoot && getShadowRoot(parentElement) === true // check if there's an undisclosed shadow\n        ) {\n          // node has an undisclosed shadow which means we can only treat it as a black box, so we\n          //  fall back to a non-zero-area test\n          return isZeroArea(node);\n        } else if (node.assignedSlot) {\n          // iterate up slot\n          node = node.assignedSlot;\n        } else if (!parentElement && rootNode !== node.ownerDocument) {\n          // cross shadow boundary\n          node = rootNode.host;\n        } else {\n          // iterate up normal dom\n          node = parentElement;\n        }\n      }\n      node = originalNode;\n    }\n    // else, `getShadowRoot` might be true, but all that does is enable shadow DOM support\n    //  (i.e. it does not also presume that all nodes might have undisclosed shadows); or\n    //  it might be a falsy value, which means shadow DOM support is disabled\n\n    // Since we didn't find it sitting in an undisclosed shadow (or shadows are disabled)\n    //  now we can just test to see if it would normally be visible or not, provided it's\n    //  attached to the main document.\n    // NOTE: We must consider case where node is inside a shadow DOM and given directly to\n    //  `isTabbable()` or `isFocusable()` -- regardless of `getShadowRoot` option setting.\n\n    if (isNodeAttached(node)) {\n      // this works wherever the node is: if there's at least one client rect, it's\n      //  somehow displayed; it also covers the CSS 'display: contents' case where the\n      //  node itself is hidden in place of its contents; and there's no need to search\n      //  up the hierarchy either\n      return !node.getClientRects().length;\n    }\n\n    // Else, the node isn't attached to the document, which means the `getClientRects()`\n    //  API will __always__ return zero rects (this can happen, for example, if React\n    //  is used to render nodes onto a detached tree, as confirmed in this thread:\n    //  https://github.com/facebook/react/issues/9117#issuecomment-284228870)\n    //\n    // It also means that even window.getComputedStyle(node).display will return `undefined`\n    //  because styles are only computed for nodes that are in the document.\n    //\n    // NOTE: THIS HAS BEEN THE CASE FOR YEARS. It is not new, nor is it caused by tabbable\n    //  somehow. Though it was never stated officially, anyone who has ever used tabbable\n    //  APIs on nodes in detached containers has actually implicitly used tabbable in what\n    //  was later (as of v5.2.0 on Apr 9, 2021) called `displayCheck=\"none\"` mode -- essentially\n    //  considering __everything__ to be visible because of the innability to determine styles.\n    //\n    // v6.0.0: As of this major release, the default 'full' option __no longer treats detached\n    //  nodes as visible with the 'none' fallback.__\n    if (displayCheck !== 'legacy-full') {\n      return true; // hidden\n    }\n    // else, fallback to 'none' mode and consider the node visible\n  } else if (displayCheck === 'non-zero-area') {\n    // NOTE: Even though this tests that the node's client rect is non-zero to determine\n    //  whether it's displayed, and that a detached node will __always__ have a zero-area\n    //  client rect, we don't special-case for whether the node is attached or not. In\n    //  this mode, we do want to consider nodes that have a zero area to be hidden at all\n    //  times, and that includes attached or not.\n    return isZeroArea(node);\n  }\n\n  // visible, as far as we can tell, or per current `displayCheck=none` mode, we assume\n  //  it's visible\n  return false;\n};\n\n// form fields (nested) inside a disabled fieldset are not focusable/tabbable\n//  unless they are in the _first_ <legend> element of the top-most disabled\n//  fieldset\nvar isDisabledFromFieldset = function isDisabledFromFieldset(node) {\n  if (/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(node.tagName)) {\n    var parentNode = node.parentElement;\n    // check if `node` is contained in a disabled <fieldset>\n    while (parentNode) {\n      if (parentNode.tagName === 'FIELDSET' && parentNode.disabled) {\n        // look for the first <legend> among the children of the disabled <fieldset>\n        for (var i = 0; i < parentNode.children.length; i++) {\n          var child = parentNode.children.item(i);\n          // when the first <legend> (in document order) is found\n          if (child.tagName === 'LEGEND') {\n            // if its parent <fieldset> is not nested in another disabled <fieldset>,\n            // return whether `node` is a descendant of its first <legend>\n            return matches.call(parentNode, 'fieldset[disabled] *') ? true : !child.contains(node);\n          }\n        }\n        // the disabled <fieldset> containing `node` has no <legend>\n        return true;\n      }\n      parentNode = parentNode.parentElement;\n    }\n  }\n\n  // else, node's tabbable/focusable state should not be affected by a fieldset's\n  //  enabled/disabled state\n  return false;\n};\nvar isNodeMatchingSelectorFocusable = function isNodeMatchingSelectorFocusable(options, node) {\n  if (node.disabled ||\n  // we must do an inert look up to filter out any elements inside an inert ancestor\n  //  because we're limited in the type of selectors we can use in JSDom (see related\n  //  note related to `candidateSelectors`)\n  _isInert(node) || isHiddenInput(node) || isHidden(node, options) ||\n  // For a details element with a summary, the summary element gets the focus\n  isDetailsWithSummary(node) || isDisabledFromFieldset(node)) {\n    return false;\n  }\n  return true;\n};\nvar isNodeMatchingSelectorTabbable = function isNodeMatchingSelectorTabbable(options, node) {\n  if (isNonTabbableRadio(node) || getTabIndex(node) < 0 || !isNodeMatchingSelectorFocusable(options, node)) {\n    return false;\n  }\n  return true;\n};\nvar isShadowRootTabbable = function isShadowRootTabbable(shadowHostNode) {\n  var tabIndex = parseInt(shadowHostNode.getAttribute('tabindex'), 10);\n  if (isNaN(tabIndex) || tabIndex >= 0) {\n    return true;\n  }\n  // If a custom element has an explicit negative tabindex,\n  // browsers will not allow tab targeting said element's children.\n  return false;\n};\n\n/**\n * @param {Array.<Element|CandidateScope>} candidates\n * @returns Element[]\n */\nvar _sortByOrder = function sortByOrder(candidates) {\n  var regularTabbables = [];\n  var orderedTabbables = [];\n  candidates.forEach(function (item, i) {\n    var isScope = !!item.scopeParent;\n    var element = isScope ? item.scopeParent : item;\n    var candidateTabindex = getSortOrderTabIndex(element, isScope);\n    var elements = isScope ? _sortByOrder(item.candidates) : element;\n    if (candidateTabindex === 0) {\n      isScope ? regularTabbables.push.apply(regularTabbables, elements) : regularTabbables.push(element);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        item: item,\n        isScope: isScope,\n        content: elements\n      });\n    }\n  });\n  return orderedTabbables.sort(sortOrderedTabbables).reduce(function (acc, sortable) {\n    sortable.isScope ? acc.push.apply(acc, sortable.content) : acc.push(sortable.content);\n    return acc;\n  }, []).concat(regularTabbables);\n};\nvar tabbable = function tabbable(container, options) {\n  options = options || {};\n  var candidates;\n  if (options.getShadowRoot) {\n    candidates = _getCandidatesIteratively([container], options.includeContainer, {\n      filter: isNodeMatchingSelectorTabbable.bind(null, options),\n      flatten: false,\n      getShadowRoot: options.getShadowRoot,\n      shadowRootFilter: isShadowRootTabbable\n    });\n  } else {\n    candidates = getCandidates(container, options.includeContainer, isNodeMatchingSelectorTabbable.bind(null, options));\n  }\n  return _sortByOrder(candidates);\n};\nvar focusable = function focusable(container, options) {\n  options = options || {};\n  var candidates;\n  if (options.getShadowRoot) {\n    candidates = _getCandidatesIteratively([container], options.includeContainer, {\n      filter: isNodeMatchingSelectorFocusable.bind(null, options),\n      flatten: true,\n      getShadowRoot: options.getShadowRoot\n    });\n  } else {\n    candidates = getCandidates(container, options.includeContainer, isNodeMatchingSelectorFocusable.bind(null, options));\n  }\n  return candidates;\n};\nvar isTabbable = function isTabbable(node, options) {\n  options = options || {};\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorTabbable(options, node);\n};\nvar focusableCandidateSelector = /* #__PURE__ */candidateSelectors.concat('iframe').join(',');\nvar isFocusable = function isFocusable(node, options) {\n  options = options || {};\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorFocusable(options, node);\n};\n\nexport { focusable, getTabIndex, isFocusable, isTabbable, tabbable };\n//# sourceMappingURL=index.esm.js.map\n","import { afterTick, mergeProps, onDestroyEffect, attachRef, DOMContext, getWindow, simpleBox, boxWith, } from \"svelte-toolbelt\";\nimport { Context, watch } from \"runed\";\nimport { FIRST_LAST_KEYS, LAST_KEYS, SELECTION_KEYS, SUB_OPEN_KEYS, getCheckedState, isMouseEvent, } from \"./utils.js\";\nimport { focusFirst } from \"../../internal/focus.js\";\nimport { CustomEventDispatcher } from \"../../internal/events.js\";\nimport { isElement, isElementOrSVGElement, isHTMLElement } from \"../../internal/is.js\";\nimport { kbd } from \"../../internal/kbd.js\";\nimport { createBitsAttrs, getAriaChecked, boolToStr, getDataOpenClosed, boolToEmptyStrOrUndef, } from \"../../internal/attrs.js\";\nimport { IsUsingKeyboard } from \"../../index.js\";\nimport { getTabbableFrom } from \"../../internal/tabbable.js\";\nimport { isTabbable } from \"tabbable\";\nimport { DOMTypeahead } from \"../../internal/dom-typeahead.svelte.js\";\nimport { RovingFocusGroup } from \"../../internal/roving-focus-group.js\";\nimport { GraceArea } from \"../../internal/grace-area.svelte.js\";\nimport { PresenceManager } from \"../../internal/presence-manager.svelte.js\";\nexport const CONTEXT_MENU_TRIGGER_ATTR = \"data-context-menu-trigger\";\nexport const CONTEXT_MENU_CONTENT_ATTR = \"data-context-menu-content\";\nconst MenuRootContext = new Context(\"Menu.Root\");\nconst MenuMenuContext = new Context(\"Menu.Root | Menu.Sub\");\nconst MenuContentContext = new Context(\"Menu.Content\");\nconst MenuGroupContext = new Context(\"Menu.Group | Menu.RadioGroup\");\nconst MenuRadioGroupContext = new Context(\"Menu.RadioGroup\");\nexport const MenuCheckboxGroupContext = new Context(\"Menu.CheckboxGroup\");\nexport const MenuOpenEvent = new CustomEventDispatcher(\"bitsmenuopen\", {\n    bubbles: false,\n    cancelable: true,\n});\nexport const menuAttrs = createBitsAttrs({\n    component: \"menu\",\n    parts: [\n        \"trigger\",\n        \"content\",\n        \"sub-trigger\",\n        \"item\",\n        \"group\",\n        \"group-heading\",\n        \"checkbox-group\",\n        \"checkbox-item\",\n        \"radio-group\",\n        \"radio-item\",\n        \"separator\",\n        \"sub-content\",\n        \"arrow\",\n    ],\n});\nexport class MenuRootState {\n    static create(opts) {\n        const root = new MenuRootState(opts);\n        return MenuRootContext.set(root);\n    }\n    opts;\n    isUsingKeyboard = new IsUsingKeyboard();\n    ignoreCloseAutoFocus = $state(false);\n    isPointerInTransit = $state(false);\n    constructor(opts) {\n        this.opts = opts;\n    }\n    getBitsAttr = (part) => {\n        return menuAttrs.getAttr(part, this.opts.variant.current);\n    };\n}\nexport class MenuMenuState {\n    static create(opts, root) {\n        return MenuMenuContext.set(new MenuMenuState(opts, root, null));\n    }\n    opts;\n    root;\n    parentMenu;\n    contentId = boxWith(() => \"\");\n    contentNode = $state(null);\n    contentPresence;\n    triggerNode = $state(null);\n    constructor(opts, root, parentMenu) {\n        this.opts = opts;\n        this.root = root;\n        this.parentMenu = parentMenu;\n        this.contentPresence = new PresenceManager({\n            ref: boxWith(() => this.contentNode),\n            open: this.opts.open,\n            onComplete: () => {\n                this.opts.onOpenChangeComplete.current(this.opts.open.current);\n            },\n        });\n        if (parentMenu) {\n            watch(() => parentMenu.opts.open.current, () => {\n                if (parentMenu.opts.open.current)\n                    return;\n                this.opts.open.current = false;\n            });\n        }\n    }\n    toggleOpen() {\n        this.opts.open.current = !this.opts.open.current;\n    }\n    onOpen() {\n        this.opts.open.current = true;\n    }\n    onClose() {\n        this.opts.open.current = false;\n    }\n}\nexport class MenuContentState {\n    static create(opts) {\n        return MenuContentContext.set(new MenuContentState(opts, MenuMenuContext.get()));\n    }\n    opts;\n    parentMenu;\n    rovingFocusGroup;\n    domContext;\n    attachment;\n    search = $state(\"\");\n    #timer = 0;\n    #handleTypeaheadSearch;\n    mounted = $state(false);\n    #isSub;\n    constructor(opts, parentMenu) {\n        this.opts = opts;\n        this.parentMenu = parentMenu;\n        this.domContext = new DOMContext(opts.ref);\n        this.attachment = attachRef(this.opts.ref, (v) => {\n            if (this.parentMenu.contentNode !== v) {\n                this.parentMenu.contentNode = v;\n            }\n        });\n        parentMenu.contentId = opts.id;\n        this.#isSub = opts.isSub ?? false;\n        this.onkeydown = this.onkeydown.bind(this);\n        this.onblur = this.onblur.bind(this);\n        this.onfocus = this.onfocus.bind(this);\n        this.handleInteractOutside = this.handleInteractOutside.bind(this);\n        new GraceArea({\n            contentNode: () => this.parentMenu.contentNode,\n            triggerNode: () => this.parentMenu.triggerNode,\n            enabled: () => this.parentMenu.opts.open.current &&\n                Boolean(this.parentMenu.triggerNode?.hasAttribute(this.parentMenu.root.getBitsAttr(\"sub-trigger\"))),\n            onPointerExit: () => {\n                this.parentMenu.opts.open.current = false;\n            },\n            setIsPointerInTransit: (value) => {\n                this.parentMenu.root.isPointerInTransit = value;\n            },\n        });\n        this.#handleTypeaheadSearch = new DOMTypeahead({\n            getActiveElement: () => this.domContext.getActiveElement(),\n            getWindow: () => this.domContext.getWindow(),\n        }).handleTypeaheadSearch;\n        this.rovingFocusGroup = new RovingFocusGroup({\n            rootNode: boxWith(() => this.parentMenu.contentNode),\n            candidateAttr: this.parentMenu.root.getBitsAttr(\"item\"),\n            loop: this.opts.loop,\n            orientation: boxWith(() => \"vertical\"),\n        });\n        watch(() => this.parentMenu.contentNode, (contentNode) => {\n            if (!contentNode)\n                return;\n            const handler = () => {\n                afterTick(() => {\n                    if (!this.parentMenu.root.isUsingKeyboard.current)\n                        return;\n                    this.rovingFocusGroup.focusFirstCandidate();\n                });\n            };\n            return MenuOpenEvent.listen(contentNode, handler);\n        });\n        $effect(() => {\n            if (!this.parentMenu.opts.open.current) {\n                this.domContext.getWindow().clearTimeout(this.#timer);\n            }\n        });\n    }\n    #getCandidateNodes() {\n        const node = this.parentMenu.contentNode;\n        if (!node)\n            return [];\n        const candidates = Array.from(node.querySelectorAll(`[${this.parentMenu.root.getBitsAttr(\"item\")}]:not([data-disabled])`));\n        return candidates;\n    }\n    #isPointerMovingToSubmenu() {\n        return this.parentMenu.root.isPointerInTransit;\n    }\n    onCloseAutoFocus = (e) => {\n        this.opts.onCloseAutoFocus.current?.(e);\n        if (e.defaultPrevented || this.#isSub)\n            return;\n        if (this.parentMenu.triggerNode && isTabbable(this.parentMenu.triggerNode)) {\n            e.preventDefault();\n            this.parentMenu.triggerNode.focus();\n        }\n    };\n    handleTabKeyDown(e) {\n        /**\n         * We locate the root `menu`'s trigger by going up the tree until\n         * we find a menu that has no parent. This will allow us to focus the next\n         * tabbable element before/after the root trigger.\n         */\n        let rootMenu = this.parentMenu;\n        while (rootMenu.parentMenu !== null) {\n            rootMenu = rootMenu.parentMenu;\n        }\n        // if for some unforeseen reason the root menu has no trigger, we bail\n        if (!rootMenu.triggerNode)\n            return;\n        // cancel default tab behavior\n        e.preventDefault();\n        // find the next/previous tabbable\n        const nodeToFocus = getTabbableFrom(rootMenu.triggerNode, e.shiftKey ? \"prev\" : \"next\");\n        if (nodeToFocus) {\n            /**\n             * We set a flag to ignore the `onCloseAutoFocus` event handler\n             * as well as the fallbacks inside the focus scope to prevent\n             * race conditions causing focus to fall back to the body even\n             * though we're trying to focus the next tabbable element.\n             */\n            this.parentMenu.root.ignoreCloseAutoFocus = true;\n            rootMenu.onClose();\n            afterTick(() => {\n                nodeToFocus.focus();\n                afterTick(() => {\n                    this.parentMenu.root.ignoreCloseAutoFocus = false;\n                });\n            });\n        }\n        else {\n            this.domContext.getDocument().body.focus();\n        }\n    }\n    onkeydown(e) {\n        if (e.defaultPrevented)\n            return;\n        if (e.key === kbd.TAB) {\n            this.handleTabKeyDown(e);\n            return;\n        }\n        const target = e.target;\n        const currentTarget = e.currentTarget;\n        if (!isHTMLElement(target) || !isHTMLElement(currentTarget))\n            return;\n        const isKeydownInside = target.closest(`[${this.parentMenu.root.getBitsAttr(\"content\")}]`)?.id ===\n            this.parentMenu.contentId.current;\n        const isModifierKey = e.ctrlKey || e.altKey || e.metaKey;\n        const isCharacterKey = e.key.length === 1;\n        const kbdFocusedEl = this.rovingFocusGroup.handleKeydown(target, e);\n        if (kbdFocusedEl)\n            return;\n        // prevent space from being considered with typeahead\n        if (e.code === \"Space\")\n            return;\n        const candidateNodes = this.#getCandidateNodes();\n        if (isKeydownInside) {\n            if (!isModifierKey && isCharacterKey) {\n                this.#handleTypeaheadSearch(e.key, candidateNodes);\n            }\n        }\n        // focus first/last based on key pressed\n        if (e.target?.id !== this.parentMenu.contentId.current)\n            return;\n        if (!FIRST_LAST_KEYS.includes(e.key))\n            return;\n        e.preventDefault();\n        if (LAST_KEYS.includes(e.key)) {\n            candidateNodes.reverse();\n        }\n        focusFirst(candidateNodes, { select: false }, () => this.domContext.getActiveElement());\n    }\n    onblur(e) {\n        if (!isElement(e.currentTarget))\n            return;\n        if (!isElement(e.target))\n            return;\n        // clear search buffer when leaving the menu\n        if (!e.currentTarget.contains?.(e.target)) {\n            this.domContext.getWindow().clearTimeout(this.#timer);\n            this.search = \"\";\n        }\n    }\n    onfocus(_) {\n        if (!this.parentMenu.root.isUsingKeyboard.current)\n            return;\n        afterTick(() => this.rovingFocusGroup.focusFirstCandidate());\n    }\n    onItemEnter() {\n        return this.#isPointerMovingToSubmenu();\n    }\n    onItemLeave(e) {\n        if (e.currentTarget.hasAttribute(this.parentMenu.root.getBitsAttr(\"sub-trigger\")))\n            return;\n        if (this.#isPointerMovingToSubmenu() || this.parentMenu.root.isUsingKeyboard.current)\n            return;\n        const contentNode = this.parentMenu.contentNode;\n        contentNode?.focus();\n        this.rovingFocusGroup.setCurrentTabStopId(\"\");\n    }\n    onTriggerLeave() {\n        if (this.#isPointerMovingToSubmenu())\n            return true;\n        return false;\n    }\n    handleInteractOutside(e) {\n        if (!isElementOrSVGElement(e.target))\n            return;\n        const triggerId = this.parentMenu.triggerNode?.id;\n        if (e.target.id === triggerId) {\n            e.preventDefault();\n            return;\n        }\n        if (e.target.closest(`#${triggerId}`)) {\n            e.preventDefault();\n        }\n    }\n    get shouldRender() {\n        return this.parentMenu.contentPresence.shouldRender;\n    }\n    snippetProps = $derived.by(() => ({ open: this.parentMenu.opts.open.current }));\n    props = $derived.by(() => ({\n        id: this.opts.id.current,\n        role: \"menu\",\n        \"aria-orientation\": \"vertical\",\n        [this.parentMenu.root.getBitsAttr(\"content\")]: \"\",\n        \"data-state\": getDataOpenClosed(this.parentMenu.opts.open.current),\n        onkeydown: this.onkeydown,\n        onblur: this.onblur,\n        onfocus: this.onfocus,\n        dir: this.parentMenu.root.opts.dir.current,\n        style: {\n            pointerEvents: \"auto\",\n        },\n        ...this.attachment,\n    }));\n    popperProps = {\n        onCloseAutoFocus: (e) => this.onCloseAutoFocus(e),\n    };\n}\nclass MenuItemSharedState {\n    opts;\n    content;\n    attachment;\n    #isFocused = $state(false);\n    constructor(opts, content) {\n        this.opts = opts;\n        this.content = content;\n        this.attachment = attachRef(this.opts.ref);\n        this.onpointermove = this.onpointermove.bind(this);\n        this.onpointerleave = this.onpointerleave.bind(this);\n        this.onfocus = this.onfocus.bind(this);\n        this.onblur = this.onblur.bind(this);\n    }\n    onpointermove(e) {\n        if (e.defaultPrevented)\n            return;\n        if (!isMouseEvent(e))\n            return;\n        if (this.opts.disabled.current) {\n            this.content.onItemLeave(e);\n        }\n        else {\n            const defaultPrevented = this.content.onItemEnter();\n            if (defaultPrevented)\n                return;\n            const item = e.currentTarget;\n            if (!isHTMLElement(item))\n                return;\n            item.focus();\n        }\n    }\n    onpointerleave(e) {\n        if (e.defaultPrevented)\n            return;\n        if (!isMouseEvent(e))\n            return;\n        this.content.onItemLeave(e);\n    }\n    onfocus(e) {\n        afterTick(() => {\n            if (e.defaultPrevented || this.opts.disabled.current)\n                return;\n            this.#isFocused = true;\n        });\n    }\n    onblur(e) {\n        afterTick(() => {\n            if (e.defaultPrevented)\n                return;\n            this.#isFocused = false;\n        });\n    }\n    props = $derived.by(() => ({\n        id: this.opts.id.current,\n        tabindex: -1,\n        role: \"menuitem\",\n        \"aria-disabled\": boolToStr(this.opts.disabled.current),\n        \"data-disabled\": boolToEmptyStrOrUndef(this.opts.disabled.current),\n        \"data-highlighted\": this.#isFocused ? \"\" : undefined,\n        [this.content.parentMenu.root.getBitsAttr(\"item\")]: \"\",\n        //\n        onpointermove: this.onpointermove,\n        onpointerleave: this.onpointerleave,\n        onfocus: this.onfocus,\n        onblur: this.onblur,\n        ...this.attachment,\n    }));\n}\nexport class MenuItemState {\n    static create(opts) {\n        const item = new MenuItemSharedState(opts, MenuContentContext.get());\n        return new MenuItemState(opts, item);\n    }\n    opts;\n    item;\n    root;\n    #isPointerDown = false;\n    constructor(opts, item) {\n        this.opts = opts;\n        this.item = item;\n        this.root = item.content.parentMenu.root;\n        this.onkeydown = this.onkeydown.bind(this);\n        this.onclick = this.onclick.bind(this);\n        this.onpointerdown = this.onpointerdown.bind(this);\n        this.onpointerup = this.onpointerup.bind(this);\n    }\n    #handleSelect() {\n        if (this.item.opts.disabled.current)\n            return;\n        const selectEvent = new CustomEvent(\"menuitemselect\", { bubbles: true, cancelable: true });\n        this.opts.onSelect.current(selectEvent);\n        if (selectEvent.defaultPrevented) {\n            this.item.content.parentMenu.root.isUsingKeyboard.current = false;\n            return;\n        }\n        if (this.opts.closeOnSelect.current) {\n            this.item.content.parentMenu.root.opts.onClose();\n        }\n    }\n    onkeydown(e) {\n        const isTypingAhead = this.item.content.search !== \"\";\n        if (this.item.opts.disabled.current || (isTypingAhead && e.key === kbd.SPACE))\n            return;\n        if (SELECTION_KEYS.includes(e.key)) {\n            if (!isHTMLElement(e.currentTarget))\n                return;\n            e.currentTarget.click();\n            /**\n             * We prevent default browser behavior for selection keys as they should trigger\n             * a selection only:\n             * - prevents space from scrolling the page.\n             * - if keydown causes focus to move, prevents keydown from firing on the new target.\n             */\n            e.preventDefault();\n        }\n    }\n    onclick(_) {\n        if (this.item.opts.disabled.current)\n            return;\n        this.#handleSelect();\n    }\n    onpointerup(e) {\n        if (e.defaultPrevented)\n            return;\n        if (!this.#isPointerDown) {\n            if (!isHTMLElement(e.currentTarget))\n                return;\n            e.currentTarget?.click();\n        }\n    }\n    onpointerdown(_) {\n        this.#isPointerDown = true;\n    }\n    props = $derived.by(() => mergeProps(this.item.props, {\n        onclick: this.onclick,\n        onpointerdown: this.onpointerdown,\n        onpointerup: this.onpointerup,\n        onkeydown: this.onkeydown,\n    }));\n}\nexport class MenuSubTriggerState {\n    static create(opts) {\n        const content = MenuContentContext.get();\n        const item = new MenuItemSharedState(opts, content);\n        const submenu = MenuMenuContext.get();\n        return new MenuSubTriggerState(opts, item, content, submenu);\n    }\n    opts;\n    item;\n    content;\n    submenu;\n    attachment;\n    #openTimer = null;\n    constructor(opts, item, content, submenu) {\n        this.opts = opts;\n        this.item = item;\n        this.content = content;\n        this.submenu = submenu;\n        this.attachment = attachRef(this.opts.ref, (v) => (this.submenu.triggerNode = v));\n        this.onpointerleave = this.onpointerleave.bind(this);\n        this.onpointermove = this.onpointermove.bind(this);\n        this.onkeydown = this.onkeydown.bind(this);\n        this.onclick = this.onclick.bind(this);\n        onDestroyEffect(() => {\n            this.#clearOpenTimer();\n        });\n    }\n    #clearOpenTimer() {\n        if (this.#openTimer === null)\n            return;\n        this.content.domContext.getWindow().clearTimeout(this.#openTimer);\n        this.#openTimer = null;\n    }\n    onpointermove(e) {\n        if (!isMouseEvent(e))\n            return;\n        if (!this.item.opts.disabled.current &&\n            !this.submenu.opts.open.current &&\n            !this.#openTimer &&\n            !this.content.parentMenu.root.isPointerInTransit) {\n            this.#openTimer = this.content.domContext.setTimeout(() => {\n                this.submenu.onOpen();\n                this.#clearOpenTimer();\n            }, this.opts.openDelay.current);\n        }\n    }\n    onpointerleave(e) {\n        if (!isMouseEvent(e))\n            return;\n        this.#clearOpenTimer();\n    }\n    onkeydown(e) {\n        const isTypingAhead = this.content.search !== \"\";\n        if (this.item.opts.disabled.current || (isTypingAhead && e.key === kbd.SPACE))\n            return;\n        if (SUB_OPEN_KEYS[this.submenu.root.opts.dir.current].includes(e.key)) {\n            e.currentTarget.click();\n            e.preventDefault();\n        }\n    }\n    onclick(e) {\n        if (this.item.opts.disabled.current)\n            return;\n        /**\n         * We manually focus because iOS Safari doesn't always focus on click (e.g. buttons)\n         * and we rely heavily on `onFocusOutside` for submenus to close when switching\n         * between separate submenus.\n         */\n        if (!isHTMLElement(e.currentTarget))\n            return;\n        e.currentTarget.focus();\n        const selectEvent = new CustomEvent(\"menusubtriggerselect\", {\n            bubbles: true,\n            cancelable: true,\n        });\n        this.opts.onSelect.current(selectEvent);\n        if (!this.submenu.opts.open.current) {\n            this.submenu.onOpen();\n            afterTick(() => {\n                const contentNode = this.submenu.contentNode;\n                if (!contentNode)\n                    return;\n                MenuOpenEvent.dispatch(contentNode);\n            });\n        }\n    }\n    props = $derived.by(() => mergeProps({\n        \"aria-haspopup\": \"menu\",\n        \"aria-expanded\": boolToStr(this.submenu.opts.open.current),\n        \"data-state\": getDataOpenClosed(this.submenu.opts.open.current),\n        \"aria-controls\": this.submenu.opts.open.current\n            ? this.submenu.contentId.current\n            : undefined,\n        [this.submenu.root.getBitsAttr(\"sub-trigger\")]: \"\",\n        onclick: this.onclick,\n        onpointermove: this.onpointermove,\n        onpointerleave: this.onpointerleave,\n        onkeydown: this.onkeydown,\n        ...this.attachment,\n    }, this.item.props));\n}\nexport class MenuCheckboxItemState {\n    static create(opts, checkboxGroup) {\n        const item = new MenuItemState(opts, new MenuItemSharedState(opts, MenuContentContext.get()));\n        return new MenuCheckboxItemState(opts, item, checkboxGroup);\n    }\n    opts;\n    item;\n    group;\n    constructor(opts, item, group = null) {\n        this.opts = opts;\n        this.item = item;\n        this.group = group;\n        // Watch for value changes in the group if we're part of one\n        if (this.group) {\n            watch(() => this.group.opts.value.current, (groupValues) => {\n                this.opts.checked.current = groupValues.includes(this.opts.value.current);\n            });\n            // Watch for checked state changes and sync with group\n            watch(() => this.opts.checked.current, (checked) => {\n                if (checked) {\n                    this.group.addValue(this.opts.value.current);\n                }\n                else {\n                    this.group.removeValue(this.opts.value.current);\n                }\n            });\n        }\n    }\n    toggleChecked() {\n        if (this.opts.indeterminate.current) {\n            this.opts.indeterminate.current = false;\n            this.opts.checked.current = true;\n        }\n        else {\n            this.opts.checked.current = !this.opts.checked.current;\n        }\n    }\n    snippetProps = $derived.by(() => ({\n        checked: this.opts.checked.current,\n        indeterminate: this.opts.indeterminate.current,\n    }));\n    props = $derived.by(() => ({\n        ...this.item.props,\n        role: \"menuitemcheckbox\",\n        \"aria-checked\": getAriaChecked(this.opts.checked.current, this.opts.indeterminate.current),\n        \"data-state\": getCheckedState(this.opts.checked.current),\n        [this.item.root.getBitsAttr(\"checkbox-item\")]: \"\",\n    }));\n}\nexport class MenuGroupState {\n    static create(opts) {\n        return MenuGroupContext.set(new MenuGroupState(opts, MenuRootContext.get()));\n    }\n    opts;\n    root;\n    attachment;\n    groupHeadingId = $state(undefined);\n    constructor(opts, root) {\n        this.opts = opts;\n        this.root = root;\n        this.attachment = attachRef(this.opts.ref);\n    }\n    props = $derived.by(() => ({\n        id: this.opts.id.current,\n        role: \"group\",\n        \"aria-labelledby\": this.groupHeadingId,\n        [this.root.getBitsAttr(\"group\")]: \"\",\n        ...this.attachment,\n    }));\n}\nexport class MenuGroupHeadingState {\n    static create(opts) {\n        // Try to get checkbox group first, then radio group, then regular group\n        const checkboxGroup = MenuCheckboxGroupContext.getOr(null);\n        if (checkboxGroup)\n            return new MenuGroupHeadingState(opts, checkboxGroup);\n        const radioGroup = MenuRadioGroupContext.getOr(null);\n        if (radioGroup)\n            return new MenuGroupHeadingState(opts, radioGroup);\n        return new MenuGroupHeadingState(opts, MenuGroupContext.get());\n    }\n    opts;\n    group;\n    attachment;\n    constructor(opts, group) {\n        this.opts = opts;\n        this.group = group;\n        this.attachment = attachRef(this.opts.ref, (v) => (this.group.groupHeadingId = v?.id));\n    }\n    props = $derived.by(() => ({\n        id: this.opts.id.current,\n        role: \"group\",\n        [this.group.root.getBitsAttr(\"group-heading\")]: \"\",\n        ...this.attachment,\n    }));\n}\nexport class MenuSeparatorState {\n    static create(opts) {\n        return new MenuSeparatorState(opts, MenuRootContext.get());\n    }\n    opts;\n    root;\n    attachment;\n    constructor(opts, root) {\n        this.opts = opts;\n        this.root = root;\n        this.attachment = attachRef(this.opts.ref);\n    }\n    props = $derived.by(() => ({\n        id: this.opts.id.current,\n        role: \"group\",\n        [this.root.getBitsAttr(\"separator\")]: \"\",\n        ...this.attachment,\n    }));\n}\nexport class MenuArrowState {\n    static create() {\n        return new MenuArrowState(MenuRootContext.get());\n    }\n    root;\n    constructor(root) {\n        this.root = root;\n    }\n    props = $derived.by(() => ({\n        [this.root.getBitsAttr(\"arrow\")]: \"\",\n    }));\n}\nexport class MenuRadioGroupState {\n    static create(opts) {\n        return MenuGroupContext.set(MenuRadioGroupContext.set(new MenuRadioGroupState(opts, MenuContentContext.get())));\n    }\n    opts;\n    content;\n    attachment;\n    groupHeadingId = $state(null);\n    root;\n    constructor(opts, content) {\n        this.opts = opts;\n        this.content = content;\n        this.root = content.parentMenu.root;\n        this.attachment = attachRef(this.opts.ref);\n    }\n    setValue(v) {\n        this.opts.value.current = v;\n    }\n    props = $derived.by(() => ({\n        id: this.opts.id.current,\n        [this.root.getBitsAttr(\"radio-group\")]: \"\",\n        role: \"group\",\n        \"aria-labelledby\": this.groupHeadingId,\n        ...this.attachment,\n    }));\n}\nexport class MenuRadioItemState {\n    static create(opts) {\n        const radioGroup = MenuRadioGroupContext.get();\n        const sharedItem = new MenuItemSharedState(opts, radioGroup.content);\n        const item = new MenuItemState(opts, sharedItem);\n        return new MenuRadioItemState(opts, item, radioGroup);\n    }\n    opts;\n    item;\n    group;\n    attachment;\n    isChecked = $derived.by(() => this.group.opts.value.current === this.opts.value.current);\n    constructor(opts, item, group) {\n        this.opts = opts;\n        this.item = item;\n        this.group = group;\n        this.attachment = attachRef(this.opts.ref);\n    }\n    selectValue() {\n        this.group.setValue(this.opts.value.current);\n    }\n    props = $derived.by(() => ({\n        [this.group.root.getBitsAttr(\"radio-item\")]: \"\",\n        ...this.item.props,\n        role: \"menuitemradio\",\n        \"aria-checked\": getAriaChecked(this.isChecked, false),\n        \"data-state\": getCheckedState(this.isChecked),\n        ...this.attachment,\n    }));\n}\nexport class DropdownMenuTriggerState {\n    static create(opts) {\n        return new DropdownMenuTriggerState(opts, MenuMenuContext.get());\n    }\n    opts;\n    parentMenu;\n    attachment;\n    constructor(opts, parentMenu) {\n        this.opts = opts;\n        this.parentMenu = parentMenu;\n        this.attachment = attachRef(this.opts.ref, (v) => (this.parentMenu.triggerNode = v));\n    }\n    onclick = (e) => {\n        /**\n         * MacOS VoiceOver sends a click in Safari/Firefox bypassing the keydown event\n         * when V0+Space is pressed. Since we already handle the keydown event and the\n         * pointerdown events separately, we ignore it if the detail is not 0.\n         */\n        if (this.opts.disabled.current || e.detail !== 0)\n            return;\n        this.parentMenu.toggleOpen();\n        e.preventDefault();\n    };\n    onpointerdown = (e) => {\n        if (this.opts.disabled.current)\n            return;\n        if (e.pointerType === \"touch\")\n            return e.preventDefault();\n        if (e.button === 0 && e.ctrlKey === false) {\n            this.parentMenu.toggleOpen();\n            // prevent trigger focusing when opening to allow\n            // the content to be given focus without competition\n            if (!this.parentMenu.opts.open.current)\n                e.preventDefault();\n        }\n    };\n    onpointerup = (e) => {\n        if (this.opts.disabled.current)\n            return;\n        if (e.pointerType === \"touch\") {\n            e.preventDefault();\n            this.parentMenu.toggleOpen();\n        }\n    };\n    onkeydown = (e) => {\n        if (this.opts.disabled.current)\n            return;\n        if (e.key === kbd.SPACE || e.key === kbd.ENTER) {\n            this.parentMenu.toggleOpen();\n            e.preventDefault();\n            return;\n        }\n        if (e.key === kbd.ARROW_DOWN) {\n            this.parentMenu.onOpen();\n            e.preventDefault();\n        }\n    };\n    #ariaControls = $derived.by(() => {\n        if (this.parentMenu.opts.open.current && this.parentMenu.contentId.current)\n            return this.parentMenu.contentId.current;\n        return undefined;\n    });\n    props = $derived.by(() => ({\n        id: this.opts.id.current,\n        disabled: this.opts.disabled.current,\n        \"aria-haspopup\": \"menu\",\n        \"aria-expanded\": boolToStr(this.parentMenu.opts.open.current),\n        \"aria-controls\": this.#ariaControls,\n        \"data-disabled\": boolToEmptyStrOrUndef(this.opts.disabled.current),\n        \"data-state\": getDataOpenClosed(this.parentMenu.opts.open.current),\n        [this.parentMenu.root.getBitsAttr(\"trigger\")]: \"\",\n        //\n        onclick: this.onclick,\n        onpointerdown: this.onpointerdown,\n        onpointerup: this.onpointerup,\n        onkeydown: this.onkeydown,\n        ...this.attachment,\n    }));\n}\nexport class ContextMenuTriggerState {\n    static create(opts) {\n        return new ContextMenuTriggerState(opts, MenuMenuContext.get());\n    }\n    opts;\n    parentMenu;\n    attachment;\n    #point = $state({ x: 0, y: 0 });\n    virtualElement = simpleBox({\n        getBoundingClientRect: () => DOMRect.fromRect({ width: 0, height: 0, ...this.#point }),\n    });\n    #longPressTimer = null;\n    constructor(opts, parentMenu) {\n        this.opts = opts;\n        this.parentMenu = parentMenu;\n        this.attachment = attachRef(this.opts.ref, (v) => (this.parentMenu.triggerNode = v));\n        this.oncontextmenu = this.oncontextmenu.bind(this);\n        this.onpointerdown = this.onpointerdown.bind(this);\n        this.onpointermove = this.onpointermove.bind(this);\n        this.onpointercancel = this.onpointercancel.bind(this);\n        this.onpointerup = this.onpointerup.bind(this);\n        watch(() => this.#point, (point) => {\n            this.virtualElement.current = {\n                getBoundingClientRect: () => DOMRect.fromRect({ width: 0, height: 0, ...point }),\n            };\n        });\n        watch(() => this.opts.disabled.current, (isDisabled) => {\n            if (isDisabled) {\n                this.#clearLongPressTimer();\n            }\n        });\n        onDestroyEffect(() => this.#clearLongPressTimer());\n    }\n    #clearLongPressTimer() {\n        if (this.#longPressTimer === null)\n            return;\n        getWindow(this.opts.ref.current).clearTimeout(this.#longPressTimer);\n    }\n    #handleOpen(e) {\n        this.#point = { x: e.clientX, y: e.clientY };\n        this.parentMenu.onOpen();\n    }\n    oncontextmenu(e) {\n        if (e.defaultPrevented || this.opts.disabled.current)\n            return;\n        this.#clearLongPressTimer();\n        this.#handleOpen(e);\n        e.preventDefault();\n        this.parentMenu.contentNode?.focus();\n    }\n    onpointerdown(e) {\n        if (this.opts.disabled.current || isMouseEvent(e))\n            return;\n        this.#clearLongPressTimer();\n        this.#longPressTimer = getWindow(this.opts.ref.current).setTimeout(() => this.#handleOpen(e), 700);\n    }\n    onpointermove(e) {\n        if (this.opts.disabled.current || isMouseEvent(e))\n            return;\n        this.#clearLongPressTimer();\n    }\n    onpointercancel(e) {\n        if (this.opts.disabled.current || isMouseEvent(e))\n            return;\n        this.#clearLongPressTimer();\n    }\n    onpointerup(e) {\n        if (this.opts.disabled.current || isMouseEvent(e))\n            return;\n        this.#clearLongPressTimer();\n    }\n    props = $derived.by(() => ({\n        id: this.opts.id.current,\n        disabled: this.opts.disabled.current,\n        \"data-disabled\": boolToEmptyStrOrUndef(this.opts.disabled.current),\n        \"data-state\": getDataOpenClosed(this.parentMenu.opts.open.current),\n        [CONTEXT_MENU_TRIGGER_ATTR]: \"\",\n        tabindex: -1,\n        //\n        onpointerdown: this.onpointerdown,\n        onpointermove: this.onpointermove,\n        onpointercancel: this.onpointercancel,\n        onpointerup: this.onpointerup,\n        oncontextmenu: this.oncontextmenu,\n        ...this.attachment,\n    }));\n}\nexport class MenuCheckboxGroupState {\n    static create(opts) {\n        return MenuCheckboxGroupContext.set(new MenuCheckboxGroupState(opts, MenuContentContext.get()));\n    }\n    opts;\n    content;\n    root;\n    attachment;\n    groupHeadingId = $state(null);\n    constructor(opts, content) {\n        this.opts = opts;\n        this.content = content;\n        this.root = content.parentMenu.root;\n        this.attachment = attachRef(this.opts.ref);\n    }\n    addValue(checkboxValue) {\n        if (!checkboxValue)\n            return;\n        if (!this.opts.value.current.includes(checkboxValue)) {\n            const newValue = [...$state.snapshot(this.opts.value.current), checkboxValue];\n            this.opts.value.current = newValue;\n            this.opts.onValueChange.current(newValue);\n        }\n    }\n    removeValue(checkboxValue) {\n        if (!checkboxValue)\n            return;\n        const index = this.opts.value.current.indexOf(checkboxValue);\n        if (index === -1)\n            return;\n        const newValue = this.opts.value.current.filter((v) => v !== checkboxValue);\n        this.opts.value.current = newValue;\n        this.opts.onValueChange.current(newValue);\n    }\n    props = $derived.by(() => ({\n        id: this.opts.id.current,\n        [this.root.getBitsAttr(\"checkbox-group\")]: \"\",\n        role: \"group\",\n        \"aria-labelledby\": this.groupHeadingId,\n        ...this.attachment,\n    }));\n}\nexport class MenuSubmenuState {\n    static create(opts) {\n        const menu = MenuMenuContext.get();\n        return MenuMenuContext.set(new MenuMenuState(opts, menu.root, menu));\n    }\n}\n","import { afterSleep, afterTick, executeCallbacks, onDestroyEffect, } from \"svelte-toolbelt\";\nimport { watch } from \"runed\";\nimport { on } from \"svelte/events\";\nimport {} from \"../../../internal/events.js\";\nimport { debounce } from \"../../../internal/debounce.js\";\nimport { noop } from \"../../../internal/noop.js\";\nimport { getOwnerDocument, isOrContainsTarget } from \"../../../internal/elements.js\";\nimport { isElementOrSVGElement } from \"../../../internal/is.js\";\nimport { isClickTrulyOutside } from \"../../../internal/dom.js\";\nimport { CONTEXT_MENU_CONTENT_ATTR, CONTEXT_MENU_TRIGGER_ATTR, } from \"../../menu/menu.svelte.js\";\nglobalThis.bitsDismissableLayers ??= new Map();\nexport class DismissibleLayerState {\n    static create(opts) {\n        return new DismissibleLayerState(opts);\n    }\n    opts;\n    #interactOutsideProp;\n    #behaviorType;\n    #interceptedEvents = {\n        pointerdown: false,\n    };\n    #isResponsibleLayer = false;\n    #isFocusInsideDOMTree = false;\n    #documentObj = undefined;\n    #onFocusOutside;\n    #unsubClickListener = noop;\n    constructor(opts) {\n        this.opts = opts;\n        this.#behaviorType = opts.interactOutsideBehavior;\n        this.#interactOutsideProp = opts.onInteractOutside;\n        this.#onFocusOutside = opts.onFocusOutside;\n        $effect(() => {\n            this.#documentObj = getOwnerDocument(this.opts.ref.current);\n        });\n        let unsubEvents = noop;\n        const cleanup = () => {\n            this.#resetState();\n            globalThis.bitsDismissableLayers.delete(this);\n            this.#handleInteractOutside.destroy();\n            unsubEvents();\n        };\n        watch([() => this.opts.enabled.current, () => this.opts.ref.current], () => {\n            if (!this.opts.enabled.current || !this.opts.ref.current)\n                return;\n            afterSleep(1, () => {\n                if (!this.opts.ref.current)\n                    return;\n                globalThis.bitsDismissableLayers.set(this, this.#behaviorType);\n                unsubEvents();\n                unsubEvents = this.#addEventListeners();\n            });\n            return cleanup;\n        });\n        onDestroyEffect(() => {\n            this.#resetState.destroy();\n            globalThis.bitsDismissableLayers.delete(this);\n            this.#handleInteractOutside.destroy();\n            this.#unsubClickListener();\n            unsubEvents();\n        });\n    }\n    #handleFocus = (event) => {\n        if (event.defaultPrevented)\n            return;\n        if (!this.opts.ref.current)\n            return;\n        afterTick(() => {\n            if (!this.opts.ref.current || this.#isTargetWithinLayer(event.target))\n                return;\n            if (event.target && !this.#isFocusInsideDOMTree) {\n                this.#onFocusOutside.current?.(event);\n            }\n        });\n    };\n    #addEventListeners() {\n        return executeCallbacks(\n        /**\n         * CAPTURE INTERACTION START\n         * mark interaction-start event as intercepted.\n         * mark responsible layer during interaction start\n         * to avoid checking if is responsible layer during interaction end\n         * when a new floating element may have been opened.\n         */\n        on(this.#documentObj, \"pointerdown\", executeCallbacks(this.#markInterceptedEvent, this.#markResponsibleLayer), { capture: true }), \n        /**\n         * BUBBLE INTERACTION START\n         * Mark interaction-start event as non-intercepted. Debounce `onInteractOutsideStart`\n         * to avoid prematurely checking if other events were intercepted.\n         */\n        on(this.#documentObj, \"pointerdown\", executeCallbacks(this.#markNonInterceptedEvent, this.#handleInteractOutside)), \n        /**\n         * HANDLE FOCUS OUTSIDE\n         */\n        on(this.#documentObj, \"focusin\", this.#handleFocus));\n    }\n    #handleDismiss = (e) => {\n        let event = e;\n        if (event.defaultPrevented) {\n            event = createWrappedEvent(e);\n        }\n        this.#interactOutsideProp.current(e);\n    };\n    #handleInteractOutside = debounce((e) => {\n        if (!this.opts.ref.current) {\n            this.#unsubClickListener();\n            return;\n        }\n        const isEventValid = this.opts.isValidEvent.current(e, this.opts.ref.current) ||\n            isValidEvent(e, this.opts.ref.current);\n        if (!this.#isResponsibleLayer || this.#isAnyEventIntercepted() || !isEventValid) {\n            this.#unsubClickListener();\n            return;\n        }\n        let event = e;\n        if (event.defaultPrevented) {\n            event = createWrappedEvent(event);\n        }\n        if (this.#behaviorType.current !== \"close\" &&\n            this.#behaviorType.current !== \"defer-otherwise-close\") {\n            this.#unsubClickListener();\n            return;\n        }\n        if (e.pointerType === \"touch\") {\n            this.#unsubClickListener();\n            this.#unsubClickListener = on(this.#documentObj, \"click\", this.#handleDismiss, {\n                once: true,\n            });\n        }\n        else {\n            this.#interactOutsideProp.current(event);\n        }\n    }, 10);\n    #markInterceptedEvent = (e) => {\n        this.#interceptedEvents[e.type] = true;\n    };\n    #markNonInterceptedEvent = (e) => {\n        this.#interceptedEvents[e.type] = false;\n    };\n    #markResponsibleLayer = () => {\n        if (!this.opts.ref.current)\n            return;\n        this.#isResponsibleLayer = isResponsibleLayer(this.opts.ref.current);\n    };\n    #isTargetWithinLayer = (target) => {\n        if (!this.opts.ref.current)\n            return false;\n        return isOrContainsTarget(this.opts.ref.current, target);\n    };\n    #resetState = debounce(() => {\n        for (const eventType in this.#interceptedEvents) {\n            this.#interceptedEvents[eventType] = false;\n        }\n        this.#isResponsibleLayer = false;\n    }, 20);\n    #isAnyEventIntercepted() {\n        const i = Object.values(this.#interceptedEvents).some(Boolean);\n        return i;\n    }\n    #onfocuscapture = () => {\n        this.#isFocusInsideDOMTree = true;\n    };\n    #onblurcapture = () => {\n        this.#isFocusInsideDOMTree = false;\n    };\n    props = {\n        onfocuscapture: this.#onfocuscapture,\n        onblurcapture: this.#onblurcapture,\n    };\n}\nexport function getTopMostDismissableLayer(layersArr = [\n    ...globalThis.bitsDismissableLayers,\n]) {\n    return layersArr.findLast(([_, { current: behaviorType }]) => behaviorType === \"close\" || behaviorType === \"ignore\");\n}\nfunction isResponsibleLayer(node) {\n    const layersArr = [...globalThis.bitsDismissableLayers];\n    /**\n     * We first check if we can find a top layer with `close` or `ignore`.\n     * If that top layer was found and matches the provided node, then the node is\n     * responsible for the outside interaction. Otherwise, we know that all layers defer so\n     * the first layer is the responsible one.\n     */\n    const topMostLayer = getTopMostDismissableLayer(layersArr);\n    if (topMostLayer)\n        return topMostLayer[0].opts.ref.current === node;\n    const [firstLayerNode] = layersArr[0];\n    return firstLayerNode.opts.ref.current === node;\n}\nfunction isValidEvent(e, node) {\n    const target = e.target;\n    if (!isElementOrSVGElement(target))\n        return false;\n    const targetIsContextMenuTrigger = Boolean(target.closest(`[${CONTEXT_MENU_TRIGGER_ATTR}]`));\n    if (\"button\" in e && e.button > 0 && !targetIsContextMenuTrigger)\n        return false;\n    if (\"button\" in e && e.button === 0 && targetIsContextMenuTrigger)\n        return true;\n    const nodeIsContextMenu = Boolean(node.closest(`[${CONTEXT_MENU_CONTENT_ATTR}]`));\n    if (targetIsContextMenuTrigger && nodeIsContextMenu)\n        return false;\n    const ownerDocument = getOwnerDocument(target);\n    const isValid = ownerDocument.documentElement.contains(target) &&\n        !isOrContainsTarget(node, target) &&\n        isClickTrulyOutside(e, node);\n    return isValid;\n}\nfunction createWrappedEvent(e) {\n    const capturedCurrentTarget = e.currentTarget;\n    const capturedTarget = e.target;\n    let newEvent;\n    if (e instanceof PointerEvent) {\n        newEvent = new PointerEvent(e.type, e);\n    }\n    else {\n        newEvent = new PointerEvent(\"pointerdown\", e);\n    }\n    // track the prevented state separately\n    let isPrevented = false;\n    // Create a proxy to intercept property access and method calls\n    const wrappedEvent = new Proxy(newEvent, {\n        get: (target, prop) => {\n            if (prop === \"currentTarget\") {\n                return capturedCurrentTarget;\n            }\n            if (prop === \"target\") {\n                return capturedTarget;\n            }\n            if (prop === \"preventDefault\") {\n                return () => {\n                    isPrevented = true;\n                    if (typeof target.preventDefault === \"function\") {\n                        target.preventDefault();\n                    }\n                };\n            }\n            if (prop === \"defaultPrevented\") {\n                return isPrevented;\n            }\n            if (prop in target) {\n                // oxlint-disable-next-line no-explicit-any\n                return target[prop];\n            }\n            // oxlint-disable-next-line no-explicit-any\n            return e[prop];\n        },\n    });\n    return wrappedEvent;\n}\n","export function getFirstNonCommentChild(element) {\n    if (!element)\n        return null;\n    for (const child of element.childNodes) {\n        if (child.nodeType !== Node.COMMENT_NODE) {\n            return child;\n        }\n    }\n    return null;\n}\n/**\n * Determines if the click event truly occurred outside the content node.\n * This was added to handle password managers and other elements that may be injected\n * into the DOM but visually appear inside the content.\n */\nexport function isClickTrulyOutside(event, contentNode) {\n    const { clientX, clientY } = event;\n    const rect = contentNode.getBoundingClientRect();\n    return (clientX < rect.left || clientX > rect.right || clientY < rect.top || clientY > rect.bottom);\n}\n","/**\n * A utility function that executes a callback after a specified number of milliseconds.\n */\nexport function afterSleep(ms, cb) {\n    return setTimeout(cb, ms);\n}\n","import { DOMContext } from \"svelte-toolbelt\";\nimport { watch } from \"runed\";\nimport { on } from \"svelte/events\";\nimport { kbd } from \"../../../internal/kbd.js\";\nimport { noop } from \"../../../internal/noop.js\";\nglobalThis.bitsEscapeLayers ??= new Map();\nexport class EscapeLayerState {\n    static create(opts) {\n        return new EscapeLayerState(opts);\n    }\n    opts;\n    domContext;\n    constructor(opts) {\n        this.opts = opts;\n        this.domContext = new DOMContext(this.opts.ref);\n        let unsubEvents = noop;\n        watch(() => opts.enabled.current, (enabled) => {\n            if (enabled) {\n                globalThis.bitsEscapeLayers.set(this, opts.escapeKeydownBehavior);\n                unsubEvents = this.#addEventListener();\n            }\n            return () => {\n                unsubEvents();\n                globalThis.bitsEscapeLayers.delete(this);\n            };\n        });\n    }\n    #addEventListener = () => {\n        return on(this.domContext.getDocument(), \"keydown\", this.#onkeydown, { passive: false });\n    };\n    #onkeydown = (e) => {\n        if (e.key !== kbd.ESCAPE || !isResponsibleEscapeLayer(this))\n            return;\n        const clonedEvent = new KeyboardEvent(e.type, e);\n        e.preventDefault();\n        const behaviorType = this.opts.escapeKeydownBehavior.current;\n        if (behaviorType !== \"close\" && behaviorType !== \"defer-otherwise-close\")\n            return;\n        this.opts.onEscapeKeydown.current(clonedEvent);\n    };\n}\nfunction isResponsibleEscapeLayer(instance) {\n    const layersArr = [...globalThis.bitsEscapeLayers];\n    /**\n     * We first check if we can find a top layer with `close` or `ignore`.\n     * If that top layer was found and matches the provided node, then the node is\n     * responsible for the escape. Otherwise, we know that all layers defer so\n     * the first layer is the responsible one.\n     */\n    const topMostLayer = layersArr.findLast(([_, { current: behaviorType }]) => behaviorType === \"close\" || behaviorType === \"ignore\");\n    if (topMostLayer)\n        return topMostLayer[0] === instance;\n    const [firstLayerNode] = layersArr[0];\n    return firstLayerNode === instance;\n}\n","import { simpleBox } from \"svelte-toolbelt\";\nimport { FocusScope } from \"./focus-scope.svelte.js\";\nexport class FocusScopeManager {\n    static instance;\n    #scopeStack = simpleBox([]);\n    #focusHistory = new WeakMap();\n    #preFocusHistory = new WeakMap();\n    static getInstance() {\n        if (!this.instance) {\n            this.instance = new FocusScopeManager();\n        }\n        return this.instance;\n    }\n    register(scope) {\n        const current = this.getActive();\n        if (current && current !== scope) {\n            current.pause();\n        }\n        // capture the currently focused element before this scope becomes active\n        const activeElement = document.activeElement;\n        if (activeElement && activeElement !== document.body) {\n            this.#preFocusHistory.set(scope, activeElement);\n        }\n        this.#scopeStack.current = this.#scopeStack.current.filter((s) => s !== scope);\n        this.#scopeStack.current.unshift(scope);\n    }\n    unregister(scope) {\n        this.#scopeStack.current = this.#scopeStack.current.filter((s) => s !== scope);\n        const next = this.getActive();\n        if (next) {\n            next.resume();\n        }\n    }\n    getActive() {\n        return this.#scopeStack.current[0];\n    }\n    setFocusMemory(scope, element) {\n        this.#focusHistory.set(scope, element);\n    }\n    getFocusMemory(scope) {\n        return this.#focusHistory.get(scope);\n    }\n    isActiveScope(scope) {\n        return this.getActive() === scope;\n    }\n    setPreFocusMemory(scope, element) {\n        this.#preFocusHistory.set(scope, element);\n    }\n    getPreFocusMemory(scope) {\n        return this.#preFocusHistory.get(scope);\n    }\n    clearPreFocusMemory(scope) {\n        this.#preFocusHistory.delete(scope);\n    }\n}\n","import { onDestroyEffect } from \"svelte-toolbelt\";\nimport { FocusScopeManager } from \"./focus-scope-manager.js\";\nimport { focusable, isFocusable, tabbable } from \"tabbable\";\nimport { on } from \"svelte/events\";\nimport { watch } from \"runed\";\nexport class FocusScope {\n    #paused = false;\n    #container = null;\n    #manager = FocusScopeManager.getInstance();\n    #cleanupFns = [];\n    #opts;\n    constructor(opts) {\n        this.#opts = opts;\n    }\n    get paused() {\n        return this.#paused;\n    }\n    pause() {\n        this.#paused = true;\n    }\n    resume() {\n        this.#paused = false;\n    }\n    #cleanup() {\n        for (const fn of this.#cleanupFns) {\n            fn();\n        }\n        this.#cleanupFns = [];\n    }\n    mount(container) {\n        if (this.#container) {\n            this.unmount();\n        }\n        this.#container = container;\n        this.#manager.register(this);\n        this.#setupEventListeners();\n        this.#handleOpenAutoFocus();\n    }\n    unmount() {\n        if (!this.#container)\n            return;\n        this.#cleanup();\n        // handle close auto-focus\n        this.#handleCloseAutoFocus();\n        this.#manager.unregister(this);\n        this.#manager.clearPreFocusMemory(this);\n        this.#container = null;\n    }\n    #handleOpenAutoFocus() {\n        if (!this.#container)\n            return;\n        const event = new CustomEvent(\"focusScope.onOpenAutoFocus\", {\n            bubbles: false,\n            cancelable: true,\n        });\n        this.#opts.onOpenAutoFocus.current(event);\n        if (!event.defaultPrevented) {\n            requestAnimationFrame(() => {\n                if (!this.#container)\n                    return;\n                const firstTabbable = this.#getFirstTabbable();\n                if (firstTabbable) {\n                    firstTabbable.focus();\n                    this.#manager.setFocusMemory(this, firstTabbable);\n                }\n                else {\n                    this.#container.focus();\n                }\n            });\n        }\n    }\n    #handleCloseAutoFocus() {\n        const event = new CustomEvent(\"focusScope.onCloseAutoFocus\", {\n            bubbles: false,\n            cancelable: true,\n        });\n        this.#opts.onCloseAutoFocus.current?.(event);\n        if (!event.defaultPrevented) {\n            // return focus to the element that was focused before this scope opened\n            const preFocusedElement = this.#manager.getPreFocusMemory(this);\n            if (preFocusedElement && document.contains(preFocusedElement)) {\n                // ensure the element is still focusable and in the document\n                try {\n                    preFocusedElement.focus();\n                }\n                catch {\n                    // fallback if focus fails\n                    document.body.focus();\n                }\n            }\n        }\n    }\n    #setupEventListeners() {\n        if (!this.#container || !this.#opts.trap.current)\n            return;\n        const container = this.#container;\n        const doc = container.ownerDocument;\n        const handleFocus = (e) => {\n            if (this.#paused || !this.#manager.isActiveScope(this))\n                return;\n            const target = e.target;\n            if (!target)\n                return;\n            const isInside = container.contains(target);\n            if (isInside) {\n                // store last focused element\n                this.#manager.setFocusMemory(this, target);\n            }\n            else {\n                // focus escaped - bring it back\n                const lastFocused = this.#manager.getFocusMemory(this);\n                if (lastFocused && container.contains(lastFocused) && isFocusable(lastFocused)) {\n                    e.preventDefault();\n                    lastFocused.focus();\n                }\n                else {\n                    // fallback to first tabbable or first focusable or container\n                    const firstTabbable = this.#getFirstTabbable();\n                    const firstFocusable = this.#getAllFocusables()[0];\n                    (firstTabbable || firstFocusable || container).focus();\n                }\n            }\n        };\n        const handleKeydown = (e) => {\n            if (!this.#opts.loop || this.#paused || e.key !== \"Tab\")\n                return;\n            if (!this.#manager.isActiveScope(this))\n                return;\n            const tabbables = this.#getTabbables();\n            if (tabbables.length < 2)\n                return;\n            const first = tabbables[0];\n            const last = tabbables[tabbables.length - 1];\n            if (!e.shiftKey && doc.activeElement === last) {\n                e.preventDefault();\n                first.focus();\n            }\n            else if (e.shiftKey && doc.activeElement === first) {\n                e.preventDefault();\n                last.focus();\n            }\n        };\n        this.#cleanupFns.push(on(doc, \"focusin\", handleFocus, { capture: true }), on(container, \"keydown\", handleKeydown));\n        const observer = new MutationObserver(() => {\n            const lastFocused = this.#manager.getFocusMemory(this);\n            if (lastFocused && !container.contains(lastFocused)) {\n                // last focused element was removed\n                const firstTabbable = this.#getFirstTabbable();\n                const firstFocusable = this.#getAllFocusables()[0];\n                const elementToFocus = firstTabbable || firstFocusable;\n                if (elementToFocus) {\n                    elementToFocus.focus();\n                    this.#manager.setFocusMemory(this, elementToFocus);\n                }\n                else {\n                    // no focusable elements left, focus container\n                    container.focus();\n                }\n            }\n        });\n        observer.observe(container, {\n            childList: true,\n            subtree: true,\n        });\n        this.#cleanupFns.push(() => observer.disconnect());\n    }\n    #getTabbables() {\n        if (!this.#container)\n            return [];\n        return tabbable(this.#container, {\n            includeContainer: false,\n            getShadowRoot: true,\n        });\n    }\n    #getFirstTabbable() {\n        const tabbables = this.#getTabbables();\n        return tabbables[0] || null;\n    }\n    #getAllFocusables() {\n        if (!this.#container)\n            return [];\n        return focusable(this.#container, {\n            includeContainer: false,\n            getShadowRoot: true,\n        });\n    }\n    static use(opts) {\n        let scope = null;\n        watch([() => opts.ref.current, () => opts.enabled.current], ([ref, enabled]) => {\n            if (ref && enabled) {\n                if (!scope) {\n                    scope = new FocusScope(opts);\n                }\n                scope.mount(ref);\n            }\n            else if (scope) {\n                scope.unmount();\n                scope = null;\n            }\n        });\n        onDestroyEffect(() => {\n            scope?.unmount();\n        });\n        return {\n            get props() {\n                return {\n                    tabindex: -1,\n                };\n            },\n        };\n    }\n}\n","import { DOMContext, composeHandlers, contains, executeCallbacks, } from \"svelte-toolbelt\";\nimport { watch } from \"runed\";\nimport { on } from \"svelte/events\";\nimport { noop } from \"../../../internal/noop.js\";\nimport { isHTMLElement } from \"../../../internal/is.js\";\nglobalThis.bitsTextSelectionLayers ??= new Map();\nexport class TextSelectionLayerState {\n    static create(opts) {\n        return new TextSelectionLayerState(opts);\n    }\n    opts;\n    domContext;\n    #unsubSelectionLock = noop;\n    constructor(opts) {\n        this.opts = opts;\n        this.domContext = new DOMContext(opts.ref);\n        let unsubEvents = noop;\n        watch(() => this.opts.enabled.current, (isEnabled) => {\n            if (isEnabled) {\n                globalThis.bitsTextSelectionLayers.set(this, this.opts.enabled);\n                unsubEvents();\n                unsubEvents = this.#addEventListeners();\n            }\n            return () => {\n                unsubEvents();\n                this.#resetSelectionLock();\n                globalThis.bitsTextSelectionLayers.delete(this);\n            };\n        });\n    }\n    #addEventListeners() {\n        return executeCallbacks(on(this.domContext.getDocument(), \"pointerdown\", this.#pointerdown), on(this.domContext.getDocument(), \"pointerup\", composeHandlers(this.#resetSelectionLock, this.opts.onPointerUp.current)));\n    }\n    #pointerdown = (e) => {\n        const node = this.opts.ref.current;\n        const target = e.target;\n        if (!isHTMLElement(node) || !isHTMLElement(target) || !this.opts.enabled.current)\n            return;\n        /**\n         * We only lock user-selection overflow if layer is the top most layer and\n         * pointerdown occurred inside the node. You are still allowed to select text\n         * outside the node provided pointerdown occurs outside the node.\n         */\n        if (!isHighestLayer(this) || !contains(node, target))\n            return;\n        this.opts.onPointerDown.current(e);\n        if (e.defaultPrevented)\n            return;\n        this.#unsubSelectionLock = preventTextSelectionOverflow(node, this.domContext.getDocument().body);\n    };\n    #resetSelectionLock = () => {\n        this.#unsubSelectionLock();\n        this.#unsubSelectionLock = noop;\n    };\n}\nconst getUserSelect = (node) => node.style.userSelect || node.style.webkitUserSelect;\nfunction preventTextSelectionOverflow(node, body) {\n    const originalBodyUserSelect = getUserSelect(body);\n    const originalNodeUserSelect = getUserSelect(node);\n    setUserSelect(body, \"none\");\n    setUserSelect(node, \"text\");\n    return () => {\n        setUserSelect(body, originalBodyUserSelect);\n        setUserSelect(node, originalNodeUserSelect);\n    };\n}\nfunction setUserSelect(node, value) {\n    node.style.userSelect = value;\n    node.style.webkitUserSelect = value;\n}\nfunction isHighestLayer(instance) {\n    const layersArr = [...globalThis.bitsTextSelectionLayers];\n    if (!layersArr.length)\n        return false;\n    const highestLayer = layersArr.at(-1);\n    if (!highestLayer)\n        return false;\n    return highestLayer[0] === instance;\n}\n","globalThis.bitsIdCounter ??= { current: 0 };\n/**\n * Generates a unique ID based on a global counter.\n */\nexport function useId(prefix = \"bits\") {\n    globalThis.bitsIdCounter.current++;\n    return `${prefix}-${globalThis.bitsIdCounter.current}`;\n}\n","export class SharedState {\n    #factory;\n    #subscribers = 0;\n    #state = $state();\n    #scope;\n    constructor(factory) {\n        this.#factory = factory;\n    }\n    #dispose() {\n        this.#subscribers -= 1;\n        if (this.#scope && this.#subscribers <= 0) {\n            this.#scope();\n            this.#state = undefined;\n            this.#scope = undefined;\n        }\n    }\n    get(...args) {\n        this.#subscribers += 1;\n        if (this.#state === undefined) {\n            this.#scope = $effect.root(() => {\n                this.#state = this.#factory(...args);\n            });\n        }\n        $effect(() => {\n            return () => {\n                this.#dispose();\n            };\n        });\n        return this.#state;\n    }\n}\n","import { SvelteMap } from \"svelte/reactivity\";\nimport { afterTick, boxWith, onDestroyEffect, } from \"svelte-toolbelt\";\nimport { isIOS } from \"./is.js\";\nimport { useId } from \"./use-id.js\";\nimport { watch } from \"runed\";\nimport { SharedState } from \"./shared-state.svelte.js\";\nimport { BROWSER } from \"esm-env\";\nimport { on } from \"svelte/events\";\n/** A map of lock ids to their `locked` state. */\nconst lockMap = new SvelteMap();\nlet initialBodyStyle = $state(null);\nlet stopTouchMoveListener = null;\nlet cleanupTimeoutId = null;\nlet isInCleanupTransition = false;\nconst anyLocked = boxWith(() => {\n    for (const value of lockMap.values()) {\n        if (value)\n            return true;\n    }\n    return false;\n});\n/**\n * We track the time we scheduled the cleanup to prevent race conditions\n * when multiple locks are created/destroyed in the same tick, ensuring\n * only the last one to schedule the cleanup will run.\n *\n * reference: https://github.com/huntabyte/bits-ui/issues/1639\n */\nlet cleanupScheduledAt = null;\nconst bodyLockStackCount = new SharedState(() => {\n    function resetBodyStyle() {\n        if (!BROWSER)\n            return;\n        document.body.setAttribute(\"style\", initialBodyStyle ?? \"\");\n        document.body.style.removeProperty(\"--scrollbar-width\");\n        isIOS && stopTouchMoveListener?.();\n        // reset initialBodyStyle so next locker captures the correct styles\n        initialBodyStyle = null;\n    }\n    function cancelPendingCleanup() {\n        if (cleanupTimeoutId === null)\n            return;\n        window.clearTimeout(cleanupTimeoutId);\n        cleanupTimeoutId = null;\n    }\n    function scheduleCleanupIfNoNewLocks(delay, callback) {\n        cancelPendingCleanup();\n        isInCleanupTransition = true;\n        cleanupScheduledAt = Date.now();\n        const currentCleanupId = cleanupScheduledAt;\n        /**\n         * We schedule the cleanup to run after a delay to allow new locks to register\n         * that might have been added in the same tick as the current cleanup.\n         *\n         * If a new lock is added in the same tick, the cleanup will be cancelled and\n         * a new cleanup will be scheduled.\n         *\n         * This is to prevent the cleanup from running too early and resetting the body\n         * style before the new lock has had a chance to apply its styles.\n         */\n        const cleanupFn = () => {\n            cleanupTimeoutId = null;\n            // check if this cleanup is still valid (no newer cleanups scheduled)\n            if (cleanupScheduledAt !== currentCleanupId)\n                return;\n            // ensure no new locks were added during the delay\n            if (!isAnyLocked(lockMap)) {\n                isInCleanupTransition = false;\n                callback();\n            }\n            else {\n                isInCleanupTransition = false;\n            }\n        };\n        const actualDelay = delay === null ? 24 : delay;\n        cleanupTimeoutId = window.setTimeout(cleanupFn, actualDelay);\n    }\n    function ensureInitialStyleCaptured() {\n        // only capture initial style once, when no locks exist and no cleanup is in progress\n        if (initialBodyStyle === null && lockMap.size === 0 && !isInCleanupTransition) {\n            initialBodyStyle = document.body.getAttribute(\"style\");\n        }\n    }\n    watch(() => anyLocked.current, () => {\n        if (!anyLocked.current)\n            return;\n        // ensure we've captured the initial style before applying any lock styles\n        ensureInitialStyleCaptured();\n        // if we're applying lock styles, we're no longer in a cleanup transition\n        isInCleanupTransition = false;\n        const bodyStyle = getComputedStyle(document.body);\n        // TODO: account for RTL direction, etc.\n        const verticalScrollbarWidth = window.innerWidth - document.documentElement.clientWidth;\n        const paddingRight = Number.parseInt(bodyStyle.paddingRight ?? \"0\", 10);\n        const config = {\n            padding: paddingRight + verticalScrollbarWidth,\n            margin: Number.parseInt(bodyStyle.marginRight ?? \"0\", 10),\n        };\n        if (verticalScrollbarWidth > 0) {\n            document.body.style.paddingRight = `${config.padding}px`;\n            document.body.style.marginRight = `${config.margin}px`;\n            document.body.style.setProperty(\"--scrollbar-width\", `${verticalScrollbarWidth}px`);\n            document.body.style.overflow = \"hidden\";\n        }\n        if (isIOS) {\n            // IOS devices are special and require a touchmove listener to prevent scrolling\n            stopTouchMoveListener = on(document, \"touchmove\", (e) => {\n                if (e.target !== document.documentElement)\n                    return;\n                if (e.touches.length > 1)\n                    return;\n                e.preventDefault();\n            }, { passive: false });\n        }\n        /**\n         * We ensure pointer-events: none is applied _after_ DOM updates, so that any focus/\n         * interaction changes from opening overlays/menus complete _before_ we block pointer\n         * events.\n         *\n         * this avoids race conditions where pointer-events could be set too early and break\n         * focus/interaction.\n         */\n        afterTick(() => {\n            document.body.style.pointerEvents = \"none\";\n            document.body.style.overflow = \"hidden\";\n        });\n    });\n    onDestroyEffect(() => {\n        return () => {\n            stopTouchMoveListener?.();\n        };\n    });\n    return {\n        get lockMap() {\n            return lockMap;\n        },\n        resetBodyStyle,\n        scheduleCleanupIfNoNewLocks,\n        cancelPendingCleanup,\n        ensureInitialStyleCaptured,\n    };\n});\nexport class BodyScrollLock {\n    #id = useId();\n    #initialState;\n    #restoreScrollDelay = () => null;\n    #countState;\n    locked;\n    constructor(initialState, restoreScrollDelay = () => null) {\n        this.#initialState = initialState;\n        this.#restoreScrollDelay = restoreScrollDelay;\n        this.#countState = bodyLockStackCount.get();\n        if (!this.#countState)\n            return;\n        /**\n         * Since a new lock is being created, we cancel any pending cleanup to\n         * prevent the cleanup from running too early and resetting the body style\n         * before the new lock has had a chance to apply its styles.\n         *\n         * reference: https://github.com/huntabyte/bits-ui/issues/1639\n         */\n        this.#countState.cancelPendingCleanup();\n        // capture initial style before this lock is registered\n        this.#countState.ensureInitialStyleCaptured();\n        this.#countState.lockMap.set(this.#id, this.#initialState ?? false);\n        this.locked = boxWith(() => this.#countState.lockMap.get(this.#id) ?? false, (v) => this.#countState.lockMap.set(this.#id, v));\n        onDestroyEffect(() => {\n            this.#countState.lockMap.delete(this.#id);\n            // if not the last lock, we don't need to do anything\n            if (isAnyLocked(this.#countState.lockMap))\n                return;\n            const restoreScrollDelay = this.#restoreScrollDelay();\n            /**\n             * We schedule the cleanup to run after a delay to handle same-tick\n             * destroy/create scenarios.\n             *\n             * reference: https://github.com/huntabyte/bits-ui/issues/1639\n             */\n            this.#countState.scheduleCleanupIfNoNewLocks(restoreScrollDelay, () => {\n                this.#countState.resetBodyStyle();\n            });\n        });\n    }\n}\nfunction isAnyLocked(map) {\n    for (const [_, value] of map) {\n        if (value)\n            return true;\n    }\n    return false;\n}\n","<script lang=\"ts\">\n\timport type { ScrollLockProps } from \"./index.js\";\n\timport { BodyScrollLock } from \"../../../internal/body-scroll-lock.svelte.js\";\n\n\tlet { preventScroll = true, restoreScrollDelay = null }: ScrollLockProps = $props();\n\n\tif (preventScroll) {\n\t\tnew BodyScrollLock(preventScroll, () => restoreScrollDelay);\n\t}\n</script>\n","<script lang=\"ts\">\n\timport { boxWith, mergeProps } from \"svelte-toolbelt\";\n\timport { DialogOverlayState } from \"../dialog.svelte.js\";\n\timport type { DialogOverlayProps } from \"../types.js\";\n\timport { createId } from \"../../../internal/create-id.js\";\n\n\tconst uid = $props.id();\n\n\tlet {\n\t\tid = createId(uid),\n\t\tforceMount = false,\n\t\tchild,\n\t\tchildren,\n\t\tref = $bindable(null),\n\t\t...restProps\n\t}: DialogOverlayProps = $props();\n\n\tconst overlayState = DialogOverlayState.create({\n\t\tid: boxWith(() => id),\n\t\tref: boxWith(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t});\n\n\tconst mergedProps = $derived(mergeProps(restProps, overlayState.props));\n</script>\n\n{#if overlayState.shouldRender || forceMount}\n\t{#if child}\n\t\t{@render child({ props: mergeProps(mergedProps), ...overlayState.snippetProps })}\n\t{:else}\n\t\t<div {...mergeProps(mergedProps)}>\n\t\t\t{@render children?.(overlayState.snippetProps)}\n\t\t</div>\n\t{/if}\n{/if}\n","<script lang=\"ts\">\n\timport { boxWith, mergeProps } from \"svelte-toolbelt\";\n\timport { DialogDescriptionState } from \"../dialog.svelte.js\";\n\timport type { DialogDescriptionProps } from \"../types.js\";\n\timport { createId } from \"../../../internal/create-id.js\";\n\n\tconst uid = $props.id();\n\n\tlet {\n\t\tid = createId(uid),\n\t\tchildren,\n\t\tchild,\n\t\tref = $bindable(null),\n\t\t...restProps\n\t}: DialogDescriptionProps = $props();\n\n\tconst descriptionState = DialogDescriptionState.create({\n\t\tid: boxWith(() => id),\n\t\tref: boxWith(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t});\n\n\tconst mergedProps = $derived(mergeProps(restProps, descriptionState.props));\n</script>\n\n{#if child}\n\t{@render child({ props: mergedProps })}\n{:else}\n\t<div {...mergedProps}>\n\t\t{@render children?.()}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { boxWith } from \"svelte-toolbelt\";\n\timport { DialogRootState } from \"../dialog.svelte.js\";\n\timport type { DialogRootProps } from \"../types.js\";\n\timport { noop } from \"../../../internal/noop.js\";\n\n\tlet {\n\t\topen = $bindable(false),\n\t\tonOpenChange = noop,\n\t\tonOpenChangeComplete = noop,\n\t\tchildren,\n\t}: DialogRootProps = $props();\n\n\tDialogRootState.create({\n\t\tvariant: boxWith(() => \"dialog\"),\n\t\topen: boxWith(\n\t\t\t() => open,\n\t\t\t(v) => {\n\t\t\t\topen = v;\n\t\t\t\tonOpenChange(v);\n\t\t\t}\n\t\t),\n\t\tonOpenChangeComplete: boxWith(() => onOpenChangeComplete),\n\t});\n</script>\n\n{@render children?.()}\n","<script lang=\"ts\">\n\timport { boxWith, mergeProps } from \"svelte-toolbelt\";\n\timport { DialogCloseState } from \"../dialog.svelte.js\";\n\timport type { DialogCloseProps } from \"../types.js\";\n\timport { createId } from \"../../../internal/create-id.js\";\n\n\tconst uid = $props.id();\n\n\tlet {\n\t\tchildren,\n\t\tchild,\n\t\tid = createId(uid),\n\t\tref = $bindable(null),\n\t\tdisabled = false,\n\t\t...restProps\n\t}: DialogCloseProps = $props();\n\n\tconst closeState = DialogCloseState.create({\n\t\tvariant: boxWith(() => \"close\"),\n\t\tid: boxWith(() => id),\n\t\tref: boxWith(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t\tdisabled: boxWith(() => Boolean(disabled)),\n\t});\n\n\tconst mergedProps = $derived(mergeProps(restProps, closeState.props));\n</script>\n\n{#if child}\n\t{@render child({ props: mergedProps })}\n{:else}\n\t<button {...mergedProps}>\n\t\t{@render children?.()}\n\t</button>\n{/if}\n","<script lang=\"ts\">\n\timport { boxWith, mergeProps } from \"svelte-toolbelt\";\n\timport { DialogContentState } from \"../dialog.svelte.js\";\n\timport type { DialogContentProps } from \"../types.js\";\n\timport DismissibleLayer from \"../../utilities/dismissible-layer/dismissible-layer.svelte\";\n\timport EscapeLayer from \"../../utilities/escape-layer/escape-layer.svelte\";\n\timport FocusScope from \"../../utilities/focus-scope/focus-scope.svelte\";\n\timport TextSelectionLayer from \"../../utilities/text-selection-layer/text-selection-layer.svelte\";\n\timport { createId } from \"../../../internal/create-id.js\";\n\timport { noop } from \"../../../internal/noop.js\";\n\timport ScrollLock from \"../../utilities/scroll-lock/scroll-lock.svelte\";\n\tconst uid = $props.id();\n\n\tlet {\n\t\tid = createId(uid),\n\t\tchildren,\n\t\tchild,\n\t\tref = $bindable(null),\n\t\tforceMount = false,\n\t\tonCloseAutoFocus = noop,\n\t\tonOpenAutoFocus = noop,\n\t\tonEscapeKeydown = noop,\n\t\tonInteractOutside = noop,\n\t\ttrapFocus = true,\n\t\tpreventScroll = true,\n\t\trestoreScrollDelay = null,\n\t\t...restProps\n\t}: DialogContentProps = $props();\n\n\tconst contentState = DialogContentState.create({\n\t\tid: boxWith(() => id),\n\t\tref: boxWith(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t});\n\n\tconst mergedProps = $derived(mergeProps(restProps, contentState.props));\n</script>\n\n{#if contentState.shouldRender || forceMount}\n\t<FocusScope\n\t\tref={contentState.opts.ref}\n\t\tloop\n\t\t{trapFocus}\n\t\tenabled={contentState.root.opts.open.current}\n\t\t{onOpenAutoFocus}\n\t\t{onCloseAutoFocus}\n\t>\n\t\t{#snippet focusScope({ props: focusScopeProps })}\n\t\t\t<EscapeLayer\n\t\t\t\t{...mergedProps}\n\t\t\t\tenabled={contentState.root.opts.open.current}\n\t\t\t\tref={contentState.opts.ref}\n\t\t\t\tonEscapeKeydown={(e) => {\n\t\t\t\t\tonEscapeKeydown(e);\n\t\t\t\t\tif (e.defaultPrevented) return;\n\t\t\t\t\tcontentState.root.handleClose();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<DismissibleLayer\n\t\t\t\t\t{...mergedProps}\n\t\t\t\t\tref={contentState.opts.ref}\n\t\t\t\t\tenabled={contentState.root.opts.open.current}\n\t\t\t\t\tonInteractOutside={(e) => {\n\t\t\t\t\t\tonInteractOutside(e);\n\t\t\t\t\t\tif (e.defaultPrevented) return;\n\t\t\t\t\t\tcontentState.root.handleClose();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<TextSelectionLayer\n\t\t\t\t\t\t{...mergedProps}\n\t\t\t\t\t\tref={contentState.opts.ref}\n\t\t\t\t\t\tenabled={contentState.root.opts.open.current}\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if child}\n\t\t\t\t\t\t\t{#if contentState.root.opts.open.current}\n\t\t\t\t\t\t\t\t<ScrollLock {preventScroll} {restoreScrollDelay} />\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{@render child({\n\t\t\t\t\t\t\t\tprops: mergeProps(mergedProps, focusScopeProps),\n\t\t\t\t\t\t\t\t...contentState.snippetProps,\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<ScrollLock {preventScroll} />\n\t\t\t\t\t\t\t<div {...mergeProps(mergedProps, focusScopeProps)}>\n\t\t\t\t\t\t\t\t{@render children?.()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</TextSelectionLayer>\n\t\t\t\t</DismissibleLayer>\n\t\t\t</EscapeLayer>\n\t\t{/snippet}\n\t</FocusScope>\n{/if}\n","<script lang=\"ts\">\n\timport { boxWith } from \"svelte-toolbelt\";\n\timport type { EscapeLayerImplProps } from \"./types.js\";\n\timport { EscapeLayerState } from \"./use-escape-layer.svelte.js\";\n\timport { noop } from \"../../../internal/noop.js\";\n\n\tlet {\n\t\tescapeKeydownBehavior = \"close\",\n\t\tonEscapeKeydown = noop,\n\t\tchildren,\n\t\tenabled,\n\t\tref,\n\t}: EscapeLayerImplProps = $props();\n\n\tEscapeLayerState.create({\n\t\tescapeKeydownBehavior: boxWith(() => escapeKeydownBehavior),\n\t\tonEscapeKeydown: boxWith(() => onEscapeKeydown),\n\t\tenabled: boxWith(() => enabled),\n\t\tref,\n\t});\n</script>\n\n{@render children?.()}\n","<script lang=\"ts\">\n\timport { boxWith } from \"svelte-toolbelt\";\n\timport type { DismissibleLayerImplProps } from \"./types.js\";\n\timport { DismissibleLayerState } from \"./use-dismissable-layer.svelte.js\";\n\timport { noop } from \"../../../internal/noop.js\";\n\n\tlet {\n\t\tinteractOutsideBehavior = \"close\",\n\t\tonInteractOutside = noop,\n\t\tonFocusOutside = noop,\n\t\tid,\n\t\tchildren,\n\t\tenabled,\n\t\tisValidEvent = () => false,\n\t\tref,\n\t}: DismissibleLayerImplProps = $props();\n\n\tconst dismissibleLayerState = DismissibleLayerState.create({\n\t\tid: boxWith(() => id),\n\t\tinteractOutsideBehavior: boxWith(() => interactOutsideBehavior),\n\t\tonInteractOutside: boxWith(() => onInteractOutside),\n\t\tenabled: boxWith(() => enabled),\n\t\tonFocusOutside: boxWith(() => onFocusOutside),\n\t\tisValidEvent: boxWith(() => isValidEvent),\n\t\tref,\n\t});\n</script>\n\n{@render children?.({ props: dismissibleLayerState.props })}\n","<script lang=\"ts\">\n\timport { boxWith } from \"svelte-toolbelt\";\n\timport type { TextSelectionLayerImplProps } from \"./types.js\";\n\timport { TextSelectionLayerState } from \"./use-text-selection-layer.svelte.js\";\n\timport { noop } from \"../../../internal/noop.js\";\n\n\tlet {\n\t\tpreventOverflowTextSelection = true,\n\t\tonPointerDown = noop,\n\t\tonPointerUp = noop,\n\t\tid,\n\t\tchildren,\n\t\tenabled,\n\t\tref,\n\t}: TextSelectionLayerImplProps = $props();\n\n\tTextSelectionLayerState.create({\n\t\tid: boxWith(() => id),\n\t\tonPointerDown: boxWith(() => onPointerDown),\n\t\tonPointerUp: boxWith(() => onPointerUp),\n\t\tenabled: boxWith(() => enabled && preventOverflowTextSelection),\n\t\tref,\n\t});\n</script>\n\n{@render children?.()}\n","<script lang=\"ts\">\n\timport { boxWith } from \"svelte-toolbelt\";\n\timport type { FocusScopeImplProps } from \"./types.js\";\n\timport { noop } from \"../../../internal/noop.js\";\n\timport { FocusScope } from \"./focus-scope.svelte.js\";\n\n\tlet {\n\t\tenabled = false,\n\t\ttrapFocus = false,\n\t\tloop = false,\n\t\tonCloseAutoFocus = noop,\n\t\tonOpenAutoFocus = noop,\n\t\tfocusScope,\n\t\tref,\n\t}: FocusScopeImplProps = $props();\n\n\tconst focusScopeState = FocusScope.use({\n\t\tenabled: boxWith(() => enabled),\n\t\ttrap: boxWith(() => trapFocus),\n\t\tloop: loop,\n\t\tonCloseAutoFocus: boxWith(() => onCloseAutoFocus),\n\t\tonOpenAutoFocus: boxWith(() => onOpenAutoFocus),\n\t\tref,\n\t});\n</script>\n\n{@render focusScope?.({ props: focusScopeState.props })}\n","<script lang=\"ts\">\n  // Define props using Svelte 5 Runes syntax\n  let {\n    size = 24,\n    color = 'currentColor',\n    strokeWidth = 2,\n    class: className = '',\n    ...rest\n  } = $props();\n\n  // Icon node data for X icon\n  const iconNode = [\n    [\"line\", { x1: \"18\", y1: \"6\", x2: \"6\", y2: \"18\" }],\n    [\"line\", { x1: \"6\", y1: \"6\", x2: \"18\", y2: \"18\" }]\n  ];\n</script>\n\n<svg\n  xmlns=\"http://www.w3.org/2000/svg\"\n  width={size}\n  height={size}\n  viewBox=\"0 0 24 24\"\n  fill=\"none\"\n  stroke={color}\n  stroke-width={strokeWidth}\n  stroke-linecap=\"round\"\n  stroke-linejoin=\"round\"\n  class={`lucide-icon lucide-x ${className}`}\n  {...rest}\n>\n  {#each iconNode as [tag, attrs]}\n    <svelte:element this={tag} {...attrs} />\n  {/each}\n</svg>","/** @import { Effect, EffectNodes, TemplateNode } from '#client' */\nimport { FILENAME, NAMESPACE_SVG } from '../../../../constants.js';\nimport {\n\thydrate_next,\n\thydrate_node,\n\thydrating,\n\tset_hydrate_node,\n\tset_hydrating\n} from '../hydration.js';\nimport { create_text, get_first_child } from '../operations.js';\nimport { block, teardown } from '../../reactivity/effects.js';\nimport { set_should_intro } from '../../render.js';\nimport { active_effect } from '../../runtime.js';\nimport { component_context, dev_stack } from '../../context.js';\nimport { DEV } from 'esm-env';\nimport { EFFECT_TRANSPARENT, ELEMENT_NODE } from '#client/constants';\nimport { assign_nodes } from '../template.js';\nimport { is_raw_text_element } from '../../../../utils.js';\nimport { BranchManager } from './branches.js';\nimport { set_animation_effect_override } from '../elements/transitions.js';\n\n/**\n * @param {Comment | Element} node\n * @param {() => string} get_tag\n * @param {boolean} is_svg\n * @param {undefined | ((element: Element, anchor: Node | null) => void)} render_fn,\n * @param {undefined | (() => string)} get_namespace\n * @param {undefined | [number, number]} location\n * @returns {void}\n */\nexport function element(node, get_tag, is_svg, render_fn, get_namespace, location) {\n\tlet was_hydrating = hydrating;\n\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\tvar filename = DEV && location && component_context?.function[FILENAME];\n\n\t/** @type {null | Element} */\n\tvar element = null;\n\n\tif (hydrating && hydrate_node.nodeType === ELEMENT_NODE) {\n\t\telement = /** @type {Element} */ (hydrate_node);\n\t\thydrate_next();\n\t}\n\n\tvar anchor = /** @type {TemplateNode} */ (hydrating ? hydrate_node : node);\n\n\t/**\n\t * We track this so we can set it when changing the element, allowing any\n\t * `animate:` directive to bind itself to the correct block\n\t */\n\tvar parent_effect = /** @type {Effect} */ (active_effect);\n\n\tvar branches = new BranchManager(anchor, false);\n\n\tblock(() => {\n\t\tconst next_tag = get_tag() || null;\n\t\tvar ns = get_namespace ? get_namespace() : is_svg || next_tag === 'svg' ? NAMESPACE_SVG : null;\n\n\t\tif (next_tag === null) {\n\t\t\tbranches.ensure(null, null);\n\t\t\tset_should_intro(true);\n\t\t\treturn;\n\t\t}\n\n\t\tbranches.ensure(next_tag, (anchor) => {\n\t\t\tif (next_tag) {\n\t\t\t\telement = hydrating\n\t\t\t\t\t? /** @type {Element} */ (element)\n\t\t\t\t\t: ns\n\t\t\t\t\t\t? document.createElementNS(ns, next_tag)\n\t\t\t\t\t\t: document.createElement(next_tag);\n\n\t\t\t\tif (DEV && location) {\n\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\telement.__svelte_meta = {\n\t\t\t\t\t\tparent: dev_stack,\n\t\t\t\t\t\tloc: {\n\t\t\t\t\t\t\tfile: filename,\n\t\t\t\t\t\t\tline: location[0],\n\t\t\t\t\t\t\tcolumn: location[1]\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tassign_nodes(element, element);\n\n\t\t\t\tif (render_fn) {\n\t\t\t\t\tif (hydrating && is_raw_text_element(next_tag)) {\n\t\t\t\t\t\t// prevent hydration glitches\n\t\t\t\t\t\telement.append(document.createComment(''));\n\t\t\t\t\t}\n\n\t\t\t\t\t// If hydrating, use the existing ssr comment as the anchor so that the\n\t\t\t\t\t// inner open and close methods can pick up the existing nodes correctly\n\t\t\t\t\tvar child_anchor = hydrating\n\t\t\t\t\t\t? get_first_child(element)\n\t\t\t\t\t\t: element.appendChild(create_text());\n\n\t\t\t\t\tif (hydrating) {\n\t\t\t\t\t\tif (child_anchor === null) {\n\t\t\t\t\t\t\tset_hydrating(false);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tset_hydrate_node(child_anchor);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tset_animation_effect_override(parent_effect);\n\n\t\t\t\t\t// `child_anchor` is undefined if this is a void element, but we still\n\t\t\t\t\t// need to call `render_fn` in order to run actions etc. If the element\n\t\t\t\t\t// contains children, it's a user error (which is warned on elsewhere)\n\t\t\t\t\t// and the DOM will be silently discarded\n\t\t\t\t\trender_fn(element, child_anchor);\n\n\t\t\t\t\tset_animation_effect_override(null);\n\t\t\t\t}\n\n\t\t\t\t// we do this after calling `render_fn` so that child effects don't override `nodes.end`\n\t\t\t\t/** @type {Effect & { nodes: EffectNodes }} */ (active_effect).nodes.end = element;\n\n\t\t\t\tanchor.before(element);\n\t\t\t}\n\n\t\t\tif (hydrating) {\n\t\t\t\tset_hydrate_node(anchor);\n\t\t\t}\n\t\t});\n\n\t\t// revert to the default state after the effect has been created\n\t\tset_should_intro(true);\n\n\t\treturn () => {\n\t\t\tif (next_tag) {\n\t\t\t\t// if we're in this callback because we're re-running the effect,\n\t\t\t\t// disable intros (unless no element is currently displayed)\n\t\t\t\tset_should_intro(false);\n\t\t\t}\n\t\t};\n\t}, EFFECT_TRANSPARENT);\n\n\tteardown(() => {\n\t\tset_should_intro(true);\n\t});\n\n\tif (was_hydrating) {\n\t\tset_hydrating(true);\n\t\tset_hydrate_node(anchor);\n\t}\n}\n","<script lang=\"ts\">\n\timport { Dialog as DialogPrimitive } from \"bits-ui\";\n\timport { cn } from \"$lib/utils\";\n\timport X from \"$lib/components/ui/icons/X.svelte\";\n\timport DialogPortal from \"./dialog-portal.svelte\";\n\timport DialogOverlay from \"./dialog-overlay.svelte\";\n\ttype $$Props = DialogPrimitive.ContentProps;\n\n\tlet {\n\t\tchildren,\n\t\tclass: className = undefined,\n\t\t...rest\n\t}: $$Props = $props();\n</script>\n\n<DialogPortal>\n\t<DialogOverlay />\n\t<DialogPrimitive.Content\n\t\tclass={cn(\n\t\t\t'fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg',\n\t\t\tclassName\n\t\t)}\n\t\t{...rest}\n\t>\n\t\t\t{#if children}\n\t\t\t\t{@render children()}\n\t\t\t{/if}\n\t\t<DialogPrimitive.Close\n\t\t  class=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\"\n\t\t>\n\t\t\t<X class=\"h-4 w-4\" />\n\t\t\t<span class=\"sr-only\">Close</span>\n\t\t</DialogPrimitive.Close>\n\t</DialogPrimitive.Content>\n</DialogPortal>","<script lang=\"ts\">\n\timport { Dialog as DialogPrimitive } from \"bits-ui\";\n\ttype $$Props = DialogPrimitive.PortalProps & { children?: any };\n\n\tlet {\n\t\tchildren,\n\t\t...rest\n\t}: $$Props = $props();\n</script>\n\n<DialogPrimitive.Portal\n\t{...rest}\n>\n\t{#if children}\n\t\t{@render children()}\n\t{/if}\n</DialogPrimitive.Portal>","<script lang=\"ts\">\n\timport { Dialog as DialogPrimitive } from \"bits-ui\";\n\timport { cn } from \"$lib/utils\";\n\n\ttype $$Props = DialogPrimitive.OverlayProps;\n\n\tlet {\n\t\tclass: className = undefined,\n\t\t...rest\n\t}: $$Props = $props();\n</script>\n\n<DialogPrimitive.Overlay\n\tclass={cn(\n\t\t'fixed inset-0 z-50 bg-background/80 backdrop-blur-sm',\n\t\t'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0',\n\t\tclassName\n\t)}\n\t{...rest}\n/>","<script lang=\"ts\">\n\timport { type VariantProps } from \"tailwind-variants\";\n\timport type { Button as ButtonPrimitive } from \"bits-ui\";\n\timport { cn } from \"$lib/utils\";\n\timport { buttonVariants } from \".\";\n\n\tlet { variant, size, class: className, children, disabled, ...rest }: ButtonPrimitive.RootProps & VariantProps<typeof buttonVariants> & {\n\t\t[key: `aria-${string}`]: any;\n\t\tclass?: string;\n\t} = $props();\n\n\t// Ensure proper ARIA attributes and HTML disabled state\n\t$effect(() => {\n\t\t// This ensures the disabled state is properly synchronized\n\t\t// between HTML disabled attribute and ARIA attributes\n\t});\n</script>\n\n<button\nclass={cn(buttonVariants({ variant, size, className }))}\naria-disabled={disabled}\ndisabled={disabled}\n{...rest}\n>\n{@render children()}\n</button>","// src/utils.js\nvar SPACE_REGEX = /\\s+/g;\nvar removeExtraSpaces = (str) => {\n  if (typeof str !== \"string\" || !str) return str;\n  return str.replace(SPACE_REGEX, \" \").trim();\n};\nvar cx = (...classnames) => {\n  const classList = [];\n  const buildClassString = (input) => {\n    if (!input && input !== 0 && input !== 0n) return;\n    if (Array.isArray(input)) {\n      for (let i = 0, len = input.length; i < len; i++) buildClassString(input[i]);\n      return;\n    }\n    const type = typeof input;\n    if (type === \"string\" || type === \"number\" || type === \"bigint\") {\n      if (type === \"number\" && input !== input) return;\n      classList.push(String(input));\n    } else if (type === \"object\") {\n      const keys = Object.keys(input);\n      for (let i = 0, len = keys.length; i < len; i++) {\n        const key = keys[i];\n        if (input[key]) classList.push(key);\n      }\n    }\n  };\n  for (let i = 0, len = classnames.length; i < len; i++) {\n    const c = classnames[i];\n    if (c !== null && c !== void 0) buildClassString(c);\n  }\n  return classList.length > 0 ? removeExtraSpaces(classList.join(\" \")) : void 0;\n};\nvar falsyToString = (value) => value === false ? \"false\" : value === true ? \"true\" : value === 0 ? \"0\" : value;\nvar isEmptyObject = (obj) => {\n  if (!obj || typeof obj !== \"object\") return true;\n  for (const _ in obj) return false;\n  return true;\n};\nvar isEqual = (obj1, obj2) => {\n  if (obj1 === obj2) return true;\n  if (!obj1 || !obj2) return false;\n  const keys1 = Object.keys(obj1);\n  const keys2 = Object.keys(obj2);\n  if (keys1.length !== keys2.length) return false;\n  for (let i = 0; i < keys1.length; i++) {\n    const key = keys1[i];\n    if (!keys2.includes(key)) return false;\n    if (obj1[key] !== obj2[key]) return false;\n  }\n  return true;\n};\nvar isBoolean = (value) => value === true || value === false;\nvar joinObjects = (obj1, obj2) => {\n  for (const key in obj2) {\n    if (Object.prototype.hasOwnProperty.call(obj2, key)) {\n      const val2 = obj2[key];\n      if (key in obj1) {\n        obj1[key] = cx(obj1[key], val2);\n      } else {\n        obj1[key] = val2;\n      }\n    }\n  }\n  return obj1;\n};\nvar flat = (arr, target) => {\n  for (let i = 0; i < arr.length; i++) {\n    const el = arr[i];\n    if (Array.isArray(el)) flat(el, target);\n    else if (el) target.push(el);\n  }\n};\nfunction flatArray(arr) {\n  const flattened = [];\n  flat(arr, flattened);\n  return flattened;\n}\nvar flatMergeArrays = (...arrays) => {\n  const result = [];\n  flat(arrays, result);\n  const filtered = [];\n  for (let i = 0; i < result.length; i++) {\n    if (result[i]) filtered.push(result[i]);\n  }\n  return filtered;\n};\nvar mergeObjects = (obj1, obj2) => {\n  const result = {};\n  for (const key in obj1) {\n    const val1 = obj1[key];\n    if (key in obj2) {\n      const val2 = obj2[key];\n      if (Array.isArray(val1) || Array.isArray(val2)) {\n        result[key] = flatMergeArrays(val2, val1);\n      } else if (typeof val1 === \"object\" && typeof val2 === \"object\" && val1 && val2) {\n        result[key] = mergeObjects(val1, val2);\n      } else {\n        result[key] = val2 + \" \" + val1;\n      }\n    } else {\n      result[key] = val1;\n    }\n  }\n  for (const key in obj2) {\n    if (!(key in obj1)) {\n      result[key] = obj2[key];\n    }\n  }\n  return result;\n};\n\nexport { cx, falsyToString, flat, flatArray, flatMergeArrays, isBoolean, isEmptyObject, isEqual, joinObjects, mergeObjects, removeExtraSpaces };\n","import { cx, isEmptyObject, mergeObjects, isEqual, joinObjects, flatMergeArrays, falsyToString } from './chunk-LQJYWU4O.js';\n\n// src/config.js\nvar defaultConfig = {\n  twMerge: true,\n  twMergeConfig: {}\n};\n\n// src/state.js\nfunction createState() {\n  let cachedTwMerge = null;\n  let cachedTwMergeConfig = {};\n  let didTwMergeConfigChange = false;\n  return {\n    get cachedTwMerge() {\n      return cachedTwMerge;\n    },\n    set cachedTwMerge(value) {\n      cachedTwMerge = value;\n    },\n    get cachedTwMergeConfig() {\n      return cachedTwMergeConfig;\n    },\n    set cachedTwMergeConfig(value) {\n      cachedTwMergeConfig = value;\n    },\n    get didTwMergeConfigChange() {\n      return didTwMergeConfigChange;\n    },\n    set didTwMergeConfigChange(value) {\n      didTwMergeConfigChange = value;\n    },\n    reset() {\n      cachedTwMerge = null;\n      cachedTwMergeConfig = {};\n      didTwMergeConfigChange = false;\n    }\n  };\n}\nvar state = createState();\n\n// src/core.js\nvar getTailwindVariants = (cn) => {\n  const tv = (options, configProp) => {\n    const {\n      extend = null,\n      slots: slotProps = {},\n      variants: variantsProps = {},\n      compoundVariants: compoundVariantsProps = [],\n      compoundSlots = [],\n      defaultVariants: defaultVariantsProps = {}\n    } = options;\n    const config = { ...defaultConfig, ...configProp };\n    const base = extend?.base ? cx(extend.base, options?.base) : options?.base;\n    const variants = extend?.variants && !isEmptyObject(extend.variants) ? mergeObjects(variantsProps, extend.variants) : variantsProps;\n    const defaultVariants = extend?.defaultVariants && !isEmptyObject(extend.defaultVariants) ? { ...extend.defaultVariants, ...defaultVariantsProps } : defaultVariantsProps;\n    if (!isEmptyObject(config.twMergeConfig) && !isEqual(config.twMergeConfig, state.cachedTwMergeConfig)) {\n      state.didTwMergeConfigChange = true;\n      state.cachedTwMergeConfig = config.twMergeConfig;\n    }\n    const isExtendedSlotsEmpty = isEmptyObject(extend?.slots);\n    const componentSlots = !isEmptyObject(slotProps) ? {\n      // add \"base\" to the slots object\n      base: cx(options?.base, isExtendedSlotsEmpty && extend?.base),\n      ...slotProps\n    } : {};\n    const slots = isExtendedSlotsEmpty ? componentSlots : joinObjects(\n      { ...extend?.slots },\n      isEmptyObject(componentSlots) ? { base: options?.base } : componentSlots\n    );\n    const compoundVariants = isEmptyObject(extend?.compoundVariants) ? compoundVariantsProps : flatMergeArrays(extend?.compoundVariants, compoundVariantsProps);\n    const component = (props) => {\n      if (isEmptyObject(variants) && isEmptyObject(slotProps) && isExtendedSlotsEmpty) {\n        return cn(base, props?.class, props?.className)(config);\n      }\n      if (compoundVariants && !Array.isArray(compoundVariants)) {\n        throw new TypeError(\n          `The \"compoundVariants\" prop must be an array. Received: ${typeof compoundVariants}`\n        );\n      }\n      if (compoundSlots && !Array.isArray(compoundSlots)) {\n        throw new TypeError(\n          `The \"compoundSlots\" prop must be an array. Received: ${typeof compoundSlots}`\n        );\n      }\n      const getVariantValue = (variant, vrs = variants, _slotKey = null, slotProps2 = null) => {\n        const variantObj = vrs[variant];\n        if (!variantObj || isEmptyObject(variantObj)) {\n          return null;\n        }\n        const variantProp = slotProps2?.[variant] ?? props?.[variant];\n        if (variantProp === null) return null;\n        const variantKey = falsyToString(variantProp);\n        if (typeof variantKey === \"object\") {\n          return null;\n        }\n        const defaultVariantProp = defaultVariants?.[variant];\n        const key = variantKey != null ? variantKey : falsyToString(defaultVariantProp);\n        const value = variantObj[key || \"false\"];\n        return value;\n      };\n      const getVariantClassNames = () => {\n        if (!variants) return null;\n        const keys = Object.keys(variants);\n        const result = [];\n        for (let i = 0; i < keys.length; i++) {\n          const value = getVariantValue(keys[i], variants);\n          if (value) result.push(value);\n        }\n        return result;\n      };\n      const getVariantClassNamesBySlotKey = (slotKey, slotProps2) => {\n        if (!variants || typeof variants !== \"object\") return null;\n        const result = [];\n        for (const variant in variants) {\n          const variantValue = getVariantValue(variant, variants, slotKey, slotProps2);\n          const value = slotKey === \"base\" && typeof variantValue === \"string\" ? variantValue : variantValue && variantValue[slotKey];\n          if (value) result.push(value);\n        }\n        return result;\n      };\n      const propsWithoutUndefined = {};\n      for (const prop in props) {\n        const value = props[prop];\n        if (value !== void 0) propsWithoutUndefined[prop] = value;\n      }\n      const getCompleteProps = (key, slotProps2) => {\n        const initialProp = typeof props?.[key] === \"object\" ? {\n          [key]: props[key]?.initial\n        } : {};\n        return {\n          ...defaultVariants,\n          ...propsWithoutUndefined,\n          ...initialProp,\n          ...slotProps2\n        };\n      };\n      const getCompoundVariantsValue = (cv = [], slotProps2) => {\n        const result = [];\n        const cvLength = cv.length;\n        for (let i = 0; i < cvLength; i++) {\n          const { class: tvClass, className: tvClassName, ...compoundVariantOptions } = cv[i];\n          let isValid = true;\n          const completeProps = getCompleteProps(null, slotProps2);\n          for (const key in compoundVariantOptions) {\n            const value = compoundVariantOptions[key];\n            const completePropsValue = completeProps[key];\n            if (Array.isArray(value)) {\n              if (!value.includes(completePropsValue)) {\n                isValid = false;\n                break;\n              }\n            } else {\n              if ((value == null || value === false) && (completePropsValue == null || completePropsValue === false))\n                continue;\n              if (completePropsValue !== value) {\n                isValid = false;\n                break;\n              }\n            }\n          }\n          if (isValid) {\n            if (tvClass) result.push(tvClass);\n            if (tvClassName) result.push(tvClassName);\n          }\n        }\n        return result;\n      };\n      const getCompoundVariantClassNamesBySlot = (slotProps2) => {\n        const compoundClassNames = getCompoundVariantsValue(compoundVariants, slotProps2);\n        if (!Array.isArray(compoundClassNames)) return compoundClassNames;\n        const result = {};\n        const cnFn = cn;\n        for (let i = 0; i < compoundClassNames.length; i++) {\n          const className = compoundClassNames[i];\n          if (typeof className === \"string\") {\n            result.base = cnFn(result.base, className)(config);\n          } else if (typeof className === \"object\") {\n            for (const slot in className) {\n              result[slot] = cnFn(result[slot], className[slot])(config);\n            }\n          }\n        }\n        return result;\n      };\n      const getCompoundSlotClassNameBySlot = (slotProps2) => {\n        if (compoundSlots.length < 1) return null;\n        const result = {};\n        const completeProps = getCompleteProps(null, slotProps2);\n        for (let i = 0; i < compoundSlots.length; i++) {\n          const {\n            slots: slots2 = [],\n            class: slotClass,\n            className: slotClassName,\n            ...slotVariants\n          } = compoundSlots[i];\n          if (!isEmptyObject(slotVariants)) {\n            let isValid = true;\n            for (const key in slotVariants) {\n              const completePropsValue = completeProps[key];\n              const slotVariantValue = slotVariants[key];\n              if (completePropsValue === void 0 || (Array.isArray(slotVariantValue) ? !slotVariantValue.includes(completePropsValue) : slotVariantValue !== completePropsValue)) {\n                isValid = false;\n                break;\n              }\n            }\n            if (!isValid) continue;\n          }\n          for (let j = 0; j < slots2.length; j++) {\n            const slotName = slots2[j];\n            if (!result[slotName]) result[slotName] = [];\n            result[slotName].push([slotClass, slotClassName]);\n          }\n        }\n        return result;\n      };\n      if (!isEmptyObject(slotProps) || !isExtendedSlotsEmpty) {\n        const slotsFns = {};\n        if (typeof slots === \"object\" && !isEmptyObject(slots)) {\n          const cnFn = cn;\n          for (const slotKey in slots) {\n            slotsFns[slotKey] = (slotProps2) => {\n              const compoundVariantClasses = getCompoundVariantClassNamesBySlot(slotProps2);\n              const compoundSlotClasses = getCompoundSlotClassNameBySlot(slotProps2);\n              return cnFn(\n                slots[slotKey],\n                getVariantClassNamesBySlotKey(slotKey, slotProps2),\n                compoundVariantClasses ? compoundVariantClasses[slotKey] : void 0,\n                compoundSlotClasses ? compoundSlotClasses[slotKey] : void 0,\n                slotProps2?.class,\n                slotProps2?.className\n              )(config);\n            };\n          }\n        }\n        return slotsFns;\n      }\n      return cn(\n        base,\n        getVariantClassNames(),\n        getCompoundVariantsValue(compoundVariants),\n        props?.class,\n        props?.className\n      )(config);\n    };\n    const getVariantKeys = () => {\n      if (!variants || typeof variants !== \"object\") return;\n      return Object.keys(variants);\n    };\n    component.variantKeys = getVariantKeys();\n    component.extend = extend;\n    component.base = base;\n    component.slots = slots;\n    component.variants = variants;\n    component.defaultVariants = defaultVariants;\n    component.compoundSlots = compoundSlots;\n    component.compoundVariants = compoundVariants;\n    return component;\n  };\n  const createTV = (configProp) => {\n    return (options, config) => tv(options, config ? mergeObjects(configProp, config) : configProp);\n  };\n  return {\n    tv,\n    createTV\n  };\n};\n\nexport { defaultConfig, getTailwindVariants, state };\n","import { getTailwindVariants, state } from './chunk-RZF76H2U.js';\nexport { defaultConfig } from './chunk-RZF76H2U.js';\nimport { cx, isEmptyObject } from './chunk-LQJYWU4O.js';\nexport { cx } from './chunk-LQJYWU4O.js';\nimport { twMerge, extendTailwindMerge } from 'tailwind-merge';\n\nvar createTwMerge = (cachedTwMergeConfig) => {\n  return isEmptyObject(cachedTwMergeConfig) ? twMerge : extendTailwindMerge({\n    ...cachedTwMergeConfig,\n    extend: {\n      theme: cachedTwMergeConfig.theme,\n      classGroups: cachedTwMergeConfig.classGroups,\n      conflictingClassGroupModifiers: cachedTwMergeConfig.conflictingClassGroupModifiers,\n      conflictingClassGroups: cachedTwMergeConfig.conflictingClassGroups,\n      ...cachedTwMergeConfig.extend\n    }\n  });\n};\nvar executeMerge = (classnames, config) => {\n  const base = cx(classnames);\n  if (!base || !(config?.twMerge ?? true)) return base;\n  if (!state.cachedTwMerge || state.didTwMergeConfigChange) {\n    state.didTwMergeConfigChange = false;\n    state.cachedTwMerge = createTwMerge(state.cachedTwMergeConfig);\n  }\n  return state.cachedTwMerge(base) || void 0;\n};\nvar cn = (...classnames) => {\n  return executeMerge(classnames, {});\n};\nvar cnMerge = (...classnames) => {\n  return (config) => executeMerge(classnames, config);\n};\n\n// src/index.js\nvar { createTV, tv } = getTailwindVariants(cnMerge);\n\nexport { cn, cnMerge, createTV, tv };\n","import Root from \"./button.svelte\";\nimport { tv } from \"tailwind-variants\";\nexport const buttonVariants = tv({\n    base: \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 focus-visible:ring-offset-2\",\n    variants: {\n        variant: {\n            default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n            destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n            outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n            secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n            ghost: \"hover:bg-accent hover:text-accent-foreground\",\n            link: \"text-primary underline-offset-4 hover:underline\"\n        },\n        size: {\n            default: \"h-10 px-4 py-2\",\n            sm: \"h-9 rounded-md px-3\",\n            lg: \"h-11 rounded-md px-8\",\n            icon: \"h-10 w-10\"\n        }\n    },\n    defaultVariants: {\n        variant: \"default\",\n        size: \"default\"\n    }\n});\nexport { Root as Button };\n//# sourceMappingURL=index.js.map","<script lang=\"ts\">\n  /**\n   * LessonGenerator Component\n   *\n   * Provides a comprehensive interface for generating dynamic lessons with advanced parameters.\n   * Supports all lesson types (vocabulary, grammar, mixed) with detailed customization options.\n   */\n\n  import { enhancedLessonService } from '$lib/services/enhanced-lesson';\n  import { t } from '$lib/services/localization';\n  import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from '$lib/components/ui/dialog';\n  import { Button } from '$lib/components/ui/button';\n  import type { LessonType, LessonDifficulty } from '$lib/schemas/lesson';\n  import type { VocabularyCategory, PartOfSpeech } from '$lib/schemas/vocabulary';\n\n  // Simple error handler\n  function handleError(error: unknown, context: string) {\n    console.error(`[${context}]`, error);\n  }\n\n  // Props\n  let { isOpen = false, onClose = () => {}, onLessonGenerated = () => {} } = $props();\n\n  // State\n  let isGenerating = $state(false);\n  let error = $state<string | null>(null);\n  let successMessage = $state<string | null>(null);\n  let hasError = $state(false);\n\n  // Lesson generation parameters\n  let lessonParams = $state<{\n    title: string;\n    description: string;\n    type: LessonType | '';\n    difficulty: LessonDifficulty | '';\n    category: VocabularyCategory | '';\n    partOfSpeech: PartOfSpeech | '';\n    conceptType: string;\n    limit: number;\n    includePractice: boolean;\n    includeComparison: boolean;\n    includeReview: boolean;\n  }>({\n    title: '',\n    description: '',\n    type: '',\n    difficulty: '',\n    category: '',\n    partOfSpeech: '',\n    conceptType: '',\n    limit: 10,\n    includePractice: true,\n    includeComparison: false,\n    includeReview: false\n  });\n\n  // Computed\n  let isVocabularyLesson = $derived(lessonParams.type === 'vocabulary');\n  let isGrammarLesson = $derived(lessonParams.type === 'grammar');\n  let isMixedLesson = $derived(lessonParams.type === 'mixed');\n  let generateLabel = $derived(t('lesson.generator.generate_lesson') || 'Generate Lesson');\n  let generatingLabel = $derived(t('lesson.generator.generating') || 'Generating...');\n\n  // Methods\n  function resetForm() {\n    lessonParams = {\n      title: '',\n      description: '',\n      type: '',\n      difficulty: '',\n      category: '',\n      partOfSpeech: '',\n      conceptType: '',\n      limit: 10,\n      includePractice: true,\n      includeComparison: false,\n      includeReview: false\n    };\n    error = null;\n    successMessage = null;\n  }\n\n  function closeModal() {\n    resetForm();\n    onClose();\n  }\n\n  /**\n   * Generate a lesson with proper error handling and validation\n   * @throws Error if lesson generation fails\n   */\n  async function generateLesson() {\n    try {\n      isGenerating = true;\n      error = null;\n      successMessage = null;\n      hasError = false;\n\n      // Validate required fields with proper type checking\n      if (!lessonParams.type || typeof lessonParams.type !== 'string') {\n        throw new Error(t('lesson.generator.errors.select_valid_lesson_type'));\n      }\n\n      if (!lessonParams.difficulty || typeof lessonParams.difficulty !== 'string') {\n        throw new Error(t('lesson.generator.errors.select_valid_difficulty'));\n      }\n\n      // Generate appropriate lesson based on type\n      let generatedLesson;\n\n      if (isVocabularyLesson) {\n        // Generate vocabulary lesson\n        const categories = lessonParams.category ? [lessonParams.category] : undefined;\n        generatedLesson = await enhancedLessonService.generateThematicLesson(\n          categories || [],\n          lessonParams.difficulty,\n          {\n            includePractice: lessonParams.includePractice,\n            includeReview: lessonParams.includeReview\n          }\n        );\n      }\n      else if (isGrammarLesson) {\n        // Generate grammar lesson\n        generatedLesson = await enhancedLessonService.generateGrammarLesson(\n          lessonParams.conceptType || 'basic',\n          lessonParams.difficulty,\n          {\n            includePractice: lessonParams.includePractice,\n            includeComparison: lessonParams.includeComparison\n          }\n        );\n      }\n      else if (isMixedLesson) {\n        // Generate mixed lesson\n        const category = lessonParams.category || 'common_phrases';\n        generatedLesson = await enhancedLessonService.generateMixedLesson(\n          category,\n          lessonParams.difficulty,\n          {\n            includePractice: lessonParams.includePractice,\n            includeReview: lessonParams.includeReview\n          }\n        );\n      }\n      else {\n        // Fallback to dynamic lesson\n        const params = {\n          type: lessonParams.type,\n          difficulty: lessonParams.difficulty,\n          criteria: {\n            categories: lessonParams.category ? [lessonParams.category] : undefined,\n            partOfSpeech: lessonParams.partOfSpeech,\n            conceptType: lessonParams.conceptType,\n            limit: lessonParams.limit\n          },\n          metadata: {\n            includePractice: lessonParams.includePractice,\n            includeComparison: lessonParams.includeComparison,\n            includeReview: lessonParams.includeReview\n          }\n        };\n\n        generatedLesson = await enhancedLessonService.generateDynamicLesson(params);\n      }\n\n      // Apply custom title and description if provided\n      if (lessonParams.title) {\n        generatedLesson.title = lessonParams.title;\n      }\n\n      if (lessonParams.description) {\n        generatedLesson.description = lessonParams.description;\n      }\n\n      // Notify parent component\n      onLessonGenerated(generatedLesson);\n\n      // Show success message\n      successMessage = t('lesson.generator.success_message');\n\n      // Close modal after 2 seconds\n      setTimeout(() => {\n        closeModal();\n      }, 2000);\n\n    } catch (err) {\n      handleError(err, 'Failed to generate lesson');\n      error = err instanceof Error ? err.message : t('lesson.generator.errors.generation_failed');\n      hasError = true;\n\n      // Re-throw to allow parent components to handle the error\n      throw err;\n    } finally {\n      isGenerating = false;\n    }\n  }\n\n  function getLessonTypeName(type: string) {\n    const typeNames: Record<string, string> = {\n      'vocabulary': t('lesson.types.vocabulary'),\n      'grammar': t('lesson.types.grammar'),\n      'mixed': t('lesson.types.mixed'),\n      'conversation': t('lesson.types.conversation'),\n      'reading': t('lesson.types.reading'),\n      'listening': t('lesson.types.listening'),\n      'writing': t('lesson.types.writing'),\n      'culture': t('lesson.types.culture'),\n      'contextual': t('lesson.types.contextual')\n    };\n    return typeNames[type] || type;\n  }\n\n  function getCategoryDisplayName(category: string) {\n    const displayNames: Record<string, string> = {\n      'greetings': t('vocabulary.categories.greetings'),\n      'numbers': t('vocabulary.categories.numbers'),\n      'family': t('vocabulary.categories.family'),\n      'food': t('vocabulary.categories.food'),\n      'colors': t('vocabulary.categories.colors'),\n      'animals': t('vocabulary.categories.animals'),\n      'body': t('vocabulary.categories.body_parts'),\n      'clothing': t('vocabulary.categories.clothing'),\n      'house': t('vocabulary.categories.house_home'),\n      'nature': t('vocabulary.categories.nature'),\n      'transport': t('vocabulary.categories.transportation'),\n      'technology': t('vocabulary.categories.technology'),\n      'time': t('vocabulary.categories.time_date'),\n      'weather': t('vocabulary.categories.weather'),\n      'professions': t('vocabulary.categories.professions'),\n      'places': t('vocabulary.categories.places'),\n      'grammar': t('vocabulary.categories.grammar'),\n      'culture': t('vocabulary.categories.culture'),\n      'common_phrases': t('vocabulary.categories.common_phrases'),\n      'uncategorized': t('vocabulary.categories.uncategorized')\n    };\n\n    return displayNames[category] || category;\n  }\n\n  function getPartOfSpeechDisplayName(partOfSpeech: string) {\n    const displayNames: Record<string, string> = {\n      'noun': t('vocabulary.parts_of_speech.nouns'),\n      'verb': t('vocabulary.parts_of_speech.verbs'),\n      'adjective': t('vocabulary.parts_of_speech.adjectives'),\n      'adverb': t('vocabulary.parts_of_speech.adverbs'),\n      'pronoun': t('vocabulary.parts_of_speech.pronouns'),\n      'preposition': t('vocabulary.parts_of_speech.prepositions'),\n      'conjunction': t('vocabulary.parts_of_speech.conjunctions'),\n      'interjection': t('vocabulary.parts_of_speech.interjections'),\n      'article': t('vocabulary.parts_of_speech.articles'),\n      'number': t('vocabulary.parts_of_speech.numbers'),\n      'phrase': t('vocabulary.parts_of_speech.phrases')\n    };\n\n    return displayNames[partOfSpeech] || partOfSpeech;\n  }\n\n  function getDifficultyLevels(): LessonDifficulty[] {\n    return ['A1', 'A2', 'B1', 'B2', 'C1'];\n  }\n\n  function getVocabularyCategories(): VocabularyCategory[] {\n    return [\n      'greetings', 'numbers', 'family', 'food', 'colors', 'animals', 'body',\n      'clothing', 'house', 'nature', 'transport', 'technology', 'time', 'weather',\n      'professions', 'places', 'grammar', 'culture', 'common_phrases'\n    ];\n  }\n\n  function getPartsOfSpeech(): PartOfSpeech[] {\n    return ['noun', 'verb', 'adjective', 'adverb', 'pronoun', 'preposition', 'conjunction', 'phrase'];\n  }\n\n  function getLessonTypes(): LessonType[] {\n    return ['vocabulary', 'grammar', 'mixed', 'conversation', 'culture'];\n  }\n</script>\n\n<Dialog open={isOpen} onOpenChange={(open) => {\n  try {\n    if (!open) closeModal();\n  } catch (err) {\n    handleError(err, 'Failed to close lesson generator modal');\n    hasError = true;\n  }\n}}>\n  <DialogContent class=\"lesson-generator-modal\">\n    <DialogHeader>\n      <DialogTitle>{t('lesson.generator.title')}</DialogTitle>\n      <DialogDescription>\n        {t('lesson.generator.description')}\n      </DialogDescription>\n    </DialogHeader>\n\n    <div class=\"lesson-generator-form\">\n      {#if hasError}\n        <div class=\"error-message\">\n          ‚ö†Ô∏è {error}\n          <button\n            class=\"retry-button\"\n            onclick={() => {\n              try {\n                error = null;\n                hasError = false;\n              } catch (err) {\n                handleError(err, 'Failed to clear error state');\n              }\n            }}\n          >\n            {t('common.try_again')}\n          </button>\n        </div>\n      {/if}\n\n      {#if successMessage}\n        <div class=\"success-message\">\n          ‚úÖ {successMessage}\n        </div>\n      {/if}\n\n      <div class=\"form-section\">\n        <h3>{t('lesson.generator.basic_information')}</h3>\n\n        <div class=\"form-group\">\n          <label for=\"lesson-title\">{t('lesson.generator.lesson_title')}</label>\n          <input\n            id=\"lesson-title\"\n            type=\"text\"\n            bind:value={lessonParams.title}\n            placeholder={t('lesson.generator.lesson_title_placeholder')}\n          />\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"lesson-description\">{t('lesson.generator.description')}</label>\n          <textarea\n            id=\"lesson-description\"\n            bind:value={lessonParams.description}\n            placeholder={t('lesson.generator.description_placeholder')}\n            rows=\"3\"\n          ></textarea>\n        </div>\n      </div>\n\n      <div class=\"form-section\">\n        <h3>{t('lesson.generator.lesson_parameters')}</h3>\n\n        <div class=\"form-row\">\n          <div class=\"form-group\">\n            <label for=\"lesson-type\">{t('lesson.generator.lesson_type_required')}</label>\n            <select id=\"lesson-type\" bind:value={lessonParams.type}>\n              <option value=\"\">{t('lesson.generator.select_lesson_type')}</option>\n              {#each getLessonTypes() as type}\n                <option value={type}>{getLessonTypeName(type)}</option>\n              {/each}\n            </select>\n          </div>\n\n          <div class=\"form-group\">\n            <label for=\"lesson-difficulty\">{t('lesson.generator.difficulty_level_required')}</label>\n            <select id=\"lesson-difficulty\" bind:value={lessonParams.difficulty}>\n              <option value=\"\">{t('lesson.generator.select_difficulty')}</option>\n              {#each getDifficultyLevels() as level}\n                <option value={level}>{level}</option>\n              {/each}\n            </select>\n          </div>\n        </div>\n\n        {#if isVocabularyLesson || isMixedLesson}\n          <div class=\"form-row\">\n            <div class=\"form-group\">\n              <label for=\"lesson-category\">{t('lesson.generator.category')}</label>\n              <select id=\"lesson-category\" bind:value={lessonParams.category}>\n                <option value=\"\">{t('lesson.generator.any_category')}</option>\n                {#each getVocabularyCategories() as category}\n                  <option value={category}>{getCategoryDisplayName(category)}</option>\n                {/each}\n              </select>\n            </div>\n\n            <div class=\"form-group\">\n              <label for=\"lesson-part-of-speech\">{t('lesson.generator.part_of_speech')}</label>\n              <select id=\"lesson-part-of-speech\" bind:value={lessonParams.partOfSpeech}>\n                <option value=\"\">{t('lesson.generator.any_part_of_speech')}</option>\n                {#each getPartsOfSpeech() as partOfSpeech}\n                  <option value={partOfSpeech}>{getPartOfSpeechDisplayName(partOfSpeech)}</option>\n                {/each}\n              </select>\n            </div>\n          </div>\n        {/if}\n\n        {#if isGrammarLesson}\n          <div class=\"form-group\">\n            <label for=\"lesson-concept-type\">{t('lesson.generator.grammar_concept')}</label>\n            <input\n              id=\"lesson-concept-type\"\n              type=\"text\"\n              bind:value={lessonParams.conceptType}\n              placeholder={t('lesson.generator.grammar_concept_placeholder')}\n            />\n          </div>\n        {/if}\n\n        <div class=\"form-group\">\n          <label for=\"lesson-limit\">{t('lesson.generator.number_of_items')}</label>\n          <select id=\"lesson-limit\" bind:value={lessonParams.limit}>\n            <option value=\"5\">5 {t('lesson.generator.items')}</option>\n            <option value=\"8\">8 {t('lesson.generator.items')}</option>\n            <option value=\"10\" selected>10 {t('lesson.generator.items')}</option>\n            <option value=\"15\">15 {t('lesson.generator.items')}</option>\n            <option value=\"20\">20 {t('lesson.generator.items')}</option>\n          </select>\n        </div>\n      </div>\n\n      <div class=\"form-section\">\n        <h3>{t('lesson.generator.options')}</h3>\n\n        <div class=\"form-row\">\n          <div class=\"form-group checkbox-group\">\n            <label>\n              <input type=\"checkbox\" bind:checked={lessonParams.includePractice} />\n              {t('lesson.generator.include_practice_exercises')}\n            </label>\n          </div>\n\n          {#if isGrammarLesson}\n            <div class=\"form-group checkbox-group\">\n              <label>\n                <input type=\"checkbox\" bind:checked={lessonParams.includeComparison} />\n                {t('lesson.generator.include_language_comparison')}\n              </label>\n            </div>\n          {/if}\n\n          {#if isVocabularyLesson || isMixedLesson}\n            <div class=\"form-group checkbox-group\">\n              <label>\n                <input type=\"checkbox\" bind:checked={lessonParams.includeReview} />\n                {t('lesson.generator.include_review_section')}\n              </label>\n            </div>\n          {/if}\n        </div>\n      </div>\n    </div>\n\n    <DialogFooter>\n      <Button\n        variant=\"secondary\"\n        size=\"default\"\n        class=\"\"\n        onclick={() => {\n          try {\n            closeModal();\n          } catch (err) {\n            handleError(err, 'Failed to close modal');\n            hasError = true;\n          }\n        }}\n        disabled={isGenerating}\n      >\n        {t('common.cancel')}\n      </Button>\n      <Button\n        variant=\"default\"\n        size=\"default\"\n        class=\"\"\n        onclick={() => {\n          try {\n            generateLesson();\n          } catch (err) {\n            // Error is already handled in the generateLesson function\n          }\n        }}\n        disabled={isGenerating}\n      >\n            {isGenerating ? generatingLabel : generateLabel}\n      </Button>\n    </DialogFooter>\n  </DialogContent>\n</Dialog>\n\n<style>\n\n  .lesson-generator-form {\n    padding: 1rem 0;\n  }\n\n  .form-section {\n    margin-bottom: 1.5rem;\n    padding-bottom: 1.5rem;\n    border-bottom: 1px solid #e2e8f0;\n  }\n\n  .form-section:last-child {\n    border-bottom: none;\n    margin-bottom: 0;\n  }\n\n  .form-section h3 {\n    font-size: 1rem;\n    font-weight: 600;\n    color: #1e293b;\n    margin-bottom: 1rem;\n  }\n\n  .form-group {\n    margin-bottom: 1rem;\n  }\n\n  .form-group label {\n    display: block;\n    margin-bottom: 0.5rem;\n    font-size: 0.875rem;\n    font-weight: 500;\n    color: #475569;\n  }\n\n  .form-row {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 1rem;\n  }\n\n  input, textarea, select {\n    width: 100%;\n    padding: 0.5rem 1rem;\n    border-radius: 8px;\n    border: 1px solid #e2e8f0;\n    background: white;\n    font-size: 0.875rem;\n  }\n\n  textarea {\n    resize: vertical;\n    min-height: 80px;\n  }\n\n  .checkbox-group {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n  }\n\n  .checkbox-group input {\n    width: auto;\n  }\n\n  .error-message {\n    padding: 0.75rem 1rem;\n    background: #fef2f2;\n    border-radius: 8px;\n    color: #ef4444;\n    margin-bottom: 1rem;\n    font-size: 0.875rem;\n  }\n\n  .success-message {\n    padding: 0.75rem 1rem;\n    background: #f0fdf4;\n    border-radius: 8px;\n    color: #10b981;\n    margin-bottom: 1rem;\n    font-size: 0.875rem;\n  }\n\n  @media (max-width: 768px) {\n    .form-row {\n      grid-template-columns: 1fr;\n    }\n\n  }\n</style>","<script lang=\"ts\">\n\timport { Dialog as DialogPrimitive } from \"bits-ui\";\n\n\ttype $$Props = DialogPrimitive.RootProps & { children?: any };\n\n\tlet {\n\t\tchildren,\n\t\topen = undefined,\n\t\tonOpenChange = undefined,\n\t\t...rest\n\t}: $$Props = $props();\n</script>\n\n<DialogPrimitive.Root\n\tbind:open\n\t{onOpenChange}\n\t{...rest}\n>\n\t{#if children}\n\t\t{@render children()}\n\t{/if}\n</DialogPrimitive.Root>\n","<script lang=\"ts\">\n\timport { cn } from \"$lib/utils\";\n\timport type { HTMLAttributes } from \"svelte/elements\";\n\timport type { Snippet } from \"svelte\";\n\n\ttype $$Props = HTMLAttributes<HTMLDivElement> & {\n\tchildren?: Snippet;\n};\n\n\tlet {\n\t\tchildren,\n\t\tclass: className = undefined,\n\t\t...rest\n\t}: $$Props = $props();\n</script>\n\n<div\n\tclass={cn('flex flex-col space-y-1.5 text-center sm:text-left', className)}\n\t{...rest}\n>\n\t{@render children()}\n</div>","<script lang=\"ts\">\n\timport { Dialog as DialogPrimitive } from \"bits-ui\";\n\timport { cn } from \"$lib/utils\";\n\n\ttype $$Props = DialogPrimitive.TitleProps;\n\n\tlet {\n\t\tchildren,\n\t\tclass: className = undefined,\n\t\t...rest\n\t}: $$Props = $props();\n</script>\n\n<DialogPrimitive.Title\n\tclass={cn('text-lg font-semibold leading-none tracking-tight', className)}\n\t{...rest}\n>\n\t{#if children}\n\t\t{@render children()}\n\t{/if}\n</DialogPrimitive.Title>","<script lang=\"ts\">\n\timport { Dialog as DialogPrimitive } from \"bits-ui\";\n\timport { cn } from \"$lib/utils\";\n\n\ttype $$Props = DialogPrimitive.DescriptionProps;\n\n\tlet {\n\t\tchildren,\n\t\tclass: className = undefined,\n\t\t...rest\n\t}: $$Props = $props();\n</script>\n\n<DialogPrimitive.Description\n\tclass={cn('text-sm text-muted-foreground', className)}\n\t{...rest}\n>\n\t{#if children}\n\t\t{@render children()}\n\t{/if}\n</DialogPrimitive.Description>","<script lang=\"ts\">\n\timport { cn } from \"$lib/utils\";\n\timport type { HTMLAttributes } from \"svelte/elements\";\n\timport type { Snippet } from \"svelte\";\n\n\ttype $$Props = HTMLAttributes<HTMLDivElement> & {\n\tchildren?: Snippet;\n};\n\n\tlet {\n\t\tchildren,\n\t\tclass: className = undefined,\n\t\t...rest\n\t}: $$Props = $props();\n</script>\n\n<div\n\tclass={cn('flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2', className)}\n\t{...rest}\n>\n\t{@render children()}\n</div>","<script lang=\"ts\">\n  /**\n   * Lessons Page\n   *\n   * Displays available lessons and allows users to browse and start learning.\n   * Uses the enhanced LessonService for comprehensive lesson generation and management.\n   */\n\n  import LessonCard from '$lib/components/LessonCard.svelte';\n  import GeneratedLesson from '$lib/components/GeneratedLesson.svelte';\n  import LessonGenerator from '$lib/components/LessonGenerator.svelte';\n  import { enhancedLessonService } from '$lib/services/enhanced-lesson';\n  import { lessonService } from '$lib/services/lesson';\n  import { vocabularyDb as db } from '$lib/data/db.svelte';\n  import { appState } from '$lib/state/app-state';\n  import type { VocabularyCategory, PartOfSpeech } from '$lib/schemas/vocabulary';\n  import type { VocabularyItem } from '$lib/types/vocabulary';\n  import type { Lesson, LessonDifficulty, LessonType } from '$lib/schemas/lesson';\n\n  // State\n  let lessons = $state<Lesson[]>([]);\n  let isLoading = $state(true);\n  let error = $state<string | null>(null);\n  let selectedDifficulty = $state<LessonDifficulty | 'all'>('all');\n  let selectedType = $state<string>('all');\n  let showLessonGenerationModal = $state(false);\n  let showGeneratedLesson = $state<Lesson | null>(null);\n  let newLessonCriteria = $state<{\n    difficulty?: LessonDifficulty;\n    type?: LessonType;\n    category?: VocabularyCategory;\n    partOfSpeech?: PartOfSpeech;\n    limit?: number;\n    title?: string;\n    description?: string;\n  }>({\n    limit: 10\n  });\n\n  const typeLabels = {\n    de: {\n      vocabulary: 'Vokabular',\n      grammar: 'Grammatik',\n      conversation: 'Konversation',\n      reading: 'Lesen',\n      listening: 'H√∂ren',\n      writing: 'Schreiben',\n      culture: 'Kultur',\n      mixed: 'Gemischt'\n    },\n    bg: {\n      vocabulary: '–†–µ—á–Ω–∏–∫',\n      grammar: '–ì—Ä–∞–º–∞—Ç–∏–∫–∞',\n      conversation: '–†–∞–∑–≥–æ–≤–æ—Ä',\n      reading: '–ß–µ—Ç–µ–Ω–µ',\n      listening: '–°–ª—É—à–∞–Ω–µ',\n      writing: '–ü–∏—Å–∞–Ω–µ',\n      culture: '–ö—É–ª—Ç—É—Ä–∞',\n      mixed: '–°–º–µ—Å–µ–Ω–æ'\n    }\n  } as const;\n\n  const categoryLabels = {\n    de: {\n      greetings: 'Begr√º√üungen',\n      numbers: 'Zahlen',\n      family: 'Familie',\n      food: 'Essen',\n      colors: 'Farben',\n      animals: 'Tiere',\n      body: 'K√∂rper',\n      clothing: 'Kleidung',\n      house: 'Haus & Wohnen',\n      nature: 'Natur',\n      transport: 'Verkehr',\n      technology: 'Technologie',\n      time: 'Zeit',\n      weather: 'Wetter',\n      professions: 'Berufe',\n      places: 'Orte',\n      grammar: 'Grammatik',\n      culture: 'Kultur',\n      common_phrases: 'Alltagsphrasen',\n      uncategorized: 'Unkategorisiert'\n    },\n    bg: {\n      greetings: '–ü–æ–∑–¥—Ä–∞–≤–∏',\n      numbers: '–ß–∏—Å–ª–∞',\n      family: '–°–µ–º–µ–π—Å—Ç–≤–æ',\n      food: '–•—Ä–∞–Ω–∞',\n      colors: '–¶–≤–µ—Ç–æ–≤–µ',\n      animals: '–ñ–∏–≤–æ—Ç–Ω–∏',\n      body: '–¢—è–ª–æ',\n      clothing: '–û–±–ª–µ–∫–ª–æ',\n      house: '–î–æ–º',\n      nature: '–ü—Ä–∏—Ä–æ–¥–∞',\n      transport: '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç',\n      technology: '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏',\n      time: '–í—Ä–µ–º–µ',\n      weather: '–í—Ä–µ–º–µ—Ç–æ',\n      professions: '–ü—Ä–æ—Ñ–µ—Å–∏–∏',\n      places: '–ú–µ—Å—Ç–∞',\n      grammar: '–ì—Ä–∞–º–∞—Ç–∏–∫–∞',\n      culture: '–ö—É–ª—Ç—É—Ä–∞',\n      common_phrases: '–ß–µ—Å—Ç–æ —Å—Ä–µ—â–∞–Ω–∏ –∏–∑—Ä–∞–∑–∏',\n      uncategorized: '–ù–µ–∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä–∞–Ω–∏'\n    }\n  } as const;\n\n  const partOfSpeechLabels = {\n    de: {\n      noun: 'Nomen',\n      verb: 'Verben',\n      adjective: 'Adjektive',\n      adverb: 'Adverbien',\n      pronoun: 'Pronomen',\n      preposition: 'Pr√§positionen',\n      conjunction: 'Konjunktionen',\n      interjection: 'Interjektionen',\n      article: 'Artikel',\n      number: 'Zahlw√∂rter',\n      phrase: 'Redewendungen'\n    },\n    bg: {\n      noun: '–°—ä—â–µ—Å—Ç–≤–∏—Ç–µ–ª–Ω–∏',\n      verb: '–ì–ª–∞–≥–æ–ª–∏',\n      adjective: '–ü—Ä–∏–ª–∞–≥–∞—Ç–µ–ª–Ω–∏',\n      adverb: '–ù–∞—Ä–µ—á–∏—è',\n      pronoun: '–ú–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è',\n      preposition: '–ü—Ä–µ–¥–ª–æ–∑–∏',\n      conjunction: '–°—ä—é–∑–∏',\n      interjection: '–ú–µ–∂–¥—É–º–µ—Ç–∏—è',\n      article: '–ß–ª–µ–Ω–æ–≤–µ',\n      number: '–ß–∏—Å–ª–∏—Ç–µ–ª–Ω–∏',\n      phrase: '–ò–∑—Ä–∞–∑–∏'\n    }\n  } as const;\n\n  const ui = $derived(appState.languageMode === 'DE_BG'\n    ? {\n        title: 'Lektionen',\n        subtitle: 'Strukturierte Lernerlebnisse f√ºr Bulgarisch und Deutsch',\n        createDynamicLesson: '‚ú® Dynamische Lektion erstellen',\n        createLesson: '‚ú® Lektion erstellen',\n        createFirstLesson: 'Erstelle deine erste Lektion',\n        loading: 'Lektionen werden geladen...',\n        error: 'Fehler beim Laden. Bitte erneut versuchen.',\n        retry: 'Erneut versuchen',\n        emptyTitle: 'Keine Lektionen verf√ºgbar',\n        emptyDescription: 'Erstelle deine erste individuelle Lektion!',\n        difficultyLabel: 'Niveau',\n        typeLabel: 'Typ',\n        allLevels: 'Alle Niveaus',\n        allTypes: 'Alle Typen',\n        backToLessons: '‚Üê Zur√ºck zu allen Lektionen',\n        showingLessons: (shown: number, total: number) => `Zeige ${shown} von ${total} Lektionen`,\n        resetFilters: 'Filter zur√ºcksetzen',\n        mixedEveryday: 'Gemischt: Allt√§gliche Gespr√§che',\n        basicVocabulary: 'Grundwortschatz',\n        categoryPrefix: 'Kategorie',\n        grammarPrefix: 'Grammatik'\n      }\n    : {\n        title: '–£—Ä–æ—Ü–∏',\n        subtitle: '–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–∞–Ω–∏ —É—Ä–æ—Ü–∏ –ø–æ –±—ä–ª–≥–∞—Ä—Å–∫–∏ –∏ –Ω–µ–º—Å–∫–∏',\n        createDynamicLesson: '‚ú® –°—ä–∑–¥–∞–π –¥–∏–Ω–∞–º–∏—á–µ–Ω —É—Ä–æ–∫',\n        createLesson: '‚ú® –°—ä–∑–¥–∞–π —É—Ä–æ–∫',\n        createFirstLesson: '–°—ä–∑–¥–∞–π –ø—ä—Ä–≤–∏—è —Å–∏ —É—Ä–æ–∫',\n        loading: '–ó–∞—Ä–µ–∂–¥–∞–º–µ —É—Ä–æ—Ü–∏—Ç–µ...',\n        error: '–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ. –û–ø–∏—Ç–∞–π—Ç–µ –ø–∞–∫.',\n        retry: '–û–ø–∏—Ç–∞–π –æ—Ç–Ω–æ–≤–æ',\n        emptyTitle: '–ù—è–º–∞ –Ω–∞–ª–∏—á–Ω–∏ —É—Ä–æ—Ü–∏',\n        emptyDescription: '–°—ä–∑–¥–∞–π –ø—ä—Ä–≤–∏—è —Å–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω —É—Ä–æ–∫!',\n        difficultyLabel: '–ù–∏–≤–æ',\n        typeLabel: '–¢–∏–ø',\n        allLevels: '–í—Å–∏—á–∫–∏ –Ω–∏–≤–∞',\n        allTypes: '–í—Å–∏—á–∫–∏ —Ç–∏–ø–æ–≤–µ',\n        backToLessons: '‚Üê –ù–∞–∑–∞–¥ –∫—ä–º –≤—Å–∏—á–∫–∏ —É—Ä–æ—Ü–∏',\n        showingLessons: (shown: number, total: number) => `–ü–æ–∫–∞–∑–∞–Ω–∏ ${shown} –æ—Ç –æ–±—â–æ ${total} —É—Ä–æ–∫–∞`,\n        resetFilters: '–ù—É–ª–∏—Ä–∞–π —Ñ–∏–ª—Ç—Ä–∏—Ç–µ',\n        mixedEveryday: '–°–º–µ—Å–µ–Ω–æ: –ï–∂–µ–¥–Ω–µ–≤–Ω–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–∏',\n        basicVocabulary: '–û—Å–Ω–æ–≤–Ω–∞ –ª–µ–∫—Å–∏–∫–∞',\n        categoryPrefix: '–ö–∞—Ç–µ–≥–æ—Ä–∏—è',\n        grammarPrefix: '–ì—Ä–∞–º–∞—Ç–∏–∫–∞'\n      });\n\n  // Computed\n  let filteredLessons = $derived(\n    lessons.filter(lesson => {\n      const difficultyMatch = selectedDifficulty === 'all' || lesson.difficulty === selectedDifficulty;\n      const typeMatch = selectedType === 'all' || lesson.type === selectedType;\n      return difficultyMatch && typeMatch;\n    })\n  );\n\n  // Initialize lessons\n  $effect(() => {\n    loadLessons();\n  });\n\n  /**\n   * Load lessons from service\n   */\n  async function loadLessons() {\n    try {\n      isLoading = true;\n      error = null;\n\n      // Initialize enhanced lesson service\n      await enhancedLessonService.initialize();\n\n      // Generate comprehensive lessons using the enhanced service\n      const generatedLessons = await generateComprehensiveLessons();\n\n      lessons = generatedLessons;\n\n    } catch (err) {\n      console.error('Failed to load lessons:', err);\n      error = err instanceof Error ? err.message : ui.error;\n    } finally {\n      isLoading = false;\n    }\n  }\n\n  /**\n   * Generate comprehensive lessons using the enhanced LessonService\n   */\n  async function generateComprehensiveLessons(): Promise<Lesson[]> {\n    const lessons: Lesson[] = [];\n    const vocabularyStats = db.getVocabularyStatsByDifficulty();\n\n    // Generate lessons by difficulty level\n    const difficulties: LessonDifficulty[] = ['A1', 'A2', 'B1', 'B2', 'C1'];\n\n    for (const difficulty of difficulties) {\n      if (vocabularyStats[difficulty] >= 5) {\n        // Generate 2-3 lessons per difficulty level\n        const lessonCount = Math.min(3, Math.floor(vocabularyStats[difficulty] / 5));\n\n        for (let i = 0; i < lessonCount; i++) {\n          try {\n            const lesson = await lessonService.generateLessonFromCriteria({\n              difficulty,\n              limit: 8,\n              type: i === 0 ? 'vocabulary' : (i === 1 ? 'conversation' : 'mixed')\n            });\n            lessons.push(lesson);\n          } catch (error) {\n            console.error(`Failed to generate ${difficulty} lesson ${i + 1}:`, error);\n          }\n        }\n      }\n    }\n\n    // Generate lessons by category\n    const categories: VocabularyCategory[] = [\n      'greetings', 'numbers', 'family', 'food', 'colors', 'animals', 'body', 'clothing'\n    ];\n\n    for (const category of categories) {\n      try {\n        const categoryItems = db.getVocabularyByCategory(category);\n        if (categoryItems.length >= 5) {\n          const lesson = await lessonService.generateLessonFromCriteria({\n            categories: [category],\n            limit: 8,\n            type: 'vocabulary',\n            title: `${ui.categoryPrefix}: ${getCategoryDisplayName(category)}`\n          });\n          lessons.push(lesson);\n        }\n      } catch (error) {\n        console.error(`Failed to generate ${category} category lesson:`, error);\n      }\n    }\n\n    // Generate lessons by part of speech\n    const partsOfSpeech: PartOfSpeech[] = ['noun', 'verb', 'adjective', 'adverb'];\n\n    for (const partOfSpeech of partsOfSpeech) {\n      try {\n        const posItems = db.getVocabularyByPartOfSpeech(partOfSpeech);\n        if (posItems.length >= 5) {\n          const lesson = await lessonService.generateLessonFromCriteria({\n            partOfSpeech,\n            limit: 8,\n            type: 'vocabulary',\n            title: `${ui.grammarPrefix}: ${getPartOfSpeechDisplayName(partOfSpeech)}`\n          });\n          lessons.push(lesson);\n        }\n      } catch (error) {\n        console.error(`Failed to generate ${partOfSpeech} lesson:`, error);\n      }\n    }\n\n    // Generate mixed lessons if we have enough vocabulary\n    if (db.getVocabularyCount() >= 15) {\n      try {\n        const lesson = await lessonService.generateLessonFromCriteria({\n          limit: 10,\n          type: 'mixed',\n          title: ui.mixedEveryday\n        });\n        lessons.push(lesson);\n      } catch (error) {\n        console.error('Failed to generate mixed lesson:', error);\n      }\n    }\n\n    // If no lessons were generated, create fallback lessons\n    if (lessons.length === 0 && db.getVocabularyCount() > 0) {\n      console.warn('No lessons generated, creating fallback lessons');\n      const fallbackLessons = generateFallbackLessons();\n      lessons.push(...fallbackLessons);\n    }\n\n    return lessons;\n  }\n\n  /**\n   * Generate fallback lessons when automatic generation fails\n   */\n  function generateFallbackLessons(): Lesson[] {\n    const lessons: Lesson[] = [];\n    const vocabularyData = db.getVocabulary();\n\n    if (vocabularyData.length >= 5) {\n      // Group vocabulary by difficulty\n      const byDifficulty: Record<LessonDifficulty, VocabularyItem[]> = {\n        A1: [],\n        A2: [],\n        B1: [],\n        B2: [],\n        C1: []\n      };\n\n      vocabularyData.forEach(item => {\n        if (item.difficulty <= 1.5) byDifficulty.A1.push(item);\n        else if (item.difficulty <= 2.5) byDifficulty.A2.push(item);\n        else if (item.difficulty <= 3.5) byDifficulty.B1.push(item);\n        else if (item.difficulty <= 4.5) byDifficulty.B2.push(item);\n        else byDifficulty.C1.push(item);\n      });\n\n      // Create simple fallback lessons\n      for (const [difficulty, items] of Object.entries(byDifficulty)) {\n        if (items.length >= 5) {\n          const lesson = lessonService.generateLessonFromVocabulary(\n            items.slice(0, 8),\n            {\n              title: `${difficulty}: ${ui.basicVocabulary}`,\n              difficulty: difficulty as LessonDifficulty,\n              type: 'vocabulary'\n            }\n          );\n          lessons.push(lesson);\n        }\n      }\n    }\n\n    return lessons;\n  }\n\n  /**\n   * Handle generated lesson\n   */\n  function handleLessonGenerated(lesson: Lesson) {\n    lessons.push(lesson);\n    showGeneratedLesson = lesson;\n    showLessonGenerationModal = false;\n  }\n\n  /**\n   * Close generated lesson view\n   */\n  function closeGeneratedLesson() {\n    showGeneratedLesson = null;\n  }\n\n  /**\n   * Get available lesson types\n   */\n  function getLessonTypes(): string[] {\n    const types = new Set<string>();\n    lessons.forEach(lesson => types.add(lesson.type));\n    return ['all', ...Array.from(types)];\n  }\n\n  /**\n   * Get difficulty levels\n   */\n  function getDifficultyLevels(): LessonDifficulty[] {\n    return ['A1', 'A2', 'B1', 'B2', 'C1'];\n  }\n\n  /**\n   * Get vocabulary categories for lesson generation\n   */\n  function getVocabularyCategories(): VocabularyCategory[] {\n    return [\n      'greetings', 'numbers', 'family', 'food', 'colors', 'animals', 'body',\n      'clothing', 'house', 'nature', 'transport', 'technology', 'time', 'weather',\n      'professions', 'places', 'grammar', 'culture', 'common_phrases'\n    ];\n  }\n\n  /**\n   * Get parts of speech for lesson generation\n   */\n  function getPartsOfSpeech(): PartOfSpeech[] {\n    return ['noun', 'verb', 'adjective', 'adverb', 'pronoun', 'preposition', 'conjunction', 'phrase'];\n  }\n\n  /**\n   * Get lesson type display name\n   */\n  function getLessonTypeName(type: string): string {\n    const labels = appState.languageMode === 'DE_BG' ? typeLabels.de : typeLabels.bg;\n    return labels[type as keyof typeof labels] ?? type;\n  }\n\n  /**\n   * Get category display name\n   */\n  function getCategoryDisplayName(category: VocabularyCategory): string {\n    const labels = appState.languageMode === 'DE_BG' ? categoryLabels.de : categoryLabels.bg;\n    return labels[category] ?? category;\n  }\n\n  /**\n   * Get part of speech display name\n   */\n  function getPartOfSpeechDisplayName(partOfSpeech: PartOfSpeech): string {\n    const labels = appState.languageMode === 'DE_BG' ? partOfSpeechLabels.de : partOfSpeechLabels.bg;\n    return labels[partOfSpeech] ?? partOfSpeech;\n  }\n</script>\n\n<div class=\"lessons-page\">\n  <header class=\"lessons-header\">\n    <h1>{ui.title}</h1>\n    <p class=\"subtitle\">{ui.subtitle}</p>\n    <button class=\"create-lesson-button\" onclick={() => showLessonGenerationModal = true}>\n      {ui.createDynamicLesson}\n    </button>\n  </header>\n\n  {#if isLoading}\n    <div class=\"loading-state\">\n      <div class=\"spinner\"></div>\n      <p>{ui.loading}</p>\n    </div>\n  {:else if error}\n    <div class=\"error-state\">\n      <div class=\"error-icon\">‚ö†Ô∏è</div>\n      <p>{error}</p>\n      <button class=\"retry-button\" onclick={loadLessons}>{ui.retry}</button>\n    </div>\n  {:else if lessons.length === 0}\n    <div class=\"empty-state\">\n      <div class=\"empty-icon\">üìö</div>\n      <p>{ui.emptyDescription}</p>\n      <button class=\"create-lesson-button\" onclick={() => showLessonGenerationModal = true}>\n        {ui.createFirstLesson}\n      </button>\n    </div>\n  {:else}\n    <div class=\"lessons-filters\">\n      <div class=\"filter-group\">\n        <label for=\"difficulty-filter\">{ui.difficultyLabel}</label>\n        <select id=\"difficulty-filter\" bind:value={selectedDifficulty}>\n          <option value=\"all\">{ui.allLevels}</option>\n          {#each getDifficultyLevels() as level}\n            <option value={level}>{level}</option>\n          {/each}\n        </select>\n      </div>\n\n      <div class=\"filter-group\">\n        <label for=\"type-filter\">{ui.typeLabel}</label>\n        <select id=\"type-filter\" bind:value={selectedType}>\n          <option value=\"all\">{ui.allTypes}</option>\n          {#each getLessonTypes() as type}\n            <option value={type}>{getLessonTypeName(type)}</option>\n          {/each}\n        </select>\n      </div>\n\n      <button class=\"create-lesson-button mobile\" onclick={() => showLessonGenerationModal = true}>\n        {ui.createLesson}\n      </button>\n    </div>\n\n    {#if showGeneratedLesson}\n      <GeneratedLesson lesson={showGeneratedLesson} />\n      <div class=\"back-to-lessons\">\n        <button class=\"back-button\" onclick={closeGeneratedLesson}>\n          {ui.backToLessons}\n        </button>\n      </div>\n    {:else}\n      <div class=\"lessons-grid\">\n        {#each filteredLessons as lesson (lesson.id)}\n          <div class=\"lesson-card-wrapper\">\n            <LessonCard {lesson} />\n          </div>\n        {/each}\n      </div>\n    {/if}\n\n    <div class=\"lessons-summary\">\n      <p>\n        {ui.showingLessons(filteredLessons.length, lessons.length)}\n        {#if selectedDifficulty !== 'all' || selectedType !== 'all'}\n          ‚Ä¢ <button class=\"reset-filters\" onclick={() => { selectedDifficulty = 'all'; selectedType = 'all'; }}>{ui.resetFilters}</button>\n        {/if}\n      </p>\n    </div>\n  {/if}\n\n  <!-- Lesson Generator Component -->\n  <LessonGenerator\n    isOpen={showLessonGenerationModal}\n    onClose={() => showLessonGenerationModal = false}\n    onLessonGenerated={handleLessonGenerated}\n  />\n</div>\n\n<style>\n  .lessons-page {\n    max-width: 1200px;\n    margin: 0 auto;\n    padding: 2rem;\n  }\n\n  .lessons-header {\n    text-align: center;\n    margin-bottom: 2rem;\n  }\n\n  .lessons-header h1 {\n    font-size: 2rem;\n    font-weight: 700;\n    color: #1e293b;\n    margin-bottom: 0.5rem;\n  }\n\n  .subtitle {\n    color: #64748b;\n    font-size: 1rem;\n  }\n\n  .lessons-filters {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 1rem;\n    margin-bottom: 2rem;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .filter-group {\n    display: flex;\n    flex-direction: column;\n    gap: 0.5rem;\n  }\n\n  .filter-group label {\n    font-size: 0.875rem;\n    font-weight: 500;\n    color: #475569;\n  }\n\n  select {\n    padding: 0.5rem 1rem;\n    border-radius: 8px;\n    border: 1px solid #e2e8f0;\n    background: white;\n    font-size: 0.875rem;\n    cursor: pointer;\n    min-width: 150px;\n  }\n\n  .lessons-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));\n    gap: 1.5rem;\n    margin-bottom: 2rem;\n  }\n\n  .lesson-card-wrapper {\n    height: 500px;\n  }\n\n  .loading-state, .error-state, .empty-state {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    min-height: 400px;\n    text-align: center;\n  }\n\n  .spinner {\n    width: 50px;\n    height: 50px;\n    border: 4px solid #f3f4f6;\n    border-top: 4px solid #3b82f6;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n    margin-bottom: 1rem;\n  }\n\n  .error-icon, .empty-icon {\n    font-size: 3rem;\n    margin-bottom: 1rem;\n  }\n\n  .error-state p {\n    color: #ef4444;\n    font-size: 1.125rem;\n    margin-bottom: 1rem;\n  }\n\n  .empty-state p {\n    color: #64748b;\n    font-size: 1.125rem;\n  }\n\n  .retry-button {\n    padding: 0.5rem 1rem;\n    background: #3b82f6;\n    color: white;\n    border: none;\n    border-radius: 6px;\n    cursor: pointer;\n    font-size: 0.875rem;\n  }\n\n  .lessons-summary {\n    text-align: center;\n    color: #64748b;\n    font-size: 0.875rem;\n  }\n\n  .reset-filters {\n    background: none;\n    border: none;\n    color: #3b82f6;\n    cursor: pointer;\n    text-decoration: underline;\n    padding: 0;\n    font-size: 0.875rem;\n  }\n\n  /* Button Styles */\n  .create-lesson-button {\n    padding: 0.5rem 1rem;\n    background: #3b82f6;\n    color: white;\n    border: none;\n    border-radius: 6px;\n    cursor: pointer;\n    font-size: 0.875rem;\n    transition: background 0.2s ease;\n    display: inline-flex;\n    align-items: center;\n    gap: 0.5rem;\n  }\n\n  .create-lesson-button:hover {\n    background: #2563eb;\n  }\n\n  .create-lesson-button.mobile {\n    display: none;\n  }\n\n\n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n\n  .back-to-lessons {\n    text-align: center;\n    margin: 2rem 0;\n  }\n\n  .back-button {\n    padding: 0.5rem 1rem;\n    background: #f1f5f9;\n    color: #475569;\n    border: 1px solid #e2e8f0;\n    border-radius: 6px;\n    cursor: pointer;\n    font-size: 0.875rem;\n  }\n\n  @media (max-width: 768px) {\n    .lessons-page {\n      padding: 1rem;\n    }\n\n    .lessons-grid {\n      grid-template-columns: 1fr;\n    }\n\n    .lessons-filters {\n      flex-direction: column;\n      align-items: stretch;\n    }\n\n    .filter-group {\n      align-items: stretch;\n    }\n\n    select {\n      min-width: 100%;\n    }\n  }\n</style>"],"names":["createAttachmentKey","Symbol","ATTACHMENT_KEY","VocabularyItemBaseSchema","z.object","id","LegacyIdSchema","german","z.string","min","max","bulgarian","partOfSpeech","PartOfSpeechSchema","default","difficulty","z.number","describe","categories","z.array","VocabularyCategorySchemaWithFallback","metadata","VocabularyMetadataSchema","optional","createdAt","z.union","z.date","datetime","transform","str","Date","val","updatedAt","isCommon","z.boolean","isVerified","VocabularyReferenceSchema","omit","uuid","LessonDifficultySchema","z.enum","LessonTypeSchema","LearningObjectiveSchema","description","isCompleted","LessonMetadataSchema","tags","prerequisites","relatedLessons","isPremium","LessonSchema","title","type","duration","vocabulary","objectives","content","completionPercentage","catch","_ctx","now","lesson","$.prop","$$props","isFlipped","$.state","currentVocabularyIndex","showAllVocabulary","vocabularyItems","$.derived","map","vocab","split","safeVocabularyItems","$.get","length","currentVocabulary","Math","round","filter","obj","toggleFlip","$.set","getDifficultyColor","A1","A2","B1","B2","C1","div","root","div_1","$.child","__keydown","e","key","div_2","div_3","div_4","div_5","h3","p","div_6","div_7","div_8","span","div_9","div_10","$.each","node_1","slice","span_1","root_2","$.set_text","text_5","span_2","root_3","consequent","node_3","span_3","root_5","text_7","button","root_6","__click","text_8","$.reset","$.append","$$anchor","consequent_2","$$render","consequent_1","alternate","div_11","button_1","$.sibling","onStart","div_12","div_13","button_3","div_14","h3_1","div_15","ul","objective","li","root_7","label","input","$.remove_input_defaults","__change","toggleObjective","objectiveId","span_4","classes","completed","text_11","div_16","h4","div_17","button_4","span_5","button_5","div_18","div_19","div_20","div_21","span_6","root_8","$.template_effect","text_16","consequent_3","span_7","root_9","$0","text_17","repeat","consequent_4","div_22","$.index","index","div_23","root_10","span_8","span_9","$.set_class","div_24","text","text_2","text_3","$.set_style","$.set_attribute","$2","text_9","text_10","text_12","disabled","text_13","text_14","text_15","grammar","conversation","reading","listening","writing","culture","mixed","getSourceText","item","appState","languageMode","hasError","errorMessage","handleError","error","context","console","currentSectionIndex","showAllObjectives","$.proxy","$.user_effect","Error","err","message","sections","currentSection","hasVocabulary","hasObjectives","hasSections","isFallbackLesson","fallback","nextSection","prevSection","getSectionIcon","introduction","exercise","cultural","summary","getSectionTypeName","names","t","root_1","window","location","reload","p_1","text_4","$.first_child","fragment_1","h1","tag","h3_2","button_2","li_1","consequent_5","root_11","h3_3","text_18","root_12","text_20","consequent_6","root_13","root_14","root_15","correctPartOfSpeech","noun","verb","adjective","adverb","preposition","conjunction","pos","consequent_7","root_16","consequent_8","getTargetText","consequent_9","getVocabularyPreview","count","join","consequent_10","root_17","div_25","text_25","div_26","button_6","text_27","div_27","div_28","div_29","h2","div_30","div_31","div_32","div_33","root_18","templateId","consequent_11","div_34","div_35","section","div_36","root_19","div_37","div_38","div_39","text_33","text_26","$3","$4","text_29","$8","replace","div_40","root_20","text_35","consequent_12","div_41","node_13","button_7","history","back","button_8","alert","$1","contextual","alternate_1","alternate_2","lessonService","constructor","this","lessons","vocabularyData","initialized","initialize","db","vocabData","getVocabulary","_error","isInitialized","generateLessonFromVocabulary","options","createFallbackLesson","lessonTitle","generateLessonTitle","lessonDifficulty","determineLessonDifficulty","createLearningObjectives","crypto","randomUUID","generateLessonDescription","calculateLessonDuration","generateLessonTags","validateLesson","generateLessonFromCriteria","criteria","queryVocabulary","limitedItems","limit","difficultyRange","getDifficultyRange","difficultyMatch","categoryMatch","some","includes","category","partOfSpeechMatch","Set","forEach","add","typeName","size","values","next","value","getCategoryDisplayName","partsOfSpeech","partOfSpeechList","Array","from","getPartOfSpeechDisplayName","itemCount","baseDuration","push","greetings","numbers","family","food","colors","animals","body","clothing","house","nature","transport","technology","time","weather","professions","places","common_phrases","verbs","uncategorized","pronoun","interjection","article","number","phrase","expression","avgDifficulty","reduce","sum","result","safeParse","success","data","_errorMessage","getLessons","getLessonById","find","addLesson","validatedLesson","updateLesson","updates","findIndex","updatedLesson","removeLesson","initialLength","getLessonsByDifficulty","getLessonsByType","getLessonsByTag","getRandomLessons","sort","random","enhancedLessonService","generateDynamicLesson","params","validatedParams","validateLessonGenerationParams","generatedLesson","lessonGenerationEngine","generateLesson","convertGeneratedLessonToLesson","generateThematicLesson","userId","isLessonDifficulty","includePractice","includeReview","generateGrammarLesson","conceptType","includeComparison","generateMixedLesson","defaults","sectionType","learningObjectives","uuidv4","generated","templateIds","s","Boolean","grammarConcepts","concept","name","displayName","difficultyLevel","focusArea","vocabCount","grammarConceptsText","isLessonType","isObject","CLASS_VALUE_PRIMITIVE_TYPES","isClassValue","isArray","every","Object","getPrototypeOf","prototype","BoxSymbol","isWritableSymbol","boxWith","getter","setter","derived","current","v","composeHandlers","handlers","handler","defaultPrevented","call","COMMENT_REGEX","NEWLINE_REGEX","WHITESPACE_REGEX","PROPERTY_REGEX","COLON_REGEX","VALUE_REGEX","SEMICOLON_REGEX","TRIM_REGEX","EMPTY_STRING","trim","StyleToObject","style","iterator","styleObject","declarations","TypeError","lineno","column","updatePosition","lines","match","i","lastIndexOf","position","start","line","node","Position","whitespace","end","source","msg","reason","filename","silent","re","m","exec","comments","rules","c","comment","charAt","declaration","prop","ret","property","decl","decls","parse","hasIterator","NUMBER_CHAR_RE","STR_SPLITTERS","isUppercase","char","test","toLowerCase","pascalCase","parts","previousUpper","previousSplitter","buff","isSplitter","isUpper","lastChar","at","splitByCase","toUpperCase","upperFirst","cssToStyleObj","css","styleObj","startsWith","lowerFirst","executeCallbacks","callbacks","args","callback","camelToKebab","matcher","replacer","regex","RegExp","createParser","styleToString","keys","styleToCSS","EVENT_LIST_SET","isEventHandler","has","mergeProps","props","a","b","aIsFunction","bIsFunction","aHandler","bHandler","aIsClassValue","bIsClassValue","clsx","aIsObject","bIsObject","aIsString","bIsString","parsedStyle","parsedStyleA","parsedStyleB","getOwnPropertySymbols","replaceAll","hidden","defaultWindow","_SvelteMap","Map","super","__privateAdd","_SvelteMap_instances","_sources","_version","state","_size","_update_version","update_version","set","__privateGet","sources","get","__privateMethod","callbackfn","this_arg","read_all_fn","prev_res","res","version","increment","v_reactions","reactions","r","delete","clear","entries","WeakMap","WeakSet","source_fn","__superGet","SvelteMap","document","__privateSet","_document","createSubscriber","update","cleanupFocusIn","on","cleanupFocusOut","_a","activeElement","shadowRoot","getActiveElement","Context","_name","_key","exists","hasContext","getContext","getOr","setContext","runWatcher","flush","effect","lazy","active","previousValues","$.user_pre_effect","runEffect","cleanup","untrack","watch","onDestroyEffect","fn","afterTick","tick","then","pre","isHTMLElement","nodeType","nodeName","isShadowRoot","isNode","getDocument","isDocument","isWindow","ownerDocument","DOMContext","element","__publicField","getRootNode","defaultView","rootNode","el","selector","querySelector","querySelectorAll","delay","getWindow","setTimeout","timeoutId","clearTimeout","getElementById","attachRef","ref","onChange","isConnected","boolToEmptyStrOrUndef","condition","BitsAttrs","config","_variant","_prefix","getVariant","component","getAttr","bind","attrs","fromEntries","part","variantOverride","createBitsAttrs","bitsAttrs","isBrowser","isIOS","navigator","userAgent","maxTouchPoints","HTMLElement","AnimationsComplete","opts","_AnimationsComplete_instances","_opts","_currentFrame","cleanup_fn","run","getAnimations","requestAnimationFrame","animations","Promise","allSettled","animation","finished","cancelAnimationFrame","executeCallback_fn","execute","PresenceManager","open","enabled","isOpen","_shouldRender","_afterAnimations","onComplete","shouldRender","noop","createId","prefixOrUid","uid","dialogAttrs","DialogRootContext","_triggerNode","_contentNode","_overlayNode","_descriptionNode","_contentId","_titleId","_triggerId","_descriptionId","_cancelNode","_nestedOpenCount","DialogRootState","_DialogRootState","parent","variant","depth","handleOpen","handleClose","contentPresence","contentNode","onOpenChangeComplete","overlayPresence","overlayNode","incrementNested","decrementNested","create","triggerNode","descriptionNode","contentId","titleId","triggerId","descriptionId","cancelNode","nestedOpenCount","sharedProps","DialogCloseState","_DialogCloseState","getBitsAttr","onclick","onkeydown","tabindex","attachment","preventDefault","DialogTitleState","_DialogTitleState","role","level","DialogDescriptionState","_DialogDescriptionState","DialogContentState","_DialogContentState","pointerEvents","outline","snippetProps","DialogOverlayState","_DialogOverlayState","$.props_id","restProps","$.rest_props","titleState","mergedProps","$.snippet","child","$.attribute_effect","get_key","render_fn","hydrating","hydrate_next","branches","BranchManager","block","ensure","BitsConfigContext","BitsConfigState","resolveConfigOption","currentOpts","createConfigResolver","defaultPortalTo","defaultLocale","resolvePortalToProp","configOption","getProp","getBitsConfig","propValue","option","to","getAllContexts","instance","target","localTarget","unmountInstance","unmount","mount","PortalConsumer","children","debounce","wait","timeout","debounced","destroy","isOrContainsTarget","contains","getOwnerDocument","candidateSelectors","candidateSelector","NoElement","Element","matches","msMatchesSelector","webkitMatchesSelector","_element$getRootNode","_isInert","lookUp","_node$getAttribute","inertAtt","getAttribute","parentNode","getCandidates","includeContainer","candidates","apply","unshift","_getCandidatesIteratively","elements","elementsToCheck","shift","tagName","assigned","assignedElements","nestedCandidates","flatten","scopeParent","getShadowRoot","validShadowRoot","shadowRootFilter","_nestedCandidates","hasTabIndex","isNaN","parseInt","getTabIndex","tabIndex","_node$getAttribute2","attValue","isContentEditable","sortOrderedTabbables","documentOrder","isInput","isNonTabbableRadio","isRadio","radioSet","radioScope","form","queryRadios","CSS","escape","checked","nodes","getCheckedRadio","isTabbableRadio","isZeroArea","_node$getBoundingClie","getBoundingClientRect","width","height","isHidden","_ref","displayCheck","checkVisibility","checkOpacity","opacityProperty","contentVisibilityAuto","visibilityProperty","checkVisibilityCSS","getComputedStyle","visibility","nodeUnderDetails","parentElement","originalNode","assignedSlot","host","_nodeRoot","_nodeRootHost","_nodeRootHost$ownerDo","_node$ownerDocument","nodeRoot","nodeRootHost","attached","_nodeRoot2","_nodeRootHost2","_nodeRootHost2$ownerD","isNodeAttached","getClientRects","isNodeMatchingSelectorFocusable","isHiddenInput","isDetailsWithSummary","isDisabledFromFieldset","isNodeMatchingSelectorTabbable","isShadowRootTabbable","shadowHostNode","_sortByOrder","regularTabbables","orderedTabbables","isScope","candidateTabindex","getSortOrderTabIndex","acc","sortable","concat","focusableCandidateSelector","CONTEXT_MENU_TRIGGER_ATTR","CONTEXT_MENU_CONTENT_ATTR","globalThis","bitsDismissableLayers","_isResponsibleLayer","_isFocusInsideDOMTree","_documentObj","_unsubClickListener","_DismissibleLayerState_instances","addEventListeners_fn","_markInterceptedEvent","_markResponsibleLayer","capture","_markNonInterceptedEvent","_handleFocus","_handleInteractOutside","_resetState","isAnyEventIntercepted_fn","_interceptedEvents","_onfocuscapture","_onblurcapture","DismissibleLayerState","_DismissibleLayerState","pointerdown","event","_isTargetWithinLayer","_onFocusOutside","createWrappedEvent","_interactOutsideProp","isEventValid","isValidEvent","SVGElement","targetIsContextMenuTrigger","closest","nodeIsContextMenu","isValid","documentElement","clientX","clientY","rect","left","right","top","bottom","isClickTrulyOutside","_behaviorType","pointerType","_handleDismiss","once","layersArr","topMostLayer","findLast","_","behaviorType","getTopMostDismissableLayer","firstLayerNode","isResponsibleLayer","eventType","onfocuscapture","onblurcapture","interactOutsideBehavior","onInteractOutside","onFocusOutside","unsubEvents","capturedCurrentTarget","currentTarget","capturedTarget","newEvent","PointerEvent","isPrevented","Proxy","bitsEscapeLayers","_addEventListener","EscapeLayerState","_EscapeLayerState","domContext","_onkeydown","passive","isResponsibleEscapeLayer","clonedEvent","KeyboardEvent","escapeKeydownBehavior","onEscapeKeydown","_FocusScopeManager","_scopeStack","initialValue","simpleBox","_focusHistory","_preFocusHistory","getInstance","register","scope","getActive","pause","unregister","resume","setFocusMemory","getFocusMemory","isActiveScope","setPreFocusMemory","getPreFocusMemory","clearPreFocusMemory","FocusScopeManager","_paused","_container","_FocusScope_instances","_cleanupFns","handleOpenAutoFocus_fn","CustomEvent","bubbles","cancelable","onOpenAutoFocus","firstTabbable","getFirstTabbable_fn","focus","handleCloseAutoFocus_fn","onCloseAutoFocus","preFocusedElement","_manager","setupEventListeners_fn","trap","container","doc","lastFocused","isFocusable","firstFocusable","getAllFocusables_fn","loop","tabbables","getTabbables_fn","first","last","shiftKey","observer","MutationObserver","elementToFocus","observe","childList","subtree","disconnect","FocusScope","_FocusScope","paused","use","bitsTextSelectionLayers","_unsubSelectionLock","_TextSelectionLayerState_instances","_pointerdown","_resetSelectionLock","onPointerUp","TextSelectionLayerState","_TextSelectionLayerState","highestLayer","isHighestLayer","onPointerDown","originalBodyUserSelect","getUserSelect","originalNodeUserSelect","setUserSelect","preventTextSelectionOverflow","isEnabled","userSelect","webkitUserSelect","bitsIdCounter","_subscribers","_state","_SharedState_instances","dispose_fn","_scope","lockMap","initialBodyStyle","stopTouchMoveListener","cleanupTimeoutId","isInCleanupTransition","anyLocked","cleanupScheduledAt","bodyLockStackCount","factory","_factory","$.effect_root","cancelPendingCleanup","ensureInitialStyleCaptured","bodyStyle","verticalScrollbarWidth","innerWidth","clientWidth","Number","paddingRight","marginRight","setProperty","overflow","touches","resetBodyStyle","setAttribute","removeProperty","scheduleCleanupIfNoNewLocks","currentCleanupId","actualDelay","isAnyLocked","BodyScrollLock","initialState","restoreScrollDelay","_id","prefix","useId","_restoreScrollDelay","_initialState","_countState","locked","preventScroll","forceMount","overlayState","$.noop","descriptionState","onOpenChange","closeState","trapFocus","contentState","focusScope","$$arg0","focusScopeProps","EscapeLayer","$.spread_props","dismissibleLayerState","DismissibleLayer","preventOverflowTextSelection","TextSelectionLayer","ScrollLock","node_4","focusScopeState","color","strokeWidth","className","rest","iconNode","x1","y1","x2","y2","svg","$$item","get_tag","is_svg","was_hydrating","hydrate_node","ELEMENT_NODE","anchor","parent_effect","next_tag","ns","NAMESPACE_SVG","set_should_intro","createElementNS","assign_nodes","is_raw_text_element","append","createComment","child_anchor","get_first_child","appendChild","create_text","set_hydrating","set_hydrate_node","set_animation_effect_override","active_effect","before","EFFECT_TRANSPARENT","teardown","$$array","$$element","DialogPrimitive_Portal","DialogPortal","cn","DialogPrimitive_Overlay","DialogOverlay","DialogPrimitive_Content","DialogPrimitive_Close","X","class","buttonVariants","SPACE_REGEX","cx","classnames","classList","buildClassString","len","String","falsyToString","isEmptyObject","flat","arr","flatMergeArrays","arrays","filtered","mergeObjects","obj1","obj2","val1","val2","defaultConfig","twMerge","twMergeConfig","cachedTwMerge","cachedTwMergeConfig","didTwMergeConfigChange","reset","createState","executeMerge","base","extendTailwindMerge","extend","theme","classGroups","conflictingClassGroupModifiers","conflictingClassGroups","tv","configProp","slots","slotProps","variants","variantsProps","compoundVariants","compoundVariantsProps","compoundSlots","defaultVariants","defaultVariantsProps","keys1","keys2","isEqual","isExtendedSlotsEmpty","componentSlots","hasOwnProperty","joinObjects","getVariantValue","vrs","_slotKey","slotProps2","variantObj","variantProp","variantKey","defaultVariantProp","getVariantClassNamesBySlotKey","slotKey","variantValue","propsWithoutUndefined","getCompleteProps","initialProp","key2","initial","getCompoundVariantsValue","cv","cvLength","tvClass","tvClassName","compoundVariantOptions","completeProps","completePropsValue","getCompoundVariantClassNamesBySlot","compoundClassNames","cnFn","slot","getCompoundSlotClassNameBySlot","slots2","slotClass","slotClassName","slotVariants","slotVariantValue","j","slotName","slotsFns","compoundVariantClasses","compoundSlotClasses","getVariantClassNames","variantKeys","getVariantKeys","createTV","getTailwindVariants","destructive","secondary","ghost","link","sm","lg","icon","onClose","onLessonGenerated","isGenerating","successMessage","lessonParams","isVocabularyLesson","isGrammarLesson","isMixedLesson","generateLabel","generatingLabel","closeModal","getDifficultyLevels","getVocabularyCategories","getPartsOfSpeech","getLessonTypes","DialogPrimitive_Root","$$value","Dialog","DialogContent","DialogHeader","DialogPrimitive_Title","DialogTitle","DialogPrimitive_Description","DialogDescription","text_1","label_1","textarea","$.remove_textarea_child","label_2","select","__value","node_5","option_1","getLessonTypeName","label_3","select_1","option_2","node_6","option_3","label_4","select_2","option_4","node_8","option_5","label_5","select_3","option_6","node_9","option_7","$.bind_select_value","label_6","input_1","$.bind_value","node_10","label_7","select_4","option_8","option_9","option_10","option_11","option_12","label_8","input_2","label_9","input_3","text_30","$.bind_checked","label_10","input_4","text_31","DialogFooter","Button","node_14","text_32","async","isLoading","selectedDifficulty","selectedType","showLessonGenerationModal","showGeneratedLesson","typeLabels","de","bg","categoryLabels","partOfSpeechLabels","ui","subtitle","createDynamicLesson","createLesson","createFirstLesson","loading","retry","emptyTitle","emptyDescription","difficultyLabel","typeLabel","allLevels","allTypes","backToLessons","showingLessons","shown","total","resetFilters","mixedEveryday","basicVocabulary","categoryPrefix","grammarPrefix","filteredLessons","typeMatch","loadLessons","generatedLessons","vocabularyStats","getVocabularyStatsByDifficulty","difficulties","lessonCount","floor","getVocabularyByCategory","getVocabularyByPartOfSpeech","getVocabularyCount","warn","fallbackLessons","byDifficulty","items","generateFallbackLessons","generateComprehensiveLessons","closeGeneratedLesson","types","header","p_2","p_3","text_6","fragment_2","GeneratedLesson","LessonCard","p_4","fragment_4","alternate_3","LessonGenerator"],"mappings":"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","x_google_ignoreList":[0,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,68,73,74,75]}