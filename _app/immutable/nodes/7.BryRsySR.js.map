{"version":3,"mappings":"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","names":["exercise","$.prop","$$props","dispatch","createEventDispatcher","userOrder","$.state","$.proxy","availableWords","showFeedback","isCorrect","attempts","currentQuestion","questions","currentQuestionIndex","checkAnswer","$.get","length","question","$.set","JSON","stringify","correctOrder","feedback","push","questionId","id","userAnswer","join","correctAnswer","timestamp","Date","exerciseId","resetExercise","words","sort","Math","random","getFeedbackMessage","feedbackMessages","correct","incorrect","$.user_effect","div","root","div_1","h3","div_2","root_1","$.template_effect","$.set_text","text_1","grammarHint","$$render","consequent","div_3","div_4","root_2","$.index","$$anchor","word","i","button","$.first_child","fragment","text_2","$.child","$.reset","node_2","$.sibling","span","root_4","consequent_1","index","removed","splice","removeWord","div_5","root_5","consequent_2","alternate","div_6","button_1","root_6","text_3","disabled","filter","w","handleWordClick","$.append","div_7","div_8","fragment_1","div_9","button_2","button_3","root_8","consequent_3","classes","$.set_class","$.event","button_4","root_10","consequent_5","consequent_4","alternate_1","div_10","root_11","consequent_6","text","prompt","lesson","currentExerciseIndex","loading","error","lessonId","params","onMount","async","lessonModule","default","Error","err","console","appState","languageMode","currentExercise","exercises","nextExercise","prevExercise","progress","$.derived","current","total","percentage","round","handleExerciseComplete","event","log","detail","p","root_3","h2","p_1","a","$.set_attribute","base","header","fragment_2","h1","p_2","main","SentenceBuilder","FillInTheBlank","TypingExercise","MatchingExercise","OrderingExercise","type","alternate_2","alternate_3","consequent_7","nav","text_7","node_9","root_16","text_8","a_1","root_17","text_9","consequent_8","alternate_4","span_1","select","$.each","option","root_18","value","__value","title","getExerciseTitle","$.init_select","text_4","text_5","description","text_10","$.select_option","target","parseInt","consequent_9","alternate_5","alternate_6"],"ignoreList":[],"sources":["../../../../../../src/lib/components/exercises/SentenceBuilder.svelte","../../../../../../src/routes/learn/lesson/[lessonId]/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { createEventDispatcher } from 'svelte';\n  import type { SentenceBuilderExercise } from '$lib/schemas/exercises';\n\n  let { exercise = $bindable() }: { exercise: SentenceBuilderExercise } = $props();\n  const dispatch = createEventDispatcher();\n\n  // State management\n  let userOrder: string[] = $state([]);\n  let availableWords: string[] = $state([]);\n  let showFeedback = $state(false);\n  let isCorrect = $state(false);\n  let attempts = $state(0);\n\n  const currentQuestion = $derived<SentenceBuilderExercise['questions'][number] | undefined>(\n    exercise.questions[exercise.currentQuestionIndex]\n  );\n\n  // Reset whenever the active question changes\n  $effect(() => {\n    if (!currentQuestion) return;\n    availableWords = [...currentQuestion.words].sort(() => Math.random() - 0.5);\n    userOrder = [];\n    showFeedback = false;\n    isCorrect = false;\n    attempts = 0;\n  });\n\n  function handleWordClick(word: string) {\n    if (showFeedback || !currentQuestion) return;\n    \n    userOrder = [...userOrder, word];\n    availableWords = availableWords.filter(w => w !== word);\n  }\n\n  function removeWord(index: number) {\n    if (showFeedback) return;\n    \n    const [removed] = userOrder.splice(index, 1);\n    if (!removed) return;\n    availableWords = [...availableWords, removed].sort(() => Math.random() - 0.5);\n  }\n\n  function checkAnswer() {\n    if (!userOrder.length || showFeedback || !currentQuestion) return;\n    \n    attempts++;\n    const question = currentQuestion;\n\n    // Check if order matches correct answer\n    isCorrect = JSON.stringify(userOrder) === JSON.stringify(question.correctOrder);\n    \n    showFeedback = true;\n    \n    // Store result\n    exercise.feedback.push({\n      questionId: question.id,\n      isCorrect,\n      userAnswer: userOrder.join(' '),\n      correctAnswer: question.correctOrder.join(' '),\n      attempts,\n      timestamp: new Date()\n    });\n    \n    // Dispatch event\n    dispatch('exerciseComplete', {\n      exerciseId: exercise.id,\n      isCorrect,\n      userAnswer: userOrder.join(' ')\n    });\n  }\n\n  function resetExercise() {\n    if (!currentQuestion) return;\n    const question = currentQuestion;\n    availableWords = [...question.words].sort(() => Math.random() - 0.5);\n    userOrder = [];\n    showFeedback = false;\n    isCorrect = false;\n    attempts = 0;\n  }\n\n  function getFeedbackMessage(): string {\n    if (!showFeedback || !currentQuestion) return '';\n    \n    if (isCorrect) {\n      return exercise.feedbackMessages?.correct || '‚úÖ Correct! Well done!';\n    } else {\n      const question = currentQuestion;\n      return exercise.feedbackMessages?.incorrect || `‚ùå Try again. Correct order: ${question.correctOrder.join(' ')}`;\n    }\n  }\n</script>\n\n<div class=\"sentence-builder-container\">\n  <!-- Exercise Prompt -->\n  <div class=\"prompt\">\n    <h3>{currentQuestion?.prompt}</h3>\n    {#if exercise.grammarHint}\n      <div class=\"grammar-hint\">\n        üí° {exercise.grammarHint}\n      </div>\n    {/if}\n  </div>\n\n  <!-- User's Sentence Construction -->\n  <div class=\"user-sentence\">\n    {#if userOrder.length > 0}\n      <div class=\"sentence-construction\">\n        {#each userOrder as word, i}\n          <button\n            class=\"word-bubble selected\"\n            on:click={() => removeWord(i)}\n            title=\"Click to remove\"\n          >\n            {word}\n          </button>\n          {#if i < userOrder.length - 1}<span class=\"spacer\"></span>{/if}\n        {/each}\n      </div>\n    {:else}\n      <div class=\"empty-sentence\">\n        <p>Click words below to build the sentence</p>\n      </div>\n    {/if}\n  </div>\n\n  <!-- Available Words -->\n  <div class=\"word-bank\">\n    {#each availableWords as word}\n      <button\n        class=\"word-bubble\"\n        on:click={() => handleWordClick(word)}\n        disabled={showFeedback}\n      >\n        {word}\n      </button>\n    {/each}\n  </div>\n\n  <!-- Feedback and Actions -->\n  <div class=\"feedback-section\">\n    {#if showFeedback}\n      <div class=\"feedback-message\" class:correct={isCorrect}>\n        {getFeedbackMessage()}\n      </div>\n      <div class=\"actions\">\n        <button on:click={resetExercise} class=\"reset-btn\">\n          Try Again\n        </button>\n        {#if isCorrect && exercise.currentQuestionIndex < exercise.questions.length - 1}\n          <button\n            on:click={() => {\n              exercise.currentQuestionIndex++;\n              resetExercise();\n            }}\n            class=\"next-btn\"\n          >\n            Next Question ‚Üí\n          </button>\n        {/if}\n      </div>\n    {:else if userOrder.length > 0}\n      <button on:click={checkAnswer} class=\"check-btn\">\n        Check Answer\n      </button>\n    {/if}\n  </div>\n\n  <!-- Progress -->\n  {#if exercise.questions.length > 1}\n    <div class=\"progress-indicator\">\n      Question {exercise.currentQuestionIndex + 1} of {exercise.questions.length}\n    </div>\n  {/if}\n</div>\n\n<style>\n  .sentence-builder-container {\n    display: flex;\n    flex-direction: column;\n    gap: 1.5rem;\n    padding: 1.5rem;\n    background: var(--surface);\n    border-radius: 12px;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  }\n\n  .prompt {\n    text-align: center;\n    margin-bottom: 1rem;\n  }\n\n  .prompt h3 {\n    color: var(--primary);\n    margin-bottom: 0.5rem;\n  }\n\n  .grammar-hint {\n    background: var(--primary-light);\n    padding: 0.75rem;\n    border-radius: 8px;\n    font-size: 0.9rem;\n    margin-top: 0.5rem;\n  }\n\n  .user-sentence {\n    min-height: 4rem;\n    border: 2px dashed var(--primary);\n    border-radius: 8px;\n    padding: 1rem;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    background: var(--surface-variant);\n  }\n\n  .sentence-construction {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 0.5rem;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .empty-sentence {\n    color: var(--on-surface-variant);\n    font-style: italic;\n  }\n\n  .word-bank {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 0.75rem;\n    justify-content: center;\n    padding: 1rem;\n    background: var(--background);\n    border-radius: 8px;\n  }\n\n  .word-bubble {\n    padding: 0.75rem 1.25rem;\n    background: var(--primary);\n    color: white;\n    border: none;\n    border-radius: 2rem;\n    cursor: pointer;\n    font-size: 1rem;\n    transition: all 0.2s ease;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  }\n\n  .word-bubble:hover:not(:disabled) {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n    background: var(--primary-dark);\n  }\n\n  .word-bubble:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n\n  .word-bubble.selected {\n    background: var(--secondary);\n    position: relative;\n  }\n\n  .spacer {\n    width: 0.5rem;\n  }\n\n  .feedback-section {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n    align-items: center;\n  }\n\n  .feedback-message {\n    padding: 1rem;\n    border-radius: 8px;\n    font-weight: bold;\n    font-size: 1.1rem;\n    transition: all 0.3s;\n  }\n\n  .feedback-message.correct {\n    background: var(--success-container);\n    color: var(--on-success-container);\n  }\n\n  .feedback-message:not(.correct) {\n    background: var(--error-container);\n    color: var(--on-error-container);\n  }\n\n  .actions {\n    display: flex;\n    gap: 1rem;\n  }\n\n  .check-btn, .reset-btn, .next-btn {\n    padding: 0.75rem 1.5rem;\n    border: none;\n    border-radius: 8px;\n    font-weight: bold;\n    cursor: pointer;\n    transition: all 0.2s;\n  }\n\n  .check-btn {\n    background: var(--primary);\n    color: white;\n  }\n\n  .check-btn:hover {\n    background: var(--primary-dark);\n  }\n\n  .reset-btn {\n    background: var(--secondary-container);\n    color: var(--on-secondary-container);\n  }\n\n  .reset-btn:hover {\n    background: var(--secondary);\n    color: white;\n  }\n\n  .next-btn {\n    background: var(--tertiary);\n    color: white;\n  }\n\n  .next-btn:hover {\n    background: var(--tertiary-dark);\n  }\n\n  .progress-indicator {\n    text-align: center;\n    color: var(--on-surface-variant);\n    font-size: 0.9rem;\n    margin-top: 0.5rem;\n  }\n\n  @media (max-width: 600px) {\n    .word-bubble {\n      padding: 0.5rem 1rem;\n      font-size: 0.9rem;\n    }\n\n    .check-btn, .reset-btn, .next-btn {\n      padding: 0.5rem 1rem;\n    }\n  }\n</style>","<script lang=\"ts\">\n  import { page } from '$app/stores';\n  import { appState } from '$lib/state/app-state';\n  import { base } from '$app/paths';\n  import { onMount } from 'svelte';\n  import type {\n    SentenceBuilderExercise,\n    FillInTheBlankExerciseV2,\n    TypingExercise as TypingExerciseType,\n    MatchingExercise as MatchingExerciseType,\n    OrderingExercise as OrderingExerciseType\n  } from '$lib/schemas/exercises';\n  \n  // Import exercise components\n  import SentenceBuilder from '$lib/components/exercises/SentenceBuilder.svelte';\n  import FillInTheBlank from '$lib/components/exercises/FillInTheBlankExercise.svelte';\n  import TypingExercise from '$lib/components/exercises/TypingExercise.svelte';\n  import MatchingExercise from '$lib/components/exercises/MatchingExercise.svelte';\n  import OrderingExercise from '$lib/components/exercises/OrderingExercise.svelte';\n\n  // Type for lesson data\n  interface Lesson {\n    id: string;\n    title: string;\n    description: string;\n    level: string;\n    grammarPoints: string[];\n    vocabularyIds: string[];\n    exercises: Array<\n      | SentenceBuilderExercise\n      | FillInTheBlankExerciseV2\n      | TypingExerciseType\n      | MatchingExerciseType\n      | OrderingExerciseType\n    >;\n    prerequisites: string[];\n    unlocks: string[];\n    estimatedTime: number;\n  }\n\n  // Load lesson data\n  let lesson = $state<Lesson | null>(null);\n  let currentExerciseIndex = $state(0);\n  let loading = $state(true);\n  let error = $state<string | null>(null);\n\n  // Get lesson ID from URL\n  const lessonId = $page.params['lessonId'];\n\n  // Load lesson on mount\n  onMount(async () => {\n    try {\n      loading = true;\n      error = null;\n      \n      // Import lesson data dynamically\n      const lessonModule = await import(`../../../../data/lessons/lesson-${lessonId}.json`);\n      lesson = lessonModule.default as Lesson;\n      \n      if (!lesson) {\n        throw new Error('Lesson not found');\n      }\n    } catch (err) {\n      console.error('Error loading lesson:', err);\n      error = appState.languageMode === 'DE_BG' \n        ? 'Lektion nicht gefunden' \n        : '–£—Ä–æ–∫—ä—Ç –Ω–µ –µ –Ω–∞–º–µ—Ä–µ–Ω';\n    } finally {\n      loading = false;\n    }\n  });\n\n  // Get current exercise\n  const currentExercise = $derived<Lesson['exercises'][number] | undefined>(\n    lesson ? lesson.exercises?.[currentExerciseIndex] : undefined\n  );\n\n  // Navigation handlers\n  function nextExercise() {\n    if (lesson && currentExerciseIndex < lesson.exercises.length - 1) {\n      currentExerciseIndex++;\n    }\n  }\n\n  function prevExercise() {\n    if (lesson && currentExerciseIndex > 0) {\n      currentExerciseIndex--;\n    }\n  }\n\n  function goToExercise(index: number) {\n    if (lesson) {\n      currentExerciseIndex = index;\n    }\n  }\n\n  // Calculate progress\n  const progress = $derived(\n    lesson\n      ? {\n          current: currentExerciseIndex + 1,\n          total: lesson.exercises.length,\n          percentage: Math.round(((currentExerciseIndex + 1) / lesson.exercises.length) * 100)\n        }\n      : { current: 0, total: 0, percentage: 0 }\n  );\n\n  function getExerciseTitle(exercise: Lesson['exercises'][number], index: number): string {\n    if ('title' in exercise && exercise.title) {\n      return `${index + 1}. ${exercise.title}`;\n    }\n    return `${index + 1}. ${exercise.type}`;\n  }\n\n  // Exercise completion handler\n  function handleExerciseComplete(event: CustomEvent<{ isCorrect: boolean }>) {\n    // Could add celebration or tracking here\n    console.log('Exercise completed:', event.detail.isCorrect);\n  }\n</script>\n\n<div class=\"lesson-container\" role=\"main\" aria-labelledby=\"lesson-title\">\n  <!-- Loading state -->\n  {#if loading}\n    <div class=\"loading-state\">\n      <div class=\"spinner\"></div>\n      <p>{appState.languageMode === 'DE_BG' ? 'Lade Lektion...' : '–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —É—Ä–æ–∫–∞...'}</p>\n    </div>\n  \n  <!-- Error state -->\n  {:else if error}\n    <div class=\"error-state\" role=\"alert\">\n      <h2>{appState.languageMode === 'DE_BG' ? 'Fehler' : '–ì—Ä–µ—à–∫–∞'}</h2>\n      <p>{error}</p>\n      <a href=\"{base}/learn\" class=\"button\">\n        {appState.languageMode === 'DE_BG' ? 'Zur√ºck zu Lektionen' : '–ù–∞–∑–∞–¥ –∫—ä–º —É—Ä–æ—Ü–∏—Ç–µ'}\n      </a>\n    </div>\n  \n  <!-- Lesson loaded -->\n  {:else if lesson}\n    <!-- Lesson header -->\n    <header class=\"lesson-header\">\n      <h1 id=\"lesson-title\" class=\"lesson-title\">\n        {lesson.title}\n      </h1>\n      <p class=\"lesson-description\">{lesson.description}</p>\n      \n      <!-- Progress bar -->\n      <div class=\"progress-container\">\n        <div class=\"progress-bar\">\n          <div\n            class=\"progress-fill\"\n            style=\"width: {progress.percentage}%\"\n          ></div>\n        </div>\n        <span class=\"progress-text\">\n          {appState.languageMode === 'DE_BG' \n            ? `${progress.current} von ${progress.total} √úbungen`\n            : `${progress.current} –æ—Ç ${progress.total} —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è`}\n        </span>\n      </div>\n    </header>\n\n    <!-- Exercise content -->\n    <main class=\"lesson-content\">\n      {#if currentExercise}\n        <!-- Sentence Builder -->\n        {#if currentExercise.type === 'sentence-builder'}\n          <SentenceBuilder\n            exercise={currentExercise}\n            on:exerciseComplete={handleExerciseComplete}\n          />\n        \n        <!-- Fill in the Blank -->\n        {:else if currentExercise.type === 'fill-in-blank'}\n          <FillInTheBlank\n            exercise={currentExercise}\n            on:exerciseComplete={handleExerciseComplete}\n          />\n        \n        <!-- Typing -->\n        {:else if currentExercise.type === 'typing'}\n          <TypingExercise\n            exercise={currentExercise}\n            on:exerciseComplete={handleExerciseComplete}\n          />\n        \n        <!-- Matching -->\n        {:else if currentExercise.type === 'matching'}\n          <MatchingExercise\n            exercise={currentExercise}\n            on:exerciseComplete={handleExerciseComplete}\n          />\n        \n        <!-- Ordering -->\n        {:else if currentExercise.type === 'ordering'}\n          <OrderingExercise\n            exercise={currentExercise}\n            on:exerciseComplete={handleExerciseComplete}\n          />\n        {/if}\n      {/if}\n    </main>\n\n    <!-- Navigation -->\n    <nav class=\"lesson-navigation\">\n      <div class=\"nav-buttons\">\n        <button\n          on:click={prevExercise}\n          disabled={currentExerciseIndex === 0}\n          class=\"button button--secondary\"\n        >\n          {appState.languageMode === 'DE_BG' ? 'Zur√ºck' : '–ù–∞–∑–∞–¥'}\n        </button>\n        \n        {#if currentExerciseIndex < lesson.exercises.length - 1}\n          <button\n            on:click={nextExercise}\n            class=\"button button--primary\"\n          >\n            {appState.languageMode === 'DE_BG' ? 'Weiter' : '–ù–∞–ø—Ä–µ–¥'}\n          </button>\n        {:else}\n          <a href=\"{base}/learn\" class=\"button button--primary\">\n            {appState.languageMode === 'DE_BG' ? 'Alle Lektionen' : '–í—Å–∏—á–∫–∏ —É—Ä–æ—Ü–∏'}\n          </a>\n        {/if}\n      </div>\n      \n      <!-- Exercise selector -->\n      <div class=\"exercise-selector\">\n        <span>{appState.languageMode === 'DE_BG' ? '√úbung:' : '–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ:'}</span>\n        <select\n          on:change={(event) => {\n            const target = event.target as HTMLSelectElement | null;\n            if (target) {\n              goToExercise(parseInt(target.value, 10));\n            }\n          }}\n          value={currentExerciseIndex}\n          class=\"select-exercise\"\n        >\n          {#each lesson.exercises as exercise, i}\n            <option value={i}>\n              {getExerciseTitle(exercise, i)}\n            </option>\n          {/each}\n        </select>\n      </div>\n    </nav>\n  {/if}\n</div>\n\n<style>\n  .lesson-container {\n    max-width: var(--container-max-width);\n    margin: 0 auto;\n    padding: var(--space-6) var(--space-4);\n    color: var(--color-neutral-dark);\n  }\n\n  /* Loading state */\n  .loading-state {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    height: 60vh;\n    gap: var(--space-4);\n  }\n\n  .spinner {\n    width: 50px;\n    height: 50px;\n    border: 4px solid var(--color-neutral-border);\n    border-top-color: var(--color-primary);\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n  }\n\n  @keyframes spin {\n    to { transform: rotate(360deg); }\n  }\n\n  /* Error state */\n  .error-state {\n    text-align: center;\n    padding: var(--space-8);\n    color: var(--color-error);\n  }\n\n  .error-state h2 {\n    font-size: var(--text-2xl);\n    margin-bottom: var(--space-3);\n  }\n\n  /* Lesson header */\n  .lesson-header {\n    margin-bottom: var(--space-6);\n    text-align: center;\n  }\n\n  .lesson-title {\n    font-size: var(--text-3xl);\n    font-weight: var(--font-extrabold);\n    color: var(--color-primary-darker);\n    margin-bottom: var(--space-2);\n  }\n\n  .lesson-description {\n    font-size: var(--text-lg);\n    color: var(--color-neutral-text);\n    margin-bottom: var(--space-4);\n  }\n\n  /* Progress bar */\n  .progress-container {\n    margin-bottom: var(--space-5);\n  }\n\n  .progress-bar {\n    height: 8px;\n    background: var(--color-neutral-border);\n    border-radius: 4px;\n    overflow: hidden;\n    margin-bottom: var(--space-2);\n  }\n\n  .progress-fill {\n    height: 100%;\n    background: var(--color-primary);\n    transition: width 0.3s ease;\n  }\n\n  .progress-text {\n    font-size: var(--text-sm);\n    color: var(--color-neutral-text);\n  }\n\n  /* Lesson content */\n  .lesson-content {\n    margin-bottom: var(--space-6);\n    display: flex;\n    flex-direction: column;\n    gap: var(--space-5);\n  }\n\n  /* Navigation */\n  .lesson-navigation {\n    display: flex;\n    flex-direction: column;\n    gap: var(--space-4);\n    margin-top: var(--space-5);\n  }\n\n  .nav-buttons {\n    display: flex;\n    justify-content: space-between;\n    gap: var(--space-3);\n  }\n\n  .button {\n    padding: var(--space-3) var(--space-4);\n    border-radius: var(--border-radius-lg);\n    font-weight: var(--font-semibold);\n    transition: all 0.2s;\n    cursor: pointer;\n    border: none;\n  }\n\n  .button--primary {\n    background: var(--color-primary);\n    color: white;\n  }\n\n  .button--secondary {\n    background: var(--color-secondary-light);\n    color: var(--color-neutral-dark);\n    border: 1px solid var(--color-neutral-border);\n  }\n\n  .button:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  /* Exercise selector */\n  .exercise-selector {\n    display: flex;\n    align-items: center;\n    gap: var(--space-2);\n    justify-content: center;\n  }\n\n  .select-exercise {\n    padding: var(--space-2) var(--space-3);\n    border-radius: var(--border-radius-md);\n    border: 1px solid var(--color-neutral-border);\n    background: white;\n    font-size: var(--text-sm);\n    cursor: pointer;\n  }\n\n  /* Responsive */\n  @media (max-width: var(--breakpoint-md)) {\n    .nav-buttons {\n      flex-direction: column;\n    }\n    \n    .button {\n      width: 100%;\n    }\n  }\n</style>"],"file":"7.BryRsySR.js"}