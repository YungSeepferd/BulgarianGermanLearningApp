import{d as e,f as a,s,a as t,c as n}from"../chunks/tjefRP-N.js";import{o as l}from"../chunks/DcRU3iqx.js";import{y as r,A as o,K as i,I as c,C as v,J as p,B as d,D as u,F as m,G as f,L as g,ac as b,z as h,M as k}from"../chunks/B2QX4td6.js";import{i as y}from"../chunks/DfXV91Ev.js";import{c as w,s as I,e as x,i as _,d as j}from"../chunks/kBtd9jUs.js";import{a as B,D as L,v as D}from"../chunks/BS6BhnUv.js";import{f as N}from"../chunks/V6he97Xf.js";var P=a('<p class="pronunciation svelte-1pp4fs8"> </p>'),M=a('<p class="pronunciation svelte-1pp4fs8"> </p>'),S=a('<div class="nuance-box svelte-1pp4fs8"><span class="icon svelte-1pp4fs8">üí°</span> <div><p class="section-title svelte-1pp4fs8"> </p> <p class="section-body svelte-1pp4fs8"> </p></div></div>'),z=a('<span class="connector svelte-1pp4fs8">+</span>'),E=a('<div class="breakdown-note svelte-1pp4fs8"> </div>'),$=a('<div class="breakdown-item svelte-1pp4fs8"><div class="breakdown-part svelte-1pp4fs8"><span> </span> <!></div> <div class="breakdown-meaning svelte-1pp4fs8"> </div> <!></div>'),G=a('<div class="phrase-breakdown svelte-1pp4fs8"><h3 class="breakdown-title svelte-1pp4fs8"> </h3> <div class="breakdown-container svelte-1pp4fs8"></div></div>'),T=a('<div class="composition-summary svelte-1pp4fs8"><p class="section-title svelte-1pp4fs8"> </p> <p class="section-body svelte-1pp4fs8"> </p></div>'),F=a('<div class="example-context svelte-1pp4fs8"> </div>'),W=a('<li class="svelte-1pp4fs8"><div class="example-line svelte-1pp4fs8"> </div> <div class="example-translation svelte-1pp4fs8"> </div> <!></li>'),A=a('<div class="examples svelte-1pp4fs8"><p class="section-title svelte-1pp4fs8"> </p> <ul class="svelte-1pp4fs8"></ul></div>'),C=a('<div class="note-block svelte-1pp4fs8"><p class="section-title svelte-1pp4fs8"> </p> <p class="section-body svelte-1pp4fs8"> </p></div>'),O=a('<div class="note-block svelte-1pp4fs8"><p class="section-title svelte-1pp4fs8"> </p> <p class="section-body svelte-1pp4fs8"> </p></div>'),V=a('<tr><th class="declension-case svelte-1pp4fs8"> </th><td class="declension-form svelte-1pp4fs8"> </td><td class="declension-form svelte-1pp4fs8"> </td></tr>'),K=a('<div class="declension-block svelte-1pp4fs8"><p class="section-title svelte-1pp4fs8"> </p> <table class="declension-table svelte-1pp4fs8"><tbody></tbody></table></div>'),H=a('<a target="_blank" rel="noopener noreferrer" class="ext-link svelte-1pp4fs8"> </a>'),U=a('<div class="external-links svelte-1pp4fs8"><p class="section-title svelte-1pp4fs8"> </p> <div class="links-list svelte-1pp4fs8"></div></div>'),Z=a('<div class="flashcard-container svelte-1pp4fs8"><button><div class="flashcard-front svelte-1pp4fs8"><div class="front-content svelte-1pp4fs8"><div class="emoji-container svelte-1pp4fs8"><span class="emoji"> </span></div> <p class="part-of-speech svelte-1pp4fs8"> </p> <h2 class="front-term svelte-1pp4fs8"> </h2> <!> <div class="flip-hint svelte-1pp4fs8"> </div></div></div> <div class="flashcard-back svelte-1pp4fs8"><div class="back-content svelte-1pp4fs8"><div class="translation-block svelte-1pp4fs8"><p class="translation-label svelte-1pp4fs8"> </p> <h2 class="translation-text svelte-1pp4fs8"> </h2></div> <!> <!> <!> <!> <!> <!> <!> <!></div></div></button></div>');function J(e,a){r(a,!0);let l=u(!1);const h=p(()=>"DE_BG"===B.languageMode?{flipHint:"Zum Umdrehen tippen",showFront:"Vorderseite anzeigen",showBack:"R√ºckseite anzeigen",breakdown:"Wortaufbau",composition:"Zusammensetzung",context:"Kontext",examples:"Beispiele",cultural:"Kulturelle oder sprachliche Notiz",mnemonic:"Merksatz",usage:"Nuance / Verwendung"}:{flipHint:"–ù–∞—Ç–∏—Å–Ω–∏, –∑–∞ –¥–∞ –æ–±—ä—Ä–Ω–µ—à",showFront:"–ü–æ–∫–∞–∂–∏ –ª–∏—Ü–µ—Ç–æ",showBack:"–ü–æ–∫–∞–∂–∏ –≥—ä—Ä–±–∞",breakdown:"–°—Ç—Ä–æ–µ–∂ –Ω–∞ –¥—É–º–∞—Ç–∞",composition:"–°—ä—Å—Ç–∞–≤",context:"–ö–æ–Ω—Ç–µ–∫—Å—Ç",examples:"–ü—Ä–∏–º–µ—Ä–∏",cultural:"–ö—É–ª—Ç—É—Ä–Ω–∞ –∏–ª–∏ –µ–∑–∏–∫–æ–≤–∞ –±–µ–ª–µ–∂–∫–∞",mnemonic:"–ó–∞–ø–æ–º–Ω—è—â–∞ —Ñ—Ä–∞–∑–∞",usage:"–ù—é–∞–Ω—Å / –£–ø–æ—Ç—Ä–µ–±–∞"}),k=p(()=>"DE_BG"===B.languageMode);const j=p(()=>{return e=a.vocabularyItem,N(e);var e}),L=p(()=>v(k)?a.vocabularyItem.bulgarian:v(j)),D=p(()=>v(k)?v(j):a.vocabularyItem.bulgarian);const J=p(()=>{return e=a.vocabularyItem,[...e.literalBreakdown?.map(e=>({part:e.segment,meaning:e.literal,note:e.note||e.grammarTag}))??[],...e.metadata?.components?.map(e=>({part:e.part,meaning:e.meaning,note:e.note}))??[]];var e}),R=p(()=>a.vocabularyItem.metadata?.examples??a.vocabularyItem.examples?.map(e=>({german:e.sentence||e.translation||"",bulgarian:e.translation||e.sentence||"",context:e.context}))??[]),q=p(()=>a.vocabularyItem.metadata?.culturalNote||a.vocabularyItem.metadata?.notes),Q=p(()=>a.vocabularyItem.metadata?.mnemonic||a.vocabularyItem.mnemonics),X=p(()=>a.vocabularyItem.contextualNuance||a.vocabularyItem.metadata?.notes),Y=p(()=>a.vocabularyItem.media?.emoji||a.vocabularyItem.emoji||"üìù"),ee=p(()=>v(J).length>1?`${v(J).map(e=>e.part).join(" + ")} ‚Üí ${v(L)}`:null);function ae(){f(l,!v(l))}var se=Z(),te=o(se);te.__click=ae,te.__keydown=e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),ae())};var ne=o(te),le=o(ne),re=o(le),oe=o(re),ie=o(oe,!0);i(oe),i(re);var ce=c(re,2),ve=o(ce,!0);i(ce);var pe=c(ce,2),de=o(pe,!0);i(pe);var ue=c(pe,2),me=e=>{var n=P(),l=o(n,!0);i(n),d(()=>s(l,a.vocabularyItem.pronunciation.bulgarian)),t(e,n)},fe=e=>{var l=n(),r=g(l),c=e=>{var n=M(),l=o(n,!0);i(n),d(()=>s(l,a.vocabularyItem.pronunciation.german)),t(e,n)};y(r,e=>{a.vocabularyItem.pronunciation?.german&&!v(k)&&e(c)},!0),t(e,l)};y(ue,e=>{a.vocabularyItem.pronunciation?.bulgarian&&v(k)?e(me):e(fe,!1)});var ge=c(ue,2),be=o(ge,!0);i(ge),i(le),i(ne);var he=c(ne,2),ke=o(he),ye=o(ke),we=o(ye),Ie=o(we,!0);i(we);var xe=c(we,2),_e=o(xe,!0);i(xe),i(ye);var je=c(ye,2),Be=e=>{var a=S(),n=c(o(a),2),l=o(n),r=o(l,!0);i(l);var p=c(l,2),u=o(p,!0);i(p),i(n),i(a),d(()=>{s(r,v(h).usage),s(u,v(X))}),t(e,a)};y(je,e=>{v(X)&&e(Be)});var Le=c(je,2),De=e=>{var a=G(),n=o(a),l=o(n,!0);i(n);var r=c(n,2);x(r,21,()=>v(J),_,(e,a,n)=>{var l=$(),r=o(l),p=o(r),u=o(p,!0);i(p);var m=c(p,2),f=e=>{var a=z();t(e,a)};y(m,e=>{n<v(J).length-1&&e(f)}),i(r);var g=c(r,2),b=o(g,!0);i(g);var h=c(g,2),k=e=>{var n=E(),l=o(n,!0);i(n),d(()=>s(l,v(a).note)),t(e,n)};y(h,e=>{v(a).note&&e(k)}),i(l),d(()=>{s(u,v(a).part),s(b,v(a).meaning)}),t(e,l)}),i(r),i(a),d(()=>s(l,v(h).breakdown)),t(e,a)};y(Le,e=>{v(J).length>0&&e(De)});var Ne=c(Le,2),Pe=e=>{var a=T(),n=o(a),l=o(n,!0);i(n);var r=c(n,2),p=o(r,!0);i(r),i(a),d(()=>{s(l,v(h).composition),s(p,v(ee))}),t(e,a)};y(Ne,e=>{v(ee)&&e(Pe)});var Me=c(Ne,2),Se=e=>{var a=A(),n=o(a),l=o(n,!0);i(n);var r=c(n,2);x(r,21,()=>v(R),_,(e,a)=>{var n=W(),l=o(n),r=o(l,!0);i(l);var p=c(l,2),u=o(p,!0);i(p);var m=c(p,2),f=e=>{var n=F(),l=o(n,!0);i(n),d(()=>s(l,v(a).context)),t(e,n)};y(m,e=>{v(a).context&&e(f)}),i(n),d(()=>{s(r,v(a).german),s(u,v(a).bulgarian)}),t(e,n)}),i(r),i(a),d(()=>s(l,v(h).examples)),t(e,a)};y(Me,e=>{v(R).length>0&&e(Se)});var ze=c(Me,2),Ee=e=>{var a=C(),n=o(a),l=o(n,!0);i(n);var r=c(n,2),p=o(r,!0);i(r),i(a),d(()=>{s(l,v(h).cultural),s(p,v(q))}),t(e,a)};y(ze,e=>{v(q)&&e(Ee)});var $e=c(ze,2),Ge=e=>{var a=O(),n=o(a),l=o(n,!0);i(n);var r=c(n,2),p=o(r,!0);i(r),i(a),d(()=>{s(l,v(h).mnemonic),s(p,v(Q))}),t(e,a)};y($e,e=>{v(Q)&&e(Ge)});var Te=c($e,2),Fe=e=>{var n=K(),l=o(n),r=o(l,!0);i(l);var u=c(l,2),m=o(u);x(m,21,()=>Object.entries(a.vocabularyItem.metadata.declension),_,(e,a)=>{var n=p(()=>b(v(a),2));let l=()=>v(n)[1];var r=V(),u=o(r),m=o(u,!0);i(u);var f=c(u),g=o(f,!0);i(f);var h=c(f),k=o(h,!0);i(h),i(r),d(()=>{s(m,v(n)[0]),s(g,l().singular??""),s(k,l().plural??"")}),t(e,r)}),i(m),i(u),i(n),d(()=>s(r,"DE_BG"===B.languageMode?"Deklination":"–°–∫–ª–æ–Ω–µ–Ω–∏–µ")),t(e,n)};y(Te,e=>{a.vocabularyItem.metadata?.declension&&e(Fe)});var We=c(Te,2),Ae=e=>{var n=U(),l=o(n),r=o(l,!0);i(l);var p=c(l,2);x(p,21,()=>a.vocabularyItem.metadata.links,_,(e,a)=>{var n=H(),l=o(n,!0);i(n),d(()=>{I(n,"href",v(a).url),s(l,v(a).label||"Link")}),t(e,n)}),i(p),i(n),d(()=>s(r,"DE_BG"===B.languageMode?"W√∂rterbuch":"–†–µ—á–Ω–∏—Ü–∏")),t(e,n)};y(We,e=>{a.vocabularyItem.metadata?.links&&a.vocabularyItem.metadata.links.length>0&&e(Ae)}),i(ke),i(he),i(te),i(se),d(()=>{w(te,1,"flashcard "+(v(l)?"flipped":""),"svelte-1pp4fs8"),I(te,"aria-label",v(l)?v(h).showFront:v(h).showBack),s(ie,v(Y)),s(ve,a.vocabularyItem.partOfSpeech),s(de,v(L)),s(be,v(h).flipHint),s(Ie,v(k)?"Deutsch":"–ë—ä–ª–≥–∞—Ä—Å–∫–∏"),s(_e,v(D))}),t(e,se),m()}e(["click","keydown"]);var R=a('<div><!></div> <div class="button-container svelte-8s3559"><button class="hard-button svelte-8s3559"> </button> <button class="easy-button svelte-8s3559"> </button></div>',1),q=a('<div class="completion-message svelte-8s3559"><h2 class="svelte-8s3559"> </h2> <p class="svelte-8s3559"> </p> <button class="restart-button svelte-8s3559"> </button></div>'),Q=a('<p class="svelte-8s3559"> </p> <button class="restart-button svelte-8s3559"> </button>',1),X=a('<p class="svelte-8s3559"> </p>'),Y=a('<p class="svelte-8s3559"> </p> <button class="restart-button svelte-8s3559"> </button>',1),ee=a('<div class="loading-message svelte-8s3559"><!></div>'),ae=a('<div class="learn-page svelte-8s3559"><div class="progress-container svelte-8s3559"><div class="progress-bar svelte-8s3559"></div> <div class="progress-text svelte-8s3559"> </div></div> <div class="content-container svelte-8s3559"><!></div></div>');function se(e,a){r(a,!0);let b=u(0),I=u(!1),x=u(!1),_=u(h([])),N=u(!1),P=u(null),M=u(null);function S(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function z(e){const a=(e.german||"").trim();if(!a)return a;if(/^(der|die|das|ein|eine|einen|einem|einer|eines)\s/i.test(a)){const[s,...t]=a.split(/\s+/),n=t.join(" ");return[s,"noun"===e.partOfSpeech?S(n):n].filter(Boolean).join(" ").trim()}const s="noun"===e.partOfSpeech?S(a):a,t=(n=e.metadata?.gender,l=e.metadata?.article,l||n&&{masculine:"der",feminine:"die",neuter:"das"}[n]||null||("noun"===e.partOfSpeech?"der":null));var n,l;return t?`${t} ${s}`:s}const E=p(()=>"DE_BG"===B.languageMode?{heading:"Lernkarten",hard:"üî¥ Schwer",easy:"üü¢ Leicht",completedTitle:"üéâ Gro√üartige Arbeit!",completedBody:"Du hast diese Lerneinheit beendet.",startNew:"Neue Einheit starten",loading:"Vokabular wird geladen...",retry:"Erneut versuchen",mastered:"Keine W√∂rter zu √ºben. Alles gemeistert!"}:{heading:"–ö–∞—Ä—Ç–∏ –∑–∞ —É—á–µ–Ω–µ",hard:"üî¥ –¢—Ä—É–¥–Ω–æ",easy:"üü¢ –õ–µ—Å–Ω–æ",completedTitle:"üéâ –°—Ç—Ä–∞—Ö–æ—Ç–Ω–∞ —Ä–∞–±–æ—Ç–∞!",completedBody:"–ó–∞–≤—ä—Ä—à–∏ —Ç–∞–∑–∏ —Å–µ—Å–∏—è –∑–∞ —É—á–µ–Ω–µ.",startNew:"–ó–∞–ø–æ—á–Ω–∏ –Ω–æ–≤–∞ —Å–µ—Å–∏—è",loading:"–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Ä–µ—á–Ω–∏–∫–∞...",retry:"–û–ø–∏—Ç–∞–π –æ—Ç–Ω–æ–≤–æ",mastered:"–ù—è–º–∞ –¥—É–º–∏ –∑–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ. –í—Å–∏—á–∫–æ –µ —É—Å–≤–æ–µ–Ω–æ!"});async function $(){try{f(M,null),L.log("LearnPage","Starting learning session"),await D.initialize();const e=D.getVocabulary().map(e=>({...e,german:z(e)}));if(0===e.length)return f(M,"No vocabulary loaded. Please check the data files and try again."),f(I,!1),f(x,!1),void f(_,[],!0);L.log("LearnPage","Vocabulary loaded",{totalWords:e.length}),f(_,[...e].sort(()=>.5-Math.random()),!0),L.log("LearnPage","Session cards prepared",{cardCount:v(_).length}),f(b,0),f(I,!0),f(x,!1),f(N,!1),f(P,null),L.log("LearnPage","Session started",{cardCount:v(_).length,firstCard:v(_)[0]?.id})}catch(e){L.error("LearnPage","Failed to start session",e),f(M,"Failed to start session. Please retry."),f(I,!1),f(_,[],!0)}}function G(){if(!v(I)||v(N))return;f(N,!0),f(P,"easy");const e=v(_)[v(b)];if(e){const a=e.xp_value||10;L.log("LearnPage","Word marked as easy",{wordId:e.id,xpAdded:a})}setTimeout(()=>{F(),f(N,!1),f(P,null)},600)}function T(){v(I)&&!v(N)&&(f(N,!0),f(P,"hard"),L.log("LearnPage","Word marked as hard",{wordId:v(_)[v(b)]?.id}),setTimeout(()=>{F(),f(N,!1),f(P,null)},600))}function F(){v(b)<v(_).length-1?k(b):(f(I,!1),f(x,!0),L.log("LearnPage","Session completed"))}function W(){const e=v(_)[v(b)];return e?{...e,media:e.media??{emoji:e.emoji},literalBreakdown:e.literalBreakdown??e.metadata?.components?.map(e=>({segment:e.part,literal:e.meaning,grammarTag:e.note}))??[]}:null}l(()=>{$()});var A=ae(),C=o(A),O=o(C),V=c(O,2),K=o(V,!0);i(V),i(C);var H=c(C,2),U=o(H),Z=e=>{var a=R(),n=g(a),l=o(n);{let e=p(W);J(l,{get vocabularyItem(){return v(e)}})}i(n);var r=c(n,2),u=o(r);u.__click=T;var m=o(u,!0);i(u);var f=c(u,2);f.__click=G;var b=o(f,!0);i(f),i(r),d(()=>{w(n,1,`flashcard-wrapper ${v(P)??""}`,"svelte-8s3559"),u.disabled=v(N),s(m,v(E).hard),f.disabled=v(N),s(b,v(E).easy)}),t(e,a)},se=e=>{var a=n(),l=g(a),r=e=>{var a=q(),n=o(a),l=o(n,!0);i(n);var r=c(n,2),p=o(r,!0);i(r);var u=c(r,2);u.__click=$;var m=o(u,!0);i(u),i(a),d(()=>{s(l,v(E).completedTitle),s(p,v(E).completedBody),s(m,v(E).startNew)}),t(e,a)},p=e=>{var a=ee(),l=o(a),r=e=>{var a=Q(),n=g(a),l=o(n,!0);i(n);var r=c(n,2);r.__click=$;var p=o(r,!0);i(r),d(()=>{s(l,v(M)),s(p,v(E).retry)}),t(e,a)},p=e=>{var a=n(),l=g(a),r=e=>{var a=X(),n=o(a,!0);i(a),d(()=>s(n,v(E).loading)),t(e,a)},p=e=>{var a=Y(),n=g(a),l=o(n,!0);i(n);var r=c(n,2);r.__click=$;var p=o(r,!0);i(r),d(()=>{s(l,v(E).mastered),s(p,v(E).startNew)}),t(e,a)};y(l,e=>{0===v(_).length?e(r):e(p,!1)},!0),t(e,a)};y(l,e=>{v(M)?e(r):e(p,!1)}),i(a),t(e,a)};y(l,e=>{v(x)?e(r):e(p,!1)},!0),t(e,a)};y(U,e=>{v(I)&&W()?e(Z):e(se,!1)}),i(H),i(A),d((e,a)=>{j(O,e),s(K,a)},[()=>`width: ${0===v(_).length?0:Math.round((v(b)+1)/v(_).length*100)}%`,function(){return 0===v(_).length?"0/0":`${v(b)+1}/${v(_).length}`}]),t(e,A),m()}e(["click"]);export{se as component};
//# sourceMappingURL=4.BnqJlB5A.js.map
