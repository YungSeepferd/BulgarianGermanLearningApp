{"version":3,"file":"9.BGNq8b7s.js","sources":["../../../../../../src/routes/learn/paths/[path]/+page.ts","../../../../../../src/routes/learn/paths/[path]/+page.svelte"],"sourcesContent":["export const load = async ({ params }) => ({ pathId: params.path });\n","<script lang=\"ts\">\n  import { onMount } from 'svelte';\n  import { goto } from '$app/navigation';\n  import { base } from '$app/paths';\n  import LessonList from '$lib/components/learning/LessonList.svelte';\n  import ProgressIndicator from '$lib/components/learning/ProgressIndicator.svelte';\n  import type { LearningPath, LearningPathProgress } from '$lib/types/learning-path';\n  import type { Lesson } from '$lib/types/lesson';\n  import { getLearningPaths, getLessonsForPath, getLearningPathProgress, markLessonComplete } from '$lib/services/learning-paths';\n\n  let { data } = $props<{ data: { pathId: string } }>();\n\n  let loading = $state(true);\n  let error = $state<string | null>(null);\n  let path = $state<LearningPath | null>(null);\n  let lessons = $state<Lesson[]>([]);\n  let progress = $state<LearningPathProgress | null>(null);\n\n  onMount(async () => {\n    try {\n      const allPaths = await getLearningPaths();\n      path = allPaths.find((p) => p.id === data.pathId) ?? null;\n      lessons = await getLessonsForPath(data.pathId);\n      progress = await getLearningPathProgress(data.pathId);\n    } catch (e) {\n      error = (e as Error).message ?? 'Failed to load path';\n    } finally {\n      loading = false;\n    }\n  });\n\n  const goBack = () => goto(`${base}/learn/paths`);\n\n  const openLesson = (lessonId: string) => {\n    goto(`${base}/learn/paths/${data.pathId}/${lessonId}`);\n  };\n\n  async function completeNextLesson() {\n    if (!path || lessons.length === 0) return;\n    const nextLesson = lessons.find((lesson) => !progress?.completedLessons.includes(lesson.id)) ?? lessons[lessons.length - 1];\n    if (!nextLesson) return;\n    const updated = await markLessonComplete(data.pathId, nextLesson.id);\n    progress = updated;\n  }\n</script>\n\n<div class=\"page\">\n  <div class=\"toolbar\">\n    <button class=\"link\" onclick={goBack}>← Back to all paths</button>\n  </div>\n\n  {#if loading}\n    <div class=\"state\">Loading path…</div>\n  {:else if error}\n    <div class=\"state error\">{error}</div>\n  {:else if !path}\n    <div class=\"state\">Path not found.</div>\n  {:else}\n    <div class=\"header\">\n      <div>\n        <p class=\"eyebrow\">Learning Path</p>\n        <h1>{path.title}</h1>\n        {#if path.subtitle}<p class=\"subtitle\">{path.subtitle}</p>{/if}\n        {#if path.description}<p class=\"description\">{path.description}</p>{/if}\n      </div>\n      {#if progress}\n        <div class=\"actions\">\n          <button class=\"action-btn\" onclick={completeNextLesson}>Mark next lesson complete</button>\n          <p class=\"hint\">Updates progress and persists to IndexedDB.</p>\n        </div>\n      {/if}\n    </div>\n\n    {#if progress}\n      <section class=\"panel\">\n        <ProgressIndicator\n          completed={progress.completedLessons.length}\n          total={path.lessons?.length ?? lessons.length}\n          xpEarned={(progress as any).totalXP ?? 0}\n          timeSpent={progress.timeSpent ?? (progress.completedLessons.length * (path.lessons?.[0]?.duration ?? 15))}\n        />\n      </section>\n    {/if}\n\n    <section class=\"panel\">\n      <LessonList\n        lessons={lessons}\n        currentLessonId={progress?.currentLesson}\n        onLessonSelect={openLesson}\n      />\n    </section>\n  {/if}\n</div>\n\n<style>\n  .page {\n    display: flex;\n    flex-direction: column;\n    gap: 1.5rem;\n    padding: 2rem;\n    background: var(--color-background, #f9fafb);\n    min-height: 100vh;\n  }\n\n  .toolbar {\n    display: flex;\n    justify-content: flex-start;\n  }\n\n  .link {\n    background: none;\n    border: none;\n    color: var(--color-primary, #3b82f6);\n    cursor: pointer;\n    font-weight: 600;\n  }\n\n  .header {\n    display: flex;\n    justify-content: space-between;\n    gap: 1rem;\n    align-items: flex-start;\n  }\n\n  .eyebrow {\n    margin: 0;\n    text-transform: uppercase;\n    letter-spacing: 0.08em;\n    font-weight: 700;\n    font-size: 0.75rem;\n    color: var(--color-text-secondary, #6b7280);\n  }\n\n  h1 {\n    margin: 0.25rem 0;\n    font-size: 1.75rem;\n    color: var(--color-text-primary, #111827);\n  }\n\n  .subtitle {\n    margin: 0;\n    color: var(--color-text-secondary, #6b7280);\n  }\n\n  .description {\n    margin: 0.5rem 0 0 0;\n    color: var(--color-text-secondary, #6b7280);\n    line-height: 1.5;\n  }\n\n  .panel {\n    background: var(--color-surface, #ffffff);\n    border: 1px solid var(--color-border, #e5e7eb);\n    border-radius: 0.75rem;\n    padding: 1.5rem;\n  }\n\n  .state {\n    padding: 1rem;\n    background: var(--color-surface, #ffffff);\n    border: 1px solid var(--color-border, #e5e7eb);\n    border-radius: 0.75rem;\n    color: var(--color-text-primary, #111827);\n  }\n\n  .state.error {\n    border-color: #ef4444;\n    color: #b91c1c;\n  }\n\n  .actions {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-end;\n    gap: 0.5rem;\n  }\n\n  .action-btn {\n    padding: 0.6rem 1rem;\n    border-radius: 0.5rem;\n    border: 1px solid var(--color-primary, #3b82f6);\n    background: var(--color-primary, #3b82f6);\n    color: #fff;\n    cursor: pointer;\n    font-weight: 600;\n    transition: transform 0.15s ease, box-shadow 0.15s ease;\n  }\n\n  .action-btn:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 6px 18px rgba(59, 130, 246, 0.25);\n  }\n\n  .action-btn:focus-visible {\n    outline: 3px solid rgba(59, 130, 246, 0.35);\n    outline-offset: 2px;\n  }\n\n  .hint {\n    margin: 0;\n    color: var(--color-text-secondary, #6b7280);\n    font-size: 0.875rem;\n  }\n</style>\n"],"names":["async","params","pathId","path","loading","$.state","error","lessons","$.proxy","progress","onMount","allPaths","getLearningPaths","$.set","find","p","id","$$props","data","getLessonsForPath","getLearningPathProgress","e","message","openLesson","lessonId","goto","base","completeNextLesson","$.get","length","nextLesson","lesson","completedLessons","includes","updated","markLessonComplete","div","root","div_1","__click","div_2","root_1","div_3","root_3","div_4","root_5","div_5","$.first_child","fragment_2","div_6","h1","p_1","root_7","$.template_effect","$.set_text","text_2","subtitle","consequent_3","p_2","root_8","text_3","description","consequent_4","div_7","root_9","$$render","consequent_5","section","root_10","$0","$.derived","totalXP","$2","timeSpent","duration","ProgressIndicator","node_7","consequent_6","section_1","$.sibling","node_6","currentLesson","LessonList","node_8","text_1","title","alternate","consequent_2","consequent_1","alternate_1","consequent","alternate_2"],"mappings":"6dAAO,iEAAaA,OAASC,cAAgBC,OAAQD,EAAOE,g+BCYtDC,EAAUC,GAAO,GACjBC,EAAQD,EAAsB,MAC9BF,EAAOE,EAA4B,MACnCE,EAAUF,EAAMG,EAAA,KAChBC,EAAWJ,EAAoC,MAEnDK,EAAOV,UACD,IACI,MAAAW,QAAiBC,IACvBC,EAAAV,EAAOQ,EAASG,KAAMC,GAAMA,EAAEC,KAAEC,EAAAC,KAAUhB,SAAW,MAAI,KACzDK,QAAgBY,EAAiBF,EAAAC,KAAMhB,SAAM,KAC7CO,QAAiBW,EAAuBH,EAAAC,KAAMhB,SAAM,EACtD,OAASmB,GACPR,EAAAP,EAASe,EAAYC,SAAW,uBAAqB,EACvD,CAAA,QACET,EAAAT,GAAU,EACZ,UAKImB,EAAcC,IAClBC,EAAI,GAAIC,iBAAIT,EAAAC,KAAqBhB,UAAUsB,MAG9BxB,eAAA2B,IACR,IAAAC,EAAAzB,IAA2B,IAAvByB,EAAIrB,GAAQsB,OAAY,aAC3BC,EAAUF,EAAGrB,GAAQO,KAAMiB,IAAMH,EAAMnB,IAAUuB,iBAAiBC,SAASF,EAAOf,MAAEY,EAAMrB,KAAQA,GAAQsB,OAAS,OACpHC,EAAU,OACT,MAAAI,QAAgBC,EAAkBlB,EAAAC,KAAMhB,OAAQ4B,EAAWd,IACjEH,EAAAJ,EAAWyB,GAAO,EACpB,KAGDE,EAAGC,IACDC,IADFF,KACEE,GACsBC,QAjBX,IAASd,EAAI,GAAIC,mBAgB5BY,WAAAA,EAAG,aAKDE,EAAGC,QAAHD,qCAEAE,EAAGC,QAAHD,GAAG,KAAHA,eAAyBpC,SAAzBoC,qCAEAE,EAAGC,QAAHD,oBAEAE,EAAGC,EAAAC,GACDC,IADFH,GAGII,MAFFD,GAAG,OAEDC,GAAE,KAAFA,WAAAA,EAAE,aACiBC,EAACC,QAADD,GAAC,KAADA,GAAoBE,EAAA,IAAAC,EAAAC,EAAA3B,EAAAzB,GAAKqD,eAAzBL,YAAfvB,EAAAzB,GAAKqD,YAAQC,4BACKC,EAACC,QAADD,GAAC,KAADA,GAAuBL,EAAA,IAAAC,EAAAM,EAAAhC,EAAAzB,GAAK0D,kBAA5BH,YAAlB9B,EAAAzB,GAAK0D,eAAWC,OAJtBb,WAAAA,EAAG,aAODc,EAAGC,MAAHD,GAC4BxB,QAASZ,SADrCoC,OAAAA,cADEtD,IAAQwD,EAAAC,OAPdpB,WAAAA,EAAG,aAgBDqB,EAAOC,QAAPD,IAGU,IAAAE,EAAAC,EAAA,IAAA1C,EAAAzB,GAAKI,SAASsB,QAAMD,EAAIrB,GAAQsB,kBAC5BpB,GAAiB8D,SAAW,GAC5BC,EAAAF,EAAA,IAAA1C,EAAAnB,GAASgE,WAAS7C,EAAKnB,GAASuB,iBAAiBH,QAAMD,EAAIzB,GAAKI,UAAU,IAAImE,UAAY,KAJtGC,EAAAC,EAAA,0BACYnE,GAASuB,iBAAiBH,8FAFxCsC,OAAAA,cADE1D,IAAQwD,EAAAY,SAWZC,EAAOC,EAAAC,EAAA,OAAPF,IAGoB,IAAAT,EAAAC,EAAA,IAAA1C,EAAAnB,IAAUwE,eAF5BC,EAAAC,EAAA,wBACU5E,sDAEOgB,MAJnBuD,GAvBQzB,EAAA,IAAAC,EAAA8B,EAAAxD,EAAAzB,GAAKkF,0BANLlF,GAAI8D,EAAAqB,GAAA,KAAAC,0BAFLjF,GAAK2D,EAAAuB,GAAAvB,EAAAwB,GAAA,0BAFVrF,GAAO6D,EAAAyB,GAAAzB,EAAA0B,GAAA,OALbvD,OAAAA,MAFD"}