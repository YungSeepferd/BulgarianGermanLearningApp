import{f as e,a,s as t,t as r,c as n}from"../chunks/oPX1csav.js";import{o as s}from"../chunks/1SgDh2mk.js";import{y as l,D as i,z as o,B as d,F as c,C as v,A as g,I as u,K as p,G as m,L as h,J as f,M as y,N as k}from"../chunks/C9M7xJe7.js";import{i as b}from"../chunks/DdzQh8gY.js";import{b as w,c as $}from"../chunks/1L0bn45u.js";import{D as L,v as B,a as P}from"../chunks/a7ZClh_C.js";import{V as j,A as z}from"../chunks/DHP32FAW.js";var N=e('<div><!></div> <div class="button-container svelte-1ntlv2v"><!> <!></div>',1),S=e('<div class="completion-message svelte-1ntlv2v"><h2 class="svelte-1ntlv2v"> </h2> <p class="svelte-1ntlv2v"> </p> <!></div>'),A=e('<p class="svelte-1ntlv2v"> </p> <!>',1),D=e('<p class="svelte-1ntlv2v"> </p>'),F=e('<p class="svelte-1ntlv2v"> </p> <!>',1),T=e('<div class="loading-message svelte-1ntlv2v"><!></div>'),E=e('<div class="learn-page svelte-1ntlv2v"><div class="progress-container svelte-1ntlv2v"><div class="progress-bar svelte-1ntlv2v"></div> <div class="progress-text svelte-1ntlv2v"> </div></div> <div class="content-container svelte-1ntlv2v"><!></div></div>');function G(e,G){l(G,!0);let M=i(0),C=i(!1),x=i(!1),I=i(o([])),V=i(!1),W=i(null),O=i(null),_=i(!1);function K(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function J(e){const a=(e.german||"").trim();if(!a)return a;if(/^(der|die|das|ein|eine|einen|einem|einer|eines)\s/i.test(a)){const[t,...r]=a.split(/\s+/),n=r.join(" ");return[t,"noun"===e.partOfSpeech?K(n):n].filter(Boolean).join(" ").trim()}const t="noun"===e.partOfSpeech?K(a):a,r=(n=e.grammar?.gender,s=e.grammar?.verbPartnerId,s||n&&{masculine:"der",feminine:"die",neuter:"das"}[n]||null||("noun"===e.partOfSpeech?"der":null));var n,s;return r?`${r} ${t}`:t}const U=f(()=>"DE_BG"===P.languageMode?{heading:"Lernkarten",hard:"ðŸ”´ Schwer",easy:"ðŸŸ¢ Leicht",completedTitle:"ðŸŽ‰ GroÃŸartige Arbeit!",completedBody:"Du hast diese Lerneinheit beendet.",startNew:"Neue Einheit starten",loading:"Vokabular wird geladen...",retry:"Erneut versuchen",mastered:"Keine WÃ¶rter zu Ã¼ben. Alles gemeistert!"}:{heading:"ÐšÐ°Ñ€Ñ‚Ð¸ Ð·Ð° ÑƒÑ‡ÐµÐ½Ðµ",hard:"ðŸ”´ Ð¢Ñ€ÑƒÐ´Ð½Ð¾",easy:"ðŸŸ¢ Ð›ÐµÑÐ½Ð¾",completedTitle:"ðŸŽ‰ Ð¡Ñ‚Ñ€Ð°Ñ…Ð¾Ñ‚Ð½Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ð°!",completedBody:"Ð—Ð°Ð²ÑŠÑ€ÑˆÐ¸ Ñ‚Ð°Ð·Ð¸ ÑÐµÑÐ¸Ñ Ð·Ð° ÑƒÑ‡ÐµÐ½Ðµ.",startNew:"Ð—Ð°Ð¿Ð¾Ñ‡Ð½Ð¸ Ð½Ð¾Ð²Ð° ÑÐµÑÐ¸Ñ",loading:"Ð—Ð°Ñ€ÐµÐ¶Ð´Ð°Ð½Ðµ Ð½Ð° Ñ€ÐµÑ‡Ð½Ð¸ÐºÐ°...",retry:"ÐžÐ¿Ð¸Ñ‚Ð°Ð¹ Ð¾Ñ‚Ð½Ð¾Ð²Ð¾",mastered:"ÐÑÐ¼Ð° Ð´ÑƒÐ¼Ð¸ Ð·Ð° ÑƒÐ¿Ñ€Ð°Ð¶Ð½ÐµÐ½Ð¸Ðµ. Ð’ÑÐ¸Ñ‡ÐºÐ¾ Ðµ ÑƒÑÐ²Ð¾ÐµÐ½Ð¾!"});async function q(){try{m(O,null),L.log("LearnPage","Starting learning session"),await B.initialize();const e=B.getVocabulary().map(e=>({...e,german:J(e)}));if(0===e.length)return m(O,"No vocabulary loaded. Please check the data files and try again."),m(C,!1),m(x,!1),void m(I,[],!0);L.log("LearnPage","Vocabulary loaded",{totalWords:e.length}),m(I,[...e].sort(()=>.5-Math.random()),!0),L.log("LearnPage","Session cards prepared",{cardCount:v(I).length}),m(M,0),m(C,!0),m(x,!1),m(V,!1),m(W,null),L.log("LearnPage","Session started",{cardCount:v(I).length,firstCard:v(I)[0]?.id})}catch(e){L.error("LearnPage","Failed to start session",e),m(O,"Failed to start session. Please retry."),m(C,!1),m(I,[],!0)}}function H(){if(!v(C)||v(V))return;m(V,!0),m(W,"easy");const e=v(I)[v(M)];if(e){const a=e.xp_value||10;L.log("LearnPage","Word marked as easy",{wordId:e.id,xpAdded:a})}setTimeout(()=>{R(),m(V,!1),m(W,null)},600)}function Q(){v(C)&&!v(V)&&(m(V,!0),m(W,"hard"),L.log("LearnPage","Word marked as hard",{wordId:v(I)[v(M)]?.id}),setTimeout(()=>{R(),m(V,!1),m(W,null)},600))}function R(){v(M)<v(I).length-1?(k(M),m(_,!1)):(m(C,!1),m(x,!0),L.log("LearnPage","Session completed"))}function X(){m(_,!v(_)),L.log("LearnPage","Flashcard flipped",{isFlipped:v(_)})}function Y(){const e=v(I)[v(M)];return e?{...e,literalBreakdown:e.literalBreakdown??e.metadata?.components?.map(e=>({segment:e.part,literal:e.meaning,grammarTag:""}))??[]}:null}s(()=>{q()});var Z=E(),ee=g(Z),ae=g(ee),te=u(ae,2),re=g(te,!0);p(te),p(ee);var ne=u(ee,2),se=g(ne),le=e=>{var n=N(),s=h(n),l=g(s);{let e=f(Y),a=f(()=>"DE_BG"===P.languageMode?"DE->BG":"BG->DE");j(l,{get item(){return v(e)},variant:"flashcard",get direction(){return v(a)},get isFlipped(){return v(_)},showMetadata:!0,showActions:!1,showTags:!1,onFlip:X})}p(s);var i=u(s,2),o=g(i);z(o,{variant:"secondary",size:"lg",get disabled(){return v(V)},onclick:Q,get label(){return v(U).hard},children:(e,n)=>{y();var s=r();d(()=>t(s,v(U).hard)),a(e,s)},$$slots:{default:!0}});var c=u(o,2);z(c,{variant:"primary",size:"lg",get disabled(){return v(V)},onclick:H,get label(){return v(U).easy},children:(e,n)=>{y();var s=r();d(()=>t(s,v(U).easy)),a(e,s)},$$slots:{default:!0}}),p(i),d(()=>$(s,1,`flashcard-wrapper ${v(W)??""}`,"svelte-1ntlv2v")),a(e,n)},ie=e=>{var s=n(),l=h(s),i=e=>{var n=S(),s=g(n),l=g(s,!0);p(s);var i=u(s,2),o=g(i,!0);p(i);var c=u(i,2);z(c,{variant:"primary",size:"lg",onclick:q,get label(){return v(U).startNew},children:(e,n)=>{y();var s=r();d(()=>t(s,v(U).startNew)),a(e,s)},$$slots:{default:!0}}),p(n),d(()=>{t(l,v(U).completedTitle),t(o,v(U).completedBody)}),a(e,n)},o=e=>{var s=T(),l=g(s),i=e=>{var n=A(),s=h(n),l=g(s,!0);p(s);var i=u(s,2);z(i,{variant:"secondary",size:"lg",onclick:q,get label(){return v(U).retry},children:(e,n)=>{y();var s=r();d(()=>t(s,v(U).retry)),a(e,s)},$$slots:{default:!0}}),d(()=>t(l,v(O))),a(e,n)},o=e=>{var s=n(),l=h(s),i=e=>{var r=D(),n=g(r,!0);p(r),d(()=>t(n,v(U).loading)),a(e,r)},o=e=>{var n=F(),s=h(n),l=g(s,!0);p(s);var i=u(s,2);z(i,{variant:"primary",size:"lg",onclick:q,get label(){return v(U).startNew},children:(e,n)=>{y();var s=r();d(()=>t(s,v(U).startNew)),a(e,s)},$$slots:{default:!0}}),d(()=>t(l,v(U).mastered)),a(e,n)};b(l,e=>{0===v(I).length?e(i):e(o,!1)},!0),a(e,s)};b(l,e=>{v(O)?e(i):e(o,!1)}),p(s),a(e,s)};b(l,e=>{v(x)?e(i):e(o,!1)},!0),a(e,s)};b(se,e=>{v(C)&&Y()?e(le):e(ie,!1)}),p(ne),p(Z),d((e,a)=>{w(ae,e),t(re,a)},[()=>`width: ${0===v(I).length?0:Math.round((v(M)+1)/v(I).length*100)}%`,function(){return 0===v(I).length?"0/0":`${v(M)+1}/${v(I).length}`}]),a(e,Z),c()}export{G as component};
//# sourceMappingURL=6.DWf8f8GS.js.map
