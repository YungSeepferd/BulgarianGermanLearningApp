import{_ as e}from"../chunks/CgvsJPj0.js";import{f as s,s as t,e as r,a as n,c as a}from"../chunks/Df5ltUoG.js";import{c as o,o as i}from"../chunks/BVLhrf_7.js";import{W as l,_ as c,X as v,k as u,v as d,a3 as p,a0 as m,Y as g,a5 as k,a2 as b,Z as h,$ as f,a6 as y,ae as w}from"../chunks/BkkwGZv8.js";import{i as x}from"../chunks/BCvKA9Gv.js";import{e as $,i as _}from"../chunks/CAxr9ube.js";import{b as j,s as M,i as E,e as C}from"../chunks/DWVEL8cS.js";import{s as D}from"../chunks/C2lh0-di.js";import{p as I,s as O,a as A}from"../chunks/Da3KCse6.js";import{p as B}from"../chunks/uid1vpmY.js";import{a as G}from"../chunks/ClhieVfh.js";import{b as L}from"../chunks/V5IiyUUs.js";import{F as q,T as Q,M as T,O as N}from"../chunks/BDNczz7U.js";var P=s('<div class="grammar-hint svelte-1ykr7ns"> </div>'),W=s('<span class="spacer svelte-1ykr7ns"></span>'),Z=s('<button class="word-bubble selected svelte-1ykr7ns" title="Click to remove"> </button> <!>',1),z=s('<div class="sentence-construction svelte-1ykr7ns"></div>'),F=s('<div class="empty-sentence svelte-1ykr7ns"><p>Click words below to build the sentence</p></div>'),H=s('<button class="word-bubble svelte-1ykr7ns"> </button>'),J=s('<button class="next-btn svelte-1ykr7ns">Next Question â†’</button>'),R=s('<div> </div> <div class="actions svelte-1ykr7ns"><button class="reset-btn svelte-1ykr7ns">Try Again</button> <!></div>',1),S=s('<button class="check-btn svelte-1ykr7ns">Check Answer</button>'),U=s('<div class="progress-indicator svelte-1ykr7ns"> </div>'),V=s('<div class="sentence-builder-container svelte-1ykr7ns"><div class="prompt svelte-1ykr7ns"><h3 class="svelte-1ykr7ns"> </h3> <!></div> <div class="user-sentence svelte-1ykr7ns"><!></div> <div class="word-bank svelte-1ykr7ns"></div> <div class="feedback-section svelte-1ykr7ns"><!></div> <!></div>');function K(e,s){l(s,!0);let i=I(s,"exercise",15);const M=o();let E=c(v([])),C=c(v([])),D=c(!1),O=c(!1),A=c(0);const B=p(()=>i().questions[i().currentQuestionIndex]);function G(){if(!d(E).length||d(D)||!d(B))return;w(A);const e=d(B);m(O,JSON.stringify(d(E))===JSON.stringify(e.correctOrder)),m(D,!0),i().feedback.push({questionId:e.id,isCorrect:d(O),userAnswer:d(E).join(" "),correctAnswer:e.correctOrder.join(" "),attempts:d(A),timestamp:new Date}),M("exerciseComplete",{exerciseId:i().id,isCorrect:d(O),userAnswer:d(E).join(" ")})}function L(){if(!d(B))return;const e=d(B);m(C,[...e.words].sort(()=>Math.random()-.5),!0),m(E,[],!0),m(D,!1),m(O,!1),m(A,0)}function q(){if(!d(D)||!d(B))return"";if(d(O))return i().feedbackMessages?.correct||"âœ… Correct! Well done!";{const e=d(B);return i().feedbackMessages?.incorrect||`âŒ Try again. Correct order: ${e.correctOrder.join(" ")}`}}u(()=>{d(B)&&(m(C,[...d(B).words].sort(()=>Math.random()-.5),!0),m(E,[],!0),m(D,!1),m(O,!1),m(A,0))});var Q=V(),T=g(Q),N=g(T),K=g(N,!0);k(N);var X=b(N,2),Y=e=>{var s=P(),r=g(s);k(s),h(()=>t(r,`ðŸ’¡ ${i().grammarHint??""}`)),n(e,s)};x(X,e=>{i().grammarHint&&e(Y)}),k(T);var ee=b(T,2),se=g(ee),te=e=>{var s=z();$(s,21,()=>d(E),_,(e,s,a)=>{var o=Z(),i=y(o),l=g(i,!0);k(i);var c=b(i,2),v=e=>{var s=W();n(e,s)};x(c,e=>{a<d(E).length-1&&e(v)}),h(()=>t(l,d(s))),r("click",i,()=>function(e){if(d(D))return;const[s]=d(E).splice(e,1);s&&m(C,[...d(C),s].sort(()=>Math.random()-.5),!0)}(a)),n(e,o)}),k(s),n(e,s)},re=e=>{var s=F();n(e,s)};x(se,e=>{d(E).length>0?e(te):e(re,!1)}),k(ee);var ne=b(ee,2);$(ne,21,()=>d(C),_,(e,s)=>{var a=H(),o=g(a,!0);k(a),h(()=>{a.disabled=d(D),t(o,d(s))}),r("click",a,()=>function(e){!d(D)&&d(B)&&(m(E,[...d(E),e],!0),m(C,d(C).filter(s=>s!==e),!0))}(d(s))),n(e,a)}),k(ne);var ae=b(ne,2),oe=g(ae),ie=e=>{var s=R(),a=y(s);let o;var l=g(a,!0);k(a);var c=b(a,2),v=g(c),u=b(v,2),p=e=>{var s=J();r("click",s,()=>{i(i().currentQuestionIndex++,!0),L()}),n(e,s)};x(u,e=>{d(O)&&i().currentQuestionIndex<i().questions.length-1&&e(p)}),k(c),h(e=>{o=j(a,1,"feedback-message svelte-1ykr7ns",null,o,{correct:d(O)}),t(l,e)},[q]),r("click",v,L),n(e,s)},le=e=>{var s=a(),t=y(s),o=e=>{var s=S();r("click",s,G),n(e,s)};x(t,e=>{d(E).length>0&&e(o)},!0),n(e,s)};x(oe,e=>{d(D)?e(ie):e(le,!1)}),k(ae);var ce=b(ae,2),ve=e=>{var s=U(),r=g(s);k(s),h(()=>t(r,`Question ${i().currentQuestionIndex+1} of ${i().questions.length??""}`)),n(e,s)};x(ce,e=>{i().questions.length>1&&e(ve)}),k(Q),h(()=>t(K,d(B)?.prompt)),n(e,Q),f()}var X=s('<div class="loading-state svelte-p5v3wo"><div class="spinner svelte-p5v3wo"></div> <p> </p></div>'),Y=s('<div class="error-state svelte-p5v3wo" role="alert"><h2 class="svelte-p5v3wo"> </h2> <p> </p> <a class="button svelte-p5v3wo"> </a></div>'),ee=s('<button class="button button--primary svelte-p5v3wo"> </button>'),se=s('<a class="button button--primary svelte-p5v3wo"> </a>'),te=s("<option> </option>"),re=s('<header class="lesson-header svelte-p5v3wo"><h1 id="lesson-title" class="lesson-title svelte-p5v3wo"> </h1> <p class="lesson-description svelte-p5v3wo"> </p> <div class="progress-container svelte-p5v3wo"><div class="progress-bar svelte-p5v3wo"><div class="progress-fill svelte-p5v3wo"></div></div> <span class="progress-text svelte-p5v3wo"> </span></div></header> <main class="lesson-content svelte-p5v3wo"><!></main> <nav class="lesson-navigation svelte-p5v3wo"><div class="nav-buttons svelte-p5v3wo"><button class="button button--secondary svelte-p5v3wo"> </button> <!></div> <div class="exercise-selector svelte-p5v3wo"><span> </span> <select class="select-exercise svelte-p5v3wo"></select></div></nav>',1),ne=s('<div class="lesson-container svelte-p5v3wo" role="main" aria-labelledby="lesson-title"><!></div>');function ae(s,o){l(o,!0);const[v,u]=A();let j=c(null),I=c(0),P=c(!0),W=c(null);const Z=O(B,"$page",v).params.lessonId;i(async()=>{try{m(P,!0),m(W,null);const s=await((e,s,t)=>{const r=e[s];return r?"function"==typeof r?r():Promise.resolve(r):new Promise((e,r)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+s+(s.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})})(Object.assign({"../../../../data/lessons/lesson-01-greetings.json":()=>e(()=>import("../chunks/B7HnC1VT.js"),[],import.meta.url),"../../../../data/lessons/lesson-02-food.json":()=>e(()=>import("../chunks/Dv_HARLZ.js"),[],import.meta.url)}),`../../../../data/lessons/lesson-${Z}.json`,7);if(m(j,s.default,!0),!d(j))throw new Error("Lesson not found")}catch(s){console.error("Error loading lesson:",s),m(W,"DE_BG"===G.languageMode?"Lektion nicht gefunden":"Ð£Ñ€Ð¾ÐºÑŠÑ‚ Ð½Ðµ Ðµ Ð½Ð°Ð¼ÐµÑ€ÐµÐ½",!0)}finally{m(P,!1)}});const z=p(()=>d(j)?d(j).exercises?.[d(I)]:void 0);function F(){d(j)&&d(I)<d(j).exercises.length-1&&w(I)}function H(){d(j)&&d(I)>0&&w(I,-1)}const J=p(()=>d(j)?{current:d(I)+1,total:d(j).exercises.length,percentage:Math.round((d(I)+1)/d(j).exercises.length*100)}:{current:0,total:0,percentage:0});function R(e){console.log("Exercise completed:",e.detail.isCorrect)}var S=ne(),U=g(S),V=e=>{var s=X(),r=b(g(s),2),a=g(r,!0);k(r),k(s),h(()=>t(a,"DE_BG"===G.languageMode?"Lade Lektion...":"Ð—Ð°Ñ€ÐµÐ¶Ð´Ð°Ð½Ðµ Ð½Ð° ÑƒÑ€Ð¾ÐºÐ°...")),n(e,s)},ae=e=>{var s=a(),o=y(s),i=e=>{var s=Y(),r=g(s),a=g(r,!0);k(r);var o=b(r,2),i=g(o,!0);k(o);var l=b(o,2),c=g(l,!0);k(l),k(s),h(()=>{t(a,"DE_BG"===G.languageMode?"Fehler":"Ð“Ñ€ÐµÑˆÐºÐ°"),t(i,d(W)),M(l,"href",`${L??""}/learn`),t(c,"DE_BG"===G.languageMode?"ZurÃ¼ck zu Lektionen":"ÐÐ°Ð·Ð°Ð´ ÐºÑŠÐ¼ ÑƒÑ€Ð¾Ñ†Ð¸Ñ‚Ðµ")}),n(e,s)},l=e=>{var s=a(),o=y(s),i=e=>{var s=re(),o=y(s),i=g(o),l=g(i,!0);k(i);var c=b(i,2),v=g(c,!0);k(c);var u=b(c,2),p=g(u),f=g(p);k(p);var w=b(p,2),O=g(w,!0);k(w),k(u),k(o);var A=b(o,2),B=g(A),P=e=>{var s=a(),t=y(s),r=e=>{K(e,{get exercise(){return d(z)},$$events:{exerciseComplete:R}})},o=e=>{var s=a(),t=y(s),r=e=>{q(e,{get exercise(){return d(z)},$$events:{exerciseComplete:R}})},o=e=>{var s=a(),t=y(s),r=e=>{Q(e,{get exercise(){return d(z)},$$events:{exerciseComplete:R}})},o=e=>{var s=a(),t=y(s),r=e=>{T(e,{get exercise(){return d(z)},$$events:{exerciseComplete:R}})},o=e=>{var s=a(),t=y(s),r=e=>{N(e,{get exercise(){return d(z)},$$events:{exerciseComplete:R}})};x(t,e=>{"ordering"===d(z).type&&e(r)},!0),n(e,s)};x(t,e=>{"matching"===d(z).type?e(r):e(o,!1)},!0),n(e,s)};x(t,e=>{"typing"===d(z).type?e(r):e(o,!1)},!0),n(e,s)};x(t,e=>{"fill-in-blank"===d(z).type?e(r):e(o,!1)},!0),n(e,s)};x(t,e=>{"sentence-builder"===d(z).type?e(r):e(o,!1)}),n(e,s)};x(B,e=>{d(z)&&e(P)}),k(A);var W=b(A,2),Z=g(W),S=g(Z),U=g(S,!0);k(S);var V=b(S,2),X=e=>{var s=ee(),a=g(s,!0);k(s),h(()=>t(a,"DE_BG"===G.languageMode?"Weiter":"ÐÐ°Ð¿Ñ€ÐµÐ´")),r("click",s,F),n(e,s)},Y=e=>{var s=se(),r=g(s,!0);k(s),h(()=>{M(s,"href",`${L??""}/learn`),t(r,"DE_BG"===G.languageMode?"Alle Lektionen":"Ð’ÑÐ¸Ñ‡ÐºÐ¸ ÑƒÑ€Ð¾Ñ†Ð¸")}),n(e,s)};x(V,e=>{d(I)<d(j).exercises.length-1?e(X):e(Y,!1)}),k(Z);var ne=b(Z,2),ae=g(ne),oe=g(ae,!0);k(ae);var ie,le=b(ae,2);$(le,21,()=>d(j).exercises,_,(e,s,r)=>{var a=te(),o=g(a,!0);k(a),a.value=a.__value=r,h(e=>t(o,e),[()=>function(e,s){return"title"in e&&e.title?`${s+1}. ${e.title}`:`${s+1}. ${e.type}`}(d(s),r)]),n(e,a)}),k(le),E(le),k(ne),k(W),h(()=>{t(l,d(j).title),t(v,d(j).description),D(f,`width: ${d(J).percentage??""}%`),t(O,"DE_BG"===G.languageMode?`${d(J).current} von ${d(J).total} Ãœbungen`:`${d(J).current} Ð¾Ñ‚ ${d(J).total} ÑƒÐ¿Ñ€Ð°Ð¶Ð½ÐµÐ½Ð¸Ñ`),S.disabled=0===d(I),t(U,"DE_BG"===G.languageMode?"ZurÃ¼ck":"ÐÐ°Ð·Ð°Ð´"),t(oe,"DE_BG"===G.languageMode?"Ãœbung:":"Ð£Ð¿Ñ€Ð°Ð¶Ð½ÐµÐ½Ð¸Ðµ:"),ie!==(ie=d(I))&&(le.value=(le.__value=d(I))??"",C(le,d(I)))}),r("click",S,H),r("change",le,e=>{const s=e.target;var t;s&&(t=parseInt(s.value,10),d(j)&&m(I,t,!0))}),n(e,s)};x(o,e=>{d(j)&&e(i)},!0),n(e,s)};x(o,e=>{d(W)?e(i):e(l,!1)},!0),n(e,s)};x(U,e=>{d(P)?e(V):e(ae,!1)}),k(S),n(s,S),f(),u()}export{ae as component};
//# sourceMappingURL=7.DJjVCAVL.js.map
