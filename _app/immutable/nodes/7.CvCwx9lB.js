var e,t,s,n,r,i,o,a,l,c,u,d,p,v,h,f,g,m,y,b,w,k,$,C,A,L,x,_,M,D,S,T,j,P,E,O,F,W,B,I,N,z,R,V,U,G,K,q,Z,H,Y,X,J,Q,ee,te,se,ne,re,ie,oe,ae,le,ce,ue,de,pe,ve,he,fe,ge,me,ye,be,we,ke,$e,Ce,Ae,Le,xe,_e,Me,De,Se,Te,je,Pe,Ee,Oe,Fe,We,Be,Ie,Ne,ze=Object.defineProperty,Re=Object.getPrototypeOf,Ve=Reflect.get,Ue=e=>{throw TypeError(e)},Ge=(e,t,s)=>((e,t,s)=>t in e?ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s),Ke=(e,t,s)=>t.has(e)||Ue("Cannot "+s),qe=(e,t,s)=>(Ke(e,t,"read from private field"),s?s.call(e):t.get(e)),Ze=(e,t,s)=>t.has(e)?Ue("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),He=(e,t,s,n)=>(Ke(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),Ye=(e,t,s)=>(Ke(e,t,"access private method"),s);import{k as Xe,l as Je,o as Qe,d as et,f as tt,s as st,a as nt,c as rt,p as it,q as ot,r as at,m as lt,u as ct,v as ut,t as dt}from"../chunks/oPX1csav.js";import{aE as pt,h as vt,a as ht,b as ft,v as gt,b3 as mt,E as yt,b4 as bt,ag as wt,o as kt,j as $t,i as Ct,Y as At,O as Lt,y as xt,A as _t,K as Mt,I as Dt,C as St,D as Tt,B as jt,J as Pt,G as Et,F as Ot,N as Ft,L as Wt,z as Bt,u as It,b5 as Nt,al as zt,aI as Rt,b6 as Vt,b7 as Ut,b8 as Gt,ae as Kt,d as qt,t as Zt,Q as Ht,b9 as Yt,ba as Xt,b2 as Jt,M as Qt,bb as es}from"../chunks/C9M7xJe7.js";import{i as ts}from"../chunks/DdzQh8gY.js";import{e as ss,r as ns,a as rs,c as is,i as os,s as as,b as ls,g as cs,d as us}from"../chunks/1L0bn45u.js";import{p as ds,r as ps,b as vs}from"../chunks/BR1FIV-D.js";import{t as hs}from"../chunks/BaklQhqz.js";import{a as fs,o as gs,f as ms,u as ys,V as bs,g as ws,n as ks,P as $s,h as Cs,L as As,i as Ls,_ as xs,j as _s,v as Ms,l as Ds,k as Ss,m as Ts,p as js,e as Ps,q as Es,t as Os,r as Fs}from"../chunks/a7ZClh_C.js";import{b as Ws,a as Bs}from"../chunks/CgsnWAaW.js";import{s as Is}from"../chunks/Cqux_VA-.js";import{c as Ns}from"../chunks/CF7CnXPc.js";import{B as zs}from"../chunks/DFb--6Rc.js";import{s as Rs}from"../chunks/DM1AlKns.js";function Vs(){return Symbol(pt)}var Us=tt('<span class="vocabulary-tag svelte-10g5if6"> </span>'),Gs=tt('<span class="vocabulary-tag more svelte-10g5if6"> </span>'),Ks=tt("<!> <!>",1),qs=tt('<span class="vocabulary-tag svelte-10g5if6"> </span>'),Zs=tt('<button class="show-more-button svelte-10g5if6"> </button>'),Hs=tt("<!> <!>",1),Ys=tt('<li class="objective-item svelte-10g5if6"><label class="objective-checkbox svelte-10g5if6"><input type="checkbox" class="svelte-10g5if6"/> <span> </span></label></li>'),Xs=tt('<span class="part-of-speech svelte-10g5if6"> </span>'),Js=tt('<span class="difficulty-indicator svelte-10g5if6"> </span>'),Qs=tt('<div role="button" tabindex="0"><span class="vocab-german svelte-10g5if6"> </span> <span class="vocab-bulgarian svelte-10g5if6"> </span></div>'),en=tt('<div class="lesson-card-container svelte-10g5if6"><div tabindex="0" role="button"><div class="lesson-card-front svelte-10g5if6"><div class="lesson-header svelte-10g5if6"><div> </div> <div class="lesson-type-icon svelte-10g5if6"> </div></div> <h3 class="lesson-title svelte-10g5if6"> </h3> <p class="lesson-description svelte-10g5if6"> </p> <div class="lesson-progress svelte-10g5if6"><div class="progress-bar-container svelte-10g5if6"><div class="progress-bar svelte-10g5if6" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <span class="progress-text svelte-10g5if6"> </span></div> <div class="lesson-vocabulary-preview svelte-10g5if6"><div class="vocabulary-tags svelte-10g5if6"><!></div></div> <div class="lesson-actions svelte-10g5if6"><button class="action-button primary svelte-10g5if6" aria-label="View lesson details">View Details</button> <button class="action-button secondary svelte-10g5if6" aria-label="Start this lesson">‚ñ∂Ô∏è Start</button></div></div> <div class="lesson-card-back svelte-10g5if6"><div class="lesson-header svelte-10g5if6"><button class="back-button svelte-10g5if6" aria-label="Back to lesson overview">‚Üê Back</button> <div> </div></div> <h3 class="lesson-title svelte-10g5if6"> </h3> <div class="lesson-objectives svelte-10g5if6"><h4 class="svelte-10g5if6">Learning Objectives</h4> <ul class="objectives-list svelte-10g5if6"></ul></div> <div class="lesson-vocabulary-details svelte-10g5if6"><h4 class="svelte-10g5if6"> </h4> <div class="vocabulary-navigation svelte-10g5if6"><button aria-label="Previous vocabulary item" class="svelte-10g5if6">‚óÄÔ∏è</button> <span class="vocabulary-counter svelte-10g5if6"> </span> <button aria-label="Next vocabulary item" class="svelte-10g5if6">‚ñ∂Ô∏è</button></div> <div class="vocabulary-card svelte-10g5if6"><div class="vocabulary-language german svelte-10g5if6"> </div> <div class="vocabulary-language bulgarian svelte-10g5if6"> </div> <div class="vocabulary-meta svelte-10g5if6"><!> <!></div></div> <div class="vocabulary-list svelte-10g5if6"></div></div> <div class="lesson-actions svelte-10g5if6"><button class="action-button primary svelte-10g5if6" aria-label="Start this lesson">Start Lesson</button></div></div></div></div>');function tn(e,t){xt(t,!0);let s=ds(t,"lesson",7),n=Tt(!1),r=Tt(0),i=Tt(!1),o=Pt(()=>s().vocabulary.map(e=>"string"==typeof e?{id:e,german:e.split("-")[0]||e,bulgarian:e.split("-")[1]||e,partOfSpeech:"noun",difficulty:1}:e&&"object"==typeof e?{id:e.id||`vocab-${Date.now()}`,german:e.german||e.bulgarian||"Unknown",bulgarian:e.bulgarian||e.german||"Unknown",partOfSpeech:e.partOfSpeech||"noun",difficulty:e.difficulty||1}:{id:`vocab-${Date.now()}`,german:"Unknown",bulgarian:"Unknown",partOfSpeech:"noun",difficulty:1})),a=Pt(()=>St(o).length>0?St(o):[{id:"fallback-vocab",german:"Example",bulgarian:"–ü—Ä–∏–º–µ—Ä",partOfSpeech:"noun",difficulty:1}]),l=Pt(()=>St(a)[St(r)]||St(a)[0]),c=Pt(()=>Math.round(s().objectives.filter(e=>e.isCompleted).length/s().objectives.length*100));function u(){Et(n,!St(n))}function d(e){return{A1:"bg-green-100 text-green-800 border-green-300",A2:"bg-green-200 text-green-900 border-green-400",B1:"bg-blue-100 text-blue-800 border-blue-300",B2:"bg-blue-200 text-blue-900 border-blue-400",C1:"bg-purple-100 text-purple-800 border-purple-300"}[e]||"bg-gray-100 text-gray-800 border-gray-300"}var p=en(),v=_t(p);v.__keydown=e=>"Enter"===e.key||" "===e.key?u():null;var h=_t(v),f=_t(h),g=_t(f),m=_t(g);Mt(g);var y=Dt(g,2),b=_t(y,!0);Mt(y),Mt(f);var w=Dt(f,2),k=_t(w,!0);Mt(w);var $=Dt(w,2),C=_t($,!0);Mt($);var A=Dt($,2),L=_t(A),x=_t(L);Mt(L);var _=Dt(L,2),M=_t(_);Mt(_),Mt(A);var D=Dt(A,2),S=_t(D),T=_t(S),j=e=>{var t=Ks(),s=Wt(t);ss(s,17,()=>St(o).slice(0,5),os,(e,t)=>{var s=Us(),n=_t(s,!0);Mt(s),jt(()=>{as(s,"title",St(t).german),st(n,St(t).german)}),nt(e,s)});var n=Dt(s,2),r=e=>{var t=Gs(),s=_t(t);Mt(t),jt(()=>st(s,"+"+(St(o).length-5))),nt(e,t)};ts(n,e=>{St(o).length>5&&e(r)}),nt(e,t)},P=e=>{var t=Hs(),s=Wt(t);ss(s,17,()=>St(o).slice(0,3),os,(e,t)=>{var s=qs(),n=_t(s,!0);Mt(s),jt(()=>{as(s,"title",St(t).german),st(n,St(t).german)}),nt(e,s)});var n=Dt(s,2),r=e=>{var t=Zs();t.__click=()=>Et(i,!0);var s=_t(t);Mt(t),jt(()=>{as(t,"aria-label",`Show all ${St(o).length} vocabulary items`),st(s,"+"+(St(o).length-3))}),nt(e,t)};ts(n,e=>{St(o).length>3&&e(r)}),nt(e,t)};ts(T,e=>{St(i)?e(j):e(P,!1)}),Mt(S),Mt(D);var E=Dt(D,2),O=_t(E);O.__click=u,Dt(O,2).__click=()=>t.onStart?.(),Mt(E),Mt(h);var F=Dt(h,2),W=_t(F),B=_t(W);B.__click=u;var I=Dt(B,2),N=_t(I);Mt(I),Mt(W);var z=Dt(W,2),R=_t(z,!0);Mt(z);var V=Dt(z,2),U=Dt(_t(V),2);ss(U,21,()=>s().objectives,e=>e.id,(e,t)=>{var n=Ys(),r=_t(n),i=_t(r);ns(i),i.__change=()=>{return e=St(t).id,s().objectives=s().objectives.map(t=>t.id===e?{...t,isCompleted:!t.isCompleted}:t),void(s().updatedAt=new Date);var e};var o=Dt(i,2);let a;var l=_t(o,!0);Mt(o),Mt(r),Mt(n),jt(()=>{rs(i,St(t).isCompleted),a=is(o,1,"svelte-10g5if6",null,a,{completed:St(t).isCompleted}),st(l,St(t).description)}),nt(e,n)}),Mt(U),Mt(V);var G=Dt(V,2),K=_t(G),q=_t(K);Mt(K);var Z=Dt(K,2),H=_t(Z);H.__click=function(){St(r)>0&&Ft(r,-1)};var Y=Dt(H,2),X=_t(Y);Mt(Y);var J=Dt(Y,2);J.__click=function(){St(r)<St(o).length-1&&Ft(r)},Mt(Z);var Q=Dt(Z,2),ee=_t(Q),te=_t(ee,!0);Mt(ee);var se=Dt(ee,2),ne=_t(se,!0);Mt(se);var re=Dt(se,2),ie=_t(re),oe=e=>{var t=Xs(),s=_t(t,!0);Mt(t),jt(()=>st(s,St(l).partOfSpeech)),nt(e,t)};ts(ie,e=>{St(l)?.partOfSpeech&&e(oe)});var ae=Dt(ie,2),le=e=>{var t=Js(),s=_t(t,!0);Mt(t),jt(e=>st(s,e),[()=>"‚≠ê".repeat(St(l).difficulty)]),nt(e,t)};ts(ae,e=>{St(l)?.difficulty&&e(le)}),Mt(re),Mt(Q);var ce=Dt(Q,2);ss(ce,21,()=>St(o),os,(e,t,s)=>{var n=Qs();n.__click=()=>Et(r,s,!0),n.__keydown=e=>"Enter"===e.key?Et(r,s,!0):null;var i=_t(n),o=_t(i,!0);Mt(i);var a=Dt(i,2),l=_t(a,!0);Mt(a),Mt(n),jt(()=>{is(n,1,"vocabulary-list-item "+(s===St(r)?"active":""),"svelte-10g5if6"),st(o,St(t)?.german||"Unknown"),st(l,St(t)?.bulgarian||"Unknown")}),nt(e,n)}),Mt(ce),Mt(G);var ue=Dt(G,2);_t(ue).__click=()=>t.onStart?.(),Mt(ue),Mt(F),Mt(v),Mt(p),jt((e,t,i)=>{is(v,1,"lesson-card "+(St(n)?"flipped":""),"svelte-10g5if6"),as(v,"aria-label",`Lesson: ${s().title}`),is(g,1,`lesson-badge ${e??""}`,"svelte-10g5if6"),st(m,`${s().difficulty??""} ‚Ä¢ ${s().duration??""} min`),as(y,"aria-label",`Lesson type: ${s().type}`),st(b,t),st(k,s().title),st(C,s().description),ls(x,`width: ${St(c)}%`),as(x,"aria-valuenow",St(c)),st(M,`${St(c)??""}% complete`),is(I,1,`lesson-badge ${i??""}`,"svelte-10g5if6"),st(N,`${s().difficulty??""} ‚Ä¢ ${s().duration??""} min`),st(R,s().title),st(q,`Vocabulary (${St(o).length??""})`),H.disabled=0===St(r),st(X,`${St(r)+1} / ${St(o).length??""}`),J.disabled=St(r)===St(o).length-1,st(te,St(l).german),st(ne,St(l).bulgarian)},[()=>d(s().difficulty),()=>({vocabulary:"üìö",grammar:"üìñ",conversation:"üí¨",reading:"üìÑ",listening:"üîä",writing:"‚úçÔ∏è",culture:"üèõÔ∏è",mixed:"üéØ"}[s().type]||"üìö"),()=>d(s().difficulty)]),nt(e,p),Ot()}et(["keydown","click","change"]);var sn=tt('<div class="error-message"><div class="error-icon">‚ö†Ô∏è</div> <h3> </h3> <p> </p> <button class="btn btn-secondary"> </button></div>'),nn=tt('<div class="fallback-lesson-message svelte-7i5fkp"><div class="fallback-icon svelte-7i5fkp">‚ö†Ô∏è</div> <h3> </h3> <p> </p> <button class="btn btn-secondary"> </button></div>'),rn=tt('<span class="lesson-tag svelte-7i5fkp"> </span>'),on=tt('<span class="lesson-tag more svelte-7i5fkp"> </span>'),an=tt('<div class="lesson-tags svelte-7i5fkp"><!> <!></div>'),ln=tt('<li class="objective-item svelte-7i5fkp"><label class="objective-checkbox svelte-7i5fkp"><input type="checkbox" class="svelte-7i5fkp"/> <span> </span></label></li>'),cn=tt('<li class="objective-item more-objectives svelte-7i5fkp"><button class="svelte-7i5fkp"> </button></li>'),un=tt('<div class="lesson-objectives svelte-7i5fkp"><div class="objectives-header svelte-7i5fkp"><h3 class="svelte-7i5fkp"> </h3> <button class="toggle-objectives svelte-7i5fkp"> </button></div> <ul class="objectives-list svelte-7i5fkp"><!> <!></ul></div>'),dn=tt('<span class="more-vocabulary svelte-7i5fkp"> </span>'),pn=tt('<div class="vocabulary-part-of-speech svelte-7i5fkp"> </div>'),vn=tt('<div class="vocabulary-difficulty svelte-7i5fkp"> </div>'),hn=tt('<div class="vocabulary-item svelte-7i5fkp"><div class="vocabulary-source svelte-7i5fkp"> </div> <div class="vocabulary-target svelte-7i5fkp"> </div> <!> <!></div>'),fn=tt('<div class="vocabulary-list svelte-7i5fkp"></div>'),gn=tt('<div class="lesson-vocabulary svelte-7i5fkp"><div class="vocabulary-header svelte-7i5fkp"><h3 class="svelte-7i5fkp"> </h3> <button class="toggle-vocabulary svelte-7i5fkp"> </button></div> <div class="vocabulary-preview svelte-7i5fkp"> <!></div> <!></div>'),mn=tt('<div class="section-meta svelte-7i5fkp"><span class="template-id"> </span></div>'),yn=tt('<div role="button" tabindex="0"><div class="section-overview-icon svelte-7i5fkp"> </div> <div class="section-overview-title svelte-7i5fkp"> </div> <div class="section-overview-type svelte-7i5fkp"> </div></div>'),bn=tt('<div class="lesson-sections svelte-7i5fkp"><div class="sections-navigation svelte-7i5fkp"><button class="svelte-7i5fkp"> </button> <div class="section-indicator svelte-7i5fkp"> </div> <button class="svelte-7i5fkp"> </button></div> <div class="section-content svelte-7i5fkp"><div class="section-header svelte-7i5fkp"><div class="section-icon svelte-7i5fkp"> </div> <h2 class="section-title svelte-7i5fkp"> </h2> <div class="section-type svelte-7i5fkp"> </div></div> <div class="section-body svelte-7i5fkp"><div class="section-content-text svelte-7i5fkp"></div> <!></div></div> <div class="sections-overview svelte-7i5fkp"><h3 class="svelte-7i5fkp">Lesson Sections</h3> <div class="sections-list svelte-7i5fkp"></div></div></div>'),wn=tt('<div class="no-sections-message svelte-7i5fkp"> </div>'),kn=tt('<div class="lesson-header svelte-7i5fkp"><div class="lesson-title-section svelte-7i5fkp"><div class="lesson-type-icon svelte-7i5fkp"> </div> <h1 class="lesson-title svelte-7i5fkp"> </h1></div> <div class="lesson-meta svelte-7i5fkp"><div> </div> <!></div></div> <div class="lesson-description svelte-7i5fkp"> </div> <div class="lesson-progress-container svelte-7i5fkp"><div class="progress-bar-container"><div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <span class="progress-text svelte-7i5fkp"> </span></div> <!> <!> <!> <div class="lesson-actions svelte-7i5fkp"><button class="btn btn-secondary"> </button> <button class="btn btn-primary"> </button></div>',1),$n=tt('<div class="generated-lesson-container svelte-7i5fkp"><!></div>');function Cn(e,t){function s(e){return"DE_BG"===fs.languageMode?e.german:e.bulgarian}xt(t,!0);let n=ds(t,"lesson",7),r=Tt(!1),i=Tt(null);function o(e,t){console.error(`[${t}]`,e)}let a=Tt(0),l=Tt(!1),c=Tt(!1);Bt({}),It(()=>{try{if(!n())throw new Error("Lesson data is required")}catch(e){o(e,"Failed to initialize GeneratedLesson component"),Et(r,!0),Et(i,e instanceof Error?e.message:"Invalid lesson data",!0)}});let u=Pt(()=>{try{return n().sections&&0!==n().sections.length?n().sections:[{id:"default-section",title:"Lesson Content",content:n().content||"No content available",type:"summary",metadata:{}}]}catch(e){return o(e,"Failed to derive lesson sections"),Et(r,!0),Et(i,"Failed to load lesson sections"),[{id:"error-section",title:"Error",content:"Failed to load lesson content",type:"summary",metadata:{}}]}}),d=Pt(()=>{try{return St(u)[St(a)]||null}catch(e){return o(e,"Failed to get current section"),Et(r,!0),Et(i,"Failed to load section content"),null}}),p=Pt(()=>{try{return n().objectives&&0!==n().objectives.length?Math.round(n().objectives.filter(e=>e.isCompleted).length/n().objectives.length*100):0}catch(e){return o(e,"Failed to calculate completion percentage"),Et(r,!0),Et(i,"Failed to calculate progress"),0}}),v=Pt(()=>{try{return n().vocabulary||[]}catch(e){return o(e,"Failed to load vocabulary items"),Et(r,!0),Et(i,"Failed to load vocabulary"),[]}}),h=Pt(()=>{try{return St(v).length>0}catch(e){return o(e,"Failed to check vocabulary availability"),!1}}),f=Pt(()=>{try{return n().objectives&&n().objectives.length>0}catch(e){return o(e,"Failed to check objectives availability"),!1}}),g=Pt(()=>{try{return St(u).length>0}catch(e){return o(e,"Failed to check sections availability"),!1}}),m=Pt(()=>{try{return!0===n().metadata?.fallback}catch(e){return o(e,"Failed to check fallback status"),!1}});function y(){try{St(a)<St(u).length-1&&Ft(a)}catch(e){o(e,"Failed to navigate to next section"),Et(r,!0),Et(i,"Failed to navigate sections")}}function b(){try{St(a)>0&&Ft(a,-1)}catch(e){o(e,"Failed to navigate to previous section"),Et(r,!0),Et(i,"Failed to navigate sections")}}function w(e){return{introduction:"üìò",vocabulary:"üìö",grammar:"üìñ",exercise:"‚úèÔ∏è",cultural:"üèõÔ∏è",summary:"üìù",conversation:"üí¨",reading:"üìÑ",listening:"üîä",writing:"‚úçÔ∏è"}[e]||"üìñ"}function k(e){return names={introduction:hs("sections.introduction")||"Introduction",vocabulary:hs("sections.vocabulary")||"Vocabulary",grammar:hs("sections.grammar")||"Grammar",exercise:hs("sections.exercise")||"Exercise",cultural:hs("sections.cultural_note")||"Cultural Note",summary:hs("sections.summary")||"Summary",conversation:hs("sections.conversation")||"Conversation",reading:hs("sections.reading")||"Reading",listening:hs("sections.listening")||"Listening",writing:hs("sections.writing")||"Writing"},names[e]||e}var $=$n(),C=_t($),A=e=>{var t=sn(),s=Dt(_t(t),2),n=_t(s,!0);Mt(s);var r=Dt(s,2),o=_t(r,!0);Mt(r);var a=Dt(r,2);a.__click=()=>window.location.reload();var l=_t(a,!0);Mt(a),Mt(t),jt((e,t,s)=>{st(n,e),st(o,t),st(l,s)},[()=>hs("errors.lesson_load_error"),()=>St(i)||hs("errors.unknown_error"),()=>hs("common.reload_page")]),nt(e,t)},L=e=>{var t=rt(),$=Wt(t),C=e=>{var t=nn(),s=Dt(_t(t),2),r=_t(s,!0);Mt(s);var i=Dt(s,2),o=_t(i,!0);Mt(i);var a=Dt(i,2);a.__click=()=>window.location.reload();var l=_t(a,!0);Mt(a),Mt(t),jt((e,t)=>{st(r,e),st(o,n().description),st(l,t)},[()=>hs("lesson.unavailable"),()=>hs("common.try_again")]),nt(e,t)},A=e=>{var t=kn(),m=Wt(t),$=_t(m),C=_t($),A=_t(C,!0);Mt(C);var L=Dt(C,2),x=_t(L,!0);Mt(L),Mt($);var _=Dt($,2),M=_t(_),D=_t(M);Mt(M);var S=Dt(M,2),T=e=>{var t=an(),s=_t(t);ss(s,17,()=>n().metadata.tags.slice(0,3),os,(e,t)=>{var s=rn(),n=_t(s,!0);Mt(s),jt(()=>st(n,St(t))),nt(e,s)});var r=Dt(s,2),i=e=>{var t=on(),s=_t(t);Mt(t),jt(()=>st(s,"+"+(n().metadata.tags.length-3))),nt(e,t)};ts(r,e=>{n().metadata.tags.length>3&&e(i)}),Mt(t),nt(e,t)};ts(S,e=>{n().metadata?.tags&&n().metadata.tags.length>0&&e(T)}),Mt(_),Mt(m);var j=Dt(m,2),P=_t(j,!0);Mt(j);var E=Dt(j,2),O=_t(E),F=_t(O);Mt(O);var W=Dt(O,2),B=_t(W);Mt(W),Mt(E);var I=Dt(E,2),N=e=>{var t=un(),s=_t(t),a=_t(s),l=_t(a,!0);Mt(a);var u=Dt(a,2);u.__click=()=>Et(c,!St(c));var d=_t(u,!0);Mt(u),Mt(s);var p=Dt(s,2),v=_t(p);ss(v,17,()=>St(c)?n().objectives:n().objectives.slice(0,3),e=>e.id,(e,t)=>{var s=ln(),a=_t(s),l=_t(a);ns(l),l.__change=()=>function(e){try{if(!n().objectives)throw new Error("Lesson objectives are not available");n().objectives=n().objectives.map(t=>t.id===e?{...t,isCompleted:!t.isCompleted}:t),n().updatedAt=new Date}catch(t){o(t,"Failed to toggle objective"),Et(r,!0),Et(i,"Failed to update objective status")}}(St(t).id);var c=Dt(l,2);let u;var d=_t(c,!0);Mt(c),Mt(a),Mt(s),jt(()=>{rs(l,St(t).isCompleted),u=is(c,1,"svelte-7i5fkp",null,u,{completed:St(t).isCompleted}),st(d,St(t).description)}),nt(e,s)});var h=Dt(v,2),f=e=>{var t=cn(),s=_t(t);s.__click=()=>Et(c,!0);var r=_t(s);Mt(s),Mt(t),jt(e=>st(r,`+${n().objectives.length-3} ${e??""}`),[()=>hs("common.more_objectives")]),nt(e,t)};ts(h,e=>{n().objectives.length>3&&!St(c)&&e(f)}),Mt(p),Mt(t),jt((e,t)=>{st(l,e),st(d,t)},[()=>hs("sections.learning_objectives"),()=>St(c)?hs("common.show_less"):hs("common.show_all")]),nt(e,t)};ts(I,e=>{St(f)&&e(N)});var z=Dt(I,2),R=e=>{var t=gn(),n=_t(t),r=_t(n),i=_t(r);Mt(r);var o=Dt(r,2);o.__click=()=>Et(l,!St(l));var a=_t(o,!0);Mt(o),Mt(n);var c=Dt(n,2),u=_t(c),d=Dt(u),p=e=>{var t=dn(),s=_t(t);Mt(t),jt(e=>st(s,`+${St(v).length-5} ${e??""}`),[()=>hs("common.more_words")]),nt(e,t)};ts(d,e=>{St(v).length>5&&!St(l)&&e(p)}),Mt(c);var h=Dt(c,2),f=e=>{var t=fn();ss(t,21,()=>St(v),e=>e.german,(e,t)=>{var n=hn(),r=_t(n),i=_t(r,!0);Mt(r);var o=Dt(r,2),a=_t(o,!0);Mt(o);var l=Dt(o,2),c=e=>{var s=pn(),n=_t(s,!0);Mt(s),jt(e=>st(n,e),[()=>{return{noun:"Noun",verb:"Verb",adjective:"Adjective",adverb:"Adverb",preposition:"Preposition",conjunction:"Conjunction"}[e=St(t).partOfSpeech]||e;var e}]),nt(e,s)};ts(l,e=>{St(t).partOfSpeech&&e(c)});var u=Dt(l,2),d=e=>{var s=vn(),n=_t(s,!0);Mt(s),jt(e=>st(n,e),[()=>"‚≠ê".repeat(Math.round(St(t).difficulty))]),nt(e,s)};ts(u,e=>{St(t).difficulty&&e(d)}),Mt(n),jt((e,t)=>{st(i,e),st(a,t)},[()=>s(St(t)),()=>{return e=St(t),"DE_BG"===fs.languageMode?e.bulgarian:e.german;var e}]),nt(e,n)}),Mt(t),nt(e,t)};ts(h,e=>{St(l)&&e(f)}),Mt(t),jt((e,t,s)=>{st(i,`${e??""} (${St(v).length??""})`),st(a,t),st(u,`${s??""} `)},[()=>hs("sections.vocabulary"),()=>St(l)?hs("common.show_less"):hs("common.show_all"),()=>{return e=St(l)?St(v).length:5,0===St(v).length?"":St(v).slice(0,e).map(e=>s(e)).join(", ");var e}]),nt(e,t)};ts(z,e=>{St(h)&&e(R)});var V=Dt(z,2),U=e=>{var t=bn(),s=_t(t),n=_t(s);n.__click=b;var r=_t(n);Mt(n);var i=Dt(n,2),o=_t(i);Mt(i);var l=Dt(i,2);l.__click=y;var c=_t(l);Mt(l),Mt(s);var p=Dt(s,2),v=_t(p),h=_t(v),f=_t(h,!0);Mt(h);var g=Dt(h,2),m=_t(g,!0);Mt(g);var $=Dt(g,2),C=_t($,!0);Mt($),Mt(v);var A=Dt(v,2),L=_t(A),x=Dt(L,2),_=e=>{var t=mn(),s=_t(t),n=_t(s);Mt(s),Mt(t),jt(()=>st(n,`Template: ${St(d).metadata.templateId??""}`)),nt(e,t)};ts(x,e=>{St(d).metadata?.templateId&&e(_)}),Mt(A),Mt(p);var M=Dt(p,2),D=Dt(_t(M),2);ss(D,23,()=>St(u),e=>e.id,(e,t,s)=>{var n=yn();n.__click=()=>Et(a,St(s),!0),n.__keydown=e=>"Enter"===e.key||" "===e.key?Et(a,St(s),!0):null;var r=_t(n),i=_t(r,!0);Mt(r);var o=Dt(r,2),l=_t(o,!0);Mt(o);var c=Dt(o,2),u=_t(c,!0);Mt(c),Mt(n),jt((e,r)=>{is(n,1,"section-overview-item "+(St(s)===St(a)?"active":""),"svelte-7i5fkp"),st(i,e),st(l,St(t).title),st(u,r)},[()=>w(St(t).type),()=>k(St(t).type)]),nt(e,n)}),Mt(D),Mt(M),Mt(t),jt((e,t,s,i,p,v,h,g,y)=>{n.disabled=0===St(a),as(n,"aria-label",e),st(r,`‚óÄÔ∏è ${t??""}`),st(o,`${s??""} ${St(a)+1} ${i??""} ${St(u).length??""}`),l.disabled=St(a)===St(u).length-1,as(l,"aria-label",p),st(c,`${v??""} ‚ñ∂Ô∏è`),st(f,h),st(m,St(d).title),st(C,g),as(L,"innerhtml",y)},[()=>hs("common.previous_section"),()=>hs("common.previous"),()=>hs("common.section"),()=>hs("common.of"),()=>hs("common.next_section"),()=>hs("common.next"),()=>w(St(d).type),()=>k(St(d).type),()=>St(d).content.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")]),nt(e,t)},G=e=>{var t=wn(),s=_t(t,!0);Mt(t),jt(e=>st(s,e),[()=>hs("lesson.no_sections")]),nt(e,t)};ts(V,e=>{St(g)?e(U):e(G,!1)});var K=Dt(V,2),q=_t(K);q.__click=()=>window.history.back();var Z=_t(q,!0);Mt(q);var H=Dt(q,2);H.__click=()=>alert(hs("lesson.start_alert"));var Y=_t(H,!0);Mt(H),Mt(K),jt((e,t,s,r,i)=>{as(C,"aria-label",`Lesson type: ${n().type}`),st(A,e),st(x,n().title),is(M,1,`lesson-badge ${t??""}`,"svelte-7i5fkp"),st(D,`${n().difficulty??""} ‚Ä¢ ${n().duration??""} ${s??""}`),st(P,n().description),ls(F,`width: ${St(p)}%`),as(F,"aria-valuenow",St(p)),st(B,`${St(p)??""}% complete`),st(Z,r),st(Y,i)},[()=>({vocabulary:"üìö",grammar:"üìñ",conversation:"üí¨",reading:"üìÑ",listening:"üîä",writing:"‚úçÔ∏è",culture:"üèõÔ∏è",mixed:"üéØ",contextual:"üåç"}[n().type]||"üìö"),()=>({A1:"bg-green-100 text-green-800 border-green-300",A2:"bg-green-200 text-green-900 border-green-400",B1:"bg-blue-100 text-blue-800 border-blue-300",B2:"bg-blue-200 text-blue-900 border-blue-400",C1:"bg-purple-100 text-purple-800 border-purple-300"}[n().difficulty]||"bg-gray-100 text-gray-800 border-gray-300"),()=>hs("common.minutes"),()=>hs("common.back_to_lessons"),()=>hs("common.start_lesson")]),nt(e,t)};ts($,e=>{St(m)?e(C):e(A,!1)},!0),nt(e,t)};ts(C,e=>{St(r)?e(A):e(L,!1)}),Mt($),nt(e,$),Ot()}et(["click","change","keydown"]);const An=gs({id:As,german:Cs().min(1).max(100),bulgarian:Cs().min(1).max(100),partOfSpeech:$s.default("noun"),difficulty:ks().min(1).max(5).default(1).describe("1-5 scale where 1 is easiest"),categories:ws(_s).min(1).default(["uncategorized"]),metadata:bs.optional(),createdAt:ys([Ls(),Cs().datetime().transform(e=>new Date(e))]).default(new Date).transform(e=>e instanceof Date?e:new Date(e)),updatedAt:ys([Ls(),Cs().datetime().transform(e=>new Date(e))]).default(new Date).transform(e=>e instanceof Date?e:new Date(e)),isCommon:ms().default(!1),isVerified:ms().default(!1)}),Ln=ys([An.omit({id:!0}),As,Cs().uuid()]),xn=xs(["A1","A2","B1","B2","C1"]),_n=xs(["vocabulary","grammar","conversation","reading","listening","writing","culture","mixed"]),Mn=gs({id:Cs().uuid(),description:Cs().min(5).max(200),isCompleted:ms().default(!1),createdAt:Ls().default(new Date)}),Dn=gs({tags:ws(Cs()).default([]),prerequisites:ws(As).default([]),relatedLessons:ws(As).default([]),isPremium:ms().default(!1)}).default({}),Sn=gs({id:As,title:Cs().min(3).max(100),description:Cs().min(10).max(1e3),difficulty:xn.default("A1"),type:_n.default("vocabulary"),duration:ks().min(5).max(120).default(15),vocabulary:ws(Ln).default([]),objectives:ws(Mn).default([]),content:Cs().optional(),isCompleted:ms().default(!1),completionPercentage:ks().min(0).max(100).default(0),createdAt:ys([Ls(),Cs().datetime().transform(e=>new Date(e))]).default(new Date),updatedAt:ys([Ls(),Cs().datetime().transform(e=>new Date(e))]).default(new Date),metadata:Dn}).catch(e=>({id:`fallback-${Date.now()}`,title:"Invalid Lesson",description:"This lesson failed validation",difficulty:"A1",type:"vocabulary",duration:15,vocabulary:[],objectives:[],createdAt:new Date,updatedAt:new Date,metadata:{}}));const Tn=new class{constructor(){this.lessons=[],this.vocabularyData=[],this.initialized=!1}async initialize(){if(!this.initialized)try{await Ms.initialize();const e=await Ms.getVocabulary();this.vocabularyData=e.map(e=>({...e,categories:this.normalizeCategories(e.categories),metadata:e.metadata??{},isCommon:e.isCommon??!1,isVerified:e.isVerified??!1,learningPhase:e.learningPhase??0,createdAt:e.createdAt??new Date,updatedAt:e.updatedAt??new Date,cefrLevel:this.normalizeCefrLevel(e.cefrLevel)})),this.initialized=!0}catch(e){throw this.vocabularyData=[],this.initialized=!1,e}}isInitialized(){return this.initialized}generateLessonFromVocabulary(e,t={}){if(!e||0===e.length)return this.createFallbackLesson("No vocabulary items provided");const{title:s,difficulty:n,type:r="vocabulary",description:i}=t,o=s||this.generateLessonTitle(e,r),a=n||this.determineLessonDifficulty(e),l=this.createLearningObjectives(e,a,r),c={id:crypto.randomUUID(),title:o,description:i||this.generateLessonDescription(e,a,r),difficulty:a,type:r,duration:this.calculateLessonDuration(e.length),vocabulary:e.map(e=>this.normalizeVocabularyItem(e)),objectives:l,isCompleted:!1,completionPercentage:0,createdAt:new Date,updatedAt:new Date,metadata:{tags:this.generateLessonTags(e,a,r),prerequisites:[],relatedLessons:[],isPremium:!1}};return this.validateLesson(c)}async generateLessonFromCriteria(e={}){try{this.initialized||await this.initialize();const t=this.queryVocabulary(e),s=(e.limit?t.slice(0,e.limit):t).map(e=>this.normalizeVocabularyItem(e));return this.generateLessonFromVocabulary(s,{title:e.title??"Untitled Lesson",difficulty:e.difficulty??"A1",type:e.type??"vocabulary",description:e.description??""})}catch(t){return this.createFallbackLesson("Failed to generate lesson from criteria")}}queryVocabulary(e){if(0===this.vocabularyData.length)return[];const t=e.difficulty?this.getDifficultyRange(e.difficulty):null;return this.vocabularyData.filter(s=>{const n=!t||s.difficulty>=t.min&&s.difficulty<=t.max,r=!(e.categories&&e.categories.length>0)||s.categories.some(t=>e.categories?.includes(t)),i=!e.partOfSpeech||s.partOfSpeech===e.partOfSpeech;return n&&r&&i})}getDifficultyRange(e){return{A1:{min:1,max:1.5},A2:{min:1.5,max:2.5},B1:{min:2.5,max:3.5},B2:{min:3.5,max:4.5},C1:{min:4.5,max:5}}[e]}normalizeCefrLevel(e){return"A1"===e||"A2"===e||"B1"===e||"B2"===e?e:"A1"}generateLessonTitle(e,t){if(0===e.length)return"New Lesson";const s=new Set;e.forEach(e=>{this.normalizeCategories(e.categories).forEach(e=>s.add(e))});const n={vocabulary:"Vocabulary",grammar:"Grammar",conversation:"Conversation",reading:"Reading",listening:"Listening",writing:"Writing",culture:"Culture",mixed:"Mixed Topics"}[t]||"Lesson";if(1===s.size){const e=s.values().next();if(!e.done)return`${n}: ${this.getCategoryDisplayName(e.value)}`}return`${n} Lesson (${e.length} items)`}generateLessonDescription(e,t,s){const n=new Set;e.forEach(e=>n.add(e.partOfSpeech));const r=Array.from(n).map(e=>this.getPartOfSpeechDisplayName(e)).join(", ");return`This ${t} level lesson focuses on ${{vocabulary:"vocabulary building",grammar:"grammar concepts",conversation:"conversation practice",reading:"reading comprehension",listening:"listening skills",writing:"writing practice",culture:"cultural insights",mixed:"various language skills"}[s]} with ${e.length} vocabulary items covering ${r}.`}calculateLessonDuration(e){const t=2*e;return e>15?Math.min(t+10,120):e>10?t+5:Math.max(t,15)}createLearningObjectives(e,t,s){const n=[];n.push({id:crypto.randomUUID(),description:`Learn ${e.length} new vocabulary items at ${t} level`,isCompleted:!1,createdAt:new Date});return n.push({id:crypto.randomUUID(),description:{vocabulary:"Practice using new vocabulary in context",grammar:"Understand and apply grammar concepts",conversation:"Engage in conversation using learned vocabulary",reading:"Read and comprehend texts using learned vocabulary",listening:"Listen and understand spoken language at this level",writing:"Write sentences or paragraphs using learned vocabulary",culture:"Understand cultural context of vocabulary",mixed:"Practice various language skills at this level"}[s],isCompleted:!1,createdAt:new Date}),"A1"===t||"A2"===t?n.push({id:crypto.randomUUID(),description:"Recognize basic words and phrases in context",isCompleted:!1,createdAt:new Date}):"B1"===t||"B2"===t?n.push({id:crypto.randomUUID(),description:"Use vocabulary in complete sentences and questions",isCompleted:!1,createdAt:new Date}):n.push({id:crypto.randomUUID(),description:"Use advanced vocabulary in complex sentences and discussions",isCompleted:!1,createdAt:new Date}),n}generateLessonTags(e,t,s){const n=[s,t],r=new Set;return e.forEach(e=>{this.normalizeCategories(e.categories).forEach(e=>r.add(e))}),Array.from(r).slice(0,3).forEach(e=>{n.push(this.getCategoryDisplayName(e))}),n}getCategoryDisplayName(e){return{greetings:"Greetings",numbers:"Numbers",family:"Family",food:"Food",colors:"Colors",animals:"Animals","body-parts":"Body Parts",clothing:"Clothing",home:"House & Home",nature:"Nature",transport:"Transportation",technology:"Technology",time:"Time & Date",weather:"Weather",professions:"Professions",places:"Places",grammar:"Grammar",culture:"Culture","everyday-phrases":"Everyday Phrases"}[e]||e}getPartOfSpeechDisplayName(e){return{noun:"Nouns",verb:"Verbs",adjective:"Adjectives",adverb:"Adverbs",pronoun:"Pronouns",preposition:"Prepositions",conjunction:"Conjunctions",interjection:"Interjections",article:"Articles",number:"Numbers",phrase:"Phrases",expression:"Expressions"}[e]||e}normalizeCategories(e){const t=["greetings","numbers","family","food","colors","animals","body-parts","clothing","home","nature","transport","technology","time","weather","professions","places","grammar","culture","everyday-phrases"];if(!e||0===e.length)return["culture"];const s=e.map(e=>t.includes(e)?e:"culture").filter(Boolean);return s.length>0?s:["culture"]}normalizeVocabularyItem(e){return{...e,categories:this.normalizeCategories(e.categories),metadata:e.metadata??{},isCommon:e.isCommon??e.metadata?.isCommon??!1,isVerified:e.isVerified??e.metadata?.isVerified??!1,learningPhase:e.learningPhase??e.metadata?.learningPhase??0,createdAt:e.createdAt??e.metadata?.createdAt??new Date,updatedAt:e.updatedAt??e.metadata?.updatedAt??new Date,cefrLevel:e.cefrLevel??e.metadata?.level??"A1"}}determineLessonDifficulty(e){if(0===e.length)return"A1";const t=e.reduce((e,t)=>e+t.difficulty,0)/e.length;return t<=1.5?"A1":t<=2.5?"A2":t<=3.5?"B1":t<=4.5?"B2":"C1"}validateLesson(e){const t=Sn.safeParse(e);return t.success?t.data:this.createFallbackLesson("Lesson validation failed")}createFallbackLesson(e){return{id:`fallback-${Date.now()}-${crypto.randomUUID()}`,title:"Lesson Unavailable",description:"This lesson could not be generated. Please try again later.",difficulty:"A1",type:"vocabulary",duration:15,vocabulary:[],objectives:[{id:crypto.randomUUID(),description:"Lesson generation failed - please try again",isCompleted:!1,createdAt:new Date}],isCompleted:!1,completionPercentage:0,createdAt:new Date,updatedAt:new Date,metadata:{tags:["error"],prerequisites:[],relatedLessons:[],isPremium:!1}}}getLessons(){return this.lessons}getLessonById(e){return this.lessons.find(t=>t.id===e)}addLesson(e){const t=this.validateLesson(e);this.lessons.push(t)}updateLesson(e,t){const s=this.lessons.findIndex(t=>t.id===e);if(-1===s)return;const n={...this.lessons[s],...t,updatedAt:new Date},r={...n,id:n.id??`lesson_${Date.now()}`,title:n.title??"Untitled",description:n.description??"",difficulty:n.difficulty??"A1",type:n.type??"vocabulary",vocabulary:n.vocabulary??[],duration:n.duration??0},i=this.validateLesson(r);return this.lessons[s]=i,i}removeLesson(e){const t=this.lessons.length;return this.lessons=this.lessons.filter(t=>t.id!==e),this.lessons.length!==t}getLessonsByDifficulty(e){return this.lessons.filter(t=>t.difficulty===e)}getLessonsByType(e){return this.lessons.filter(t=>t.type===e)}getLessonsByTag(e){return this.lessons.filter(t=>t.metadata.tags.includes(e))}getRandomLessons(e=3){if(0===this.lessons.length)return[];return[...this.lessons].sort(()=>.5-Math.random()).slice(0,Math.min(e,this.lessons.length))}};const jn=new class{constructor(){this.initialized=!1}async initialize(){await Tn.initialize(),this.initialized=!0}isInitialized(){return this.initialized}async generateDynamicLesson(e){try{const t=this.validateLessonGenerationParams(e),s=await Ds.generateLesson(t);return this.convertGeneratedLessonToLesson(s)}catch(t){return this.createFallbackLesson(e.type||"vocabulary",e.difficulty||"A1")}}async generateThematicLesson(e,t,s){const n={userId:"default",type:"vocabulary",difficulty:js(t)?t:"A1",criteria:{categories:e},metadata:{includePractice:s?.includePractice??!0,includeReview:s?.includeReview??!1}};return this.generateDynamicLesson(n)}async generateGrammarLesson(e,t,s){const n={userId:"default",type:"grammar",difficulty:js(t)?t:"A1",criteria:{conceptType:e},metadata:{includePractice:s?.includePractice??!0,includeComparison:s?.includeComparison??!1}};return this.generateDynamicLesson(n)}async generateMixedLesson(e,t,s){const n={userId:"default",type:"mixed",difficulty:js(t)?t:"A1",criteria:{categories:[e]},metadata:{includePractice:s?.includePractice??!0,includeReview:s?.includeReview??!1}};return this.generateDynamicLesson(n)}validateLessonGenerationParams(e){const t={userId:"default",type:"vocabulary",difficulty:"A1",criteria:{},metadata:{}};return{userId:e.userId||t.userId,type:["vocabulary","grammar","mixed","culture","contextual"].includes(e.type)?e.type:t.type,difficulty:["A1","A2","B1","B2","C1"].includes(e.difficulty)?e.difficulty:t.difficulty,criteria:e.criteria||t.criteria,metadata:e.metadata||t.metadata}}convertGeneratedLessonToLesson(e){const t=e.sections.map(e=>`## ${e.title||e.type}\n${e.content||""}`).join("\n\n"),s=e.learningObjectives.map(e=>({id:Ss(),description:e,isCompleted:!1,createdAt:new Date})),n=5*e.sections.length+5,r=this.generateLessonTags(e);return{id:e.id,title:e.title,description:this.generateLessonDescription(e),difficulty:this.normalizeDifficulty(e.difficulty),type:this.normalizeLessonType(e.type),duration:n,vocabulary:this.normalizeVocabulary(e.vocabulary||[]),objectives:s,content:t||this.generateLessonDescription(e),isCompleted:!1,completionPercentage:0,createdAt:e.createdAt||new Date,updatedAt:e.updatedAt||new Date,metadata:{tags:r,prerequisites:[],relatedLessons:[],isPremium:!1,...e.metadata}}}generateLessonTags(e){const t=[];if(t.push(e.type),t.push(e.difficulty),e.grammarConcepts&&e.grammarConcepts.length>0&&e.grammarConcepts.forEach(e=>{e.name?.german&&t.push(e.name.german)}),e.vocabulary&&e.vocabulary.length>0){const s=new Set;e.vocabulary.forEach(e=>{e.categories&&e.categories.forEach(e=>{const t=Tn.getCategoryDisplayName(e);s.add(t),s.add(e)})}),t.push(...Array.from(s))}return t}generateLessonDescription(e){const t={A1:"beginner",A2:"elementary",B1:"intermediate",B2:"upper intermediate",C1:"advanced"}[e.difficulty]||"beginner",s={vocabulary:"vocabulary building",grammar:"grammar concepts",mixed:"various language skills",contextual:"contextual learning"}[e.type]||"language learning",n=e.vocabulary?.length||0;let r="";if(e.grammarConcepts&&e.grammarConcepts.length>0){r=`. It covers grammar concepts including ${e.grammarConcepts.map(e=>e.name?.german||e.id).join(", ")}.`}return`This ${t} level lesson focuses on ${s} with ${n} vocabulary items${r}`}normalizeLessonType(e){return"vocabulary"===e||"grammar"===e||"conversation"===e||"reading"===e||"listening"===e||"writing"===e||"culture"===e||"mixed"===e?e:"mixed"}normalizeDifficulty(e){return"A1"===e||"A2"===e||"B1"===e||"B2"===e||"C1"===e?e:"A1"}normalizeVocabulary(e){return e.map(e=>({...e,isCommon:e.isCommon??!1,isVerified:e.isVerified??!1,categories:e.categories??[],metadata:e.metadata??{}}))}createFallbackLesson(e,t){return{id:`fallback-lesson-${Ss()}`,title:"Lesson Unavailable",description:"Dynamic lesson generation failed. Please try again or select a different lesson.",difficulty:js(t)?t:"A1",type:Ts(e)?e:"vocabulary",duration:10,vocabulary:[],objectives:[],sections:[],isCompleted:!1,completionPercentage:0,createdAt:new Date,updatedAt:new Date,metadata:{tags:[e,t],prerequisites:[],relatedLessons:[],isPremium:!1}}}getLessons(){return Tn.getLessons()||[]}getLessonById(e){return Tn.getLessonById(e)}generateLessonFromVocabulary(e){return Tn.generateLessonFromVocabulary(e)}async generateLessonFromCriteria(e){const t={...e,type:e.type?this.normalizeLessonType(e.type):void 0,difficulty:e.difficulty?this.normalizeDifficulty(e.difficulty):void 0,categories:e.categories};return await Tn.generateLessonFromCriteria(t)||this.createFallbackLesson("vocabulary","A1")}getLessonsByDifficulty(e){return Tn.getLessonsByDifficulty(e)||[]}getLessonsByType(e){return Tn.getLessonsByType(e)||[]}getLessonsByTag(e){return Tn.getLessonsByTag(e)||[]}getRandomLessons(e){return Tn.getRandomLessons(e)||[]}addLesson(e){return Tn.addLesson(e)}updateLesson(e,t){return Tn.updateLesson(e,t)}removeLesson(e){return Tn.removeLesson(e)}};function Pn(e){return null!==e&&"object"==typeof e}const En=["string","number","bigint","boolean"];function On(e){return null==e||(!!En.includes(typeof e)||(Array.isArray(e)?e.every(e=>On(e)):"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype))}const Fn=Symbol("box"),Wn=Symbol("is-writable");function Bn(e,t){const s=Pt(e);return t?{[Fn]:!0,[Wn]:!0,get current(){return St(s)},set current(e){t(e)}}:{[Fn]:!0,get current(){return e()}}}function In(...e){return function(t){for(const s of e)if(s){if(t.defaultPrevented)return;"function"==typeof s?s.call(this,t):s.current?.call(this,t)}}}var Nn=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,zn=/\n/g,Rn=/^\s*/,Vn=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Un=/^:\s*/,Gn=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Kn=/^[;\s]*/,qn=/^\s+|\s+$/g,Zn="";function Hn(e){return e?e.replace(qn,Zn):Zn}function Yn(e,t){let s=null;if(!e||"string"!=typeof e)return s;const n=function(e,t){if("string"!=typeof e)throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var s=1,n=1;function r(e){var t=e.match(zn);t&&(s+=t.length);var r=e.lastIndexOf("\n");n=~r?e.length-r:n+e.length}function i(){var e={line:s,column:n};return function(t){return t.position=new o(e),c(),t}}function o(e){this.start=e,this.end={line:s,column:n},this.source=t.source}function a(r){var i=new Error(t.source+":"+s+":"+n+": "+r);if(i.reason=r,i.filename=t.source,i.line=s,i.column=n,i.source=e,!t.silent)throw i}function l(t){var s=t.exec(e);if(s){var n=s[0];return r(n),e=e.slice(n.length),s}}function c(){l(Rn)}function u(e){var t;for(e=e||[];t=d();)!1!==t&&e.push(t);return e}function d(){var t=i();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var s=2;Zn!=e.charAt(s)&&("*"!=e.charAt(s)||"/"!=e.charAt(s+1));)++s;if(s+=2,Zn===e.charAt(s-1))return a("End of comment missing");var o=e.slice(2,s-2);return n+=2,r(o),e=e.slice(s),n+=2,t({type:"comment",comment:o})}}function p(){var e=i(),t=l(Vn);if(t){if(d(),!l(Un))return a("property missing ':'");var s=l(Gn),n=e({type:"declaration",property:Hn(t[0].replace(Nn,Zn)),value:s?Hn(s[0].replace(Nn,Zn)):Zn});return l(Kn),n}}return o.prototype.content=e,c(),function(){var e,t=[];for(u(t);e=p();)!1!==e&&(t.push(e),u(t));return t}()}(e),r="function"==typeof t;return n.forEach(e=>{if("declaration"!==e.type)return;const{property:n,value:i}=e;r?t(n,i,e):i&&(s=s||{},s[n]=i)}),s}const Xn=/\d/,Jn=["-","_","/","."];function Qn(e=""){if(!Xn.test(e))return e!==e.toLowerCase()}function er(e){return e?function(e){const t=[];let s,n,r="";for(const i of e){const e=Jn.includes(i);if(!0===e){t.push(r),r="",s=void 0;continue}const o=Qn(i);if(!1===n){if(!1===s&&!0===o){t.push(r),r=i,s=o;continue}if(!0===s&&!1===o&&r.length>1){const e=r.at(-1);t.push(r.slice(0,Math.max(0,r.length-1))),r=e+i,s=o;continue}}r+=i,s=o,n=e}return t.push(r),t}(e).map(e=>function(e){return e?e[0].toUpperCase()+e.slice(1):""}(e)).join(""):""}function tr(e){if(!e)return{};const t={};return Yn(e,function(e,s){var n;e.startsWith("-moz-")||e.startsWith("-webkit-")||e.startsWith("-ms-")||e.startsWith("-o-")?t[er(e)]=s:e.startsWith("--")?t[e]=s:t[(n=e,function(e){return e?e[0].toLowerCase()+e.slice(1):""}(er(n||"")))]=s}),t}function sr(...e){return(...t)=>{for(const s of e)"function"==typeof s&&s(...t)}}const nr=function(e,t){const s=RegExp(e,"g");return e=>{if("string"!=typeof e)throw new TypeError("expected an argument of type string, but got "+typeof e);return e.match(s)?e.replace(s,t):e}}(/[A-Z]/,e=>`-${e.toLowerCase()}`);function rr(e={}){return function(e){if(!e||"object"!=typeof e||Array.isArray(e))throw new TypeError("expected an argument of type object, but got "+typeof e);return Object.keys(e).map(t=>`${nr(t)}: ${e[t]};`).join("\n")}(e).replace("\n"," ")}const ir=new Set(["onabort","onanimationcancel","onanimationend","onanimationiteration","onanimationstart","onauxclick","onbeforeinput","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncompositionend","oncompositionstart","oncompositionupdate","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onfocusin","onfocusout","onformdata","ongotpointercapture","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onlostpointercapture","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onpaste","onpause","onplay","onplaying","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointermove","onpointerout","onpointerover","onpointerup","onprogress","onratechange","onreset","onresize","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onselectionchange","onselectstart","onslotchange","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ontransitioncancel","ontransitionend","ontransitionrun","ontransitionstart","onvolumechange","onwaiting","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkittransitionend","onwheel"]);function or(e){return ir.has(e)}function ar(...e){const t={...e[0]};for(let s=1;s<e.length;s++){const n=e[s];if(n){for(const e of Object.keys(n)){const s=t[e],r=n[e],i="function"==typeof s,o="function"==typeof r;if(i&&or(e)){const n=s,i=r;t[e]=In(n,i)}else if(i&&o)t[e]=sr(s,r);else if("class"===e){const n=On(s),i=On(r);n&&i?t[e]=Ps(s,r):n?t[e]=Ps(s):i&&(t[e]=Ps(r))}else if("style"===e){const n="object"==typeof s,i="object"==typeof r,o="string"==typeof s,a="string"==typeof r;if(n&&i)t[e]={...s,...r};else if(n&&a){const n=tr(r);t[e]={...s,...n}}else if(o&&i){const n=tr(s);t[e]={...n,...r}}else if(o&&a){const n=tr(s),i=tr(r);t[e]={...n,...i}}else n?t[e]=s:i?t[e]=r:o?t[e]=s:a&&(t[e]=r)}else t[e]=void 0!==r?r:s}for(const e of Object.getOwnPropertySymbols(n)){const s=t[e],r=n[e];t[e]=void 0!==r?r:s}}}return"object"==typeof t.style&&(t.style=rr(t.style).replaceAll("\n"," ")),!1===t.hidden&&(t.hidden=void 0,delete t.hidden),!1===t.disabled&&(t.disabled=void 0,delete t.disabled),t}const lr="undefined"!=typeof window?window:void 0;const cr=class extends Map{constructor(i){if(super(),Ze(this,r),Ze(this,e,new Map),Ze(this,t,Tt(0)),Ze(this,s,Tt(0)),Ze(this,n,Nt||-1),i){for(var[o,a]of i)super.set(o,a);qe(this,s).v=super.size}}has(s){var n=qe(this,e),o=n.get(s);if(void 0===o){if(void 0===super.get(s))return St(qe(this,t)),!1;o=Ye(this,r,i).call(this,0),n.set(s,o)}return St(o),!0}forEach(e,t){Ye(this,r,o).call(this),super.forEach(e,t)}get(s){var n=qe(this,e),o=n.get(s);if(void 0===o){if(void 0===super.get(s))return void St(qe(this,t));o=Ye(this,r,i).call(this,0),n.set(s,o)}return St(o),super.get(s)}set(n,o){var a=qe(this,e),l=a.get(n),c=super.get(n),u=super.set(n,o),d=qe(this,t);if(void 0===l)l=Ye(this,r,i).call(this,0),a.set(n,l),Et(qe(this,s),super.size),Rt(d);else if(c!==o){Rt(l);var p=null===d.reactions?null:new Set(d.reactions);(null===p||!l.reactions?.every(e=>p.has(e)))&&Rt(d)}return u}delete(n){var r=qe(this,e),i=r.get(n),o=super.delete(n);return void 0!==i&&(r.delete(n),Et(qe(this,s),super.size),Et(i,-1),Rt(qe(this,t))),o}clear(){if(0!==super.size){super.clear();var n=qe(this,e);for(var r of(Et(qe(this,s),0),n.values()))Et(r,-1);Rt(qe(this,t)),n.clear()}}keys(){return St(qe(this,t)),super.keys()}values(){return Ye(this,r,o).call(this),super.values()}entries(){return Ye(this,r,o).call(this),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return St(qe(this,s)),super.size}};e=new WeakMap,t=new WeakMap,s=new WeakMap,n=new WeakMap,r=new WeakSet,i=function(e){return Nt===qe(this,n)?Tt(e):zt(e)},o=function(){St(qe(this,t));var n=qe(this,e);if(qe(this,s).v!==n.size)for(var o of((e,t,s)=>Ve(Re(e),s,t))(cr.prototype,this,"keys").call(this))if(!n.has(o)){var a=Ye(this,r,i).call(this,0);n.set(o,a)}for([,a]of qe(this,e))St(a)};let ur=cr;a=new WeakMap,l=new WeakMap,new class{constructor(e={}){Ze(this,a),Ze(this,l);const{window:t=lr,document:s=t?.document}=e;void 0!==t&&(He(this,a,s),He(this,l,it(e=>{const s=ot(t,"focusin",e),n=ot(t,"focusout",e);return()=>{s(),n()}})))}get current(){var e;return null==(e=qe(this,l))||e.call(this),qe(this,a)?function(e){let t=e.activeElement;for(;t?.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}(qe(this,a)):null}};class dr{constructor(e){Ze(this,c),Ze(this,u),He(this,c,e),He(this,u,Symbol(e))}get key(){return qe(this,u)}exists(){return Vt(qe(this,u))}get(){const e=Ut(qe(this,u));if(void 0===e)throw new Error(`Context "${qe(this,c)}" not found`);return e}getOr(e){const t=Ut(qe(this,u));return void 0===t?e:t}set(e){return Gt(qe(this,u),e)}}function pr(e,t,s,n={}){const{lazy:r=!1}=n;let i=!r,o=Array.isArray(e)?[]:void 0;!function(e,t){switch(e){case"post":It(t);break;case"pre":Kt(t)}}(t,()=>{const t=Array.isArray(e)?e.map(e=>e()):e();if(!i)return i=!0,void(o=t);const n=qt(()=>s(t,o));return o=t,n})}function vr(e,t,s){pr(e,"post",t,s)}function hr(e){It(()=>()=>{e()})}function fr(e){Zt().then(e)}c=new WeakMap,u=new WeakMap,vr.pre=function(e,t,s){pr(e,"pre",t,s)};function gr(e){return Pn(e)&&1===e.nodeType&&"string"==typeof e.nodeName}function mr(e){return function(e){return Pn(e)&&void 0!==e.nodeType}(e)&&11===e.nodeType&&"host"in e}function yr(e){return function(e){return Pn(e)&&9===e.nodeType}(e)?e:function(e){return Pn(e)&&"VisualViewport"===e.constructor?.name}(e)?e.document:e?.ownerDocument??document}class br{constructor(e){Ge(this,"element"),Ze(this,d,Pt(()=>{if(!this.element.current)return document;return this.element.current.getRootNode()??document})),Ge(this,"getDocument",()=>yr(this.root)),Ge(this,"getWindow",()=>this.getDocument().defaultView??window),Ge(this,"getActiveElement",()=>function(e){let t=e.activeElement;for(;t?.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}(this.root)),Ge(this,"isActiveElement",e=>e===this.getActiveElement()),Ge(this,"querySelector",e=>this.root?this.root.querySelector(e):null),Ge(this,"querySelectorAll",e=>this.root?this.root.querySelectorAll(e):[]),Ge(this,"setTimeout",(e,t)=>this.getWindow().setTimeout(e,t)),Ge(this,"clearTimeout",e=>this.getWindow().clearTimeout(e)),this.element="function"==typeof e?Bn(e):e}get root(){return St(qe(this,d))}set root(e){Et(qe(this,d),e)}getElementById(e){return this.root.getElementById(e)}}function wr(e,t){return{[Vs()]:s=>{return Pn(n=e)&&Fn in n?(e.current=s,qt(()=>t?.(s)),()=>{"isConnected"in s&&s.isConnected||(e.current=null,t?.(null))}):(e(s),qt(()=>t?.(s)),()=>{"isConnected"in s&&s.isConnected||(e(null),t?.(null))});var n}}}function kr(e){return e?"":void 0}d=new WeakMap;class $r{constructor(e){Ze(this,p),Ze(this,v),Ge(this,"attrs"),He(this,p,e.getVariant?e.getVariant():null),He(this,v,qe(this,p)?`data-${qe(this,p)}-`:`data-${e.component}-`),this.getAttr=this.getAttr.bind(this),this.selector=this.selector.bind(this),this.attrs=Object.fromEntries(e.parts.map(e=>[e,this.getAttr(e)]))}getAttr(e,t){return t?`data-${t}-${e}`:`${qe(this,v)}${e}`}selector(e,t){return`[${this.getAttr(e,t)}]`}}function Cr(e){const t=new $r(e);return{...t.attrs,selector:t.selector,getAttr:t.getAttr}}p=new WeakMap,v=new WeakMap;const Ar="undefined"!=typeof document,Lr=Ar&&window?.navigator?.userAgent&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||window?.navigator?.maxTouchPoints>2&&/iPad|Macintosh/.test(window?.navigator.userAgent));function xr(e){return e instanceof HTMLElement}class _r{constructor(e){Ze(this,g),Ze(this,h),Ze(this,f,null),He(this,h,e),hr(()=>Ye(this,g,m).call(this))}run(e){Ye(this,g,m).call(this);const t=qe(this,h).ref.current;t&&("function"==typeof t.getAnimations?He(this,f,window.requestAnimationFrame(()=>{const s=t.getAnimations();0!==s.length?Promise.allSettled(s.map(e=>e.finished)).then(()=>{Ye(this,g,y).call(this,e)}):Ye(this,g,y).call(this,e)})):Ye(this,g,y).call(this,e))}}h=new WeakMap,f=new WeakMap,g=new WeakSet,m=function(){qe(this,f)&&(window.cancelAnimationFrame(qe(this,f)),He(this,f,null))},y=function(e){const t=()=>{e()};qe(this,h).afterTick?fr(t):t()};class Mr{constructor(e){Ze(this,b),Ze(this,w),Ze(this,k),Ze(this,$,Tt(!1)),He(this,b,e),Et(qe(this,$),e.open.current,!0),He(this,w,e.enabled??!0),He(this,k,new _r({ref:qe(this,b).ref,afterTick:qe(this,b).open})),vr(()=>qe(this,b).open.current,e=>{e&&Et(qe(this,$),!0),qe(this,w)&&qe(this,k).run(()=>{e===qe(this,b).open.current&&(qe(this,b).open.current||Et(qe(this,$),!1),qe(this,b).onComplete?.())})})}get shouldRender(){return St(qe(this,$))}}function Dr(){}function Sr(e,t){return`bits-${e}`}b=new WeakMap,w=new WeakMap,k=new WeakMap,$=new WeakMap;const Tr=Cr({component:"dialog",parts:["content","trigger","overlay","title","description","close","cancel","action"]}),jr=new dr("Dialog.Root | AlertDialog.Root");C=new WeakMap,A=new WeakMap,L=new WeakMap,x=new WeakMap,_=new WeakMap,M=new WeakMap,D=new WeakMap,S=new WeakMap,T=new WeakMap,j=new WeakMap,P=new WeakMap;let Pr=class e{constructor(e,t){Ge(this,"opts"),Ze(this,C,Tt(null)),Ze(this,A,Tt(null)),Ze(this,L,Tt(null)),Ze(this,x,Tt(null)),Ze(this,_,Tt(void 0)),Ze(this,M,Tt(void 0)),Ze(this,D,Tt(void 0)),Ze(this,S,Tt(void 0)),Ze(this,T,Tt(null)),Ze(this,j,Tt(0)),Ge(this,"depth"),Ge(this,"parent"),Ge(this,"contentPresence"),Ge(this,"overlayPresence"),Ge(this,"getBitsAttr",e=>Tr.getAttr(e,this.opts.variant.current)),Ze(this,P,Pt(()=>{return{"data-state":(e=this.opts.open.current,e?"open":"closed")};var e})),this.opts=e,this.parent=t,this.depth=t?t.depth+1:0,this.handleOpen=this.handleOpen.bind(this),this.handleClose=this.handleClose.bind(this),this.contentPresence=new Mr({ref:Bn(()=>this.contentNode),open:this.opts.open,enabled:!0,onComplete:()=>{this.opts.onOpenChangeComplete.current(this.opts.open.current)}}),this.overlayPresence=new Mr({ref:Bn(()=>this.overlayNode),open:this.opts.open,enabled:!0}),vr(()=>this.opts.open.current,e=>{this.parent&&(e?this.parent.incrementNested():this.parent.decrementNested())},{lazy:!0}),hr(()=>{this.opts.open.current&&this.parent?.decrementNested()})}static create(t){const s=jr.getOr(null);return jr.set(new e(t,s))}get triggerNode(){return St(qe(this,C))}set triggerNode(e){Et(qe(this,C),e,!0)}get contentNode(){return St(qe(this,A))}set contentNode(e){Et(qe(this,A),e,!0)}get overlayNode(){return St(qe(this,L))}set overlayNode(e){Et(qe(this,L),e,!0)}get descriptionNode(){return St(qe(this,x))}set descriptionNode(e){Et(qe(this,x),e,!0)}get contentId(){return St(qe(this,_))}set contentId(e){Et(qe(this,_),e,!0)}get titleId(){return St(qe(this,M))}set titleId(e){Et(qe(this,M),e,!0)}get triggerId(){return St(qe(this,D))}set triggerId(e){Et(qe(this,D),e,!0)}get descriptionId(){return St(qe(this,S))}set descriptionId(e){Et(qe(this,S),e,!0)}get cancelNode(){return St(qe(this,T))}set cancelNode(e){Et(qe(this,T),e,!0)}get nestedOpenCount(){return St(qe(this,j))}set nestedOpenCount(e){Et(qe(this,j),e,!0)}handleOpen(){this.opts.open.current||(this.opts.open.current=!0)}handleClose(){this.opts.open.current&&(this.opts.open.current=!1)}incrementNested(){this.nestedOpenCount++,this.parent?.incrementNested()}decrementNested(){0!==this.nestedOpenCount&&(this.nestedOpenCount--,this.parent?.decrementNested())}get sharedProps(){return St(qe(this,P))}set sharedProps(e){Et(qe(this,P),e)}};E=new WeakMap;let Er=class e{constructor(e,t){Ge(this,"opts"),Ge(this,"root"),Ge(this,"attachment"),Ze(this,E,Pt(()=>({id:this.opts.id.current,[this.root.getBitsAttr(this.opts.variant.current)]:"",onclick:this.onclick,onkeydown:this.onkeydown,disabled:!!this.opts.disabled.current||void 0,tabindex:0,...this.root.sharedProps,...this.attachment}))),this.opts=e,this.root=t,this.attachment=wr(this.opts.ref),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}static create(t){return new e(t,jr.get())}onclick(e){this.opts.disabled.current||e.button>0||this.root.handleClose()}onkeydown(e){this.opts.disabled.current||" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),this.root.handleClose())}get props(){return St(qe(this,E))}set props(e){Et(qe(this,E),e)}};O=new WeakMap;let Or=class e{constructor(e,t){Ge(this,"opts"),Ge(this,"root"),Ge(this,"attachment"),Ze(this,O,Pt(()=>({id:this.opts.id.current,role:"heading","aria-level":this.opts.level.current,[this.root.getBitsAttr("title")]:"",...this.root.sharedProps,...this.attachment}))),this.opts=e,this.root=t,this.root.titleId=this.opts.id.current,this.attachment=wr(this.opts.ref),vr.pre(()=>this.opts.id.current,e=>{this.root.titleId=e})}static create(t){return new e(t,jr.get())}get props(){return St(qe(this,O))}set props(e){Et(qe(this,O),e)}};F=new WeakMap;let Fr=class e{constructor(e,t){Ge(this,"opts"),Ge(this,"root"),Ge(this,"attachment"),Ze(this,F,Pt(()=>({id:this.opts.id.current,[this.root.getBitsAttr("description")]:"",...this.root.sharedProps,...this.attachment}))),this.opts=e,this.root=t,this.root.descriptionId=this.opts.id.current,this.attachment=wr(this.opts.ref,e=>{this.root.descriptionNode=e}),vr.pre(()=>this.opts.id.current,e=>{this.root.descriptionId=e})}static create(t){return new e(t,jr.get())}get props(){return St(qe(this,F))}set props(e){Et(qe(this,F),e)}};W=new WeakMap,B=new WeakMap;let Wr=class e{constructor(e,t){Ge(this,"opts"),Ge(this,"root"),Ge(this,"attachment"),Ze(this,W,Pt(()=>({open:this.root.opts.open.current}))),Ze(this,B,Pt(()=>({id:this.opts.id.current,role:"alert-dialog"===this.root.opts.variant.current?"alertdialog":"dialog","aria-modal":"true","aria-describedby":this.root.descriptionId,"aria-labelledby":this.root.titleId,[this.root.getBitsAttr("content")]:"",style:{pointerEvents:"auto",outline:"alert-dialog"===this.root.opts.variant.current?"none":void 0,"--bits-dialog-depth":this.root.depth,"--bits-dialog-nested-count":this.root.nestedOpenCount},tabindex:"alert-dialog"===this.root.opts.variant.current?-1:void 0,"data-nested-open":kr(this.root.nestedOpenCount>0),"data-nested":kr(null!==this.root.parent),...this.root.sharedProps,...this.attachment}))),this.opts=e,this.root=t,this.attachment=wr(this.opts.ref,e=>{this.root.contentNode=e,this.root.contentId=e?.id})}static create(t){return new e(t,jr.get())}get snippetProps(){return St(qe(this,W))}set snippetProps(e){Et(qe(this,W),e)}get props(){return St(qe(this,B))}set props(e){Et(qe(this,B),e)}get shouldRender(){return this.root.contentPresence.shouldRender}};I=new WeakMap,N=new WeakMap;let Br=class e{constructor(e,t){Ge(this,"opts"),Ge(this,"root"),Ge(this,"attachment"),Ze(this,I,Pt(()=>({open:this.root.opts.open.current}))),Ze(this,N,Pt(()=>({id:this.opts.id.current,[this.root.getBitsAttr("overlay")]:"",style:{pointerEvents:"auto","--bits-dialog-depth":this.root.depth,"--bits-dialog-nested-count":this.root.nestedOpenCount},"data-nested-open":kr(this.root.nestedOpenCount>0),"data-nested":kr(null!==this.root.parent),...this.root.sharedProps,...this.attachment}))),this.opts=e,this.root=t,this.attachment=wr(this.opts.ref,e=>this.root.overlayNode=e)}static create(t){return new e(t,jr.get())}get snippetProps(){return St(qe(this,I))}set snippetProps(e){Et(qe(this,I),e)}get props(){return St(qe(this,N))}set props(e){Et(qe(this,N),e)}get shouldRender(){return this.root.overlayPresence.shouldRender}};var Ir=tt("<div><!></div>");function Nr(e,t){const s=at();xt(t,!0);let n=ds(t,"id",19,()=>Sr(s)),r=ds(t,"ref",15,null),i=ds(t,"level",3,2),o=ps(t,["$$slots","$$events","$$legacy","id","ref","child","children","level"]);const a=Or.create({id:Bn(()=>n()),level:Bn(()=>i()),ref:Bn(()=>r(),e=>r(e))}),l=Pt(()=>ar(o,a.props));var c=rt(),u=Wt(c),d=e=>{var s=rt(),n=Wt(s);Is(n,()=>t.child,()=>({props:St(l)})),nt(e,s)},p=e=>{var s=Ir();cs(s,()=>({...St(l)}));var n=_t(s);Is(n,()=>t.children??Ht),Mt(s),nt(e,s)};ts(u,e=>{t.child?e(d):e(p,!1)}),nt(e,c),Ot()}function zr(e,t){var s=rt();!function(e,t,s){vt&&ht();var n=new zs(e);ft(()=>{var e=t();n.ensure(e,s)})}(Wt(s),()=>t.children,e=>{var s=rt(),n=Wt(s);Is(n,()=>t.children??Ht),nt(e,s)}),nt(e,s)}const Rr=new dr("BitsConfig");class Vr{constructor(e,t){Ge(this,"opts");const s=function(e,t){return s=>Bn(()=>{const n=s(t)?.current;return void 0!==n?n:null!==e?s(e.opts)?.current:void 0})}(e,t);this.opts={defaultPortalTo:s(e=>e.defaultPortalTo),defaultLocale:s(e=>e.defaultLocale)}}}const Ur=(Gr=e=>e.defaultPortalTo,Kr="body",e=>{const t=function(){const e=new Vr(null,{});return Rr.getOr(e).opts}();return Bn(()=>{const s=e();if(void 0!==s)return s;const n=Gr(t).current;return void 0!==n?n:Kr})});var Gr,Kr;function qr(e,t){xt(t,!0);const s=Ur(()=>t.to),n=Yt();let r,i=Pt(function(){if(!Ar||t.disabled)return null;let e=null;if("string"==typeof s.current){e=document.querySelector(s.current)}else e=s.current;return e});function o(){r&&(ct(r),r=null)}vr([()=>St(i),()=>t.disabled],([e,s])=>{if(e&&!s)return r=lt(zr,{target:e,props:{children:t.children},context:n}),()=>{o()};o()});var a=rt(),l=Wt(a),c=e=>{var s=rt(),n=Wt(s);Is(n,()=>t.children??Ht),nt(e,s)};ts(l,e=>{t.disabled&&e(c)}),nt(e,a),Ot()}function Zr(e,t=500){let s=null;const n=(...n)=>{null!==s&&clearTimeout(s),s=setTimeout(()=>{e(...n)},t)};return n.destroy=()=>{null!==s&&(clearTimeout(s),s=null)},n}function Hr(e,t){return e===t||e.contains(t)}function Yr(e){return e?.ownerDocument??document}var Xr=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Jr=Xr.join(","),Qr="undefined"==typeof Element,ei=Qr?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ti=!Qr&&Element.prototype.getRootNode?function(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},si=function(e,t){var s;void 0===t&&(t=!0);var n=null==e||null===(s=e.getAttribute)||void 0===s?void 0:s.call(e,"inert");return""===n||"true"===n||t&&e&&si(e.parentNode)},ni=function(e,t,s){if(si(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(Jr));return t&&ei.call(e,Jr)&&n.unshift(e),n=n.filter(s)},ri=function(e,t,s){for(var n=[],r=Array.from(e);r.length;){var i=r.shift();if(!si(i,!1))if("SLOT"===i.tagName){var o=i.assignedElements(),a=o.length?o:i.children,l=ri(a,!0,s);s.flatten?n.push.apply(n,l):n.push({scopeParent:i,candidates:l})}else{ei.call(i,Jr)&&s.filter(i)&&(t||!e.includes(i))&&n.push(i);var c=i.shadowRoot||"function"==typeof s.getShadowRoot&&s.getShadowRoot(i),u=!si(c,!1)&&(!s.shadowRootFilter||s.shadowRootFilter(i));if(c&&u){var d=ri(!0===c?i.children:c.children,!0,s);s.flatten?n.push.apply(n,d):n.push({scopeParent:i,candidates:d})}else r.unshift.apply(r,i.children)}}return n},ii=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},oi=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,s=null==e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===s||"true"===s}(e))&&!ii(e)?0:e.tabIndex},ai=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},li=function(e){return"INPUT"===e.tagName},ci=function(e){return function(e){return li(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,s=e.form||ti(e),n=function(e){return s.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=n(window.CSS.escape(e.name));else try{t=n(e.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var r=function(e,t){for(var s=0;s<e.length;s++)if(e[s].checked&&e[s].form===t)return e[s]}(t,e.form);return!r||r===e}(e)},ui=function(e){var t=e.getBoundingClientRect(),s=t.width,n=t.height;return 0===s&&0===n},di=function(e,t){var s=t.displayCheck,n=t.getShadowRoot;if("full-native"===s&&"checkVisibility"in e)return!e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});if("hidden"===getComputedStyle(e).visibility)return!0;var r=ei.call(e,"details>summary:first-of-type")?e.parentElement:e;if(ei.call(r,"details:not([open]) *"))return!0;if(s&&"full"!==s&&"full-native"!==s&&"legacy-full"!==s){if("non-zero-area"===s)return ui(e)}else{if("function"==typeof n){for(var i=e;e;){var o=e.parentElement,a=ti(e);if(o&&!o.shadowRoot&&!0===n(o))return ui(e);e=e.assignedSlot?e.assignedSlot:o||a===e.ownerDocument?o:a.host}e=i}if(function(e){var t,s,n,r,i=e&&ti(e),o=null===(t=i)||void 0===t?void 0:t.host,a=!1;if(i&&i!==e)for(a=!!(null!==(s=o)&&void 0!==s&&null!==(n=s.ownerDocument)&&void 0!==n&&n.contains(o)||null!=e&&null!==(r=e.ownerDocument)&&void 0!==r&&r.contains(e));!a&&o;){var l,c,u;a=!(null===(c=o=null===(l=i=ti(o))||void 0===l?void 0:l.host)||void 0===c||null===(u=c.ownerDocument)||void 0===u||!u.contains(o))}return a}(e))return!e.getClientRects().length;if("legacy-full"!==s)return!0}return!1},pi=function(e,t){return!(t.disabled||si(t)||function(e){return li(e)&&"hidden"===e.type}(t)||di(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some(function(e){return"SUMMARY"===e.tagName})}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var s=0;s<t.children.length;s++){var n=t.children.item(s);if("LEGEND"===n.tagName)return!!ei.call(t,"fieldset[disabled] *")||!n.contains(e)}return!0}t=t.parentElement}return!1}(t))},vi=function(e,t){return!(ci(t)||oi(t)<0||!pi(e,t))},hi=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},fi=function(e){var t=[],s=[];return e.forEach(function(e,n){var r=!!e.scopeParent,i=r?e.scopeParent:e,o=function(e,t){var s=oi(e);return s<0&&t&&!ii(e)?0:s}(i,r),a=r?fi(e.candidates):i;0===o?r?t.push.apply(t,a):t.push(i):s.push({documentOrder:n,tabIndex:o,item:e,isScope:r,content:a})}),s.sort(ai).reduce(function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e},[]).concat(t)},gi=Xr.concat("iframe").join(",");const mi="data-context-menu-trigger",yi="data-context-menu-content";Cr({component:"menu",parts:["trigger","content","sub-trigger","item","group","group-heading","checkbox-group","checkbox-item","radio-group","radio-item","separator","sub-content","arrow"]}),globalThis.bitsDismissableLayers??(globalThis.bitsDismissableLayers=new Map);z=new WeakMap,R=new WeakMap,V=new WeakMap,U=new WeakMap,G=new WeakMap,K=new WeakMap,q=new WeakMap,Z=new WeakMap,H=new WeakMap,Y=new WeakSet,X=function(){return sr(ot(qe(this,K),"pointerdown",sr(qe(this,ee),qe(this,se)),{capture:!0}),ot(qe(this,K),"pointerdown",sr(qe(this,te),qe(this,Q))),ot(qe(this,K),"focusin",qe(this,H)))},J=new WeakMap,Q=new WeakMap,ee=new WeakMap,te=new WeakMap,se=new WeakMap,ne=new WeakMap,re=new WeakMap,ie=function(){return Object.values(qe(this,V)).some(Boolean)},oe=new WeakMap,ae=new WeakMap;let bi=class e{constructor(e){Ze(this,Y),Ge(this,"opts"),Ze(this,z),Ze(this,R),Ze(this,V,{pointerdown:!1}),Ze(this,U,!1),Ze(this,G,!1),Ze(this,K),Ze(this,q),Ze(this,Z,Dr),Ze(this,H,e=>{e.defaultPrevented||this.opts.ref.current&&fr(()=>{this.opts.ref.current&&!qe(this,ne).call(this,e.target)&&e.target&&!qe(this,G)&&qe(this,q).current?.(e)})}),Ze(this,J,e=>{let t=e;t.defaultPrevented&&(t=wi(e)),qe(this,z).current(e)}),Ze(this,Q,Zr(e=>{if(!this.opts.ref.current)return void qe(this,Z).call(this);const t=this.opts.isValidEvent.current(e,this.opts.ref.current)||function(e,t){const s=e.target;if(n=s,!(n instanceof Element||n instanceof SVGElement))return!1;var n;const r=Boolean(s.closest(`[${mi}]`));if("button"in e&&e.button>0&&!r)return!1;if("button"in e&&0===e.button&&r)return!0;const i=Boolean(t.closest(`[${yi}]`));if(r&&i)return!1;const o=Yr(s).documentElement.contains(s)&&!Hr(t,s)&&function(e,t){const{clientX:s,clientY:n}=e,r=t.getBoundingClientRect();return s<r.left||s>r.right||n<r.top||n>r.bottom}(e,t);return o}(e,this.opts.ref.current);if(!qe(this,U)||Ye(this,Y,ie).call(this)||!t)return void qe(this,Z).call(this);let s=e;s.defaultPrevented&&(s=wi(s)),"close"===qe(this,R).current||"defer-otherwise-close"===qe(this,R).current?"touch"===e.pointerType?(qe(this,Z).call(this),He(this,Z,ot(qe(this,K),"click",qe(this,J),{once:!0}))):qe(this,z).current(s):qe(this,Z).call(this)},10)),Ze(this,ee,e=>{qe(this,V)[e.type]=!0}),Ze(this,te,e=>{qe(this,V)[e.type]=!1}),Ze(this,se,()=>{this.opts.ref.current&&He(this,U,function(e){const t=[...globalThis.bitsDismissableLayers],s=function(e=[...globalThis.bitsDismissableLayers]){return e.findLast(([e,{current:t}])=>"close"===t||"ignore"===t)}(t);if(s)return s[0].opts.ref.current===e;const[n]=t[0];return n.opts.ref.current===e}(this.opts.ref.current))}),Ze(this,ne,e=>!!this.opts.ref.current&&Hr(this.opts.ref.current,e)),Ze(this,re,Zr(()=>{for(const e in qe(this,V))qe(this,V)[e]=!1;He(this,U,!1)},20)),Ze(this,oe,()=>{He(this,G,!0)}),Ze(this,ae,()=>{He(this,G,!1)}),Ge(this,"props",{onfocuscapture:qe(this,oe),onblurcapture:qe(this,ae)}),this.opts=e,He(this,R,e.interactOutsideBehavior),He(this,z,e.onInteractOutside),He(this,q,e.onFocusOutside),It(()=>{He(this,K,Yr(this.opts.ref.current))});let t=Dr;const s=()=>{qe(this,re).call(this),globalThis.bitsDismissableLayers.delete(this),qe(this,Q).destroy(),t()};vr([()=>this.opts.enabled.current,()=>this.opts.ref.current],()=>{if(this.opts.enabled.current&&this.opts.ref.current)return setTimeout(()=>{this.opts.ref.current&&(globalThis.bitsDismissableLayers.set(this,qe(this,R)),t(),t=Ye(this,Y,X).call(this))},1),s}),hr(()=>{qe(this,re).destroy(),globalThis.bitsDismissableLayers.delete(this),qe(this,Q).destroy(),qe(this,Z).call(this),t()})}static create(t){return new e(t)}};function wi(e){const t=e.currentTarget,s=e.target;let n;n=e instanceof PointerEvent?new PointerEvent(e.type,e):new PointerEvent("pointerdown",e);let r=!1;return new Proxy(n,{get:(n,i)=>"currentTarget"===i?t:"target"===i?s:"preventDefault"===i?()=>{r=!0,"function"==typeof n.preventDefault&&n.preventDefault()}:"defaultPrevented"===i?r:i in n?n[i]:e[i]})}globalThis.bitsEscapeLayers??(globalThis.bitsEscapeLayers=new Map);le=new WeakMap,ce=new WeakMap;let ki=class e{constructor(e){Ge(this,"opts"),Ge(this,"domContext"),Ze(this,le,()=>ot(this.domContext.getDocument(),"keydown",qe(this,ce),{passive:!1})),Ze(this,ce,e=>{if("Escape"!==e.key||!function(e){const t=[...globalThis.bitsEscapeLayers],s=t.findLast(([e,{current:t}])=>"close"===t||"ignore"===t);if(s)return s[0]===e;const[n]=t[0];return n===e}(this))return;const t=new KeyboardEvent(e.type,e);e.preventDefault();const s=this.opts.escapeKeydownBehavior.current;"close"!==s&&"defer-otherwise-close"!==s||this.opts.onEscapeKeydown.current(t)}),this.opts=e,this.domContext=new br(this.opts.ref);let t=Dr;vr(()=>e.enabled.current,s=>(s&&(globalThis.bitsEscapeLayers.set(this,e.escapeKeydownBehavior),t=qe(this,le).call(this)),()=>{t(),globalThis.bitsEscapeLayers.delete(this)}))}static create(t){return new e(t)}};const $i=class e{constructor(){Ze(this,ue,function(e){let t=Tt(Bt(e));return{[Fn]:!0,[Wn]:!0,get current(){return St(t)},set current(e){Et(t,e,!0)}}}([])),Ze(this,de,new WeakMap),Ze(this,pe,new WeakMap)}static getInstance(){return this.instance||(this.instance=new e),this.instance}register(e){const t=this.getActive();t&&t!==e&&t.pause();const s=document.activeElement;s&&s!==document.body&&qe(this,pe).set(e,s),qe(this,ue).current=qe(this,ue).current.filter(t=>t!==e),qe(this,ue).current.unshift(e)}unregister(e){qe(this,ue).current=qe(this,ue).current.filter(t=>t!==e);const t=this.getActive();t&&t.resume()}getActive(){return qe(this,ue).current[0]}setFocusMemory(e,t){qe(this,de).set(e,t)}getFocusMemory(e){return qe(this,de).get(e)}isActiveScope(e){return this.getActive()===e}setPreFocusMemory(e,t){qe(this,pe).set(e,t)}getPreFocusMemory(e){return qe(this,pe).get(e)}clearPreFocusMemory(e){qe(this,pe).delete(e)}};ue=new WeakMap,de=new WeakMap,pe=new WeakMap,Ge($i,"instance");let Ci=$i;ve=new WeakMap,he=new WeakMap,fe=new WeakMap,ge=new WeakMap,me=new WeakMap,ye=new WeakSet,be=function(){for(const e of qe(this,ge))e();He(this,ge,[])},we=function(){if(!qe(this,he))return;const e=new CustomEvent("focusScope.onOpenAutoFocus",{bubbles:!1,cancelable:!0});qe(this,me).onOpenAutoFocus.current(e),e.defaultPrevented||requestAnimationFrame(()=>{if(!qe(this,he))return;const e=Ye(this,ye,Ae).call(this);e?(e.focus(),qe(this,fe).setFocusMemory(this,e)):qe(this,he).focus()})},ke=function(){const e=new CustomEvent("focusScope.onCloseAutoFocus",{bubbles:!1,cancelable:!0});if(qe(this,me).onCloseAutoFocus.current?.(e),!e.defaultPrevented){const e=qe(this,fe).getPreFocusMemory(this);if(e&&document.contains(e))try{e.focus()}catch{document.body.focus()}}},$e=function(){if(!qe(this,he)||!qe(this,me).trap.current)return;const e=qe(this,he),t=e.ownerDocument;qe(this,ge).push(ot(t,"focusin",t=>{if(qe(this,ve)||!qe(this,fe).isActiveScope(this))return;const s=t.target;if(!s)return;if(e.contains(s))qe(this,fe).setFocusMemory(this,s);else{const s=qe(this,fe).getFocusMemory(this);if(s&&e.contains(s)&&function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==ei.call(e,gi)&&pi(t,e)}(s))t.preventDefault(),s.focus();else{const t=Ye(this,ye,Ae).call(this),s=Ye(this,ye,Le).call(this)[0];(t||s||e).focus()}}},{capture:!0}),ot(e,"keydown",e=>{if(!qe(this,me).loop||qe(this,ve)||"Tab"!==e.key)return;if(!qe(this,fe).isActiveScope(this))return;const s=Ye(this,ye,Ce).call(this);if(s.length<2)return;const n=s[0],r=s[s.length-1];e.shiftKey||t.activeElement!==r?e.shiftKey&&t.activeElement===n&&(e.preventDefault(),r.focus()):(e.preventDefault(),n.focus())}));const s=new MutationObserver(()=>{const t=qe(this,fe).getFocusMemory(this);if(t&&!e.contains(t)){const t=Ye(this,ye,Ae).call(this),s=Ye(this,ye,Le).call(this)[0],n=t||s;n?(n.focus(),qe(this,fe).setFocusMemory(this,n)):e.focus()}});s.observe(e,{childList:!0,subtree:!0}),qe(this,ge).push(()=>s.disconnect())},Ce=function(){return qe(this,he)?(e=qe(this,he),s=(t=(t={includeContainer:!1,getShadowRoot:!0})||{}).getShadowRoot?ri([e],t.includeContainer,{filter:vi.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:hi}):ni(e,t.includeContainer,vi.bind(null,t)),fi(s)):[];var e,t,s},Ae=function(){return Ye(this,ye,Ce).call(this)[0]||null},Le=function(){return qe(this,he)?(e=qe(this,he),(t=(t={includeContainer:!1,getShadowRoot:!0})||{}).getShadowRoot?ri([e],t.includeContainer,{filter:pi.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):ni(e,t.includeContainer,pi.bind(null,t))):[];var e,t};let Ai=class e{constructor(e){Ze(this,ye),Ze(this,ve,!1),Ze(this,he,null),Ze(this,fe,Ci.getInstance()),Ze(this,ge,[]),Ze(this,me),He(this,me,e)}get paused(){return qe(this,ve)}pause(){He(this,ve,!0)}resume(){He(this,ve,!1)}mount(e){qe(this,he)&&this.unmount(),He(this,he,e),qe(this,fe).register(this),Ye(this,ye,$e).call(this),Ye(this,ye,we).call(this)}unmount(){qe(this,he)&&(Ye(this,ye,be).call(this),Ye(this,ye,ke).call(this),qe(this,fe).unregister(this),qe(this,fe).clearPreFocusMemory(this),He(this,he,null))}static use(t){let s=null;return vr([()=>t.ref.current,()=>t.enabled.current],([n,r])=>{n&&r?(s||(s=new e(t)),s.mount(n)):s&&(s.unmount(),s=null)}),hr(()=>{s?.unmount()}),{get props(){return{tabindex:-1}}}}};globalThis.bitsTextSelectionLayers??(globalThis.bitsTextSelectionLayers=new Map);xe=new WeakMap,_e=new WeakSet,Me=function(){return sr(ot(this.domContext.getDocument(),"pointerdown",qe(this,De)),ot(this.domContext.getDocument(),"pointerup",In(qe(this,Se),this.opts.onPointerUp.current)))},De=new WeakMap,Se=new WeakMap;let Li=class e{constructor(e){Ze(this,_e),Ge(this,"opts"),Ge(this,"domContext"),Ze(this,xe,Dr),Ze(this,De,e=>{const t=this.opts.ref.current,s=e.target;xr(t)&&xr(s)&&this.opts.enabled.current&&function(e){const t=[...globalThis.bitsTextSelectionLayers];if(!t.length)return!1;const s=t.at(-1);return!!s&&s[0]===e}(this)&&function(e,t){if(!e||!t)return!1;if(!gr(e)||!gr(t))return!1;const s=t.getRootNode?.();if(e===t)return!0;if(e.contains(t))return!0;if(s&&mr(s)){let s=t;for(;s;){if(e===s)return!0;s=s.parentNode||s.host}}return!1}(t,s)&&(this.opts.onPointerDown.current(e),e.defaultPrevented||He(this,xe,function(e,t){const s=xi(t),n=xi(e);return _i(t,"none"),_i(e,"text"),()=>{_i(t,s),_i(e,n)}}(t,this.domContext.getDocument().body)))}),Ze(this,Se,()=>{qe(this,xe).call(this),He(this,xe,Dr)}),this.opts=e,this.domContext=new br(e.ref);let t=Dr;vr(()=>this.opts.enabled.current,e=>(e&&(globalThis.bitsTextSelectionLayers.set(this,this.opts.enabled),t(),t=Ye(this,_e,Me).call(this)),()=>{t(),qe(this,Se).call(this),globalThis.bitsTextSelectionLayers.delete(this)}))}static create(t){return new e(t)}};const xi=e=>e.style.userSelect||e.style.webkitUserSelect;function _i(e,t){e.style.userSelect=t,e.style.webkitUserSelect=t}globalThis.bitsIdCounter??(globalThis.bitsIdCounter={current:0});Te=new WeakMap,je=new WeakMap,Pe=new WeakMap,Ee=new WeakMap,Oe=new WeakSet,Fe=function(){He(this,je,qe(this,je)-1),qe(this,Ee)&&qe(this,je)<=0&&(qe(this,Ee).call(this),Et(qe(this,Pe),void 0),He(this,Ee,void 0))};const Mi=new ur;let Di=Tt(null),Si=null,Ti=null,ji=!1;const Pi=Bn(()=>{for(const e of Mi.values())if(e)return!0;return!1});let Ei=null;const Oi=new class{constructor(e){Ze(this,Oe),Ze(this,Te),Ze(this,je,0),Ze(this,Pe,Tt()),Ze(this,Ee),He(this,Te,e)}get(...e){return He(this,je,qe(this,je)+1),void 0===St(qe(this,Pe))&&He(this,Ee,Xt(()=>{Et(qe(this,Pe),qe(this,Te).call(this,...e),!0)})),It(()=>()=>{Ye(this,Oe,Fe).call(this)}),St(qe(this,Pe))}}(()=>{function e(){null!==Ti&&(window.clearTimeout(Ti),Ti=null)}function t(){null!==St(Di)||0!==Mi.size||ji||Et(Di,document.body.getAttribute("style"),!0)}return vr(()=>Pi.current,()=>{if(!Pi.current)return;t(),ji=!1;const e=getComputedStyle(document.body),s=window.innerWidth-document.documentElement.clientWidth,n=Number.parseInt(e.paddingRight??"0",10)+s,r=Number.parseInt(e.marginRight??"0",10);s>0&&(document.body.style.paddingRight=`${n}px`,document.body.style.marginRight=`${r}px`,document.body.style.setProperty("--scrollbar-width",`${s}px`),document.body.style.overflow="hidden"),Lr&&(Si=ot(document,"touchmove",e=>{e.target===document.documentElement&&(e.touches.length>1||e.preventDefault())},{passive:!1})),fr(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})}),hr(()=>()=>{Si?.()}),{get lockMap(){return Mi},resetBodyStyle:function(){document.body.setAttribute("style",St(Di)??""),document.body.style.removeProperty("--scrollbar-width"),Lr&&Si?.(),Et(Di,null)},scheduleCleanupIfNoNewLocks:function(t,s){e(),ji=!0,Ei=Date.now();const n=Ei,r=null===t?24:t;Ti=window.setTimeout(()=>{Ti=null,Ei===n&&(Wi(Mi)?ji=!1:(ji=!1,s()))},r)},cancelPendingCleanup:e,ensureInitialStyleCaptured:t}});class Fi{constructor(e,t=()=>null){Ze(this,We,function(e="bits"){return globalThis.bitsIdCounter.current++,`${e}-${globalThis.bitsIdCounter.current}`}()),Ze(this,Be),Ze(this,Ie,()=>null),Ze(this,Ne),Ge(this,"locked"),He(this,Be,e),He(this,Ie,t),He(this,Ne,Oi.get()),qe(this,Ne)&&(qe(this,Ne).cancelPendingCleanup(),qe(this,Ne).ensureInitialStyleCaptured(),qe(this,Ne).lockMap.set(qe(this,We),qe(this,Be)??!1),this.locked=Bn(()=>qe(this,Ne).lockMap.get(qe(this,We))??!1,e=>qe(this,Ne).lockMap.set(qe(this,We),e)),hr(()=>{if(qe(this,Ne).lockMap.delete(qe(this,We)),Wi(qe(this,Ne).lockMap))return;const e=qe(this,Ie).call(this);qe(this,Ne).scheduleCleanupIfNoNewLocks(e,()=>{qe(this,Ne).resetBodyStyle()})}))}}function Wi(e){for(const[t,s]of e)if(s)return!0;return!1}function Bi(e,t){xt(t,!0);let s=ds(t,"preventScroll",3,!0),n=ds(t,"restoreScrollDelay",3,null);s()&&new Fi(s(),()=>n()),Ot()}We=new WeakMap,Be=new WeakMap,Ie=new WeakMap,Ne=new WeakMap;var Ii=tt("<div><!></div>");function Ni(e,t){const s=at();xt(t,!0);let n=ds(t,"id",19,()=>Sr(s)),r=ds(t,"forceMount",3,!1),i=ds(t,"ref",15,null),o=ps(t,["$$slots","$$events","$$legacy","id","forceMount","child","children","ref"]);const a=Br.create({id:Bn(()=>n()),ref:Bn(()=>i(),e=>i(e))}),l=Pt(()=>ar(o,a.props));var c=rt(),u=Wt(c),d=e=>{var s=rt(),n=Wt(s),r=e=>{var s=rt(),n=Wt(s);{let e=Pt(()=>({props:ar(St(l)),...a.snippetProps}));Is(n,()=>t.child,()=>St(e))}nt(e,s)},i=e=>{var s=Ii();cs(s,e=>({...e}),[()=>ar(St(l))]);var n=_t(s);Is(n,()=>t.children??Ht,()=>a.snippetProps),Mt(s),nt(e,s)};ts(n,e=>{t.child?e(r):e(i,!1)}),nt(e,s)};ts(u,e=>{(a.shouldRender||r())&&e(d)}),nt(e,c),Ot()}var zi=tt("<div><!></div>");function Ri(e,t){const s=at();xt(t,!0);let n=ds(t,"id",19,()=>Sr(s)),r=ds(t,"ref",15,null),i=ps(t,["$$slots","$$events","$$legacy","id","children","child","ref"]);const o=Fr.create({id:Bn(()=>n()),ref:Bn(()=>r(),e=>r(e))}),a=Pt(()=>ar(i,o.props));var l=rt(),c=Wt(l),u=e=>{var s=rt(),n=Wt(s);Is(n,()=>t.child,()=>({props:St(a)})),nt(e,s)},d=e=>{var s=zi();cs(s,()=>({...St(a)}));var n=_t(s);Is(n,()=>t.children??Ht),Mt(s),nt(e,s)};ts(c,e=>{t.child?e(u):e(d,!1)}),nt(e,l),Ot()}function Vi(e,t){xt(t,!0);let s=ds(t,"open",15,!1),n=ds(t,"onOpenChange",3,Dr),r=ds(t,"onOpenChangeComplete",3,Dr);Pr.create({variant:Bn(()=>"dialog"),open:Bn(()=>s(),e=>{s(e),n()(e)}),onOpenChangeComplete:Bn(()=>r())});var i=rt(),o=Wt(i);Is(o,()=>t.children??Ht),nt(e,i),Ot()}var Ui=tt("<button><!></button>");function Gi(e,t){const s=at();xt(t,!0);let n=ds(t,"id",19,()=>Sr(s)),r=ds(t,"ref",15,null),i=ds(t,"disabled",3,!1),o=ps(t,["$$slots","$$events","$$legacy","children","child","id","ref","disabled"]);const a=Er.create({variant:Bn(()=>"close"),id:Bn(()=>n()),ref:Bn(()=>r(),e=>r(e)),disabled:Bn(()=>Boolean(i()))}),l=Pt(()=>ar(o,a.props));var c=rt(),u=Wt(c),d=e=>{var s=rt(),n=Wt(s);Is(n,()=>t.child,()=>({props:St(l)})),nt(e,s)},p=e=>{var s=Ui();cs(s,()=>({...St(l)}));var n=_t(s);Is(n,()=>t.children??Ht),Mt(s),nt(e,s)};ts(u,e=>{t.child?e(d):e(p,!1)}),nt(e,c),Ot()}var Ki=tt("<!> <!>",1),qi=tt("<!> <div><!></div>",1);function Zi(e,t){const s=at();xt(t,!0);let n=ds(t,"id",19,()=>Sr(s)),r=ds(t,"ref",15,null),i=ds(t,"forceMount",3,!1),o=ds(t,"onCloseAutoFocus",3,Dr),a=ds(t,"onOpenAutoFocus",3,Dr),l=ds(t,"onEscapeKeydown",3,Dr),c=ds(t,"onInteractOutside",3,Dr),u=ds(t,"trapFocus",3,!0),d=ds(t,"preventScroll",3,!0),p=ds(t,"restoreScrollDelay",3,null),v=ps(t,["$$slots","$$events","$$legacy","id","children","child","ref","forceMount","onCloseAutoFocus","onOpenAutoFocus","onEscapeKeydown","onInteractOutside","trapFocus","preventScroll","restoreScrollDelay"]);const h=Wr.create({id:Bn(()=>n()),ref:Bn(()=>r(),e=>r(e))}),f=Pt(()=>ar(v,h.props));var g=rt(),m=Wt(g),y=e=>{{const s=(e,s)=>{let n=()=>s?.().props;!function(e,t){xt(t,!0);let s=ds(t,"escapeKeydownBehavior",3,"close"),n=ds(t,"onEscapeKeydown",3,Dr);ki.create({escapeKeydownBehavior:Bn(()=>s()),onEscapeKeydown:Bn(()=>n()),enabled:Bn(()=>t.enabled),ref:t.ref});var r=rt(),i=Wt(r);Is(i,()=>t.children??Ht),nt(e,r),Ot()}(e,vs(()=>St(f),{get enabled(){return h.root.opts.open.current},get ref(){return h.opts.ref},onEscapeKeydown:e=>{l()(e),e.defaultPrevented||h.root.handleClose()},children:(e,s)=>{!function(e,t){xt(t,!0);let s=ds(t,"interactOutsideBehavior",3,"close"),n=ds(t,"onInteractOutside",3,Dr),r=ds(t,"onFocusOutside",3,Dr),i=ds(t,"isValidEvent",3,()=>!1);const o=bi.create({id:Bn(()=>t.id),interactOutsideBehavior:Bn(()=>s()),onInteractOutside:Bn(()=>n()),enabled:Bn(()=>t.enabled),onFocusOutside:Bn(()=>r()),isValidEvent:Bn(()=>i()),ref:t.ref});var a=rt(),l=Wt(a);Is(l,()=>t.children??Ht,()=>({props:o.props})),nt(e,a),Ot()}(e,vs(()=>St(f),{get ref(){return h.opts.ref},get enabled(){return h.root.opts.open.current},onInteractOutside:e=>{c()(e),e.defaultPrevented||h.root.handleClose()},children:(e,s)=>{!function(e,t){xt(t,!0);let s=ds(t,"preventOverflowTextSelection",3,!0),n=ds(t,"onPointerDown",3,Dr),r=ds(t,"onPointerUp",3,Dr);Li.create({id:Bn(()=>t.id),onPointerDown:Bn(()=>n()),onPointerUp:Bn(()=>r()),enabled:Bn(()=>t.enabled&&s()),ref:t.ref});var i=rt(),o=Wt(i);Is(o,()=>t.children??Ht),nt(e,i),Ot()}(e,vs(()=>St(f),{get ref(){return h.opts.ref},get enabled(){return h.root.opts.open.current},children:(e,s)=>{var r=rt(),i=Wt(r),o=e=>{var s=Ki(),r=Wt(s),i=e=>{Bi(0,{get preventScroll(){return d()},get restoreScrollDelay(){return p()}})};ts(r,e=>{h.root.opts.open.current&&e(i)});var o=Dt(r,2);{let e=Pt(()=>({props:ar(St(f),n()),...h.snippetProps}));Is(o,()=>t.child,()=>St(e))}nt(e,s)},a=e=>{var s=qi(),r=Wt(s);Bi(0,{get preventScroll(){return d()}});var i=Dt(r,2);cs(i,e=>({...e}),[()=>ar(St(f),n())]);var o=_t(i);Is(o,()=>t.children??Ht),Mt(i),nt(e,s)};ts(i,e=>{t.child?e(o):e(a,!1)}),nt(e,r)},$$slots:{default:!0}}))},$$slots:{default:!0}}))},$$slots:{default:!0}}))};!function(e,t){xt(t,!0);let s=ds(t,"enabled",3,!1),n=ds(t,"trapFocus",3,!1),r=ds(t,"loop",3,!1),i=ds(t,"onCloseAutoFocus",3,Dr),o=ds(t,"onOpenAutoFocus",3,Dr);const a=Ai.use({enabled:Bn(()=>s()),trap:Bn(()=>n()),loop:r(),onCloseAutoFocus:Bn(()=>i()),onOpenAutoFocus:Bn(()=>o()),ref:t.ref});var l=rt(),c=Wt(l);Is(c,()=>t.focusScope??Ht,()=>({props:a.props})),nt(e,l),Ot()}(e,{get ref(){return h.opts.ref},loop:!0,get trapFocus(){return u()},get enabled(){return h.root.opts.open.current},get onOpenAutoFocus(){return a()},get onCloseAutoFocus(){return o()},focusScope:s,$$slots:{focusScope:!0}})}};ts(m,e=>{(h.shouldRender||i())&&e(y)}),nt(e,g),Ot()}var Hi=ut("<svg></svg>");function Yi(e,t){let s=ds(t,"size",3,24),n=ds(t,"color",3,"currentColor"),r=ds(t,"strokeWidth",3,2),i=ds(t,"class",3,""),o=ps(t,["$$slots","$$events","$$legacy","size","color","strokeWidth","class"]);const a=[["line",{x1:"18",y1:"6",x2:"6",y2:"18"}],["line",{x1:"6",y1:"6",x2:"18",y2:"18"}]];var l=Hi();cs(l,()=>({xmlns:"http://www.w3.org/2000/svg",width:s(),height:s(),viewBox:"0 0 24 24",fill:"none",stroke:n(),"stroke-width":r(),"stroke-linecap":"round","stroke-linejoin":"round",class:`lucide-icon lucide-x ${i()}`,...o})),ss(l,21,()=>a,os,(e,t)=>{var s=Pt(()=>Jt(St(t),2));var n=rt();!function(e,t,s,n){let r=vt;vt&&ht();var i=null;vt&&gt.nodeType===mt&&(i=gt,ht());var o=vt?gt:e,a=At,l=new zs(o,!1);ft(()=>{const e=t()||null;var s=bt;return null===e?(l.ensure(null,null),void Xe(!0)):(l.ensure(e,t=>{if(e){if(i=vt?i:document.createElementNS(s,e),Je(i,i),n){vt&&Qe(e)&&i.append(document.createComment(""));var r=vt?wt(i):i.appendChild(kt());vt&&(null===r?$t(!1):Ct(r)),Rs(a),n(i,r),Rs(null)}At.nodes.end=i,t.before(i)}vt&&Ct(t)}),Xe(!0),()=>{e&&Xe(!1)})},yt),Lt(()=>{Xe(!0)}),r&&($t(!0),Ct(o))}(Wt(n),()=>St(s)[0],0,(e,t)=>{cs(e,()=>({...St(s)[1]}))}),nt(e,n)}),Mt(l),nt(e,l)}var Xi=tt('<!> <span class="sr-only">Close</span>',1),Ji=tt("<!> <!>",1),Qi=tt("<!> <!>",1);function eo(e,t){xt(t,!0);let s=ds(t,"class",3,void 0),n=ps(t,["$$slots","$$events","$$legacy","children","class"]);!function(e,t){let s=ps(t,["$$slots","$$events","$$legacy","children"]);var n=rt(),r=Wt(n);Ns(r,()=>qr,(e,n)=>{n(e,vs(()=>s,{children:(e,s)=>{var n=rt(),r=Wt(n),i=e=>{var s=rt(),n=Wt(s);Is(n,()=>t.children),nt(e,s)};ts(r,e=>{t.children&&e(i)}),nt(e,n)},$$slots:{default:!0}}))}),nt(e,n)}(e,{children:(e,r)=>{var i=Qi(),o=Wt(i);!function(e,t){xt(t,!0);let s=ds(t,"class",3,void 0),n=ps(t,["$$slots","$$events","$$legacy","class"]);var r=rt(),i=Wt(r);{let e=Pt(()=>Es("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s()));Ns(i,()=>Ni,(t,s)=>{s(t,vs({get class(){return St(e)}},()=>n))})}nt(e,r),Ot()}(o,{});var a=Dt(o,2);{let e=Pt(()=>Es("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s()));Ns(a,()=>Zi,(s,r)=>{r(s,vs({get class(){return St(e)}},()=>n,{children:(e,s)=>{var n=Ji(),r=Wt(n),i=e=>{var s=rt(),n=Wt(s);Is(n,()=>t.children),nt(e,s)};ts(r,e=>{t.children&&e(i)});var o=Dt(r,2);Ns(o,()=>Gi,(e,t)=>{t(e,{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:(e,t)=>{var s=Xi();Yi(Wt(s),{class:"h-4 w-4"}),Qt(2),nt(e,s)},$$slots:{default:!0}})}),nt(e,n)},$$slots:{default:!0}}))})}nt(e,i)},$$slots:{default:!0}}),Ot()}var to=tt("<div><!></div>");var so=tt("<div><!></div>");var no=tt("<button><!></button>");function ro(e,t){xt(t,!0);let s=ps(t,["$$slots","$$events","$$legacy","variant","size","class","children","disabled"]);It(()=>{});var n=no();cs(n,e=>({class:e,"aria-disabled":t.disabled,disabled:t.disabled,...s}),[()=>Es(mo({variant:t.variant,size:t.size,className:t.class}))]);var r=_t(n);Is(r,()=>t.children),Mt(n),nt(e,n),Ot()}var io=/\s+/g,oo=(...e)=>{const t=[],s=e=>{if(!e&&0!==e&&0n!==e)return;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)s(e[t]);return}const n=typeof e;if("string"===n||"number"===n||"bigint"===n){if("number"===n&&e!=e)return;t.push(String(e))}else if("object"===n){const s=Object.keys(e);for(let n=0,r=s.length;n<r;n++){const r=s[n];e[r]&&t.push(r)}}};for(let r=0,i=e.length;r<i;r++){const t=e[r];null!=t&&s(t)}return t.length>0?"string"==typeof(n=t.join(" "))&&n?n.replace(io," ").trim():n:void 0;var n},ao=e=>!1===e?"false":!0===e?"true":0===e?"0":e,lo=e=>{if(!e||"object"!=typeof e)return!0;for(const t in e)return!1;return!0},co=(e,t)=>{for(let s=0;s<e.length;s++){const n=e[s];Array.isArray(n)?co(n,t):n&&t.push(n)}},uo=(...e)=>{const t=[];co(e,t);const s=[];for(let n=0;n<t.length;n++)t[n]&&s.push(t[n]);return s},po=(e,t)=>{const s={};for(const n in e){const r=e[n];if(n in t){const e=t[n];Array.isArray(r)||Array.isArray(e)?s[n]=uo(e,r):s[n]="object"==typeof r&&"object"==typeof e&&r&&e?po(r,e):e+" "+r}else s[n]=r}for(const n in t)n in e||(s[n]=t[n]);return s},vo={twMerge:!0,twMergeConfig:{}};var ho=function(){let e=null,t={},s=!1;return{get cachedTwMerge(){return e},set cachedTwMerge(t){e=t},get cachedTwMergeConfig(){return t},set cachedTwMergeConfig(e){t=e},get didTwMergeConfigChange(){return s},set didTwMergeConfigChange(e){s=e},reset(){e=null,t={},s=!1}}}(),fo=(e,t)=>{const s=oo(e);return s&&(t?.twMerge??1)?(ho.cachedTwMerge&&!ho.didTwMergeConfigChange||(ho.didTwMergeConfigChange=!1,ho.cachedTwMerge=(n=ho.cachedTwMergeConfig,lo(n)?Os:Fs({...n,extend:{theme:n.theme,classGroups:n.classGroups,conflictingClassGroupModifiers:n.conflictingClassGroupModifiers,conflictingClassGroups:n.conflictingClassGroups,...n.extend}}))),ho.cachedTwMerge(s)||void 0):s;var n},{tv:go}=(e=>{const t=(t,s)=>{const{extend:n=null,slots:r={},variants:i={},compoundVariants:o=[],compoundSlots:a=[],defaultVariants:l={}}=t,c={...vo,...s},u=n?.base?oo(n.base,t?.base):t?.base,d=n?.variants&&!lo(n.variants)?po(i,n.variants):i,p=n?.defaultVariants&&!lo(n.defaultVariants)?{...n.defaultVariants,...l}:l;lo(c.twMergeConfig)||((e,t)=>{if(e===t)return!0;if(!e||!t)return!1;const s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(let r=0;r<s.length;r++){const i=s[r];if(!n.includes(i))return!1;if(e[i]!==t[i])return!1}return!0})(c.twMergeConfig,ho.cachedTwMergeConfig)||(ho.didTwMergeConfigChange=!0,ho.cachedTwMergeConfig=c.twMergeConfig);const v=lo(n?.slots),h=lo(r)?{}:{base:oo(t?.base,v&&n?.base),...r},f=v?h:((e,t)=>{for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)){const n=t[s];e[s]=s in e?oo(e[s],n):n}return e})({...n?.slots},lo(h)?{base:t?.base}:h),g=lo(n?.compoundVariants)?o:uo(n?.compoundVariants,o),m=t=>{if(lo(d)&&lo(r)&&v)return e(u,t?.class,t?.className)(c);if(g&&!Array.isArray(g))throw new TypeError('The "compoundVariants" prop must be an array. Received: '+typeof g);if(a&&!Array.isArray(a))throw new TypeError('The "compoundSlots" prop must be an array. Received: '+typeof a);const s=(e,s=d,n=null,r=null)=>{const i=s[e];if(!i||lo(i))return null;const o=r?.[e]??t?.[e];if(null===o)return null;const a=ao(o);if("object"==typeof a)return null;const l=p?.[e];return i[(null!=a?a:ao(l))||"false"]},n=(e,t)=>{if(!d||"object"!=typeof d)return null;const n=[];for(const r in d){const i=s(r,d,e,t),o="base"===e&&"string"==typeof i?i:i&&i[e];o&&n.push(o)}return n},i={};for(const e in t){const s=t[e];void 0!==s&&(i[e]=s)}const o=(e,s)=>{const n="object"==typeof t?.[e]?{[e]:t[e]?.initial}:{};return{...p,...i,...n,...s}},l=(e=[],t)=>{const s=[],n=e.length;for(let r=0;r<n;r++){const{class:n,className:i,...a}=e[r];let l=!0;const c=o(null,t);for(const e in a){const t=a[e],s=c[e];if(Array.isArray(t)){if(!t.includes(s)){l=!1;break}}else{if(!(null!=t&&!1!==t||null!=s&&!1!==s))continue;if(s!==t){l=!1;break}}}l&&(n&&s.push(n),i&&s.push(i))}return s},h=t=>{const s=l(g,t);if(!Array.isArray(s))return s;const n={},r=e;for(let e=0;e<s.length;e++){const t=s[e];if("string"==typeof t)n.base=r(n.base,t)(c);else if("object"==typeof t)for(const e in t)n[e]=r(n[e],t[e])(c)}return n},m=e=>{if(a.length<1)return null;const t={},s=o(null,e);for(let n=0;n<a.length;n++){const{slots:e=[],class:r,className:i,...o}=a[n];if(!lo(o)){let e=!0;for(const t in o){const n=s[t],r=o[t];if(void 0===n||(Array.isArray(r)?!r.includes(n):r!==n)){e=!1;break}}if(!e)continue}for(let s=0;s<e.length;s++){const n=e[s];t[n]||(t[n]=[]),t[n].push([r,i])}}return t};if(!lo(r)||!v){const t={};if("object"==typeof f&&!lo(f)){const s=e;for(const e in f)t[e]=t=>{const r=h(t),i=m(t);return s(f[e],n(e,t),r?r[e]:void 0,i?i[e]:void 0,t?.class,t?.className)(c)}}return t}return e(u,(()=>{if(!d)return null;const e=Object.keys(d),t=[];for(let n=0;n<e.length;n++){const r=s(e[n],d);r&&t.push(r)}return t})(),l(g),t?.class,t?.className)(c)};return m.variantKeys=(()=>{if(d&&"object"==typeof d)return Object.keys(d)})(),m.extend=n,m.base=u,m.slots=f,m.variants=d,m.defaultVariants=p,m.compoundSlots=a,m.compoundVariants=g,m};return{tv:t,createTV:e=>(s,n)=>t(s,n?po(e,n):e)}})((...e)=>t=>fo(e,t));const mo=go({base:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 focus-visible:ring-offset-2",variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}});var yo=tt("<!> <!>",1),bo=tt('<div class="error-message svelte-vv5wyp"> <button class="retry-button"> </button></div>'),wo=tt('<div class="success-message svelte-vv5wyp"> </div>'),ko=tt("<option> </option>"),$o=tt("<option> </option>"),Co=tt("<option> </option>"),Ao=tt("<option> </option>"),Lo=tt('<div class="form-row svelte-vv5wyp"><div class="form-group svelte-vv5wyp"><label for="lesson-category" class="svelte-vv5wyp"> </label> <select id="lesson-category" class="svelte-vv5wyp"><option> </option><!></select></div> <div class="form-group svelte-vv5wyp"><label for="lesson-part-of-speech" class="svelte-vv5wyp"> </label> <select id="lesson-part-of-speech" class="svelte-vv5wyp"><option> </option><!></select></div></div>'),xo=tt('<div class="form-group svelte-vv5wyp"><label for="lesson-concept-type" class="svelte-vv5wyp"> </label> <input id="lesson-concept-type" type="text" class="svelte-vv5wyp"/></div>'),_o=tt('<div class="form-group checkbox-group svelte-vv5wyp"><label class="svelte-vv5wyp"><input type="checkbox" class="svelte-vv5wyp"/> </label></div>'),Mo=tt('<div class="form-group checkbox-group svelte-vv5wyp"><label class="svelte-vv5wyp"><input type="checkbox" class="svelte-vv5wyp"/> </label></div>'),Do=tt("<!> <!>",1),So=tt('<!> <div class="lesson-generator-form svelte-vv5wyp"><!> <!> <div class="form-section svelte-vv5wyp"><h3 class="svelte-vv5wyp"> </h3> <div class="form-group svelte-vv5wyp"><label for="lesson-title" class="svelte-vv5wyp"> </label> <input id="lesson-title" type="text" class="svelte-vv5wyp"/></div> <div class="form-group svelte-vv5wyp"><label for="lesson-description" class="svelte-vv5wyp"> </label> <textarea id="lesson-description" rows="3" class="svelte-vv5wyp"></textarea></div></div> <div class="form-section svelte-vv5wyp"><h3 class="svelte-vv5wyp"> </h3> <div class="form-row svelte-vv5wyp"><div class="form-group svelte-vv5wyp"><label for="lesson-type" class="svelte-vv5wyp"> </label> <select id="lesson-type" class="svelte-vv5wyp"><option> </option><!></select></div> <div class="form-group svelte-vv5wyp"><label for="lesson-difficulty" class="svelte-vv5wyp"> </label> <select id="lesson-difficulty" class="svelte-vv5wyp"><option> </option><!></select></div></div> <!> <!> <div class="form-group svelte-vv5wyp"><label for="lesson-limit" class="svelte-vv5wyp"> </label> <select id="lesson-limit" class="svelte-vv5wyp"><option> </option><option> </option><option selected> </option><option> </option><option> </option></select></div></div> <div class="form-section svelte-vv5wyp"><h3 class="svelte-vv5wyp"> </h3> <div class="form-row svelte-vv5wyp"><div class="form-group checkbox-group svelte-vv5wyp"><label class="svelte-vv5wyp"><input type="checkbox" class="svelte-vv5wyp"/> </label></div> <!> <!></div></div></div> <!>',1);function To(e,t){function s(e,t){console.error(`[${t}]`,e)}xt(t,!0);let n=ds(t,"isOpen",3,!1),r=ds(t,"onClose",3,()=>{}),i=ds(t,"onLessonGenerated",3,()=>{}),o=Tt(!1),a=Tt(null),l=Tt(null),c=Tt(!1),u=Tt(Bt({title:"",description:"",type:"",difficulty:"",category:"",partOfSpeech:"",conceptType:"",limit:10,includePractice:!0,includeComparison:!1,includeReview:!1})),d=Pt(()=>"vocabulary"===St(u).type),p=Pt(()=>"grammar"===St(u).type),v=Pt(()=>"mixed"===St(u).type),h=Pt(()=>hs("lesson.generator.generate_lesson")||"Generate Lesson"),f=Pt(()=>hs("lesson.generator.generating")||"Generating...");function g(){Et(u,{title:"",description:"",type:"",difficulty:"",category:"",partOfSpeech:"",conceptType:"",limit:10,includePractice:!0,includeComparison:!1,includeReview:!1},!0),Et(a,null),Et(l,null),r()()}function m(){return["A1","A2","B1","B2","C1"]}function y(){return["greetings","numbers","family","food","colors","animals","body-parts","clothing","home","nature","transport","technology","time","weather","professions","places","grammar","culture","everyday-phrases"]}function b(){return["noun","verb","adjective","adverb","pronoun","preposition","conjunction","phrase"]}function w(){return["vocabulary","grammar","mixed","conversation","culture"]}!function(e,t){let s=ds(t,"open",7,void 0),n=ds(t,"onOpenChange",3,void 0),r=ps(t,["$$slots","$$events","$$legacy","children","open","onOpenChange"]);var i=rt(),o=Wt(i);Ns(o,()=>Vi,(e,i)=>{i(e,vs({get onOpenChange(){return n()}},()=>r,{get open(){return s()},set open(e){s(e)},children:(e,s)=>{var n=rt(),r=Wt(n),i=e=>{var s=rt(),n=Wt(s);Is(n,()=>t.children),nt(e,s)};ts(r,e=>{t.children&&e(i)}),nt(e,n)},$$slots:{default:!0}}))}),nt(e,i)}(e,{get open(){return n()},onOpenChange:e=>{try{e||g()}catch(t){s(t,"Failed to close lesson generator modal"),Et(c,!0)}},children:(e,t)=>{eo(e,{class:"lesson-generator-modal",children:(e,t)=>{var n=So(),r=Wt(n);!function(e,t){xt(t,!0);let s=ds(t,"class",3,void 0),n=ps(t,["$$slots","$$events","$$legacy","children","class"]);var r=so();cs(r,e=>({class:e,...n}),[()=>Es("flex flex-col space-y-1.5 text-center sm:text-left",s())]);var i=_t(r);Is(i,()=>t.children),Mt(r),nt(e,r),Ot()}(r,{children:(e,t)=>{var s=yo(),n=Wt(s);!function(e,t){xt(t,!0);let s=ds(t,"class",3,void 0),n=ps(t,["$$slots","$$events","$$legacy","children","class"]);var r=rt(),i=Wt(r);{let e=Pt(()=>Es("text-lg font-semibold leading-none tracking-tight",s()));Ns(i,()=>Nr,(s,r)=>{r(s,vs({get class(){return St(e)}},()=>n,{children:(e,s)=>{var n=rt(),r=Wt(n),i=e=>{var s=rt(),n=Wt(s);Is(n,()=>t.children),nt(e,s)};ts(r,e=>{t.children&&e(i)}),nt(e,n)},$$slots:{default:!0}}))})}nt(e,r),Ot()}(n,{children:(e,t)=>{Qt();var s=dt();jt(e=>st(s,e),[()=>hs("lesson.generator.title")]),nt(e,s)},$$slots:{default:!0}}),function(e,t){xt(t,!0);let s=ds(t,"class",3,void 0),n=ps(t,["$$slots","$$events","$$legacy","children","class"]);var r=rt(),i=Wt(r);{let e=Pt(()=>Es("text-sm text-muted-foreground",s()));Ns(i,()=>Ri,(s,r)=>{r(s,vs({get class(){return St(e)}},()=>n,{children:(e,s)=>{var n=rt(),r=Wt(n),i=e=>{var s=rt(),n=Wt(s);Is(n,()=>t.children),nt(e,s)};ts(r,e=>{t.children&&e(i)}),nt(e,n)},$$slots:{default:!0}}))})}nt(e,r),Ot()}(Dt(n,2),{children:(e,t)=>{Qt();var s=dt();jt(e=>st(s,e),[()=>hs("lesson.generator.description")]),nt(e,s)},$$slots:{default:!0}}),nt(e,s)},$$slots:{default:!0}});var k=Dt(r,2),$=_t(k),C=e=>{var t=bo(),n=_t(t),r=Dt(n);r.__click=()=>{try{Et(a,null),Et(c,!1)}catch(e){s(e,"Failed to clear error state")}};var i=_t(r,!0);Mt(r),Mt(t),jt(e=>{st(n,`‚ö†Ô∏è ${St(a)??""} `),st(i,e)},[()=>hs("common.try_again")]),nt(e,t)};ts($,e=>{St(c)&&e(C)});var A=Dt($,2),L=e=>{var t=wo(),s=_t(t);Mt(t),jt(()=>st(s,`‚úÖ ${St(l)??""}`)),nt(e,t)};ts(A,e=>{St(l)&&e(L)});var x=Dt(A,2),_=_t(x),M=_t(_,!0);Mt(_);var D=Dt(_,2),S=_t(D),T=_t(S,!0);Mt(S);var j=Dt(S,2);ns(j),Mt(D);var P=Dt(D,2),E=_t(P),O=_t(E,!0);Mt(E);var F=Dt(E,2);es(F),Mt(P),Mt(x);var W=Dt(x,2),B=_t(W),I=_t(B,!0);Mt(B);var N=Dt(B,2),z=_t(N),R=_t(z),V=_t(R,!0);Mt(R);var U=Dt(R,2),G=_t(U),K=_t(G,!0);Mt(G),G.value=G.__value="";var q=Dt(G);ss(q,17,w,os,(e,t)=>{var s=ko(),n=_t(s,!0);Mt(s);var r={};jt(e=>{st(n,e),r!==(r=St(t))&&(s.value=(s.__value=St(t))??"")},[()=>function(e){return{vocabulary:hs("lesson.types.vocabulary"),grammar:hs("lesson.types.grammar"),mixed:hs("lesson.types.mixed"),conversation:hs("lesson.types.conversation"),reading:hs("lesson.types.reading"),listening:hs("lesson.types.listening"),writing:hs("lesson.types.writing"),culture:hs("lesson.types.culture"),contextual:hs("lesson.types.contextual")}[e]||e}(St(t))]),nt(e,s)}),Mt(U),Mt(z);var Z=Dt(z,2),H=_t(Z),Y=_t(H,!0);Mt(H);var X=Dt(H,2),J=_t(X),Q=_t(J,!0);Mt(J),J.value=J.__value="";var ee=Dt(J);ss(ee,17,m,os,(e,t)=>{var s=$o(),n=_t(s,!0);Mt(s);var r={};jt(()=>{st(n,St(t)),r!==(r=St(t))&&(s.value=(s.__value=St(t))??"")}),nt(e,s)}),Mt(X),Mt(Z),Mt(N);var te=Dt(N,2),se=e=>{var t=Lo(),s=_t(t),n=_t(s),r=_t(n,!0);Mt(n);var i=Dt(n,2),o=_t(i),a=_t(o,!0);Mt(o),o.value=o.__value="";var l=Dt(o);ss(l,17,y,os,(e,t)=>{var s=Co(),n=_t(s,!0);Mt(s);var r={};jt(e=>{st(n,e),r!==(r=St(t))&&(s.value=(s.__value=St(t))??"")},[()=>function(e){return{greetings:hs("vocabulary.categories.greetings"),numbers:hs("vocabulary.categories.numbers"),family:hs("vocabulary.categories.family"),food:hs("vocabulary.categories.food"),colors:hs("vocabulary.categories.colors"),animals:hs("vocabulary.categories.animals"),body:hs("vocabulary.categories.body_parts"),clothing:hs("vocabulary.categories.clothing"),house:hs("vocabulary.categories.house_home"),nature:hs("vocabulary.categories.nature"),transport:hs("vocabulary.categories.transportation"),technology:hs("vocabulary.categories.technology"),time:hs("vocabulary.categories.time_date"),weather:hs("vocabulary.categories.weather"),professions:hs("vocabulary.categories.professions"),places:hs("vocabulary.categories.places"),grammar:hs("vocabulary.categories.grammar"),culture:hs("vocabulary.categories.culture"),common_phrases:hs("vocabulary.categories.common_phrases"),uncategorized:hs("vocabulary.categories.uncategorized")}[e]||e}(St(t))]),nt(e,s)}),Mt(i),Mt(s);var c=Dt(s,2),d=_t(c),p=_t(d,!0);Mt(d);var v=Dt(d,2),h=_t(v),f=_t(h,!0);Mt(h),h.value=h.__value="";var g=Dt(h);ss(g,17,b,os,(e,t)=>{var s=Ao(),n=_t(s,!0);Mt(s);var r={};jt(e=>{st(n,e),r!==(r=St(t))&&(s.value=(s.__value=St(t))??"")},[()=>function(e){return{noun:hs("vocabulary.parts_of_speech.nouns"),verb:hs("vocabulary.parts_of_speech.verbs"),adjective:hs("vocabulary.parts_of_speech.adjectives"),adverb:hs("vocabulary.parts_of_speech.adverbs"),pronoun:hs("vocabulary.parts_of_speech.pronouns"),preposition:hs("vocabulary.parts_of_speech.prepositions"),conjunction:hs("vocabulary.parts_of_speech.conjunctions"),interjection:hs("vocabulary.parts_of_speech.interjections"),article:hs("vocabulary.parts_of_speech.articles"),number:hs("vocabulary.parts_of_speech.numbers"),phrase:hs("vocabulary.parts_of_speech.phrases")}[e]||e}(St(t))]),nt(e,s)}),Mt(v),Mt(c),Mt(t),jt((e,t,s,n)=>{st(r,e),st(a,t),st(p,s),st(f,n)},[()=>hs("lesson.generator.category"),()=>hs("lesson.generator.any_category"),()=>hs("lesson.generator.part_of_speech"),()=>hs("lesson.generator.any_part_of_speech")]),us(i,()=>St(u).category,e=>St(u).category=e),us(v,()=>St(u).partOfSpeech,e=>St(u).partOfSpeech=e),nt(e,t)};ts(te,e=>{(St(d)||St(v))&&e(se)});var ne=Dt(te,2),re=e=>{var t=xo(),s=_t(t),n=_t(s,!0);Mt(s);var r=Dt(s,2);ns(r),Mt(t),jt((e,t)=>{st(n,e),as(r,"placeholder",t)},[()=>hs("lesson.generator.grammar_concept"),()=>hs("lesson.generator.grammar_concept_placeholder")]),Ws(r,()=>St(u).conceptType,e=>St(u).conceptType=e),nt(e,t)};ts(ne,e=>{St(p)&&e(re)});var ie=Dt(ne,2),oe=_t(ie),ae=_t(oe,!0);Mt(oe);var le=Dt(oe,2),ce=_t(le),ue=_t(ce);Mt(ce),ce.value=ce.__value="5";var de=Dt(ce),pe=_t(de);Mt(de),de.value=de.__value="8";var ve=Dt(de),he=_t(ve);Mt(ve),ve.value=ve.__value="10";var fe=Dt(ve),ge=_t(fe);Mt(fe),fe.value=fe.__value="15";var me=Dt(fe),ye=_t(me);Mt(me),me.value=me.__value="20",Mt(le),Mt(ie),Mt(W);var be=Dt(W,2),we=_t(be),ke=_t(we,!0);Mt(we);var $e=Dt(we,2),Ce=_t($e),Ae=_t(Ce),Le=_t(Ae);ns(Le);var xe=Dt(Le);Mt(Ae),Mt(Ce);var _e=Dt(Ce,2),Me=e=>{var t=_o(),s=_t(t),n=_t(s);ns(n);var r=Dt(n);Mt(s),Mt(t),jt(e=>st(r,` ${e??""}`),[()=>hs("lesson.generator.include_language_comparison")]),Bs(n,()=>St(u).includeComparison,e=>St(u).includeComparison=e),nt(e,t)};ts(_e,e=>{St(p)&&e(Me)});var De=Dt(_e,2),Se=e=>{var t=Mo(),s=_t(t),n=_t(s);ns(n);var r=Dt(n);Mt(s),Mt(t),jt(e=>st(r,` ${e??""}`),[()=>hs("lesson.generator.include_review_section")]),Bs(n,()=>St(u).includeReview,e=>St(u).includeReview=e),nt(e,t)};ts(De,e=>{(St(d)||St(v))&&e(Se)}),Mt($e),Mt(be),Mt(k),function(e,t){xt(t,!0);let s=ds(t,"class",3,void 0),n=ps(t,["$$slots","$$events","$$legacy","children","class"]);var r=to();cs(r,e=>({class:e,...n}),[()=>Es("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s())]);var i=_t(r);Is(i,()=>t.children),Mt(r),nt(e,r),Ot()}(Dt(k,2),{children:(e,t)=>{var n=Do(),r=Wt(n);ro(r,{variant:"secondary",size:"default",class:"",onclick:()=>{try{g()}catch(e){s(e,"Failed to close modal"),Et(c,!0)}},get disabled(){return St(o)},children:(e,t)=>{Qt();var s=dt();jt(e=>st(s,e),[()=>hs("common.cancel")]),nt(e,s)},$$slots:{default:!0}}),ro(Dt(r,2),{variant:"default",size:"default",class:"",onclick:()=>{try{!async function(){try{if(Et(o,!0),Et(a,null),Et(l,null),Et(c,!1),!St(u).type||"string"!=typeof St(u).type)throw new Error(hs("lesson.generator.errors.select_valid_lesson_type"));if(!St(u).difficulty||"string"!=typeof St(u).difficulty)throw new Error(hs("lesson.generator.errors.select_valid_difficulty"));let e;if(St(d)){const t=St(u).category?[St(u).category]:void 0;e=await jn.generateThematicLesson(t||[],St(u).difficulty,{includePractice:St(u).includePractice,includeReview:St(u).includeReview})}else if(St(p))e=await jn.generateGrammarLesson(St(u).conceptType||"basic",St(u).difficulty,{includePractice:St(u).includePractice,includeComparison:St(u).includeComparison});else if(St(v)){const t=St(u).category||"common_phrases";e=await jn.generateMixedLesson(t,St(u).difficulty,{includePractice:St(u).includePractice,includeReview:St(u).includeReview})}else{const t={type:St(u).type,difficulty:St(u).difficulty,criteria:{categories:St(u).category?[St(u).category]:void 0,partOfSpeech:St(u).partOfSpeech,conceptType:St(u).conceptType,limit:St(u).limit},metadata:{includePractice:St(u).includePractice,includeComparison:St(u).includeComparison,includeReview:St(u).includeReview}};e=await jn.generateDynamicLesson(t)}St(u).title&&(e.title=St(u).title),St(u).description&&(e.description=St(u).description),i()(e),Et(l,hs("lesson.generator.success_message"),!0),setTimeout(()=>{g()},2e3)}catch(e){throw s(e,"Failed to generate lesson"),Et(a,e instanceof Error?e.message:hs("lesson.generator.errors.generation_failed"),!0),Et(c,!0),e}finally{Et(o,!1)}}()}catch(e){}},get disabled(){return St(o)},children:(e,t)=>{Qt();var s=dt();jt(()=>st(s,St(o)?St(f):St(h))),nt(e,s)},$$slots:{default:!0}}),nt(e,n)},$$slots:{default:!0}}),jt((e,t,s,n,r,i,o,a,l,c,u,d,p,v,h,f,g,m)=>{st(M,e),st(T,t),as(j,"placeholder",s),st(O,n),as(F,"placeholder",r),st(I,i),st(V,o),st(K,a),st(Y,l),st(Q,c),st(ae,u),st(ue,`5 ${d??""}`),st(pe,`8 ${p??""}`),st(he,`10 ${v??""}`),st(ge,`15 ${h??""}`),st(ye,`20 ${f??""}`),st(ke,g),st(xe,` ${m??""}`)},[()=>hs("lesson.generator.basic_information"),()=>hs("lesson.generator.lesson_title"),()=>hs("lesson.generator.lesson_title_placeholder"),()=>hs("lesson.generator.description"),()=>hs("lesson.generator.description_placeholder"),()=>hs("lesson.generator.lesson_parameters"),()=>hs("lesson.generator.lesson_type_required"),()=>hs("lesson.generator.select_lesson_type"),()=>hs("lesson.generator.difficulty_level_required"),()=>hs("lesson.generator.select_difficulty"),()=>hs("lesson.generator.number_of_items"),()=>hs("lesson.generator.items"),()=>hs("lesson.generator.items"),()=>hs("lesson.generator.items"),()=>hs("lesson.generator.items"),()=>hs("lesson.generator.items"),()=>hs("lesson.generator.options"),()=>hs("lesson.generator.include_practice_exercises")]),Ws(j,()=>St(u).title,e=>St(u).title=e),Ws(F,()=>St(u).description,e=>St(u).description=e),us(U,()=>St(u).type,e=>St(u).type=e),us(X,()=>St(u).difficulty,e=>St(u).difficulty=e),us(le,()=>St(u).limit,e=>St(u).limit=e),Bs(Le,()=>St(u).includePractice,e=>St(u).includePractice=e),nt(e,n)},$$slots:{default:!0}})},$$slots:{default:!0}}),Ot()}et(["click"]);var jo=tt('<div class="loading-state svelte-1vg779e"><div class="spinner svelte-1vg779e"></div> <p class="svelte-1vg779e"> </p></div>'),Po=tt('<div class="error-state svelte-1vg779e"><div class="error-icon svelte-1vg779e">‚ö†Ô∏è</div> <p class="svelte-1vg779e"> </p> <button class="retry-button svelte-1vg779e"> </button></div>'),Eo=tt('<div class="empty-state svelte-1vg779e"><div class="empty-icon svelte-1vg779e">üìö</div> <p class="svelte-1vg779e"> </p> <button class="create-lesson-button svelte-1vg779e"> </button></div>'),Oo=tt('<option class="svelte-1vg779e"> </option>'),Fo=tt('<option class="svelte-1vg779e"> </option>'),Wo=tt('<!> <div class="back-to-lessons svelte-1vg779e"><button class="back-button svelte-1vg779e"> </button></div>',1),Bo=tt('<div class="lesson-card-wrapper svelte-1vg779e"><!></div>'),Io=tt('<div class="lessons-grid svelte-1vg779e"></div>'),No=tt('‚Ä¢ <button class="reset-filters svelte-1vg779e"> </button>',1),zo=tt('<div class="lessons-filters svelte-1vg779e"><div class="filter-group svelte-1vg779e"><label for="difficulty-filter" class="svelte-1vg779e"> </label> <select id="difficulty-filter" class="svelte-1vg779e"><option class="svelte-1vg779e"> </option><!></select></div> <div class="filter-group svelte-1vg779e"><label for="type-filter" class="svelte-1vg779e"> </label> <select id="type-filter" class="svelte-1vg779e"><option class="svelte-1vg779e"> </option><!></select></div> <button class="create-lesson-button mobile svelte-1vg779e"> </button></div> <!> <div class="lessons-summary svelte-1vg779e"><p class="svelte-1vg779e"> <!></p></div>',1),Ro=tt('<div class="lessons-page svelte-1vg779e"><header class="lessons-header svelte-1vg779e"><h1 class="svelte-1vg779e"> </h1> <p class="subtitle svelte-1vg779e"> </p> <button class="create-lesson-button svelte-1vg779e"> </button></header> <!> <!></div>');function Vo(e,t){xt(t,!0);let s=Tt(Bt([])),n=Tt(!0),r=Tt(null),i=Tt("all"),o=Tt("all"),a=Tt(!1),l=Tt(null);Bt({limit:10});const c={de:{vocabulary:"Vokabular",grammar:"Grammatik",conversation:"Konversation",reading:"Lesen",listening:"H√∂ren",writing:"Schreiben",culture:"Kultur",mixed:"Gemischt"},bg:{vocabulary:"–†–µ—á–Ω–∏–∫",grammar:"–ì—Ä–∞–º–∞—Ç–∏–∫–∞",conversation:"–†–∞–∑–≥–æ–≤–æ—Ä",reading:"–ß–µ—Ç–µ–Ω–µ",listening:"–°–ª—É—à–∞–Ω–µ",writing:"–ü–∏—Å–∞–Ω–µ",culture:"–ö—É–ª—Ç—É—Ä–∞",mixed:"–°–º–µ—Å–µ–Ω–æ"}},u={de:{greetings:"Begr√º√üungen",numbers:"Zahlen",family:"Familie",food:"Essen",colors:"Farben",animals:"Tiere","body-parts":"K√∂rperteile",clothing:"Kleidung",home:"Zuhause",nature:"Natur",transport:"Verkehr",technology:"Technologie",time:"Zeit",weather:"Wetter",professions:"Berufe",places:"Orte",grammar:"Grammatik",culture:"Kultur","everyday-phrases":"Alltagsphrasen"},bg:{greetings:"–ü–æ–∑–¥—Ä–∞–≤–∏",numbers:"–ß–∏—Å–ª–∞",family:"–°–µ–º–µ–π—Å—Ç–≤–æ",food:"–•—Ä–∞–Ω–∞",colors:"–¶–≤–µ—Ç–æ–≤–µ",animals:"–ñ–∏–≤–æ—Ç–Ω–∏","body-parts":"–ß–∞—Å—Ç–∏ –Ω–∞ —Ç—è–ª–æ—Ç–æ",clothing:"–û–±–ª–µ–∫–ª–æ",home:"–î–æ–º",nature:"–ü—Ä–∏—Ä–æ–¥–∞",transport:"–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç",technology:"–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏",time:"–í—Ä–µ–º–µ",weather:"–í—Ä–µ–º–µ—Ç–æ",professions:"–ü—Ä–æ—Ñ–µ—Å–∏–∏",places:"–ú–µ—Å—Ç–∞",grammar:"–ì—Ä–∞–º–∞—Ç–∏–∫–∞",culture:"–ö—É–ª—Ç—É—Ä–∞","everyday-phrases":"–ß–µ—Å—Ç–æ —Å—Ä–µ—â–∞–Ω–∏ –∏–∑—Ä–∞–∑–∏"}},d={de:{noun:"Nomen",verb:"Verben",adjective:"Adjektive",adverb:"Adverbien",pronoun:"Pronomen",preposition:"Pr√§positionen",conjunction:"Konjunktionen",interjection:"Interjektionen",article:"Artikel",number:"Zahlw√∂rter",phrase:"Redewendungen"},bg:{noun:"–°—ä—â–µ—Å—Ç–≤–∏—Ç–µ–ª–Ω–∏",verb:"–ì–ª–∞–≥–æ–ª–∏",adjective:"–ü—Ä–∏–ª–∞–≥–∞—Ç–µ–ª–Ω–∏",adverb:"–ù–∞—Ä–µ—á–∏—è",pronoun:"–ú–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è",preposition:"–ü—Ä–µ–¥–ª–æ–∑–∏",conjunction:"–°—ä—é–∑–∏",interjection:"–ú–µ–∂–¥—É–º–µ—Ç–∏—è",article:"–ß–ª–µ–Ω–æ–≤–µ",number:"–ß–∏—Å–ª–∏—Ç–µ–ª–Ω–∏",phrase:"–ò–∑—Ä–∞–∑–∏"}},p=Pt(()=>"DE_BG"===fs.languageMode?{title:"Lektionen",subtitle:"Strukturierte Lernerlebnisse f√ºr Bulgarisch und Deutsch",createDynamicLesson:"‚ú® Dynamische Lektion erstellen",createLesson:"‚ú® Lektion erstellen",createFirstLesson:"Erstelle deine erste Lektion",loading:"Lektionen werden geladen...",error:"Fehler beim Laden. Bitte erneut versuchen.",retry:"Erneut versuchen",emptyTitle:"Keine Lektionen verf√ºgbar",emptyDescription:"Erstelle deine erste individuelle Lektion!",difficultyLabel:"Niveau",typeLabel:"Typ",allLevels:"Alle Niveaus",allTypes:"Alle Typen",backToLessons:"‚Üê Zur√ºck zu allen Lektionen",showingLessons:(e,t)=>`Zeige ${e} von ${t} Lektionen`,resetFilters:"Filter zur√ºcksetzen",mixedEveryday:"Gemischt: Allt√§gliche Gespr√§che",basicVocabulary:"Grundwortschatz",categoryPrefix:"Kategorie",grammarPrefix:"Grammatik"}:{title:"–£—Ä–æ—Ü–∏",subtitle:"–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–∞–Ω–∏ —É—Ä–æ—Ü–∏ –ø–æ –±—ä–ª–≥–∞—Ä—Å–∫–∏ –∏ –Ω–µ–º—Å–∫–∏",createDynamicLesson:"‚ú® –°—ä–∑–¥–∞–π –¥–∏–Ω–∞–º–∏—á–µ–Ω —É—Ä–æ–∫",createLesson:"‚ú® –°—ä–∑–¥–∞–π —É—Ä–æ–∫",createFirstLesson:"–°—ä–∑–¥–∞–π –ø—ä—Ä–≤–∏—è —Å–∏ —É—Ä–æ–∫",loading:"–ó–∞—Ä–µ–∂–¥–∞–º–µ —É—Ä–æ—Ü–∏—Ç–µ...",error:"–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ. –û–ø–∏—Ç–∞–π—Ç–µ –ø–∞–∫.",retry:"–û–ø–∏—Ç–∞–π –æ—Ç–Ω–æ–≤–æ",emptyTitle:"–ù—è–º–∞ –Ω–∞–ª–∏—á–Ω–∏ —É—Ä–æ—Ü–∏",emptyDescription:"–°—ä–∑–¥–∞–π –ø—ä—Ä–≤–∏—è —Å–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω —É—Ä–æ–∫!",difficultyLabel:"–ù–∏–≤–æ",typeLabel:"–¢–∏–ø",allLevels:"–í—Å–∏—á–∫–∏ –Ω–∏–≤–∞",allTypes:"–í—Å–∏—á–∫–∏ —Ç–∏–ø–æ–≤–µ",backToLessons:"‚Üê –ù–∞–∑–∞–¥ –∫—ä–º –≤—Å–∏—á–∫–∏ —É—Ä–æ—Ü–∏",showingLessons:(e,t)=>`–ü–æ–∫–∞–∑–∞–Ω–∏ ${e} –æ—Ç –æ–±—â–æ ${t} —É—Ä–æ–∫–∞`,resetFilters:"–ù—É–ª–∏—Ä–∞–π —Ñ–∏–ª—Ç—Ä–∏—Ç–µ",mixedEveryday:"–°–º–µ—Å–µ–Ω–æ: –ï–∂–µ–¥–Ω–µ–≤–Ω–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–∏",basicVocabulary:"–û—Å–Ω–æ–≤–Ω–∞ –ª–µ–∫—Å–∏–∫–∞",categoryPrefix:"–ö–∞—Ç–µ–≥–æ—Ä–∏—è",grammarPrefix:"–ì—Ä–∞–º–∞—Ç–∏–∫–∞"});let v=Pt(()=>St(s).filter(e=>{const t="all"===St(i)||e.difficulty===St(i),s="all"===St(o)||e.type===St(o);return t&&s}));async function h(){try{Et(n,!0),Et(r,null),await jn.initialize();const e=await async function(){const e=[],t=Ms.getVocabularyStatsByDifficulty(),s=["A1","A2","B1","B2","C1"];for(const o of s)if(t[o]>=5){const s=Math.min(3,Math.floor(t[o]/5));for(let t=0;t<s;t++)try{const s=await Tn.generateLessonFromCriteria({difficulty:o,limit:8,type:0===t?"vocabulary":1===t?"conversation":"mixed"});e.push(s)}catch(i){console.error(`Failed to generate ${o} lesson ${t+1}:`,i)}}const n=["greetings","numbers","family","food","colors","animals","body-parts","clothing"];for(const o of n)try{if(Ms.getVocabularyByCategory(o).length>=5){const t=await Tn.generateLessonFromCriteria({categories:[o],limit:8,type:"vocabulary",title:`${St(p).categoryPrefix}: ${y(o)}`});e.push(t)}}catch(i){console.error(`Failed to generate ${o} category lesson:`,i)}const r=["noun","verb","adjective","adverb"];for(const o of r)try{if(Ms.getVocabularyByPartOfSpeech(o).length>=5){const t=await Tn.generateLessonFromCriteria({partOfSpeech:o,limit:8,type:"vocabulary",title:`${St(p).grammarPrefix}: ${b(o)}`});e.push(t)}}catch(i){console.error(`Failed to generate ${o} lesson:`,i)}if(Ms.getVocabularyCount()>=15)try{const t=await Tn.generateLessonFromCriteria({limit:10,type:"mixed",title:St(p).mixedEveryday});e.push(t)}catch(i){console.error("Failed to generate mixed lesson:",i)}if(0===e.length&&Ms.getVocabularyCount()>0){console.warn("No lessons generated, creating fallback lessons");const t=function(){const e=[],t=Ms.getVocabulary();if(t.length>=5){const s={A1:[],A2:[],B1:[],B2:[],C1:[]};t.forEach(e=>{e.difficulty<=1.5?s.A1.push(e):e.difficulty<=2.5?s.A2.push(e):e.difficulty<=3.5?s.B1.push(e):e.difficulty<=4.5?s.B2.push(e):s.C1.push(e)});for(const[t,n]of Object.entries(s))if(n.length>=5){const s=Tn.generateLessonFromVocabulary(n.slice(0,8).map(e=>{const t="string"==typeof e.transliteration?e.transliteration:e.transliteration?.german??"";return{...e,isCommon:e.metadata?.isCommon??!1,isVerified:e.metadata?.isVerified??!1,learningPhase:e.metadata?.learningPhase??0,cefrLevel:(()=>{const t=e.metadata?.level??e.level??"A1";return"C1"===t?"B2":t})(),transliteration:t}}),{title:`${t}: ${St(p).basicVocabulary}`,difficulty:t,type:"vocabulary"});e.push(s)}}return e}();e.push(...t)}return e}();Et(s,e,!0)}catch(e){console.error("Failed to load lessons:",e),Et(r,e instanceof Error?e.message:St(p).error,!0)}finally{Et(n,!1)}}function f(){Et(l,null)}function g(){const e=new Set;return St(s).forEach(t=>e.add(t.type)),["all",...Array.from(e)]}function m(){return["A1","A2","B1","B2","C1"]}function y(e){return("DE_BG"===fs.languageMode?u.de:u.bg)[e]??e}function b(e){const t="DE_BG"===fs.languageMode?d.de:d.bg;return e in t?t[e]:e}It(()=>{h()});var w=Ro(),k=_t(w),$=_t(k),C=_t($,!0);Mt($);var A=Dt($,2),L=_t(A,!0);Mt(A);var x=Dt(A,2);x.__click=()=>Et(a,!0);var _=_t(x,!0);Mt(x),Mt(k);var M=Dt(k,2),D=e=>{var t=jo(),s=Dt(_t(t),2),n=_t(s,!0);Mt(s),Mt(t),jt(()=>st(n,St(p).loading)),nt(e,t)},S=e=>{var t=rt(),n=Wt(t),u=e=>{var t=Po(),s=Dt(_t(t),2),n=_t(s,!0);Mt(s);var i=Dt(s,2);i.__click=h;var o=_t(i,!0);Mt(i),Mt(t),jt(()=>{st(n,St(r)),st(o,St(p).retry)}),nt(e,t)},d=e=>{var t=rt(),n=Wt(t),r=e=>{var t=Eo(),s=Dt(_t(t),2),n=_t(s,!0);Mt(s);var r=Dt(s,2);r.__click=()=>Et(a,!0);var i=_t(r,!0);Mt(r),Mt(t),jt(()=>{st(n,St(p).emptyDescription),st(i,St(p).createFirstLesson)}),nt(e,t)},u=e=>{var t=zo(),n=Wt(t),r=_t(n),u=_t(r),d=_t(u,!0);Mt(u);var h=Dt(u,2),y=_t(h),b=_t(y,!0);Mt(y),y.value=y.__value="all";var w=Dt(y);ss(w,17,m,os,(e,t)=>{var s=Oo(),n=_t(s,!0);Mt(s);var r={};jt(()=>{st(n,St(t)),r!==(r=St(t))&&(s.value=(s.__value=St(t))??"")}),nt(e,s)}),Mt(h),Mt(r);var k=Dt(r,2),$=_t(k),C=_t($,!0);Mt($);var A=Dt($,2),L=_t(A),x=_t(L,!0);Mt(L),L.value=L.__value="all";var _=Dt(L);ss(_,17,g,os,(e,t)=>{var s=Fo(),n=_t(s,!0);Mt(s);var r={};jt(e=>{st(n,e),r!==(r=St(t))&&(s.value=(s.__value=St(t))??"")},[()=>function(e){return("DE_BG"===fs.languageMode?c.de:c.bg)[e]??e}(St(t))]),nt(e,s)}),Mt(A),Mt(k);var M=Dt(k,2);M.__click=()=>Et(a,!0);var D=_t(M,!0);Mt(M),Mt(n);var S=Dt(n,2),T=e=>{var t=Wo(),s=Wt(t);Cn(s,{get lesson(){return St(l)}});var n=Dt(s,2),r=_t(n);r.__click=f;var i=_t(r,!0);Mt(r),Mt(n),jt(()=>st(i,St(p).backToLessons)),nt(e,t)},j=e=>{var t=Io();ss(t,21,()=>St(v),e=>e.id,(e,t)=>{var s=Bo();tn(_t(s),{get lesson(){return St(t)}}),Mt(s),nt(e,s)}),Mt(t),nt(e,t)};ts(S,e=>{St(l)?e(T):e(j,!1)});var P=Dt(S,2),E=_t(P),O=_t(E),F=Dt(O),W=e=>{var t=No(),s=Dt(Wt(t));s.__click=()=>{Et(i,"all"),Et(o,"all")};var n=_t(s,!0);Mt(s),jt(()=>st(n,St(p).resetFilters)),nt(e,t)};ts(F,e=>{"all"===St(i)&&"all"===St(o)||e(W)}),Mt(E),Mt(P),jt(e=>{st(d,St(p).difficultyLabel),st(b,St(p).allLevels),st(C,St(p).typeLabel),st(x,St(p).allTypes),st(D,St(p).createLesson),st(O,`${e??""} `)},[()=>St(p).showingLessons(St(v).length,St(s).length)]),us(h,()=>St(i),e=>Et(i,e)),us(A,()=>St(o),e=>Et(o,e)),nt(e,t)};ts(n,e=>{0===St(s).length?e(r):e(u,!1)},!0),nt(e,t)};ts(n,e=>{St(r)?e(u):e(d,!1)},!0),nt(e,t)};ts(M,e=>{St(n)?e(D):e(S,!1)}),To(Dt(M,2),{get isOpen(){return St(a)},onClose:()=>Et(a,!1),onLessonGenerated:function(e){St(s).push(e),Et(l,e,!0),Et(a,!1)}}),Mt(w),jt(()=>{st(C,St(p).title),st(L,St(p).subtitle),st(_,St(p).createDynamicLesson)}),nt(e,w),Ot()}et(["click"]);export{Vo as component};
//# sourceMappingURL=7.CvCwx9lB.js.map
