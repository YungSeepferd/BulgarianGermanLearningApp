import{_ as e}from"../chunks/CgvsJPj0.js";import{d as s,f as t,b as r,a as n,c as a}from"../chunks/CP5eoV68.js";import{c as o,o as l}from"../chunks/Cx5GHCVW.js";import{a5 as i,a9 as c,a6 as v,z as u,L as d,ae as p,ab as g,a7 as m,ag as k,ad as b,a8 as h,aa as f,ah as y,ap as w}from"../chunks/wBlqi3UJ.js";import{i as _}from"../chunks/DXLtWB7C.js";import{e as x,i as $}from"../chunks/CGLmHr_6.js";import{c as j,s as M,i as E,b as C,g as D}from"../chunks/rXKuYn7R.js";import{p as I,s as O,a as A}from"../chunks/ChF5yV5R.js";import{p as B}from"../chunks/JyKk3_Yq.js";import{a as G}from"../chunks/vPaY5TSe.js";import{b as L}from"../chunks/ARfPpxDE.js";import{F as q,T as Q,M as T,O as N}from"../chunks/CBS7F5XW.js";var P=t('<div class="grammar-hint svelte-1ykr7ns"> </div>'),z=t('<span class="spacer svelte-1ykr7ns"></span>'),W=t('<button class="word-bubble selected svelte-1ykr7ns" title="Click to remove"> </button> <!>',1),F=t('<div class="sentence-construction svelte-1ykr7ns"></div>'),H=t('<div class="empty-sentence svelte-1ykr7ns"><p>Click words below to build the sentence</p></div>'),J=t('<button class="word-bubble svelte-1ykr7ns"> </button>'),R=t('<button class="next-btn svelte-1ykr7ns">Next Question â†’</button>'),S=t('<div> </div> <div class="actions svelte-1ykr7ns"><button class="reset-btn svelte-1ykr7ns">Try Again</button> <!></div>',1),U=t('<button class="check-btn svelte-1ykr7ns">Check Answer</button>'),V=t('<div class="progress-indicator svelte-1ykr7ns"> </div>'),Z=t('<div class="sentence-builder-container svelte-1ykr7ns"><div class="prompt svelte-1ykr7ns"><h3 class="svelte-1ykr7ns"> </h3> <!></div> <div class="user-sentence svelte-1ykr7ns"><!></div> <div class="word-bank svelte-1ykr7ns"></div> <div class="feedback-section svelte-1ykr7ns"><!></div> <!></div>');function K(e,s){i(s,!0);let t=I(s,"exercise",15);const l=o();let M=c(v([])),E=c(v([])),C=c(!1),D=c(!1),O=c(0);const A=p(()=>t().questions[t().currentQuestionIndex]);function B(){if(!d(M).length||d(C)||!d(A))return;w(O);const e=d(A);g(D,JSON.stringify(d(M))===JSON.stringify(e.correctOrder)),g(C,!0),t().feedback.push({questionId:e.id,isCorrect:d(D),userAnswer:d(M).join(" "),correctAnswer:e.correctOrder.join(" "),attempts:d(O),timestamp:new Date}),l("exerciseComplete",{exerciseId:t().id,isCorrect:d(D),userAnswer:d(M).join(" ")})}function G(){if(!d(A))return;const e=d(A);g(E,[...e.words].sort(()=>Math.random()-.5),!0),g(M,[],!0),g(C,!1),g(D,!1),g(O,0)}function L(){if(!d(C)||!d(A))return"";if(d(D))return t().feedbackMessages?.correct||"âœ… Correct! Well done!";{const e=d(A);return t().feedbackMessages?.incorrect||`âŒ Try again. Correct order: ${e.correctOrder.join(" ")}`}}u(()=>{d(A)&&(g(E,[...d(A).words].sort(()=>Math.random()-.5),!0),g(M,[],!0),g(C,!1),g(D,!1),g(O,0))});var q=Z(),Q=m(q),T=m(Q),N=m(T,!0);k(T);var K=b(T,2),X=e=>{var s=P(),a=m(s);k(s),h(()=>r(a,`ðŸ’¡ ${t().grammarHint??""}`)),n(e,s)};_(K,e=>{t().grammarHint&&e(X)}),k(Q);var Y=b(Q,2),ee=m(Y),se=e=>{var s=F();x(s,21,()=>d(M),$,(e,s,t)=>{var a=W(),o=y(a);o.__click=()=>function(e){if(d(C))return;const[s]=d(M).splice(e,1);s&&g(E,[...d(E),s].sort(()=>Math.random()-.5),!0)}(t);var l=m(o,!0);k(o);var i=b(o,2),c=e=>{var s=z();n(e,s)};_(i,e=>{t<d(M).length-1&&e(c)}),h(()=>r(l,d(s))),n(e,a)}),k(s),n(e,s)},te=e=>{var s=H();n(e,s)};_(ee,e=>{d(M).length>0?e(se):e(te,!1)}),k(Y);var re=b(Y,2);x(re,21,()=>d(E),$,(e,s)=>{var t=J();t.__click=()=>function(e){!d(C)&&d(A)&&(g(M,[...d(M),e],!0),g(E,d(E).filter(s=>s!==e),!0))}(d(s));var a=m(t,!0);k(t),h(()=>{t.disabled=d(C),r(a,d(s))}),n(e,t)}),k(re);var ne=b(re,2),ae=m(ne),oe=e=>{var s=S(),a=y(s);let o;var l=m(a,!0);k(a);var i=b(a,2),c=m(i);c.__click=G;var v=b(c,2),u=e=>{var s=R();s.__click=()=>{t(t().currentQuestionIndex++,!0),G()},n(e,s)};_(v,e=>{d(D)&&t().currentQuestionIndex<t().questions.length-1&&e(u)}),k(i),h(e=>{o=j(a,1,"feedback-message svelte-1ykr7ns",null,o,{correct:d(D)}),r(l,e)},[L]),n(e,s)},le=e=>{var s=a(),t=y(s),r=e=>{var s=U();s.__click=B,n(e,s)};_(t,e=>{d(M).length>0&&e(r)},!0),n(e,s)};_(ae,e=>{d(C)?e(oe):e(le,!1)}),k(ne);var ie=b(ne,2),ce=e=>{var s=V(),a=m(s);k(s),h(()=>r(a,`Question ${t().currentQuestionIndex+1} of ${t().questions.length??""}`)),n(e,s)};_(ie,e=>{t().questions.length>1&&e(ce)}),k(q),h(()=>r(N,d(A)?.prompt)),n(e,q),f()}s(["click"]);var X=t('<div class="loading-state svelte-p5v3wo"><div class="spinner svelte-p5v3wo"></div> <p> </p></div>'),Y=t('<div class="error-state svelte-p5v3wo" role="alert"><h2 class="svelte-p5v3wo"> </h2> <p> </p> <a class="button svelte-p5v3wo"> </a></div>'),ee=t('<button class="button button--primary svelte-p5v3wo"> </button>'),se=t('<a class="button button--primary svelte-p5v3wo"> </a>'),te=t("<option> </option>"),re=t('<header class="lesson-header svelte-p5v3wo"><h1 id="lesson-title" class="lesson-title svelte-p5v3wo"> </h1> <p class="lesson-description svelte-p5v3wo"> </p> <div class="progress-container svelte-p5v3wo"><div class="progress-bar svelte-p5v3wo"><div class="progress-fill svelte-p5v3wo"></div></div> <span class="progress-text svelte-p5v3wo"> </span></div></header> <main class="lesson-content svelte-p5v3wo"><!></main> <nav class="lesson-navigation svelte-p5v3wo"><div class="nav-buttons svelte-p5v3wo"><button class="button button--secondary svelte-p5v3wo"> </button> <!></div> <div class="exercise-selector svelte-p5v3wo"><span> </span> <select class="select-exercise svelte-p5v3wo"></select></div></nav>',1),ne=t('<div class="lesson-container svelte-p5v3wo" role="main" aria-labelledby="lesson-title"><!></div>');function ae(s,t){i(t,!0);const[o,v]=A();let u=c(null),j=c(0),I=c(!0),P=c(null);const z=O(B,"$page",o).params.lessonId;l(async()=>{try{g(I,!0),g(P,null);const s=await((e,s,t)=>{const r=e[s];return r?"function"==typeof r?r():Promise.resolve(r):new Promise((e,r)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+s+(s.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})})(Object.assign({"../../../../data/lessons/lesson-01-greetings.json":()=>e(()=>import("../chunks/B7HnC1VT.js"),[],import.meta.url),"../../../../data/lessons/lesson-02-food.json":()=>e(()=>import("../chunks/Dv_HARLZ.js"),[],import.meta.url)}),`../../../../data/lessons/lesson-${z}.json`,7);if(g(u,s.default,!0),!d(u))throw new Error("Lesson not found")}catch(s){console.error("Error loading lesson:",s),g(P,"DE_BG"===G.languageMode?"Lektion nicht gefunden":"Ð£Ñ€Ð¾ÐºÑŠÑ‚ Ð½Ðµ Ðµ Ð½Ð°Ð¼ÐµÑ€ÐµÐ½",!0)}finally{g(I,!1)}});const W=p(()=>d(u)?d(u).exercises?.[d(j)]:void 0);function F(){d(u)&&d(j)<d(u).exercises.length-1&&w(j)}function H(){d(u)&&d(j)>0&&w(j,-1)}const J=p(()=>d(u)?{current:d(j)+1,total:d(u).exercises.length,percentage:Math.round((d(j)+1)/d(u).exercises.length*100)}:{current:0,total:0,percentage:0});function R(e){console.log("Exercise completed:",e.detail.isCorrect)}var S=ne(),U=m(S),V=e=>{var s=X(),t=b(m(s),2),a=m(t,!0);k(t),k(s),h(()=>r(a,"DE_BG"===G.languageMode?"Lade Lektion...":"Ð—Ð°Ñ€ÐµÐ¶Ð´Ð°Ð½Ðµ Ð½Ð° ÑƒÑ€Ð¾ÐºÐ°...")),n(e,s)},Z=e=>{var s=a(),t=y(s),o=e=>{var s=Y(),t=m(s),a=m(t,!0);k(t);var o=b(t,2),l=m(o,!0);k(o);var i=b(o,2),c=m(i,!0);k(i),k(s),h(()=>{r(a,"DE_BG"===G.languageMode?"Fehler":"Ð“Ñ€ÐµÑˆÐºÐ°"),r(l,d(P)),M(i,"href",`${L??""}/learn`),r(c,"DE_BG"===G.languageMode?"ZurÃ¼ck zu Lektionen":"ÐÐ°Ð·Ð°Ð´ ÐºÑŠÐ¼ ÑƒÑ€Ð¾Ñ†Ð¸Ñ‚Ðµ")}),n(e,s)},l=e=>{var s=a(),t=y(s),o=e=>{var s=re(),t=y(s),o=m(t),l=m(o,!0);k(o);var i=b(o,2),c=m(i,!0);k(i);var v=b(i,2),p=m(v),f=m(p);k(p);var w=b(p,2),I=m(w,!0);k(w),k(v),k(t);var O=b(t,2),A=m(O),B=e=>{var s=a(),t=y(s),r=e=>{K(e,{get exercise(){return d(W)},$$events:{exerciseComplete:R}})},o=e=>{var s=a(),t=y(s),r=e=>{q(e,{get exercise(){return d(W)},$$events:{exerciseComplete:R}})},o=e=>{var s=a(),t=y(s),r=e=>{Q(e,{get exercise(){return d(W)},$$events:{exerciseComplete:R}})},o=e=>{var s=a(),t=y(s),r=e=>{T(e,{get exercise(){return d(W)},$$events:{exerciseComplete:R}})},o=e=>{var s=a(),t=y(s),r=e=>{N(e,{get exercise(){return d(W)},$$events:{exerciseComplete:R}})};_(t,e=>{"ordering"===d(W).type&&e(r)},!0),n(e,s)};_(t,e=>{"matching"===d(W).type?e(r):e(o,!1)},!0),n(e,s)};_(t,e=>{"typing"===d(W).type?e(r):e(o,!1)},!0),n(e,s)};_(t,e=>{"fill-in-blank"===d(W).type?e(r):e(o,!1)},!0),n(e,s)};_(t,e=>{"sentence-builder"===d(W).type?e(r):e(o,!1)}),n(e,s)};_(A,e=>{d(W)&&e(B)}),k(O);var P=b(O,2),z=m(P),S=m(z);S.__click=H;var U=m(S,!0);k(S);var V=b(S,2),Z=e=>{var s=ee();s.__click=F;var t=m(s,!0);k(s),h(()=>r(t,"DE_BG"===G.languageMode?"Weiter":"ÐÐ°Ð¿Ñ€ÐµÐ´")),n(e,s)},X=e=>{var s=se(),t=m(s,!0);k(s),h(()=>{M(s,"href",`${L??""}/learn`),r(t,"DE_BG"===G.languageMode?"Alle Lektionen":"Ð’ÑÐ¸Ñ‡ÐºÐ¸ ÑƒÑ€Ð¾Ñ†Ð¸")}),n(e,s)};_(V,e=>{d(j)<d(u).exercises.length-1?e(Z):e(X,!1)}),k(z);var Y=b(z,2),ne=m(Y),ae=m(ne,!0);k(ne);var oe,le=b(ne,2);le.__change=e=>{const s=e.target;var t;s&&(t=parseInt(s.value,10),d(u)&&g(j,t,!0))},x(le,21,()=>d(u).exercises,$,(e,s,t)=>{var a=te(),o=m(a,!0);k(a),a.value=a.__value=t,h(e=>r(o,e),[()=>function(e,s){return"title"in e&&e.title?`${s+1}. ${e.title}`:`${s+1}. ${e.type}`}(d(s),t)]),n(e,a)}),k(le),E(le),k(Y),k(P),h(()=>{r(l,d(u).title),r(c,d(u).description),C(f,`width: ${d(J).percentage??""}%`),r(I,"DE_BG"===G.languageMode?`${d(J).current} von ${d(J).total} Ãœbungen`:`${d(J).current} Ð¾Ñ‚ ${d(J).total} ÑƒÐ¿Ñ€Ð°Ð¶Ð½ÐµÐ½Ð¸Ñ`),S.disabled=0===d(j),r(U,"DE_BG"===G.languageMode?"ZurÃ¼ck":"ÐÐ°Ð·Ð°Ð´"),r(ae,"DE_BG"===G.languageMode?"Ãœbung:":"Ð£Ð¿Ñ€Ð°Ð¶Ð½ÐµÐ½Ð¸Ðµ:"),oe!==(oe=d(j))&&(le.value=(le.__value=d(j))??"",D(le,d(j)))}),n(e,s)};_(t,e=>{d(u)&&e(o)},!0),n(e,s)};_(t,e=>{d(P)?e(o):e(l,!1)},!0),n(e,s)};_(U,e=>{d(I)?e(V):e(Z,!1)}),k(S),n(s,S),f(),v()}s(["click","change"]);export{ae as component};
//# sourceMappingURL=7.Bw86Tw-z.js.map
