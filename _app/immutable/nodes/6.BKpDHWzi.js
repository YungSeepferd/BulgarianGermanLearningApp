import{f as e,a,s as t,t as r,c as n}from"../chunks/CwYQU764.js";import{o as s}from"../chunks/D7MJeQec.js";import{G as l,M as i,I as o,K as d,N as c,L as v,J as g,P as u,T as m,O as p,U as h,Q as f,a0 as y,a1 as k}from"../chunks/U2z3489N.js";import{i as b}from"../chunks/CJfPkaQ0.js";import{b as w,c as $}from"../chunks/D5nh9VMN.js";import{D as L,v as P,a as B}from"../chunks/B3Vyi2jH.js";import{V as j,A as N}from"../chunks/DeUscWSo.js";var S=e('<div><!></div> <div class="button-container svelte-1ntlv2v"><!> <!></div>',1),T=e('<div class="completion-message svelte-1ntlv2v"><h2 class="svelte-1ntlv2v"> </h2> <p class="svelte-1ntlv2v"> </p> <!></div>'),z=e('<p class="svelte-1ntlv2v"> </p> <!>',1),A=e('<p class="svelte-1ntlv2v"> </p>'),D=e('<p class="svelte-1ntlv2v"> </p> <!>',1),E=e('<div class="loading-message svelte-1ntlv2v"><!></div>'),F=e('<div class="learn-page svelte-1ntlv2v"><div class="progress-container svelte-1ntlv2v"><div class="progress-bar svelte-1ntlv2v"></div> <div class="progress-text svelte-1ntlv2v"> </div></div> <div class="content-container svelte-1ntlv2v"><!></div></div>');function G(e,G){l(G,!0);let M=i(0),x=i(!1),C=i(!1),I=i(o([])),O=i(!1),V=i(null),W=i(null),_=i(!1);function K(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function U(e){const a=(e.german||"").trim();if(!a)return a;if(/^(der|die|das|ein|eine|einen|einem|einer|eines)\s/i.test(a)){const[t,...r]=a.split(/\s+/),n=r.join(" ");return[t,"noun"===e.partOfSpeech?K(n):n].filter(Boolean).join(" ").trim()}const t="noun"===e.partOfSpeech?K(a):a,r=(n=e.grammar?.gender,s=e.grammar?.verbPartnerId,s||n&&{masculine:"der",feminine:"die",neuter:"das"}[n]||null||("noun"===e.partOfSpeech?"der":null));var n,s;return r?`${r} ${t}`:t}const q=f(()=>"DE_BG"===B.languageMode?{heading:"Lernkarten",hard:"ðŸ”´ Schwer",easy:"ðŸŸ¢ Leicht",completedTitle:"ðŸŽ‰ GroÃŸartige Arbeit!",completedBody:"Du hast diese Lerneinheit beendet.",startNew:"Neue Einheit starten",loading:"Vokabular wird geladen...",retry:"Erneut versuchen",mastered:"Keine WÃ¶rter zu Ã¼ben. Alles gemeistert!"}:{heading:"ÐšÐ°Ñ€Ñ‚Ð¸ Ð·Ð° ÑƒÑ‡ÐµÐ½Ðµ",hard:"ðŸ”´ Ð¢Ñ€ÑƒÐ´Ð½Ð¾",easy:"ðŸŸ¢ Ð›ÐµÑÐ½Ð¾",completedTitle:"ðŸŽ‰ Ð¡Ñ‚Ñ€Ð°Ñ…Ð¾Ñ‚Ð½Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ð°!",completedBody:"Ð—Ð°Ð²ÑŠÑ€ÑˆÐ¸ Ñ‚Ð°Ð·Ð¸ ÑÐµÑÐ¸Ñ Ð·Ð° ÑƒÑ‡ÐµÐ½Ðµ.",startNew:"Ð—Ð°Ð¿Ð¾Ñ‡Ð½Ð¸ Ð½Ð¾Ð²Ð° ÑÐµÑÐ¸Ñ",loading:"Ð—Ð°Ñ€ÐµÐ¶Ð´Ð°Ð½Ðµ Ð½Ð° Ñ€ÐµÑ‡Ð½Ð¸ÐºÐ°...",retry:"ÐžÐ¿Ð¸Ñ‚Ð°Ð¹ Ð¾Ñ‚Ð½Ð¾Ð²Ð¾",mastered:"ÐÑÐ¼Ð° Ð´ÑƒÐ¼Ð¸ Ð·Ð° ÑƒÐ¿Ñ€Ð°Ð¶Ð½ÐµÐ½Ð¸Ðµ. Ð’ÑÐ¸Ñ‡ÐºÐ¾ Ðµ ÑƒÑÐ²Ð¾ÐµÐ½Ð¾!"});async function J(){try{p(W,null),L.log("LearnPage","Starting learning session"),await P.initialize();const e=P.getVocabulary().map(e=>({...e,german:U(e)}));if(0===e.length)return p(W,"No vocabulary loaded. Please check the data files and try again."),p(x,!1),p(C,!1),void p(I,[],!0);L.log("LearnPage","Vocabulary loaded",{totalWords:e.length}),p(I,[...e].sort(()=>.5-Math.random()),!0),L.log("LearnPage","Session cards prepared",{cardCount:v(I).length}),p(M,0),p(x,!0),p(C,!1),p(O,!1),p(V,null),L.log("LearnPage","Session started",{cardCount:v(I).length,firstCard:v(I)[0]?.id})}catch(e){L.error("LearnPage","Failed to start session",e),p(W,"Failed to start session. Please retry."),p(x,!1),p(I,[],!0)}}function Q(){if(!v(x)||v(O))return;p(O,!0),p(V,"easy");const e=v(I)[v(M)];if(e){const a=e.xp_value||10;L.log("LearnPage","Word marked as easy",{wordId:e.id,xpAdded:a})}setTimeout(()=>{R(),p(O,!1),p(V,null)},600)}function H(){v(x)&&!v(O)&&(p(O,!0),p(V,"hard"),L.log("LearnPage","Word marked as hard",{wordId:v(I)[v(M)]?.id}),setTimeout(()=>{R(),p(O,!1),p(V,null)},600))}function R(){v(M)<v(I).length-1?(k(M),p(_,!1)):(p(x,!1),p(C,!0),L.log("LearnPage","Session completed"))}function X(){p(_,!v(_)),L.log("LearnPage","Flashcard flipped",{isFlipped:v(_)})}function Y(){const e=v(I)[v(M)];return e?{...e,literalBreakdown:e.literalBreakdown??e.metadata?.components?.map(e=>({segment:e.part,literal:e.meaning,grammarTag:""}))??[]}:null}s(()=>{J()});var Z=F(),ee=g(Z),ae=g(ee),te=u(ae,2),re=g(te,!0);m(te),m(ee);var ne=u(ee,2),se=g(ne),le=e=>{var n=S(),s=h(n),l=g(s);{let e=f(Y),a=f(()=>"DE_BG"===B.languageMode?"DE->BG":"BG->DE");j(l,{get item(){return v(e)},variant:"flashcard",get direction(){return v(a)},get isFlipped(){return v(_)},showMetadata:!0,showActions:!1,showTags:!1,onFlip:X})}m(s);var i=u(s,2),o=g(i);N(o,{variant:"secondary",size:"lg",get disabled(){return v(O)},onclick:H,get label(){return v(q).hard},children:(e,n)=>{y();var s=r();d(()=>t(s,v(q).hard)),a(e,s)},$$slots:{default:!0}});var c=u(o,2);N(c,{variant:"primary",size:"lg",get disabled(){return v(O)},onclick:Q,get label(){return v(q).easy},children:(e,n)=>{y();var s=r();d(()=>t(s,v(q).easy)),a(e,s)},$$slots:{default:!0}}),m(i),d(()=>$(s,1,`flashcard-wrapper ${v(V)??""}`,"svelte-1ntlv2v")),a(e,n)},ie=e=>{var s=n(),l=h(s),i=e=>{var n=T(),s=g(n),l=g(s,!0);m(s);var i=u(s,2),o=g(i,!0);m(i);var c=u(i,2);N(c,{variant:"primary",size:"lg",onclick:J,get label(){return v(q).startNew},children:(e,n)=>{y();var s=r();d(()=>t(s,v(q).startNew)),a(e,s)},$$slots:{default:!0}}),m(n),d(()=>{t(l,v(q).completedTitle),t(o,v(q).completedBody)}),a(e,n)},o=e=>{var s=E(),l=g(s),i=e=>{var n=z(),s=h(n),l=g(s,!0);m(s);var i=u(s,2);N(i,{variant:"secondary",size:"lg",onclick:J,get label(){return v(q).retry},children:(e,n)=>{y();var s=r();d(()=>t(s,v(q).retry)),a(e,s)},$$slots:{default:!0}}),d(()=>t(l,v(W))),a(e,n)},o=e=>{var s=n(),l=h(s),i=e=>{var r=A(),n=g(r,!0);m(r),d(()=>t(n,v(q).loading)),a(e,r)},o=e=>{var n=D(),s=h(n),l=g(s,!0);m(s);var i=u(s,2);N(i,{variant:"primary",size:"lg",onclick:J,get label(){return v(q).startNew},children:(e,n)=>{y();var s=r();d(()=>t(s,v(q).startNew)),a(e,s)},$$slots:{default:!0}}),d(()=>t(l,v(q).mastered)),a(e,n)};b(l,e=>{0===v(I).length?e(i):e(o,!1)},!0),a(e,s)};b(l,e=>{v(W)?e(i):e(o,!1)}),m(s),a(e,s)};b(l,e=>{v(C)?e(i):e(o,!1)},!0),a(e,s)};b(se,e=>{v(x)&&Y()?e(le):e(ie,!1)}),m(ne),m(Z),d((e,a)=>{w(ae,e),t(re,a)},[()=>`width: ${0===v(I).length?0:Math.round((v(M)+1)/v(I).length*100)}%`,function(){return 0===v(I).length?"0/0":`${v(M)+1}/${v(I).length}`}]),a(e,Z),c()}export{G as component};
//# sourceMappingURL=6.BKpDHWzi.js.map
