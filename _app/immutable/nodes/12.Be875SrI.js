var e,t,s,n,r,i,o,a,l,c,u,d,p,v,h,f,g,m,y,b,w,k,$,L,x,_,C,A,D,P,S,M,j,E,T,F,W,O,B,I,N,z,R,V,U,G,K,q,Z,H,Y,X,J,Q,ee,te,se,ne,re,ie,oe,ae,le,ce,ue,de,pe,ve,he,fe,ge,me,ye,be,we,ke,$e,Le,xe,_e,Ce,Ae,De,Pe,Se,Me,je,Ee,Te,Fe,We,Oe,Be,Ie,Ne,ze=Object.defineProperty,Re=Object.getPrototypeOf,Ve=Reflect.get,Ue=e=>{throw TypeError(e)},Ge=(e,t,s)=>((e,t,s)=>t in e?ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s),Ke=(e,t,s)=>t.has(e)||Ue("Cannot "+s),qe=(e,t,s)=>(Ke(e,t,"read from private field"),s?s.call(e):t.get(e)),Ze=(e,t,s)=>t.has(e)?Ue("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),He=(e,t,s,n)=>(Ke(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),Ye=(e,t,s)=>(Ke(e,t,"access private method"),s);import{d as Xe,f as Je,b as Qe,a as et,c as tt,q as st,r as nt,v as rt,m as it,u as ot,j as at,t as lt}from"../chunks/CP5eoV68.js";import{aO as ct,h as ut,a as dt,bg as pt,b as vt,a9 as ht,bh as ft,U as gt,L as mt,ab as yt,aU as bt,a5 as wt,a7 as kt,ag as $t,ad as Lt,a8 as xt,ae as _t,aa as Ct,ap as At,ah as Dt,a6 as Pt,z as St,bi as Mt,bj as jt,bk as Et,ai as Tt,u as Ft,t as Wt,o as Ot,bl as Bt,bm as It,bd as Nt,ao as zt,be as Rt}from"../chunks/wBlqi3UJ.js";import{i as Vt}from"../chunks/DXLtWB7C.js";import{e as Ut,i as Gt}from"../chunks/CGLmHr_6.js";import{r as Kt,a as qt,c as Zt,s as Ht,b as Yt,h as Xt,e as Jt,d as Qt}from"../chunks/rXKuYn7R.js";import{p as es,r as ts,b as ss}from"../chunks/ChF5yV5R.js";import{t as ns}from"../chunks/DgWt2W8G.js";import{a as rs,V as is,P as os,L as as,f as ls,v as cs,l as us,g as ds,h as ps,j as vs,c as hs}from"../chunks/Bu66YvaN.js";import{b as fs,a as gs}from"../chunks/D4js57BL.js";import{o as ms,b as ys,u as bs,a as ws,n as ks,s as $s,d as Ls,_ as xs}from"../chunks/y3_YNDdE.js";import{s as _s}from"../chunks/CkkOZLLS.js";import{c as Cs}from"../chunks/rcucWVYS.js";import{e as As,B as Ds}from"../chunks/D7gkSMNJ.js";import{B as Ps}from"../chunks/tu3HDAnm.js";function Ss(){return Symbol(ct)}const Ms=class extends Map{constructor(i){if(super(),Ze(this,r),Ze(this,e,new Map),Ze(this,t,ht(0)),Ze(this,s,ht(0)),Ze(this,n,ft||-1),i){for(var[o,a]of i)super.set(o,a);qe(this,s).v=super.size}}has(s){var n=qe(this,e),o=n.get(s);if(void 0===o){if(void 0===super.get(s))return mt(qe(this,t)),!1;o=Ye(this,r,i).call(this,0),n.set(s,o)}return mt(o),!0}forEach(e,t){Ye(this,r,o).call(this),super.forEach(e,t)}get(s){var n=qe(this,e),o=n.get(s);if(void 0===o){if(void 0===super.get(s))return void mt(qe(this,t));o=Ye(this,r,i).call(this,0),n.set(s,o)}return mt(o),super.get(s)}set(n,o){var a=qe(this,e),l=a.get(n),c=super.get(n),u=super.set(n,o),d=qe(this,t);if(void 0===l)l=Ye(this,r,i).call(this,0),a.set(n,l),yt(qe(this,s),super.size),bt(d);else if(c!==o){bt(l);var p=null===d.reactions?null:new Set(d.reactions);(null===p||!l.reactions?.every(e=>p.has(e)))&&bt(d)}return u}delete(n){var r=qe(this,e),i=r.get(n),o=super.delete(n);return void 0!==i&&(r.delete(n),yt(qe(this,s),super.size),yt(i,-1),bt(qe(this,t))),o}clear(){if(0!==super.size){super.clear();var n=qe(this,e);for(var r of(yt(qe(this,s),0),n.values()))yt(r,-1);bt(qe(this,t)),n.clear()}}keys(){return mt(qe(this,t)),super.keys()}values(){return Ye(this,r,o).call(this),super.values()}entries(){return Ye(this,r,o).call(this),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return mt(qe(this,s)),super.size}};e=new WeakMap,t=new WeakMap,s=new WeakMap,n=new WeakMap,r=new WeakSet,i=function(e){return ft===qe(this,n)?ht(e):gt(e)},o=function(){mt(qe(this,t));var n=qe(this,e);if(qe(this,s).v!==n.size)for(var o of((e,t,s)=>Ve(Re(e),s,t))(Ms.prototype,this,"keys").call(this))if(!n.has(o)){var a=Ye(this,r,i).call(this,0);n.set(o,a)}for([,a]of qe(this,e))mt(a)};let js=Ms;var Es=Je('<span class="vocabulary-tag svelte-10g5if6"> </span>'),Ts=Je('<span class="vocabulary-tag more svelte-10g5if6"> </span>'),Fs=Je("<!> <!>",1),Ws=Je('<span class="vocabulary-tag svelte-10g5if6"> </span>'),Os=Je('<button class="show-more-button svelte-10g5if6"> </button>'),Bs=Je("<!> <!>",1),Is=Je('<li class="objective-item svelte-10g5if6"><label class="objective-checkbox svelte-10g5if6"><input type="checkbox" class="svelte-10g5if6"/> <span> </span></label></li>'),Ns=Je('<span class="part-of-speech svelte-10g5if6"> </span>'),zs=Je('<span class="difficulty-indicator svelte-10g5if6"> </span>'),Rs=Je('<div role="button" tabindex="0"><span class="vocab-german svelte-10g5if6"> </span> <span class="vocab-bulgarian svelte-10g5if6"> </span></div>'),Vs=Je('<div class="lesson-card-container svelte-10g5if6"><div tabindex="0" role="button"><div class="lesson-card-front svelte-10g5if6"><div class="lesson-header svelte-10g5if6"><div> </div> <div class="lesson-type-icon svelte-10g5if6"> </div></div> <h3 class="lesson-title svelte-10g5if6"> </h3> <p class="lesson-description svelte-10g5if6"> </p> <div class="lesson-progress svelte-10g5if6"><div class="progress-bar-container svelte-10g5if6"><div class="progress-bar svelte-10g5if6" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <span class="progress-text svelte-10g5if6"> </span></div> <div class="lesson-vocabulary-preview svelte-10g5if6"><div class="vocabulary-tags svelte-10g5if6"><!></div></div> <div class="lesson-actions svelte-10g5if6"><button class="action-button primary svelte-10g5if6" aria-label="View lesson details">View Details</button> <button class="action-button secondary svelte-10g5if6" aria-label="Start this lesson">‚ñ∂Ô∏è Start</button></div></div> <div class="lesson-card-back svelte-10g5if6"><div class="lesson-header svelte-10g5if6"><button class="back-button svelte-10g5if6" aria-label="Back to lesson overview">‚Üê Back</button> <div> </div></div> <h3 class="lesson-title svelte-10g5if6"> </h3> <div class="lesson-objectives svelte-10g5if6"><h4 class="svelte-10g5if6">Learning Objectives</h4> <ul class="objectives-list svelte-10g5if6"></ul></div> <div class="lesson-vocabulary-details svelte-10g5if6"><h4 class="svelte-10g5if6"> </h4> <div class="vocabulary-navigation svelte-10g5if6"><button aria-label="Previous vocabulary item" class="svelte-10g5if6">‚óÄÔ∏è</button> <span class="vocabulary-counter svelte-10g5if6"> </span> <button aria-label="Next vocabulary item" class="svelte-10g5if6">‚ñ∂Ô∏è</button></div> <div class="vocabulary-card svelte-10g5if6"><div class="vocabulary-language german svelte-10g5if6"> </div> <div class="vocabulary-language bulgarian svelte-10g5if6"> </div> <div class="vocabulary-meta svelte-10g5if6"><!> <!></div></div> <div class="vocabulary-list svelte-10g5if6"></div></div> <div class="lesson-actions svelte-10g5if6"><button class="action-button primary svelte-10g5if6" aria-label="Start this lesson">Start Lesson</button></div></div></div></div>');function Us(e,t){wt(t,!0);let s=es(t,"lesson",7),n=ht(!1),r=ht(0),i=ht(!1),o=_t(()=>s().vocabulary.map(e=>"string"==typeof e?{id:e,german:e.split("-")[0]||e,bulgarian:e.split("-")[1]||e,partOfSpeech:"noun",difficulty:1}:e&&"object"==typeof e?{id:e.id||`vocab-${Date.now()}`,german:e.german||e.bulgarian||"Unknown",bulgarian:e.bulgarian||e.german||"Unknown",partOfSpeech:e.partOfSpeech||"noun",difficulty:e.difficulty||1}:{id:`vocab-${Date.now()}`,german:"Unknown",bulgarian:"Unknown",partOfSpeech:"noun",difficulty:1})),a=_t(()=>mt(o).length>0?mt(o):[{id:"fallback-vocab",german:"Example",bulgarian:"–ü—Ä–∏–º–µ—Ä",partOfSpeech:"noun",difficulty:1}]),l=_t(()=>mt(a)[mt(r)]||mt(a)[0]),c=_t(()=>Math.round(s().objectives.filter(e=>e.isCompleted).length/s().objectives.length*100));function u(){yt(n,!mt(n))}function d(e){return{A1:"bg-green-100 text-green-800 border-green-300",A2:"bg-green-200 text-green-900 border-green-400",B1:"bg-blue-100 text-blue-800 border-blue-300",B2:"bg-blue-200 text-blue-900 border-blue-400",C1:"bg-purple-100 text-purple-800 border-purple-300"}[e]||"bg-gray-100 text-gray-800 border-gray-300"}var p=Vs(),v=kt(p);v.__keydown=e=>"Enter"===e.key||" "===e.key?u():null;var h=kt(v),f=kt(h),g=kt(f),m=kt(g);$t(g);var y=Lt(g,2),b=kt(y,!0);$t(y),$t(f);var w=Lt(f,2),k=kt(w,!0);$t(w);var $=Lt(w,2),L=kt($,!0);$t($);var x=Lt($,2),_=kt(x),C=kt(_);$t(_);var A=Lt(_,2),D=kt(A);$t(A),$t(x);var P=Lt(x,2),S=kt(P),M=kt(S),j=e=>{var t=Fs(),s=Dt(t);Ut(s,17,()=>mt(o).slice(0,5),Gt,(e,t)=>{var s=Es(),n=kt(s,!0);$t(s),xt(()=>{Ht(s,"title",mt(t).german),Qe(n,mt(t).german)}),et(e,s)});var n=Lt(s,2),r=e=>{var t=Ts(),s=kt(t);$t(t),xt(()=>Qe(s,"+"+(mt(o).length-5))),et(e,t)};Vt(n,e=>{mt(o).length>5&&e(r)}),et(e,t)},E=e=>{var t=Bs(),s=Dt(t);Ut(s,17,()=>mt(o).slice(0,3),Gt,(e,t)=>{var s=Ws(),n=kt(s,!0);$t(s),xt(()=>{Ht(s,"title",mt(t).german),Qe(n,mt(t).german)}),et(e,s)});var n=Lt(s,2),r=e=>{var t=Os();t.__click=()=>yt(i,!0);var s=kt(t);$t(t),xt(()=>{Ht(t,"aria-label",`Show all ${mt(o).length} vocabulary items`),Qe(s,"+"+(mt(o).length-3))}),et(e,t)};Vt(n,e=>{mt(o).length>3&&e(r)}),et(e,t)};Vt(M,e=>{mt(i)?e(j):e(E,!1)}),$t(S),$t(P);var T=Lt(P,2),F=kt(T);F.__click=u,Lt(F,2).__click=()=>t.onStart?.(),$t(T),$t(h);var W=Lt(h,2),O=kt(W),B=kt(O);B.__click=u;var I=Lt(B,2),N=kt(I);$t(I),$t(O);var z=Lt(O,2),R=kt(z,!0);$t(z);var V=Lt(z,2),U=Lt(kt(V),2);Ut(U,21,()=>s().objectives,e=>e.id,(e,t)=>{var n=Is(),r=kt(n),i=kt(r);Kt(i),i.__change=()=>{return e=mt(t).id,s().objectives=s().objectives.map(t=>t.id===e?{...t,isCompleted:!t.isCompleted}:t),void(s().updatedAt=new Date);var e};var o=Lt(i,2);let a;var l=kt(o,!0);$t(o),$t(r),$t(n),xt(()=>{qt(i,mt(t).isCompleted),a=Zt(o,1,"svelte-10g5if6",null,a,{completed:mt(t).isCompleted}),Qe(l,mt(t).description)}),et(e,n)}),$t(U),$t(V);var G=Lt(V,2),K=kt(G),q=kt(K);$t(K);var Z=Lt(K,2),H=kt(Z);H.__click=function(){mt(r)>0&&At(r,-1)};var Y=Lt(H,2),X=kt(Y);$t(Y);var J=Lt(Y,2);J.__click=function(){mt(r)<mt(o).length-1&&At(r)},$t(Z);var Q=Lt(Z,2),ee=kt(Q),te=kt(ee,!0);$t(ee);var se=Lt(ee,2),ne=kt(se,!0);$t(se);var re=Lt(se,2),ie=kt(re),oe=e=>{var t=Ns(),s=kt(t,!0);$t(t),xt(()=>Qe(s,mt(l).partOfSpeech)),et(e,t)};Vt(ie,e=>{mt(l)?.partOfSpeech&&e(oe)});var ae=Lt(ie,2),le=e=>{var t=zs(),s=kt(t,!0);$t(t),xt(e=>Qe(s,e),[()=>"‚≠ê".repeat(mt(l).difficulty)]),et(e,t)};Vt(ae,e=>{mt(l)?.difficulty&&e(le)}),$t(re),$t(Q);var ce=Lt(Q,2);Ut(ce,21,()=>mt(o),Gt,(e,t,s)=>{var n=Rs();n.__click=()=>yt(r,s,!0),n.__keydown=e=>"Enter"===e.key?yt(r,s,!0):null;var i=kt(n),o=kt(i,!0);$t(i);var a=Lt(i,2),l=kt(a,!0);$t(a),$t(n),xt(()=>{Zt(n,1,"vocabulary-list-item "+(s===mt(r)?"active":""),"svelte-10g5if6"),Qe(o,mt(t)?.german||"Unknown"),Qe(l,mt(t)?.bulgarian||"Unknown")}),et(e,n)}),$t(ce),$t(G);var ue=Lt(G,2);kt(ue).__click=()=>t.onStart?.(),$t(ue),$t(W),$t(v),$t(p),xt((e,t,i)=>{Zt(v,1,"lesson-card "+(mt(n)?"flipped":""),"svelte-10g5if6"),Ht(v,"aria-label",`Lesson: ${s().title}`),Zt(g,1,`lesson-badge ${e??""}`,"svelte-10g5if6"),Qe(m,`${s().difficulty??""} ‚Ä¢ ${s().duration??""} min`),Ht(y,"aria-label",`Lesson type: ${s().type}`),Qe(b,t),Qe(k,s().title),Qe(L,s().description),Yt(C,`width: ${mt(c)}%`),Ht(C,"aria-valuenow",mt(c)),Qe(D,`${mt(c)??""}% complete`),Zt(I,1,`lesson-badge ${i??""}`,"svelte-10g5if6"),Qe(N,`${s().difficulty??""} ‚Ä¢ ${s().duration??""} min`),Qe(R,s().title),Qe(q,`Vocabulary (${mt(o).length??""})`),H.disabled=0===mt(r),Qe(X,`${mt(r)+1} / ${mt(o).length??""}`),J.disabled=mt(r)===mt(o).length-1,Qe(te,mt(l).german),Qe(ne,mt(l).bulgarian)},[()=>d(s().difficulty),()=>({vocabulary:"üìö",grammar:"üìñ",conversation:"üí¨",reading:"üìÑ",listening:"üîä",writing:"‚úçÔ∏è",culture:"üèõÔ∏è",mixed:"üîÑ",contextual:"üåê"}[s().type]||"üìö"),()=>d(s().difficulty)]),et(e,p),Ct()}Xe(["keydown","click","change"]);var Gs=Je('<div class="error-message"><div class="error-icon">‚ö†Ô∏è</div> <h3> </h3> <p> </p> <button class="btn btn-secondary"> </button></div>'),Ks=Je('<div class="fallback-lesson-message svelte-7i5fkp"><div class="fallback-icon svelte-7i5fkp">‚ö†Ô∏è</div> <h3> </h3> <p> </p> <button class="btn btn-secondary"> </button></div>'),qs=Je('<span class="lesson-tag svelte-7i5fkp"> </span>'),Zs=Je('<span class="lesson-tag more svelte-7i5fkp"> </span>'),Hs=Je('<div class="lesson-tags svelte-7i5fkp"><!> <!></div>'),Ys=Je('<li class="objective-item svelte-7i5fkp"><label class="objective-checkbox svelte-7i5fkp"><input type="checkbox" class="svelte-7i5fkp"/> <span> </span></label></li>'),Xs=Je('<li class="objective-item more-objectives svelte-7i5fkp"><button class="svelte-7i5fkp"> </button></li>'),Js=Je('<div class="lesson-objectives svelte-7i5fkp"><div class="objectives-header svelte-7i5fkp"><h3 class="svelte-7i5fkp"> </h3> <button class="toggle-objectives svelte-7i5fkp"> </button></div> <ul class="objectives-list svelte-7i5fkp"><!> <!></ul></div>'),Qs=Je('<span class="more-vocabulary svelte-7i5fkp"> </span>'),en=Je('<div class="vocabulary-part-of-speech svelte-7i5fkp"> </div>'),tn=Je('<div class="vocabulary-difficulty svelte-7i5fkp"> </div>'),sn=Je('<div class="vocabulary-item svelte-7i5fkp"><div class="vocabulary-source svelte-7i5fkp"> </div> <div class="vocabulary-target svelte-7i5fkp"> </div> <!> <!></div>'),nn=Je('<div class="vocabulary-list svelte-7i5fkp"></div>'),rn=Je('<div class="lesson-vocabulary svelte-7i5fkp"><div class="vocabulary-header svelte-7i5fkp"><h3 class="svelte-7i5fkp"> </h3> <button class="toggle-vocabulary svelte-7i5fkp"> </button></div> <div class="vocabulary-preview svelte-7i5fkp"> <!></div> <!></div>'),on=Je('<div class="section-meta svelte-7i5fkp"><span class="template-id"> </span></div>'),an=Je('<div role="button" tabindex="0"><div class="section-overview-icon svelte-7i5fkp"> </div> <div class="section-overview-title svelte-7i5fkp"> </div> <div class="section-overview-type svelte-7i5fkp"> </div></div>'),ln=Je('<div class="lesson-sections svelte-7i5fkp"><div class="sections-navigation svelte-7i5fkp"><button class="svelte-7i5fkp"> </button> <div class="section-indicator svelte-7i5fkp"> </div> <button class="svelte-7i5fkp"> </button></div> <div class="section-content svelte-7i5fkp"><div class="section-header svelte-7i5fkp"><div class="section-icon svelte-7i5fkp"> </div> <h2 class="section-title svelte-7i5fkp"> </h2> <div class="section-type svelte-7i5fkp"> </div></div> <div class="section-body svelte-7i5fkp"><div class="section-content-text svelte-7i5fkp"></div> <!></div></div> <div class="sections-overview svelte-7i5fkp"><h3 class="svelte-7i5fkp">Lesson Sections</h3> <div class="sections-list svelte-7i5fkp"></div></div></div>'),cn=Je('<div class="no-sections-message svelte-7i5fkp"> </div>'),un=Je('<div class="lesson-header svelte-7i5fkp"><div class="lesson-title-section svelte-7i5fkp"><div class="lesson-type-icon svelte-7i5fkp"> </div> <h1 class="lesson-title svelte-7i5fkp"> </h1></div> <div class="lesson-meta svelte-7i5fkp"><div> </div> <!></div></div> <div class="lesson-description svelte-7i5fkp"> </div> <div class="lesson-progress-container svelte-7i5fkp"><div class="progress-bar-container"><div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <span class="progress-text svelte-7i5fkp"> </span></div> <!> <!> <!> <div class="lesson-actions svelte-7i5fkp"><button class="btn btn-secondary"> </button> <button class="btn btn-primary"> </button></div>',1),dn=Je('<div class="generated-lesson-container svelte-7i5fkp"><!></div>');function pn(e,t){function s(e){return"DE_BG"===rs.languageMode?e.german:e.bulgarian}wt(t,!0);let n=es(t,"lesson",7),r=ht(!1),i=ht(null);function o(e,t){console.error(`[${t}]`,e)}let a=ht(0),l=ht(!1),c=ht(!1);Pt({}),St(()=>{try{if(!n())throw new Error("Lesson data is required")}catch(e){o(e,"Failed to initialize GeneratedLesson component"),yt(r,!0),yt(i,e instanceof Error?e.message:"Invalid lesson data",!0)}});let u=_t(()=>{try{return n().sections&&0!==n().sections.length?n().sections:[{id:"default-section",title:"Lesson Content",content:n().content||"No content available",type:"summary",metadata:{}}]}catch(e){return o(e,"Failed to derive lesson sections"),yt(r,!0),yt(i,"Failed to load lesson sections"),[{id:"error-section",title:"Error",content:"Failed to load lesson content",type:"summary",metadata:{}}]}}),d=_t(()=>{try{return mt(u)[mt(a)]||null}catch(e){return o(e,"Failed to get current section"),yt(r,!0),yt(i,"Failed to load section content"),null}}),p=_t(()=>{try{return n().objectives&&0!==n().objectives.length?Math.round(n().objectives.filter(e=>e.isCompleted).length/n().objectives.length*100):0}catch(e){return o(e,"Failed to calculate completion percentage"),yt(r,!0),yt(i,"Failed to calculate progress"),0}}),v=_t(()=>{try{return n().vocabulary||[]}catch(e){return o(e,"Failed to load vocabulary items"),yt(r,!0),yt(i,"Failed to load vocabulary"),[]}}),h=_t(()=>{try{return mt(v).length>0}catch(e){return o(e,"Failed to check vocabulary availability"),!1}}),f=_t(()=>{try{return n().objectives&&n().objectives.length>0}catch(e){return o(e,"Failed to check objectives availability"),!1}}),g=_t(()=>{try{return mt(u).length>0}catch(e){return o(e,"Failed to check sections availability"),!1}}),m=_t(()=>{try{return!0===n().metadata?.fallback}catch(e){return o(e,"Failed to check fallback status"),!1}});function y(){try{mt(a)<mt(u).length-1&&At(a)}catch(e){o(e,"Failed to navigate to next section"),yt(r,!0),yt(i,"Failed to navigate sections")}}function b(){try{mt(a)>0&&At(a,-1)}catch(e){o(e,"Failed to navigate to previous section"),yt(r,!0),yt(i,"Failed to navigate sections")}}function w(e){return{introduction:"üìò",vocabulary:"üìö",grammar:"üìñ",exercise:"‚úèÔ∏è",cultural:"üèõÔ∏è",summary:"üìù",conversation:"üí¨",reading:"üìÑ",listening:"üîä",writing:"‚úçÔ∏è"}[e]||"üìñ"}const k=_t(()=>({introduction:ns("sections.introduction")||"Introduction",vocabulary:ns("sections.vocabulary")||"Vocabulary",grammar:ns("sections.grammar")||"Grammar",exercise:ns("sections.exercise")||"Exercise",cultural:ns("sections.cultural_note")||"Cultural Note",summary:ns("sections.summary")||"Summary",conversation:ns("sections.conversation")||"Conversation",reading:ns("sections.reading")||"Reading",listening:ns("sections.listening")||"Listening",writing:ns("sections.writing")||"Writing"}));function $(e){return mt(k)[e]||e}var L=dn(),x=kt(L),_=e=>{var t=Gs(),s=Lt(kt(t),2),n=kt(s,!0);$t(s);var r=Lt(s,2),o=kt(r,!0);$t(r);var a=Lt(r,2);a.__click=()=>window.location.reload();var l=kt(a,!0);$t(a),$t(t),xt((e,t,s)=>{Qe(n,e),Qe(o,t),Qe(l,s)},[()=>ns("errors.lesson_load_error"),()=>mt(i)||ns("errors.unknown_error"),()=>ns("common.reload_page")]),et(e,t)},C=e=>{var t=tt(),k=Dt(t),L=e=>{var t=Ks(),s=Lt(kt(t),2),r=kt(s,!0);$t(s);var i=Lt(s,2),o=kt(i,!0);$t(i);var a=Lt(i,2);a.__click=()=>window.location.reload();var l=kt(a,!0);$t(a),$t(t),xt((e,t)=>{Qe(r,e),Qe(o,n().description),Qe(l,t)},[()=>ns("lesson.unavailable"),()=>ns("common.try_again")]),et(e,t)},x=e=>{var t=un(),m=Dt(t),k=kt(m),L=kt(k),x=kt(L,!0);$t(L);var _=Lt(L,2),C=kt(_,!0);$t(_),$t(k);var A=Lt(k,2),D=kt(A),P=kt(D);$t(D);var S=Lt(D,2),M=e=>{var t=Hs(),s=kt(t);Ut(s,17,()=>n().metadata.tags.slice(0,3),Gt,(e,t)=>{var s=qs(),n=kt(s,!0);$t(s),xt(()=>Qe(n,mt(t))),et(e,s)});var r=Lt(s,2),i=e=>{var t=Zs(),s=kt(t);$t(t),xt(()=>Qe(s,"+"+(n().metadata.tags.length-3))),et(e,t)};Vt(r,e=>{n().metadata.tags.length>3&&e(i)}),$t(t),et(e,t)};Vt(S,e=>{n().metadata?.tags&&n().metadata.tags.length>0&&e(M)}),$t(A),$t(m);var j=Lt(m,2),E=kt(j,!0);$t(j);var T=Lt(j,2),F=kt(T),W=kt(F);$t(F);var O=Lt(F,2),B=kt(O);$t(O),$t(T);var I=Lt(T,2),N=e=>{var t=Js(),s=kt(t),a=kt(s),l=kt(a,!0);$t(a);var u=Lt(a,2);u.__click=()=>yt(c,!mt(c));var d=kt(u,!0);$t(u),$t(s);var p=Lt(s,2),v=kt(p);Ut(v,17,()=>mt(c)?n().objectives:n().objectives.slice(0,3),e=>e.id,(e,t)=>{var s=Ys(),a=kt(s),l=kt(a);Kt(l),l.__change=()=>function(e){try{if(!n().objectives)throw new Error("Lesson objectives are not available");n().objectives=n().objectives.map(t=>t.id===e?{...t,isCompleted:!t.isCompleted}:t),n().updatedAt=new Date}catch(t){o(t,"Failed to toggle objective"),yt(r,!0),yt(i,"Failed to update objective status")}}(mt(t).id);var c=Lt(l,2);let u;var d=kt(c,!0);$t(c),$t(a),$t(s),xt(()=>{qt(l,mt(t).isCompleted),u=Zt(c,1,"svelte-7i5fkp",null,u,{completed:mt(t).isCompleted}),Qe(d,mt(t).description)}),et(e,s)});var h=Lt(v,2),f=e=>{var t=Xs(),s=kt(t);s.__click=()=>yt(c,!0);var r=kt(s);$t(s),$t(t),xt(e=>Qe(r,`+${n().objectives.length-3} ${e??""}`),[()=>ns("common.more_objectives")]),et(e,t)};Vt(h,e=>{n().objectives.length>3&&!mt(c)&&e(f)}),$t(p),$t(t),xt((e,t)=>{Qe(l,e),Qe(d,t)},[()=>ns("sections.learning_objectives"),()=>mt(c)?ns("common.show_less"):ns("common.show_all")]),et(e,t)};Vt(I,e=>{mt(f)&&e(N)});var z=Lt(I,2),R=e=>{var t=rn(),n=kt(t),r=kt(n),i=kt(r);$t(r);var o=Lt(r,2);o.__click=()=>yt(l,!mt(l));var a=kt(o,!0);$t(o),$t(n);var c=Lt(n,2),u=kt(c),d=Lt(u),p=e=>{var t=Qs(),s=kt(t);$t(t),xt(e=>Qe(s,`+${mt(v).length-5} ${e??""}`),[()=>ns("common.more_words")]),et(e,t)};Vt(d,e=>{mt(v).length>5&&!mt(l)&&e(p)}),$t(c);var h=Lt(c,2),f=e=>{var t=nn();Ut(t,21,()=>mt(v),e=>e.german,(e,t)=>{var n=sn(),r=kt(n),i=kt(r,!0);$t(r);var o=Lt(r,2),a=kt(o,!0);$t(o);var l=Lt(o,2),c=e=>{var s=en(),n=kt(s,!0);$t(s),xt(e=>Qe(n,e),[()=>{return{noun:"Noun",verb:"Verb",adjective:"Adjective",adverb:"Adverb",preposition:"Preposition",conjunction:"Conjunction"}[e=mt(t).partOfSpeech]||e;var e}]),et(e,s)};Vt(l,e=>{mt(t).partOfSpeech&&e(c)});var u=Lt(l,2),d=e=>{var s=tn(),n=kt(s,!0);$t(s),xt(e=>Qe(n,e),[()=>"‚≠ê".repeat(Math.round(mt(t).difficulty))]),et(e,s)};Vt(u,e=>{mt(t).difficulty&&e(d)}),$t(n),xt((e,t)=>{Qe(i,e),Qe(a,t)},[()=>s(mt(t)),()=>{return e=mt(t),"DE_BG"===rs.languageMode?e.bulgarian:e.german;var e}]),et(e,n)}),$t(t),et(e,t)};Vt(h,e=>{mt(l)&&e(f)}),$t(t),xt((e,t,s)=>{Qe(i,`${e??""} (${mt(v).length??""})`),Qe(a,t),Qe(u,`${s??""} `)},[()=>ns("sections.vocabulary"),()=>mt(l)?ns("common.show_less"):ns("common.show_all"),()=>{return e=mt(l)?mt(v).length:5,0===mt(v).length?"":mt(v).slice(0,e).map(e=>s(e)).join(", ");var e}]),et(e,t)};Vt(z,e=>{mt(h)&&e(R)});var V=Lt(z,2),U=e=>{var t=ln(),s=kt(t),n=kt(s);n.__click=b;var r=kt(n);$t(n);var i=Lt(n,2),o=kt(i);$t(i);var l=Lt(i,2);l.__click=y;var c=kt(l);$t(l),$t(s);var p=Lt(s,2),v=kt(p),h=kt(v),f=kt(h,!0);$t(h);var g=Lt(h,2),m=kt(g,!0);$t(g);var k=Lt(g,2),L=kt(k,!0);$t(k),$t(v);var x=Lt(v,2),_=kt(x),C=Lt(_,2),A=e=>{var t=on(),s=kt(t),n=kt(s);$t(s),$t(t),xt(()=>Qe(n,`Template: ${mt(d).metadata.templateId??""}`)),et(e,t)};Vt(C,e=>{mt(d).metadata?.templateId&&e(A)}),$t(x),$t(p);var D=Lt(p,2),P=Lt(kt(D),2);Ut(P,23,()=>mt(u),e=>e.id,(e,t,s)=>{var n=an();n.__click=()=>yt(a,mt(s),!0),n.__keydown=e=>"Enter"===e.key||" "===e.key?yt(a,mt(s),!0):null;var r=kt(n),i=kt(r,!0);$t(r);var o=Lt(r,2),l=kt(o,!0);$t(o);var c=Lt(o,2),u=kt(c,!0);$t(c),$t(n),xt((e,r)=>{Zt(n,1,"section-overview-item "+(mt(s)===mt(a)?"active":""),"svelte-7i5fkp"),Qe(i,e),Qe(l,mt(t).title),Qe(u,r)},[()=>w(mt(t).type),()=>$(mt(t).type)]),et(e,n)}),$t(P),$t(D),$t(t),xt((e,t,s,i,p,v,h,g,y)=>{n.disabled=0===mt(a),Ht(n,"aria-label",e),Qe(r,`‚óÄÔ∏è ${t??""}`),Qe(o,`${s??""} ${mt(a)+1} ${i??""} ${mt(u).length??""}`),l.disabled=mt(a)===mt(u).length-1,Ht(l,"aria-label",p),Qe(c,`${v??""} ‚ñ∂Ô∏è`),Qe(f,h),Qe(m,mt(d).title),Qe(L,g),Ht(_,"innerhtml",y)},[()=>ns("common.previous_section"),()=>ns("common.previous"),()=>ns("common.section"),()=>ns("common.of"),()=>ns("common.next_section"),()=>ns("common.next"),()=>w(mt(d).type),()=>$(mt(d).type),()=>mt(d).content.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")]),et(e,t)},G=e=>{var t=cn(),s=kt(t,!0);$t(t),xt(e=>Qe(s,e),[()=>ns("lesson.no_sections")]),et(e,t)};Vt(V,e=>{mt(g)?e(U):e(G,!1)});var K=Lt(V,2),q=kt(K);q.__click=()=>window.history.back();var Z=kt(q,!0);$t(q);var H=Lt(q,2);H.__click=()=>alert(ns("lesson.start_alert"));var Y=kt(H,!0);$t(H),$t(K),xt((e,t,s,r,i)=>{Ht(L,"aria-label",`Lesson type: ${n().type}`),Qe(x,e),Qe(C,n().title),Zt(D,1,`lesson-badge ${t??""}`,"svelte-7i5fkp"),Qe(P,`${n().difficulty??""} ‚Ä¢ ${n().duration??""} ${s??""}`),Qe(E,n().description),Yt(W,`width: ${mt(p)}%`),Ht(W,"aria-valuenow",mt(p)),Qe(B,`${mt(p)??""}% complete`),Qe(Z,r),Qe(Y,i)},[()=>({vocabulary:"üìö",grammar:"üìñ",conversation:"üí¨",reading:"üìÑ",listening:"üîä",writing:"‚úçÔ∏è",culture:"üèõÔ∏è",mixed:"üéØ",contextual:"üåç"}[n().type]||"üìö"),()=>({A1:"bg-green-100 text-green-800 border-green-300",A2:"bg-green-200 text-green-900 border-green-400",B1:"bg-blue-100 text-blue-800 border-blue-300",B2:"bg-blue-200 text-blue-900 border-blue-400",C1:"bg-purple-100 text-purple-800 border-purple-300"}[n().difficulty]||"bg-gray-100 text-gray-800 border-gray-300"),()=>ns("common.minutes"),()=>ns("common.back_to_lessons"),()=>ns("common.start_lesson")]),et(e,t)};Vt(k,e=>{mt(m)?e(L):e(x,!1)},!0),et(e,t)};Vt(x,e=>{mt(r)?e(_):e(C,!1)}),$t(L),et(e,L),Ct()}Xe(["click","change","keydown"]);const vn=ms({id:as,german:$s().min(1).max(100),bulgarian:$s().min(1).max(100),partOfSpeech:os.default("noun"),difficulty:ks().min(1).max(5).default(1).describe("1-5 scale where 1 is easiest"),categories:ws(ls).min(1).default(["uncategorized"]),metadata:is.optional(),createdAt:bs([Ls(),$s().datetime().transform(e=>new Date(e))]).default(new Date).transform(e=>e instanceof Date?e:new Date(e)),updatedAt:bs([Ls(),$s().datetime().transform(e=>new Date(e))]).default(new Date).transform(e=>e instanceof Date?e:new Date(e)),isCommon:ys().default(!1),isVerified:ys().default(!1)}),hn=bs([vn.omit({id:!0}),as,$s().uuid()]),fn=xs(["A1","A2","B1","B2","C1"]),gn=xs(["vocabulary","grammar","conversation","reading","listening","writing","culture","mixed"]),mn=ms({id:$s().uuid(),description:$s().min(5).max(200),isCompleted:ys().default(!1),createdAt:Ls().default(new Date)}),yn=ms({tags:ws($s()).default([]),prerequisites:ws(as).default([]),relatedLessons:ws(as).default([]),isPremium:ys().default(!1)}).default({}),bn=ms({id:as,title:$s().min(3).max(100),description:$s().min(10).max(1e3),difficulty:fn.default("A1"),type:gn.default("vocabulary"),duration:ks().min(5).max(120).default(15),vocabulary:ws(hn).default([]),objectives:ws(mn).default([]),content:$s().optional(),isCompleted:ys().default(!1),completionPercentage:ks().min(0).max(100).default(0),createdAt:bs([Ls(),$s().datetime().transform(e=>new Date(e))]).default(new Date),updatedAt:bs([Ls(),$s().datetime().transform(e=>new Date(e))]).default(new Date),metadata:yn}).catch(e=>({id:`fallback-${Date.now()}`,title:"Invalid Lesson",description:"This lesson failed validation",difficulty:"A1",type:"vocabulary",duration:15,vocabulary:[],objectives:[],createdAt:new Date,updatedAt:new Date,metadata:{}}));const wn=new class{constructor(){this.lessons=[],this.vocabularyData=[],this.initialized=!1}async initialize(){if(!this.initialized)try{await cs.initialize();const e=await cs.getVocabulary();this.vocabularyData=e.map(e=>({...e,categories:this.normalizeCategories(e.categories),metadata:e.metadata??{},isCommon:e.isCommon??!1,isVerified:e.isVerified??!1,learningPhase:e.learningPhase??0,createdAt:e.createdAt??new Date,updatedAt:e.updatedAt??new Date,cefrLevel:this.normalizeCefrLevel(e.cefrLevel)})),this.initialized=!0}catch(e){throw this.vocabularyData=[],this.initialized=!1,e}}isInitialized(){return this.initialized}generateLessonFromVocabulary(e,t={}){if(!e||0===e.length)return this.createFallbackLesson("No vocabulary items provided");const{title:s,difficulty:n,type:r="vocabulary",description:i}=t,o=s||this.generateLessonTitle(e,r),a=n||this.determineLessonDifficulty(e),l=this.createLearningObjectives(e,a,r),c={id:crypto.randomUUID(),title:o,description:i||this.generateLessonDescription(e,a,r),difficulty:a,type:r,duration:this.calculateLessonDuration(e.length),vocabulary:e.map(e=>this.normalizeVocabularyItem(e)),objectives:l,isCompleted:!1,completionPercentage:0,createdAt:new Date,updatedAt:new Date,metadata:{tags:this.generateLessonTags(e,a,r),prerequisites:[],relatedLessons:[],isPremium:!1}};return this.validateLesson(c)}async generateLessonFromCriteria(e={}){try{this.initialized||await this.initialize();const t=this.queryVocabulary(e),s=(e.limit?t.slice(0,e.limit):t).map(e=>this.normalizeVocabularyItem(e));return this.generateLessonFromVocabulary(s,{title:e.title??"Untitled Lesson",difficulty:e.difficulty??"A1",type:e.type??"vocabulary",description:e.description??""})}catch(t){return this.createFallbackLesson("Failed to generate lesson from criteria")}}queryVocabulary(e){if(0===this.vocabularyData.length)return[];const t=e.difficulty?this.getDifficultyRange(e.difficulty):null;return this.vocabularyData.filter(s=>{const n=!t||s.difficulty>=t.min&&s.difficulty<=t.max,r=!(e.categories&&e.categories.length>0)||s.categories.some(t=>e.categories?.includes(t)),i=!e.partOfSpeech||s.partOfSpeech===e.partOfSpeech;return n&&r&&i})}getDifficultyRange(e){return{A1:{min:1,max:1.5},A2:{min:1.5,max:2.5},B1:{min:2.5,max:3.5},B2:{min:3.5,max:4.5},C1:{min:4.5,max:5}}[e]}normalizeCefrLevel(e){return"A1"===e||"A2"===e||"B1"===e||"B2"===e?e:"A1"}generateLessonTitle(e,t){if(0===e.length)return"New Lesson";const s=new Set;e.forEach(e=>{this.normalizeCategories(e.categories).forEach(e=>s.add(e))});const n={vocabulary:"Vocabulary",grammar:"Grammar",conversation:"Conversation",reading:"Reading",listening:"Listening",writing:"Writing",culture:"Culture",mixed:"Mixed Topics",contextual:"Contextual"}[t]||"Lesson";if(1===s.size){const e=s.values().next();if(!e.done)return`${n}: ${this.getCategoryDisplayName(e.value)}`}return`${n} Lesson (${e.length} items)`}generateLessonDescription(e,t,s){const n=new Set;e.forEach(e=>n.add(e.partOfSpeech));const r=Array.from(n).map(e=>this.getPartOfSpeechDisplayName(e)).join(", ");return`This ${t} level lesson focuses on ${{vocabulary:"vocabulary building",grammar:"grammar concepts",conversation:"conversation practice",reading:"reading comprehension",listening:"listening skills",writing:"writing practice",culture:"cultural insights",mixed:"various language skills",contextual:"contextual usage"}[s]} with ${e.length} vocabulary items covering ${r}.`}calculateLessonDuration(e){const t=2*e;return e>15?Math.min(t+10,120):e>10?t+5:Math.max(t,15)}createLearningObjectives(e,t,s){const n=[];n.push({id:crypto.randomUUID(),description:`Learn ${e.length} new vocabulary items at ${t} level`,isCompleted:!1,createdAt:new Date});return n.push({id:crypto.randomUUID(),description:{vocabulary:"Practice using new vocabulary in context",grammar:"Understand and apply grammar concepts",conversation:"Engage in conversation using learned vocabulary",reading:"Read and comprehend texts using learned vocabulary",listening:"Listen and understand spoken language at this level",writing:"Write sentences or paragraphs using learned vocabulary",culture:"Understand cultural context of vocabulary",mixed:"Practice various language skills at this level",contextual:"Use vocabulary in specific contexts"}[s],isCompleted:!1,createdAt:new Date}),"A1"===t||"A2"===t?n.push({id:crypto.randomUUID(),description:"Recognize basic words and phrases in context",isCompleted:!1,createdAt:new Date}):"B1"===t||"B2"===t?n.push({id:crypto.randomUUID(),description:"Use vocabulary in complete sentences and questions",isCompleted:!1,createdAt:new Date}):n.push({id:crypto.randomUUID(),description:"Use advanced vocabulary in complex sentences and discussions",isCompleted:!1,createdAt:new Date}),n}generateLessonTags(e,t,s){const n=[s,t],r=new Set;return e.forEach(e=>{this.normalizeCategories(e.categories).forEach(e=>r.add(e))}),Array.from(r).slice(0,3).forEach(e=>{n.push(this.getCategoryDisplayName(e))}),n}getCategoryDisplayName(e){return{greetings:"Greetings",numbers:"Numbers",family:"Family",food:"Food",colors:"Colors",animals:"Animals","body-parts":"Body Parts",clothing:"Clothing",home:"House & Home",nature:"Nature",transport:"Transportation",technology:"Technology",time:"Time & Date",weather:"Weather",professions:"Professions",places:"Places",grammar:"Grammar",culture:"Culture","everyday-phrases":"Everyday Phrases"}[e]||e}getPartOfSpeechDisplayName(e){return{noun:"Nouns",verb:"Verbs",adjective:"Adjectives",adverb:"Adverbs",pronoun:"Pronouns",preposition:"Prepositions",conjunction:"Conjunctions",interjection:"Interjections",article:"Articles",number:"Numbers",phrase:"Phrases",expression:"Expressions"}[e]||e}normalizeCategories(e){const t=["greetings","numbers","family","food","colors","animals","body-parts","clothing","home","nature","transport","technology","time","weather","professions","places","grammar","culture","everyday-phrases"];if(!e||0===e.length)return["culture"];const s=e.map(e=>t.includes(e)?e:"culture").filter(Boolean);return s.length>0?s:["culture"]}normalizeVocabularyItem(e){return{...e,categories:this.normalizeCategories(e.categories),metadata:e.metadata??{},isCommon:e.isCommon??!1,isVerified:e.isVerified??!1,learningPhase:e.learningPhase??0,createdAt:e.createdAt??new Date,updatedAt:e.updatedAt??new Date,cefrLevel:e.cefrLevel??"A1"}}determineLessonDifficulty(e){if(0===e.length)return"A1";const t=e.reduce((e,t)=>e+t.difficulty,0)/e.length;return t<=1.5?"A1":t<=2.5?"A2":t<=3.5?"B1":t<=4.5?"B2":"C1"}validateLesson(e){const t=bn.safeParse(e);return t.success?t.data:this.createFallbackLesson("Lesson validation failed")}createFallbackLesson(e){return{id:`fallback-${Date.now()}-${crypto.randomUUID()}`,title:"Lesson Unavailable",description:"This lesson could not be generated. Please try again later.",difficulty:"A1",type:"vocabulary",duration:15,vocabulary:[],objectives:[{id:crypto.randomUUID(),description:"Lesson generation failed - please try again",isCompleted:!1,createdAt:new Date}],isCompleted:!1,completionPercentage:0,createdAt:new Date,updatedAt:new Date,metadata:{tags:["error"],prerequisites:[],relatedLessons:[],isPremium:!1}}}getLessons(){return this.lessons}getLessonById(e){return this.lessons.find(t=>t.id===e)}addLesson(e){const t=this.validateLesson(e);this.lessons.push(t)}updateLesson(e,t){const s=this.lessons.findIndex(t=>t.id===e);if(-1===s)return;const n={...this.lessons[s],...t,updatedAt:new Date},r={...n,id:n.id??`lesson_${Date.now()}`,title:n.title??"Untitled",description:n.description??"",difficulty:n.difficulty??"A1",type:n.type??"vocabulary",vocabulary:n.vocabulary??[],duration:n.duration??0,objectives:n.objectives??[],isCompleted:n.isCompleted??!1,completionPercentage:n.completionPercentage??0},i=this.validateLesson(r);return this.lessons[s]=i,i}removeLesson(e){const t=this.lessons.length;return this.lessons=this.lessons.filter(t=>t.id!==e),this.lessons.length!==t}getLessonsByDifficulty(e){return this.lessons.filter(t=>t.difficulty===e)}getLessonsByType(e){return this.lessons.filter(t=>t.type===e)}getLessonsByTag(e){return this.lessons.filter(t=>t.metadata.tags.includes(e))}getRandomLessons(e=3){if(0===this.lessons.length)return[];return[...this.lessons].sort(()=>.5-Math.random()).slice(0,Math.min(e,this.lessons.length))}};const kn=new class{constructor(){this.initialized=!1}async initialize(){await wn.initialize(),this.initialized=!0}isInitialized(){return this.initialized}async generateDynamicLesson(e){try{const t=this.validateLessonGenerationParams(e),s=await us.generateLesson(t);return this.convertGeneratedLessonToLesson(s)}catch(t){return this.createFallbackLesson(e.type||"vocabulary",e.difficulty||"A1")}}async generateThematicLesson(e,t,s){const n={userId:"default",type:"vocabulary",difficulty:vs(t)?t:"A1",criteria:{categories:e},metadata:{includePractice:s?.includePractice??!0,includeReview:s?.includeReview??!1}};return this.generateDynamicLesson(n)}async generateGrammarLesson(e,t,s){const n={userId:"default",type:"grammar",difficulty:vs(t)?t:"A1",criteria:{conceptType:e},metadata:{includePractice:s?.includePractice??!0,includeComparison:s?.includeComparison??!1}};return this.generateDynamicLesson(n)}async generateMixedLesson(e,t,s){const n={userId:"default",type:"mixed",difficulty:vs(t)?t:"A1",criteria:{categories:[e]},metadata:{includePractice:s?.includePractice??!0,includeReview:s?.includeReview??!1}};return this.generateDynamicLesson(n)}validateLessonGenerationParams(e){const t={userId:"default",type:"vocabulary",difficulty:"A1",criteria:{},metadata:{}};return{userId:e.userId||t.userId,type:["vocabulary","grammar","mixed","culture","contextual"].includes(e.type)?e.type:t.type,difficulty:["A1","A2","B1","B2","C1"].includes(e.difficulty)?e.difficulty:t.difficulty,criteria:e.criteria||t.criteria,metadata:e.metadata||t.metadata}}convertGeneratedLessonToLesson(e){const t=e.sections.map(e=>`## ${e.title||e.type}\n${e.content||""}`).join("\n\n"),s=e.learningObjectives.map(e=>({id:ds(),description:e,isCompleted:!1,createdAt:new Date})),n=5*e.sections.length+5,r=this.generateLessonTags(e);return{id:e.id,title:e.title,description:this.generateLessonDescription(e),difficulty:this.normalizeDifficulty(e.difficulty),type:this.normalizeLessonType(e.type),duration:n,vocabulary:this.normalizeVocabulary(e.vocabulary||[]),objectives:s,content:t||this.generateLessonDescription(e),isCompleted:!1,completionPercentage:0,createdAt:e.createdAt||new Date,updatedAt:e.updatedAt||new Date,metadata:{tags:r,prerequisites:[],relatedLessons:[],isPremium:!1,...e.metadata}}}generateLessonTags(e){const t=[];if(t.push(e.type),t.push(e.difficulty),e.grammarConcepts&&e.grammarConcepts.length>0&&e.grammarConcepts.forEach(e=>{e.name?.german&&t.push(e.name.german)}),e.vocabulary&&e.vocabulary.length>0){const s=new Set;e.vocabulary.forEach(e=>{e.categories&&e.categories.forEach(e=>{const t=wn.getCategoryDisplayName(e);s.add(t),s.add(e)})}),t.push(...Array.from(s))}return t}generateLessonDescription(e){const t={A1:"beginner",A2:"elementary",B1:"intermediate",B2:"upper intermediate",C1:"advanced"}[e.difficulty]||"beginner",s={vocabulary:"vocabulary building",grammar:"grammar concepts",mixed:"various language skills",contextual:"contextual learning"}[e.type]||"language learning",n=e.vocabulary?.length||0;let r="";if(e.grammarConcepts&&e.grammarConcepts.length>0){r=`. It covers grammar concepts including ${e.grammarConcepts.map(e=>e.name?.german||e.id).join(", ")}.`}return`This ${t} level lesson focuses on ${s} with ${n} vocabulary items${r}`}normalizeLessonType(e){return"vocabulary"===e||"grammar"===e||"conversation"===e||"reading"===e||"listening"===e||"writing"===e||"culture"===e||"mixed"===e?e:"mixed"}normalizeDifficulty(e){return"A1"===e||"A2"===e||"B1"===e||"B2"===e||"C1"===e?e:"A1"}normalizeVocabulary(e){return e.map(e=>({...e,isCommon:e.isCommon??!1,isVerified:e.isVerified??!1,learningPhase:e.learningPhase??0,categories:e.categories??[],metadata:e.metadata??{}}))}createFallbackLesson(e,t){return{id:`fallback-lesson-${ds()}`,title:"Lesson Unavailable",description:"Dynamic lesson generation failed. Please try again or select a different lesson.",difficulty:vs(t)?t:"A1",type:ps(e)?e:"vocabulary",duration:10,vocabulary:[],objectives:[],isCompleted:!1,completionPercentage:0,createdAt:new Date,updatedAt:new Date,metadata:{tags:[e,t],prerequisites:[],relatedLessons:[],isPremium:!1}}}getLessons(){return wn.getLessons()||[]}getLessonById(e){return wn.getLessonById(e)}generateLessonFromVocabulary(e){return wn.generateLessonFromVocabulary(e)}async generateLessonFromCriteria(e){const t={...e,type:e.type?this.normalizeLessonType(e.type):void 0,difficulty:e.difficulty?this.normalizeDifficulty(e.difficulty):void 0,categories:e.categories};return await wn.generateLessonFromCriteria(t)||this.createFallbackLesson("vocabulary","A1")}getLessonsByDifficulty(e){return vs(e)&&wn.getLessonsByDifficulty(e)||[]}getLessonsByType(e){return ps(e)&&wn.getLessonsByType(e)||[]}getLessonsByTag(e){return wn.getLessonsByTag(e)||[]}getRandomLessons(e){return wn.getRandomLessons(e)||[]}addLesson(e){return wn.addLesson(e)}updateLesson(e,t){return wn.updateLesson(e,t)}removeLesson(e){return wn.removeLesson(e)}};function $n(e){return null!==e&&"object"==typeof e}const Ln=["string","number","bigint","boolean"];function xn(e){return null==e||(!!Ln.includes(typeof e)||(Array.isArray(e)?e.every(e=>xn(e)):"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype))}const _n=Symbol("box"),Cn=Symbol("is-writable");function An(e,t){const s=_t(e);return t?{[_n]:!0,[Cn]:!0,get current(){return mt(s)},set current(e){t(e)}}:{[_n]:!0,get current(){return e()}}}function Dn(...e){return function(t){for(const s of e)if(s){if(t.defaultPrevented)return;"function"==typeof s?s.call(this,t):s.current?.call(this,t)}}}var Pn=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Sn=/\n/g,Mn=/^\s*/,jn=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,En=/^:\s*/,Tn=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Fn=/^[;\s]*/,Wn=/^\s+|\s+$/g,On="";function Bn(e){return e?e.replace(Wn,On):On}function In(e,t){let s=null;if(!e||"string"!=typeof e)return s;const n=function(e,t){if("string"!=typeof e)throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var s=1,n=1;function r(e){var t=e.match(Sn);t&&(s+=t.length);var r=e.lastIndexOf("\n");n=~r?e.length-r:n+e.length}function i(){var e={line:s,column:n};return function(t){return t.position=new o(e),c(),t}}function o(e){this.start=e,this.end={line:s,column:n},this.source=t.source}function a(r){var i=new Error(t.source+":"+s+":"+n+": "+r);if(i.reason=r,i.filename=t.source,i.line=s,i.column=n,i.source=e,!t.silent)throw i}function l(t){var s=t.exec(e);if(s){var n=s[0];return r(n),e=e.slice(n.length),s}}function c(){l(Mn)}function u(e){var t;for(e=e||[];t=d();)!1!==t&&e.push(t);return e}function d(){var t=i();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var s=2;On!=e.charAt(s)&&("*"!=e.charAt(s)||"/"!=e.charAt(s+1));)++s;if(s+=2,On===e.charAt(s-1))return a("End of comment missing");var o=e.slice(2,s-2);return n+=2,r(o),e=e.slice(s),n+=2,t({type:"comment",comment:o})}}function p(){var e=i(),t=l(jn);if(t){if(d(),!l(En))return a("property missing ':'");var s=l(Tn),n=e({type:"declaration",property:Bn(t[0].replace(Pn,On)),value:s?Bn(s[0].replace(Pn,On)):On});return l(Fn),n}}return o.prototype.content=e,c(),function(){var e,t=[];for(u(t);e=p();)!1!==e&&(t.push(e),u(t));return t}()}(e),r="function"==typeof t;return n.forEach(e=>{if("declaration"!==e.type)return;const{property:n,value:i}=e;r?t(n,i,e):i&&(s=s||{},s[n]=i)}),s}const Nn=/\d/,zn=["-","_","/","."];function Rn(e=""){if(!Nn.test(e))return e!==e.toLowerCase()}function Vn(e){return e?function(e){const t=[];let s,n,r="";for(const i of e){const e=zn.includes(i);if(!0===e){t.push(r),r="",s=void 0;continue}const o=Rn(i);if(!1===n){if(!1===s&&!0===o){t.push(r),r=i,s=o;continue}if(!0===s&&!1===o&&r.length>1){const e=r.at(-1);t.push(r.slice(0,Math.max(0,r.length-1))),r=e+i,s=o;continue}}r+=i,s=o,n=e}return t.push(r),t}(e).map(e=>function(e){return e?e[0].toUpperCase()+e.slice(1):""}(e)).join(""):""}function Un(e){if(!e)return{};const t={};return In(e,function(e,s){var n;e.startsWith("-moz-")||e.startsWith("-webkit-")||e.startsWith("-ms-")||e.startsWith("-o-")?t[Vn(e)]=s:e.startsWith("--")?t[e]=s:t[(n=e,function(e){return e?e[0].toLowerCase()+e.slice(1):""}(Vn(n||"")))]=s}),t}function Gn(...e){return(...t)=>{for(const s of e)"function"==typeof s&&s(...t)}}const Kn=function(e,t){const s=RegExp(e,"g");return e=>{if("string"!=typeof e)throw new TypeError("expected an argument of type string, but got "+typeof e);return e.match(s)?e.replace(s,t):e}}(/[A-Z]/,e=>`-${e.toLowerCase()}`);function qn(e={}){return function(e){if(!e||"object"!=typeof e||Array.isArray(e))throw new TypeError("expected an argument of type object, but got "+typeof e);return Object.keys(e).map(t=>`${Kn(t)}: ${e[t]};`).join("\n")}(e).replace("\n"," ")}const Zn=new Set(["onabort","onanimationcancel","onanimationend","onanimationiteration","onanimationstart","onauxclick","onbeforeinput","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncompositionend","oncompositionstart","oncompositionupdate","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onfocusin","onfocusout","onformdata","ongotpointercapture","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onlostpointercapture","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onpaste","onpause","onplay","onplaying","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointermove","onpointerout","onpointerover","onpointerup","onprogress","onratechange","onreset","onresize","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onselectionchange","onselectstart","onslotchange","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ontransitioncancel","ontransitionend","ontransitionrun","ontransitionstart","onvolumechange","onwaiting","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkittransitionend","onwheel"]);function Hn(e){return Zn.has(e)}function Yn(...e){const t={...e[0]};for(let s=1;s<e.length;s++){const n=e[s];if(n){for(const e of Object.keys(n)){const s=t[e],r=n[e],i="function"==typeof s,o="function"==typeof r;if(i&&Hn(e)){const n=s,i=r;t[e]=Dn(n,i)}else if(i&&o)t[e]=Gn(s,r);else if("class"===e){const n=xn(s),i=xn(r);n&&i?t[e]=Xt(s,r):n?t[e]=Xt(s):i&&(t[e]=Xt(r))}else if("style"===e){const n="object"==typeof s,i="object"==typeof r,o="string"==typeof s,a="string"==typeof r;if(n&&i)t[e]={...s,...r};else if(n&&a){const n=Un(r);t[e]={...s,...n}}else if(o&&i){const n=Un(s);t[e]={...n,...r}}else if(o&&a){const n=Un(s),i=Un(r);t[e]={...n,...i}}else n?t[e]=s:i?t[e]=r:o?t[e]=s:a&&(t[e]=r)}else t[e]=void 0!==r?r:s}for(const e of Object.getOwnPropertySymbols(n)){const s=t[e],r=n[e];t[e]=void 0!==r?r:s}}}return"object"==typeof t.style&&(t.style=qn(t.style).replaceAll("\n"," ")),!1===t.hidden&&(t.hidden=void 0,delete t.hidden),!1===t.disabled&&(t.disabled=void 0,delete t.disabled),t}const Xn="undefined"!=typeof window?window:void 0;a=new WeakMap,l=new WeakMap,new class{constructor(e={}){Ze(this,a),Ze(this,l);const{window:t=Xn,document:s=t?.document}=e;void 0!==t&&(He(this,a,s),He(this,l,st(e=>{const s=nt(t,"focusin",e),n=nt(t,"focusout",e);return()=>{s(),n()}})))}get current(){var e;return null==(e=qe(this,l))||e.call(this),qe(this,a)?function(e){let t=e.activeElement;for(;t?.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}(qe(this,a)):null}};class Jn{constructor(e){Ze(this,c),Ze(this,u),He(this,c,e),He(this,u,Symbol(e))}get key(){return qe(this,u)}exists(){return Mt(qe(this,u))}get(){const e=jt(qe(this,u));if(void 0===e)throw new Error(`Context "${qe(this,c)}" not found`);return e}getOr(e){const t=jt(qe(this,u));return void 0===t?e:t}set(e){return Et(qe(this,u),e)}}function Qn(e,t,s,n={}){const{lazy:r=!1}=n;let i=!r,o=Array.isArray(e)?[]:void 0;!function(e,t){switch(e){case"post":St(t);break;case"pre":Tt(t)}}(t,()=>{const t=Array.isArray(e)?e.map(e=>e()):e();if(!i)return i=!0,void(o=t);const n=Ft(()=>s(t,o));return o=t,n})}function er(e,t,s){Qn(e,"post",t,s)}function tr(e){St(()=>()=>{e()})}function sr(e){Wt().then(e)}c=new WeakMap,u=new WeakMap,er.pre=function(e,t,s){Qn(e,"pre",t,s)};function nr(e){return $n(e)&&1===e.nodeType&&"string"==typeof e.nodeName}function rr(e){return function(e){return $n(e)&&void 0!==e.nodeType}(e)&&11===e.nodeType&&"host"in e}function ir(e){return function(e){return $n(e)&&9===e.nodeType}(e)?e:function(e){return $n(e)&&"VisualViewport"===e.constructor?.name}(e)?e.document:e?.ownerDocument??document}class or{constructor(e){Ge(this,"element"),Ze(this,d,_t(()=>{if(!this.element.current)return document;return this.element.current.getRootNode()??document})),Ge(this,"getDocument",()=>ir(this.root)),Ge(this,"getWindow",()=>this.getDocument().defaultView??window),Ge(this,"getActiveElement",()=>function(e){let t=e.activeElement;for(;t?.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}(this.root)),Ge(this,"isActiveElement",e=>e===this.getActiveElement()),Ge(this,"querySelector",e=>this.root?this.root.querySelector(e):null),Ge(this,"querySelectorAll",e=>this.root?this.root.querySelectorAll(e):[]),Ge(this,"setTimeout",(e,t)=>this.getWindow().setTimeout(e,t)),Ge(this,"clearTimeout",e=>this.getWindow().clearTimeout(e)),this.element="function"==typeof e?An(e):e}get root(){return mt(qe(this,d))}set root(e){yt(qe(this,d),e)}getElementById(e){return this.root.getElementById(e)}}function ar(e,t){return{[Ss()]:s=>{return $n(n=e)&&_n in n?(e.current=s,Ft(()=>t?.(s)),()=>{"isConnected"in s&&s.isConnected||(e.current=null,t?.(null))}):(e(s),Ft(()=>t?.(s)),()=>{"isConnected"in s&&s.isConnected||(e(null),t?.(null))});var n}}}function lr(e){return e?"":void 0}d=new WeakMap;class cr{constructor(e){Ze(this,p),Ze(this,v),Ge(this,"attrs"),He(this,p,e.getVariant?e.getVariant():null),He(this,v,qe(this,p)?`data-${qe(this,p)}-`:`data-${e.component}-`),this.getAttr=this.getAttr.bind(this),this.selector=this.selector.bind(this),this.attrs=Object.fromEntries(e.parts.map(e=>[e,this.getAttr(e)]))}getAttr(e,t){return t?`data-${t}-${e}`:`${qe(this,v)}${e}`}selector(e,t){return`[${this.getAttr(e,t)}]`}}function ur(e){const t=new cr(e);return{...t.attrs,selector:t.selector,getAttr:t.getAttr}}p=new WeakMap,v=new WeakMap;const dr="undefined"!=typeof document,pr=dr&&window?.navigator?.userAgent&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||window?.navigator?.maxTouchPoints>2&&/iPad|Macintosh/.test(window?.navigator.userAgent));function vr(e){return e instanceof HTMLElement}class hr{constructor(e){Ze(this,g),Ze(this,h),Ze(this,f,null),He(this,h,e),tr(()=>Ye(this,g,m).call(this))}run(e){Ye(this,g,m).call(this);const t=qe(this,h).ref.current;t&&("function"==typeof t.getAnimations?He(this,f,window.requestAnimationFrame(()=>{const s=t.getAnimations();0!==s.length?Promise.allSettled(s.map(e=>e.finished)).then(()=>{Ye(this,g,y).call(this,e)}):Ye(this,g,y).call(this,e)})):Ye(this,g,y).call(this,e))}}h=new WeakMap,f=new WeakMap,g=new WeakSet,m=function(){qe(this,f)&&(window.cancelAnimationFrame(qe(this,f)),He(this,f,null))},y=function(e){const t=()=>{e()};qe(this,h).afterTick?sr(t):t()};class fr{constructor(e){Ze(this,b),Ze(this,w),Ze(this,k),Ze(this,$,ht(!1)),He(this,b,e),yt(qe(this,$),e.open.current,!0),He(this,w,e.enabled??!0),He(this,k,new hr({ref:qe(this,b).ref,afterTick:qe(this,b).open})),er(()=>qe(this,b).open.current,e=>{e&&yt(qe(this,$),!0),qe(this,w)&&qe(this,k).run(()=>{e===qe(this,b).open.current&&(qe(this,b).open.current||yt(qe(this,$),!1),qe(this,b).onComplete?.())})})}get shouldRender(){return mt(qe(this,$))}}function gr(){}function mr(e,t){return`bits-${e}`}b=new WeakMap,w=new WeakMap,k=new WeakMap,$=new WeakMap;const yr=ur({component:"dialog",parts:["content","trigger","overlay","title","description","close","cancel","action"]}),br=new Jn("Dialog.Root | AlertDialog.Root");L=new WeakMap,x=new WeakMap,_=new WeakMap,C=new WeakMap,A=new WeakMap,D=new WeakMap,P=new WeakMap,S=new WeakMap,M=new WeakMap,j=new WeakMap,E=new WeakMap;let wr=class e{constructor(e,t){Ge(this,"opts"),Ze(this,L,ht(null)),Ze(this,x,ht(null)),Ze(this,_,ht(null)),Ze(this,C,ht(null)),Ze(this,A,ht(void 0)),Ze(this,D,ht(void 0)),Ze(this,P,ht(void 0)),Ze(this,S,ht(void 0)),Ze(this,M,ht(null)),Ze(this,j,ht(0)),Ge(this,"depth"),Ge(this,"parent"),Ge(this,"contentPresence"),Ge(this,"overlayPresence"),Ge(this,"getBitsAttr",e=>yr.getAttr(e,this.opts.variant.current)),Ze(this,E,_t(()=>{return{"data-state":(e=this.opts.open.current,e?"open":"closed")};var e})),this.opts=e,this.parent=t,this.depth=t?t.depth+1:0,this.handleOpen=this.handleOpen.bind(this),this.handleClose=this.handleClose.bind(this),this.contentPresence=new fr({ref:An(()=>this.contentNode),open:this.opts.open,enabled:!0,onComplete:()=>{this.opts.onOpenChangeComplete.current(this.opts.open.current)}}),this.overlayPresence=new fr({ref:An(()=>this.overlayNode),open:this.opts.open,enabled:!0}),er(()=>this.opts.open.current,e=>{this.parent&&(e?this.parent.incrementNested():this.parent.decrementNested())},{lazy:!0}),tr(()=>{this.opts.open.current&&this.parent?.decrementNested()})}static create(t){const s=br.getOr(null);return br.set(new e(t,s))}get triggerNode(){return mt(qe(this,L))}set triggerNode(e){yt(qe(this,L),e,!0)}get contentNode(){return mt(qe(this,x))}set contentNode(e){yt(qe(this,x),e,!0)}get overlayNode(){return mt(qe(this,_))}set overlayNode(e){yt(qe(this,_),e,!0)}get descriptionNode(){return mt(qe(this,C))}set descriptionNode(e){yt(qe(this,C),e,!0)}get contentId(){return mt(qe(this,A))}set contentId(e){yt(qe(this,A),e,!0)}get titleId(){return mt(qe(this,D))}set titleId(e){yt(qe(this,D),e,!0)}get triggerId(){return mt(qe(this,P))}set triggerId(e){yt(qe(this,P),e,!0)}get descriptionId(){return mt(qe(this,S))}set descriptionId(e){yt(qe(this,S),e,!0)}get cancelNode(){return mt(qe(this,M))}set cancelNode(e){yt(qe(this,M),e,!0)}get nestedOpenCount(){return mt(qe(this,j))}set nestedOpenCount(e){yt(qe(this,j),e,!0)}handleOpen(){this.opts.open.current||(this.opts.open.current=!0)}handleClose(){this.opts.open.current&&(this.opts.open.current=!1)}incrementNested(){this.nestedOpenCount++,this.parent?.incrementNested()}decrementNested(){0!==this.nestedOpenCount&&(this.nestedOpenCount--,this.parent?.decrementNested())}get sharedProps(){return mt(qe(this,E))}set sharedProps(e){yt(qe(this,E),e)}};T=new WeakMap;let kr=class e{constructor(e,t){Ge(this,"opts"),Ge(this,"root"),Ge(this,"attachment"),Ze(this,T,_t(()=>({id:this.opts.id.current,[this.root.getBitsAttr(this.opts.variant.current)]:"",onclick:this.onclick,onkeydown:this.onkeydown,disabled:!!this.opts.disabled.current||void 0,tabindex:0,...this.root.sharedProps,...this.attachment}))),this.opts=e,this.root=t,this.attachment=ar(this.opts.ref),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}static create(t){return new e(t,br.get())}onclick(e){this.opts.disabled.current||e.button>0||this.root.handleClose()}onkeydown(e){this.opts.disabled.current||" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),this.root.handleClose())}get props(){return mt(qe(this,T))}set props(e){yt(qe(this,T),e)}};F=new WeakMap;let $r=class e{constructor(e,t){Ge(this,"opts"),Ge(this,"root"),Ge(this,"attachment"),Ze(this,F,_t(()=>({id:this.opts.id.current,role:"heading","aria-level":this.opts.level.current,[this.root.getBitsAttr("title")]:"",...this.root.sharedProps,...this.attachment}))),this.opts=e,this.root=t,this.root.titleId=this.opts.id.current,this.attachment=ar(this.opts.ref),er.pre(()=>this.opts.id.current,e=>{this.root.titleId=e})}static create(t){return new e(t,br.get())}get props(){return mt(qe(this,F))}set props(e){yt(qe(this,F),e)}};W=new WeakMap;let Lr=class e{constructor(e,t){Ge(this,"opts"),Ge(this,"root"),Ge(this,"attachment"),Ze(this,W,_t(()=>({id:this.opts.id.current,[this.root.getBitsAttr("description")]:"",...this.root.sharedProps,...this.attachment}))),this.opts=e,this.root=t,this.root.descriptionId=this.opts.id.current,this.attachment=ar(this.opts.ref,e=>{this.root.descriptionNode=e}),er.pre(()=>this.opts.id.current,e=>{this.root.descriptionId=e})}static create(t){return new e(t,br.get())}get props(){return mt(qe(this,W))}set props(e){yt(qe(this,W),e)}};O=new WeakMap,B=new WeakMap;let xr=class e{constructor(e,t){Ge(this,"opts"),Ge(this,"root"),Ge(this,"attachment"),Ze(this,O,_t(()=>({open:this.root.opts.open.current}))),Ze(this,B,_t(()=>({id:this.opts.id.current,role:"alert-dialog"===this.root.opts.variant.current?"alertdialog":"dialog","aria-modal":"true","aria-describedby":this.root.descriptionId,"aria-labelledby":this.root.titleId,[this.root.getBitsAttr("content")]:"",style:{pointerEvents:"auto",outline:"alert-dialog"===this.root.opts.variant.current?"none":void 0,"--bits-dialog-depth":this.root.depth,"--bits-dialog-nested-count":this.root.nestedOpenCount},tabindex:"alert-dialog"===this.root.opts.variant.current?-1:void 0,"data-nested-open":lr(this.root.nestedOpenCount>0),"data-nested":lr(null!==this.root.parent),...this.root.sharedProps,...this.attachment}))),this.opts=e,this.root=t,this.attachment=ar(this.opts.ref,e=>{this.root.contentNode=e,this.root.contentId=e?.id})}static create(t){return new e(t,br.get())}get snippetProps(){return mt(qe(this,O))}set snippetProps(e){yt(qe(this,O),e)}get props(){return mt(qe(this,B))}set props(e){yt(qe(this,B),e)}get shouldRender(){return this.root.contentPresence.shouldRender}};I=new WeakMap,N=new WeakMap;let _r=class e{constructor(e,t){Ge(this,"opts"),Ge(this,"root"),Ge(this,"attachment"),Ze(this,I,_t(()=>({open:this.root.opts.open.current}))),Ze(this,N,_t(()=>({id:this.opts.id.current,[this.root.getBitsAttr("overlay")]:"",style:{pointerEvents:"auto","--bits-dialog-depth":this.root.depth,"--bits-dialog-nested-count":this.root.nestedOpenCount},"data-nested-open":lr(this.root.nestedOpenCount>0),"data-nested":lr(null!==this.root.parent),...this.root.sharedProps,...this.attachment}))),this.opts=e,this.root=t,this.attachment=ar(this.opts.ref,e=>this.root.overlayNode=e)}static create(t){return new e(t,br.get())}get snippetProps(){return mt(qe(this,I))}set snippetProps(e){yt(qe(this,I),e)}get props(){return mt(qe(this,N))}set props(e){yt(qe(this,N),e)}get shouldRender(){return this.root.overlayPresence.shouldRender}};var Cr=Je("<div><!></div>");function Ar(e,t){const s=rt();wt(t,!0);let n=es(t,"id",19,()=>mr(s)),r=es(t,"ref",15,null),i=es(t,"level",3,2),o=ts(t,["$$slots","$$events","$$legacy","id","ref","child","children","level"]);const a=$r.create({id:An(()=>n()),level:An(()=>i()),ref:An(()=>r(),e=>r(e))}),l=_t(()=>Yn(o,a.props));var c=tt(),u=Dt(c),d=e=>{var s=tt(),n=Dt(s);_s(n,()=>t.child,()=>({props:mt(l)})),et(e,s)},p=e=>{var s=Cr();Jt(s,()=>({...mt(l)}));var n=kt(s);_s(n,()=>t.children??Ot),$t(s),et(e,s)};Vt(u,e=>{t.child?e(d):e(p,!1)}),et(e,c),Ct()}function Dr(e,t){var s=tt();!function(e,t,s){ut&&dt();var n=new Ps(e),r=!pt();vt(()=>{var e=t();r&&null!==e&&"object"==typeof e&&(e={}),n.ensure(e,s)})}(Dt(s),()=>t.children,e=>{var s=tt(),n=Dt(s);_s(n,()=>t.children??Ot),et(e,s)}),et(e,s)}const Pr=new Jn("BitsConfig");class Sr{constructor(e,t){Ge(this,"opts");const s=function(e,t){return s=>An(()=>{const n=s(t)?.current;return void 0!==n?n:null!==e?s(e.opts)?.current:void 0})}(e,t);this.opts={defaultPortalTo:s(e=>e.defaultPortalTo),defaultLocale:s(e=>e.defaultLocale)}}}const Mr=(jr=e=>e.defaultPortalTo,Er="body",e=>{const t=function(){const e=new Sr(null,{});return Pr.getOr(e).opts}();return An(()=>{const s=e();if(void 0!==s)return s;const n=jr(t).current;return void 0!==n?n:Er})});var jr,Er;function Tr(e,t){wt(t,!0);const s=Mr(()=>t.to),n=Bt();let r,i=_t(function(){if(!dr||t.disabled)return null;let e=null;if("string"==typeof s.current){e=document.querySelector(s.current)}else e=s.current;return e});function o(){r&&(ot(r),r=null)}er([()=>mt(i),()=>t.disabled],([e,s])=>{if(e&&!s)return r=it(Dr,{target:e,props:{children:t.children},context:n}),()=>{o()};o()});var a=tt(),l=Dt(a),c=e=>{var s=tt(),n=Dt(s);_s(n,()=>t.children??Ot),et(e,s)};Vt(l,e=>{t.disabled&&e(c)}),et(e,a),Ct()}function Fr(e,t=500){let s=null;const n=(...n)=>{null!==s&&clearTimeout(s),s=setTimeout(()=>{e(...n)},t)};return n.destroy=()=>{null!==s&&(clearTimeout(s),s=null)},n}function Wr(e,t){return e===t||e.contains(t)}function Or(e){return e?.ownerDocument??document}var Br=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ir=Br.join(","),Nr="undefined"==typeof Element,zr=Nr?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Rr=!Nr&&Element.prototype.getRootNode?function(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},Vr=function(e,t){var s;void 0===t&&(t=!0);var n=null==e||null===(s=e.getAttribute)||void 0===s?void 0:s.call(e,"inert");return""===n||"true"===n||t&&e&&Vr(e.parentNode)},Ur=function(e,t,s){if(Vr(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(Ir));return t&&zr.call(e,Ir)&&n.unshift(e),n=n.filter(s)},Gr=function(e,t,s){for(var n=[],r=Array.from(e);r.length;){var i=r.shift();if(!Vr(i,!1))if("SLOT"===i.tagName){var o=i.assignedElements(),a=o.length?o:i.children,l=Gr(a,!0,s);s.flatten?n.push.apply(n,l):n.push({scopeParent:i,candidates:l})}else{zr.call(i,Ir)&&s.filter(i)&&(t||!e.includes(i))&&n.push(i);var c=i.shadowRoot||"function"==typeof s.getShadowRoot&&s.getShadowRoot(i),u=!Vr(c,!1)&&(!s.shadowRootFilter||s.shadowRootFilter(i));if(c&&u){var d=Gr(!0===c?i.children:c.children,!0,s);s.flatten?n.push.apply(n,d):n.push({scopeParent:i,candidates:d})}else r.unshift.apply(r,i.children)}}return n},Kr=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},qr=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,s=null==e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===s||"true"===s}(e))&&!Kr(e)?0:e.tabIndex},Zr=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},Hr=function(e){return"INPUT"===e.tagName},Yr=function(e){return function(e){return Hr(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,s=e.form||Rr(e),n=function(e){return s.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=n(window.CSS.escape(e.name));else try{t=n(e.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var r=function(e,t){for(var s=0;s<e.length;s++)if(e[s].checked&&e[s].form===t)return e[s]}(t,e.form);return!r||r===e}(e)},Xr=function(e){var t=e.getBoundingClientRect(),s=t.width,n=t.height;return 0===s&&0===n},Jr=function(e,t){var s=t.displayCheck,n=t.getShadowRoot;if("full-native"===s&&"checkVisibility"in e)return!e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});if("hidden"===getComputedStyle(e).visibility)return!0;var r=zr.call(e,"details>summary:first-of-type")?e.parentElement:e;if(zr.call(r,"details:not([open]) *"))return!0;if(s&&"full"!==s&&"full-native"!==s&&"legacy-full"!==s){if("non-zero-area"===s)return Xr(e)}else{if("function"==typeof n){for(var i=e;e;){var o=e.parentElement,a=Rr(e);if(o&&!o.shadowRoot&&!0===n(o))return Xr(e);e=e.assignedSlot?e.assignedSlot:o||a===e.ownerDocument?o:a.host}e=i}if(function(e){var t,s,n,r,i=e&&Rr(e),o=null===(t=i)||void 0===t?void 0:t.host,a=!1;if(i&&i!==e)for(a=!!(null!==(s=o)&&void 0!==s&&null!==(n=s.ownerDocument)&&void 0!==n&&n.contains(o)||null!=e&&null!==(r=e.ownerDocument)&&void 0!==r&&r.contains(e));!a&&o;){var l,c,u;a=!(null===(c=o=null===(l=i=Rr(o))||void 0===l?void 0:l.host)||void 0===c||null===(u=c.ownerDocument)||void 0===u||!u.contains(o))}return a}(e))return!e.getClientRects().length;if("legacy-full"!==s)return!0}return!1},Qr=function(e,t){return!(t.disabled||Vr(t)||function(e){return Hr(e)&&"hidden"===e.type}(t)||Jr(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some(function(e){return"SUMMARY"===e.tagName})}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var s=0;s<t.children.length;s++){var n=t.children.item(s);if("LEGEND"===n.tagName)return!!zr.call(t,"fieldset[disabled] *")||!n.contains(e)}return!0}t=t.parentElement}return!1}(t))},ei=function(e,t){return!(Yr(t)||qr(t)<0||!Qr(e,t))},ti=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},si=function(e){var t=[],s=[];return e.forEach(function(e,n){var r=!!e.scopeParent,i=r?e.scopeParent:e,o=function(e,t){var s=qr(e);return s<0&&t&&!Kr(e)?0:s}(i,r),a=r?si(e.candidates):i;0===o?r?t.push.apply(t,a):t.push(i):s.push({documentOrder:n,tabIndex:o,item:e,isScope:r,content:a})}),s.sort(Zr).reduce(function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e},[]).concat(t)},ni=Br.concat("iframe").join(",");const ri="data-context-menu-trigger",ii="data-context-menu-content";ur({component:"menu",parts:["trigger","content","sub-trigger","item","group","group-heading","checkbox-group","checkbox-item","radio-group","radio-item","separator","sub-content","arrow"]}),globalThis.bitsDismissableLayers??(globalThis.bitsDismissableLayers=new Map);z=new WeakMap,R=new WeakMap,V=new WeakMap,U=new WeakMap,G=new WeakMap,K=new WeakMap,q=new WeakMap,Z=new WeakMap,H=new WeakMap,Y=new WeakSet,X=function(){return Gn(nt(qe(this,K),"pointerdown",Gn(qe(this,ee),qe(this,se)),{capture:!0}),nt(qe(this,K),"pointerdown",Gn(qe(this,te),qe(this,Q))),nt(qe(this,K),"focusin",qe(this,H)))},J=new WeakMap,Q=new WeakMap,ee=new WeakMap,te=new WeakMap,se=new WeakMap,ne=new WeakMap,re=new WeakMap,ie=function(){return Object.values(qe(this,V)).some(Boolean)},oe=new WeakMap,ae=new WeakMap;let oi=class e{constructor(e){Ze(this,Y),Ge(this,"opts"),Ze(this,z),Ze(this,R),Ze(this,V,{pointerdown:!1}),Ze(this,U,!1),Ze(this,G,!1),Ze(this,K),Ze(this,q),Ze(this,Z,gr),Ze(this,H,e=>{e.defaultPrevented||this.opts.ref.current&&sr(()=>{this.opts.ref.current&&!qe(this,ne).call(this,e.target)&&e.target&&!qe(this,G)&&qe(this,q).current?.(e)})}),Ze(this,J,e=>{let t=e;t.defaultPrevented&&(t=ai(e)),qe(this,z).current(e)}),Ze(this,Q,Fr(e=>{if(!this.opts.ref.current)return void qe(this,Z).call(this);const t=this.opts.isValidEvent.current(e,this.opts.ref.current)||function(e,t){const s=e.target;if(n=s,!(n instanceof Element||n instanceof SVGElement))return!1;var n;const r=Boolean(s.closest(`[${ri}]`));if("button"in e&&e.button>0&&!r)return!1;if("button"in e&&0===e.button&&r)return!0;const i=Boolean(t.closest(`[${ii}]`));if(r&&i)return!1;const o=Or(s).documentElement.contains(s)&&!Wr(t,s)&&function(e,t){const{clientX:s,clientY:n}=e,r=t.getBoundingClientRect();return s<r.left||s>r.right||n<r.top||n>r.bottom}(e,t);return o}(e,this.opts.ref.current);if(!qe(this,U)||Ye(this,Y,ie).call(this)||!t)return void qe(this,Z).call(this);let s=e;s.defaultPrevented&&(s=ai(s)),"close"===qe(this,R).current||"defer-otherwise-close"===qe(this,R).current?"touch"===e.pointerType?(qe(this,Z).call(this),He(this,Z,nt(qe(this,K),"click",qe(this,J),{once:!0}))):qe(this,z).current(s):qe(this,Z).call(this)},10)),Ze(this,ee,e=>{qe(this,V)[e.type]=!0}),Ze(this,te,e=>{qe(this,V)[e.type]=!1}),Ze(this,se,()=>{this.opts.ref.current&&He(this,U,function(e){const t=[...globalThis.bitsDismissableLayers],s=function(e=[...globalThis.bitsDismissableLayers]){return e.findLast(([e,{current:t}])=>"close"===t||"ignore"===t)}(t);if(s)return s[0].opts.ref.current===e;const[n]=t[0];return n.opts.ref.current===e}(this.opts.ref.current))}),Ze(this,ne,e=>!!this.opts.ref.current&&Wr(this.opts.ref.current,e)),Ze(this,re,Fr(()=>{for(const e in qe(this,V))qe(this,V)[e]=!1;He(this,U,!1)},20)),Ze(this,oe,()=>{He(this,G,!0)}),Ze(this,ae,()=>{He(this,G,!1)}),Ge(this,"props",{onfocuscapture:qe(this,oe),onblurcapture:qe(this,ae)}),this.opts=e,He(this,R,e.interactOutsideBehavior),He(this,z,e.onInteractOutside),He(this,q,e.onFocusOutside),St(()=>{He(this,K,Or(this.opts.ref.current))});let t=gr;const s=()=>{qe(this,re).call(this),globalThis.bitsDismissableLayers.delete(this),qe(this,Q).destroy(),t()};er([()=>this.opts.enabled.current,()=>this.opts.ref.current],()=>{if(this.opts.enabled.current&&this.opts.ref.current)return setTimeout(()=>{this.opts.ref.current&&(globalThis.bitsDismissableLayers.set(this,qe(this,R)),t(),t=Ye(this,Y,X).call(this))},1),s}),tr(()=>{qe(this,re).destroy(),globalThis.bitsDismissableLayers.delete(this),qe(this,Q).destroy(),qe(this,Z).call(this),t()})}static create(t){return new e(t)}};function ai(e){const t=e.currentTarget,s=e.target;let n;n=e instanceof PointerEvent?new PointerEvent(e.type,e):new PointerEvent("pointerdown",e);let r=!1;return new Proxy(n,{get:(n,i)=>"currentTarget"===i?t:"target"===i?s:"preventDefault"===i?()=>{r=!0,"function"==typeof n.preventDefault&&n.preventDefault()}:"defaultPrevented"===i?r:i in n?n[i]:e[i]})}globalThis.bitsEscapeLayers??(globalThis.bitsEscapeLayers=new Map);le=new WeakMap,ce=new WeakMap;let li=class e{constructor(e){Ge(this,"opts"),Ge(this,"domContext"),Ze(this,le,()=>nt(this.domContext.getDocument(),"keydown",qe(this,ce),{passive:!1})),Ze(this,ce,e=>{if("Escape"!==e.key||!function(e){const t=[...globalThis.bitsEscapeLayers],s=t.findLast(([e,{current:t}])=>"close"===t||"ignore"===t);if(s)return s[0]===e;const[n]=t[0];return n===e}(this))return;const t=new KeyboardEvent(e.type,e);e.preventDefault();const s=this.opts.escapeKeydownBehavior.current;"close"!==s&&"defer-otherwise-close"!==s||this.opts.onEscapeKeydown.current(t)}),this.opts=e,this.domContext=new or(this.opts.ref);let t=gr;er(()=>e.enabled.current,s=>(s&&(globalThis.bitsEscapeLayers.set(this,e.escapeKeydownBehavior),t=qe(this,le).call(this)),()=>{t(),globalThis.bitsEscapeLayers.delete(this)}))}static create(t){return new e(t)}};const ci=class e{constructor(){Ze(this,ue,function(e){let t=ht(Pt(e));return{[_n]:!0,[Cn]:!0,get current(){return mt(t)},set current(e){yt(t,e,!0)}}}([])),Ze(this,de,new WeakMap),Ze(this,pe,new WeakMap)}static getInstance(){return this.instance||(this.instance=new e),this.instance}register(e){const t=this.getActive();t&&t!==e&&t.pause();const s=document.activeElement;s&&s!==document.body&&qe(this,pe).set(e,s),qe(this,ue).current=qe(this,ue).current.filter(t=>t!==e),qe(this,ue).current.unshift(e)}unregister(e){qe(this,ue).current=qe(this,ue).current.filter(t=>t!==e);const t=this.getActive();t&&t.resume()}getActive(){return qe(this,ue).current[0]}setFocusMemory(e,t){qe(this,de).set(e,t)}getFocusMemory(e){return qe(this,de).get(e)}isActiveScope(e){return this.getActive()===e}setPreFocusMemory(e,t){qe(this,pe).set(e,t)}getPreFocusMemory(e){return qe(this,pe).get(e)}clearPreFocusMemory(e){qe(this,pe).delete(e)}};ue=new WeakMap,de=new WeakMap,pe=new WeakMap,Ge(ci,"instance");let ui=ci;ve=new WeakMap,he=new WeakMap,fe=new WeakMap,ge=new WeakMap,me=new WeakMap,ye=new WeakSet,be=function(){for(const e of qe(this,ge))e();He(this,ge,[])},we=function(){if(!qe(this,he))return;const e=new CustomEvent("focusScope.onOpenAutoFocus",{bubbles:!1,cancelable:!0});qe(this,me).onOpenAutoFocus.current(e),e.defaultPrevented||requestAnimationFrame(()=>{if(!qe(this,he))return;const e=Ye(this,ye,xe).call(this);e?(e.focus(),qe(this,fe).setFocusMemory(this,e)):qe(this,he).focus()})},ke=function(){const e=new CustomEvent("focusScope.onCloseAutoFocus",{bubbles:!1,cancelable:!0});if(qe(this,me).onCloseAutoFocus.current?.(e),!e.defaultPrevented){const e=qe(this,fe).getPreFocusMemory(this);if(e&&document.contains(e))try{e.focus()}catch{document.body.focus()}}},$e=function(){if(!qe(this,he)||!qe(this,me).trap.current)return;const e=qe(this,he),t=e.ownerDocument;qe(this,ge).push(nt(t,"focusin",t=>{if(qe(this,ve)||!qe(this,fe).isActiveScope(this))return;const s=t.target;if(!s)return;if(e.contains(s))qe(this,fe).setFocusMemory(this,s);else{const s=qe(this,fe).getFocusMemory(this);if(s&&e.contains(s)&&function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==zr.call(e,ni)&&Qr(t,e)}(s))t.preventDefault(),s.focus();else{const t=Ye(this,ye,xe).call(this),s=Ye(this,ye,_e).call(this)[0];(t||s||e).focus()}}},{capture:!0}),nt(e,"keydown",e=>{if(!qe(this,me).loop||qe(this,ve)||"Tab"!==e.key)return;if(!qe(this,fe).isActiveScope(this))return;const s=Ye(this,ye,Le).call(this);if(s.length<2)return;const n=s[0],r=s[s.length-1];e.shiftKey||t.activeElement!==r?e.shiftKey&&t.activeElement===n&&(e.preventDefault(),r.focus()):(e.preventDefault(),n.focus())}));const s=new MutationObserver(()=>{const t=qe(this,fe).getFocusMemory(this);if(t&&!e.contains(t)){const t=Ye(this,ye,xe).call(this),s=Ye(this,ye,_e).call(this)[0],n=t||s;n?(n.focus(),qe(this,fe).setFocusMemory(this,n)):e.focus()}});s.observe(e,{childList:!0,subtree:!0}),qe(this,ge).push(()=>s.disconnect())},Le=function(){return qe(this,he)?(e=qe(this,he),s=(t=(t={includeContainer:!1,getShadowRoot:!0})||{}).getShadowRoot?Gr([e],t.includeContainer,{filter:ei.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:ti}):Ur(e,t.includeContainer,ei.bind(null,t)),si(s)):[];var e,t,s},xe=function(){return Ye(this,ye,Le).call(this)[0]||null},_e=function(){return qe(this,he)?(e=qe(this,he),(t=(t={includeContainer:!1,getShadowRoot:!0})||{}).getShadowRoot?Gr([e],t.includeContainer,{filter:Qr.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):Ur(e,t.includeContainer,Qr.bind(null,t))):[];var e,t};let di=class e{constructor(e){Ze(this,ye),Ze(this,ve,!1),Ze(this,he,null),Ze(this,fe,ui.getInstance()),Ze(this,ge,[]),Ze(this,me),He(this,me,e)}get paused(){return qe(this,ve)}pause(){He(this,ve,!0)}resume(){He(this,ve,!1)}mount(e){qe(this,he)&&this.unmount(),He(this,he,e),qe(this,fe).register(this),Ye(this,ye,$e).call(this),Ye(this,ye,we).call(this)}unmount(){qe(this,he)&&(Ye(this,ye,be).call(this),Ye(this,ye,ke).call(this),qe(this,fe).unregister(this),qe(this,fe).clearPreFocusMemory(this),He(this,he,null))}static use(t){let s=null;return er([()=>t.ref.current,()=>t.enabled.current],([n,r])=>{n&&r?(s||(s=new e(t)),s.mount(n)):s&&(s.unmount(),s=null)}),tr(()=>{s?.unmount()}),{get props(){return{tabindex:-1}}}}};globalThis.bitsTextSelectionLayers??(globalThis.bitsTextSelectionLayers=new Map);Ce=new WeakMap,Ae=new WeakSet,De=function(){return Gn(nt(this.domContext.getDocument(),"pointerdown",qe(this,Pe)),nt(this.domContext.getDocument(),"pointerup",Dn(qe(this,Se),this.opts.onPointerUp.current)))},Pe=new WeakMap,Se=new WeakMap;let pi=class e{constructor(e){Ze(this,Ae),Ge(this,"opts"),Ge(this,"domContext"),Ze(this,Ce,gr),Ze(this,Pe,e=>{const t=this.opts.ref.current,s=e.target;vr(t)&&vr(s)&&this.opts.enabled.current&&function(e){const t=[...globalThis.bitsTextSelectionLayers];if(!t.length)return!1;const s=t.at(-1);return!!s&&s[0]===e}(this)&&function(e,t){if(!e||!t)return!1;if(!nr(e)||!nr(t))return!1;const s=t.getRootNode?.();if(e===t)return!0;if(e.contains(t))return!0;if(s&&rr(s)){let s=t;for(;s;){if(e===s)return!0;s=s.parentNode||s.host}}return!1}(t,s)&&(this.opts.onPointerDown.current(e),e.defaultPrevented||He(this,Ce,function(e,t){const s=vi(t),n=vi(e);return hi(t,"none"),hi(e,"text"),()=>{hi(t,s),hi(e,n)}}(t,this.domContext.getDocument().body)))}),Ze(this,Se,()=>{qe(this,Ce).call(this),He(this,Ce,gr)}),this.opts=e,this.domContext=new or(e.ref);let t=gr;er(()=>this.opts.enabled.current,e=>(e&&(globalThis.bitsTextSelectionLayers.set(this,this.opts.enabled),t(),t=Ye(this,Ae,De).call(this)),()=>{t(),qe(this,Se).call(this),globalThis.bitsTextSelectionLayers.delete(this)}))}static create(t){return new e(t)}};const vi=e=>e.style.userSelect||e.style.webkitUserSelect;function hi(e,t){e.style.userSelect=t,e.style.webkitUserSelect=t}globalThis.bitsIdCounter??(globalThis.bitsIdCounter={current:0});Me=new WeakMap,je=new WeakMap,Ee=new WeakMap,Te=new WeakMap,Fe=new WeakSet,We=function(){He(this,je,qe(this,je)-1),qe(this,Te)&&qe(this,je)<=0&&(qe(this,Te).call(this),yt(qe(this,Ee),void 0),He(this,Te,void 0))};const fi=new js;let gi=ht(null),mi=null,yi=null,bi=!1;const wi=An(()=>{for(const e of fi.values())if(e)return!0;return!1});let ki=null;const $i=new class{constructor(e){Ze(this,Fe),Ze(this,Me),Ze(this,je,0),Ze(this,Ee,ht()),Ze(this,Te),He(this,Me,e)}get(...e){return He(this,je,qe(this,je)+1),void 0===mt(qe(this,Ee))&&He(this,Te,It(()=>{yt(qe(this,Ee),qe(this,Me).call(this,...e),!0)})),St(()=>()=>{Ye(this,Fe,We).call(this)}),mt(qe(this,Ee))}}(()=>{function e(){null!==yi&&(window.clearTimeout(yi),yi=null)}function t(){null!==mt(gi)||0!==fi.size||bi||yt(gi,document.body.getAttribute("style"),!0)}return er(()=>wi.current,()=>{if(!wi.current)return;t(),bi=!1;const e=getComputedStyle(document.body),s=window.innerWidth-document.documentElement.clientWidth,n=Number.parseInt(e.paddingRight??"0",10)+s,r=Number.parseInt(e.marginRight??"0",10);s>0&&(document.body.style.paddingRight=`${n}px`,document.body.style.marginRight=`${r}px`,document.body.style.setProperty("--scrollbar-width",`${s}px`),document.body.style.overflow="hidden"),pr&&(mi=nt(document,"touchmove",e=>{e.target===document.documentElement&&(e.touches.length>1||e.preventDefault())},{passive:!1})),sr(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})}),tr(()=>()=>{mi?.()}),{get lockMap(){return fi},resetBodyStyle:function(){document.body.setAttribute("style",mt(gi)??""),document.body.style.removeProperty("--scrollbar-width"),pr&&mi?.(),yt(gi,null)},scheduleCleanupIfNoNewLocks:function(t,s){e(),bi=!0,ki=Date.now();const n=ki,r=null===t?24:t;yi=window.setTimeout(()=>{yi=null,ki===n&&(xi(fi)?bi=!1:(bi=!1,s()))},r)},cancelPendingCleanup:e,ensureInitialStyleCaptured:t}});class Li{constructor(e,t=()=>null){Ze(this,Oe,function(e="bits"){return globalThis.bitsIdCounter.current++,`${e}-${globalThis.bitsIdCounter.current}`}()),Ze(this,Be),Ze(this,Ie,()=>null),Ze(this,Ne),Ge(this,"locked"),He(this,Be,e),He(this,Ie,t),He(this,Ne,$i.get()),qe(this,Ne)&&(qe(this,Ne).cancelPendingCleanup(),qe(this,Ne).ensureInitialStyleCaptured(),qe(this,Ne).lockMap.set(qe(this,Oe),qe(this,Be)??!1),this.locked=An(()=>qe(this,Ne).lockMap.get(qe(this,Oe))??!1,e=>qe(this,Ne).lockMap.set(qe(this,Oe),e)),tr(()=>{if(qe(this,Ne).lockMap.delete(qe(this,Oe)),xi(qe(this,Ne).lockMap))return;const e=qe(this,Ie).call(this);qe(this,Ne).scheduleCleanupIfNoNewLocks(e,()=>{qe(this,Ne).resetBodyStyle()})}))}}function xi(e){for(const[t,s]of e)if(s)return!0;return!1}function _i(e,t){wt(t,!0);let s=es(t,"preventScroll",3,!0),n=es(t,"restoreScrollDelay",3,null);s()&&new Li(s(),()=>n()),Ct()}Oe=new WeakMap,Be=new WeakMap,Ie=new WeakMap,Ne=new WeakMap;var Ci=Je("<div><!></div>");function Ai(e,t){const s=rt();wt(t,!0);let n=es(t,"id",19,()=>mr(s)),r=es(t,"forceMount",3,!1),i=es(t,"ref",15,null),o=ts(t,["$$slots","$$events","$$legacy","id","forceMount","child","children","ref"]);const a=_r.create({id:An(()=>n()),ref:An(()=>i(),e=>i(e))}),l=_t(()=>Yn(o,a.props));var c=tt(),u=Dt(c),d=e=>{var s=tt(),n=Dt(s),r=e=>{var s=tt(),n=Dt(s);{let e=_t(()=>({props:Yn(mt(l)),...a.snippetProps}));_s(n,()=>t.child,()=>mt(e))}et(e,s)},i=e=>{var s=Ci();Jt(s,e=>({...e}),[()=>Yn(mt(l))]);var n=kt(s);_s(n,()=>t.children??Ot,()=>a.snippetProps),$t(s),et(e,s)};Vt(n,e=>{t.child?e(r):e(i,!1)}),et(e,s)};Vt(u,e=>{(a.shouldRender||r())&&e(d)}),et(e,c),Ct()}var Di=Je("<div><!></div>");function Pi(e,t){const s=rt();wt(t,!0);let n=es(t,"id",19,()=>mr(s)),r=es(t,"ref",15,null),i=ts(t,["$$slots","$$events","$$legacy","id","children","child","ref"]);const o=Lr.create({id:An(()=>n()),ref:An(()=>r(),e=>r(e))}),a=_t(()=>Yn(i,o.props));var l=tt(),c=Dt(l),u=e=>{var s=tt(),n=Dt(s);_s(n,()=>t.child,()=>({props:mt(a)})),et(e,s)},d=e=>{var s=Di();Jt(s,()=>({...mt(a)}));var n=kt(s);_s(n,()=>t.children??Ot),$t(s),et(e,s)};Vt(c,e=>{t.child?e(u):e(d,!1)}),et(e,l),Ct()}function Si(e,t){wt(t,!0);let s=es(t,"open",15,!1),n=es(t,"onOpenChange",3,gr),r=es(t,"onOpenChangeComplete",3,gr);wr.create({variant:An(()=>"dialog"),open:An(()=>s(),e=>{s(e),n()(e)}),onOpenChangeComplete:An(()=>r())});var i=tt(),o=Dt(i);_s(o,()=>t.children??Ot),et(e,i),Ct()}var Mi=Je("<button><!></button>");function ji(e,t){const s=rt();wt(t,!0);let n=es(t,"id",19,()=>mr(s)),r=es(t,"ref",15,null),i=es(t,"disabled",3,!1),o=ts(t,["$$slots","$$events","$$legacy","children","child","id","ref","disabled"]);const a=kr.create({variant:An(()=>"close"),id:An(()=>n()),ref:An(()=>r(),e=>r(e)),disabled:An(()=>Boolean(i()))}),l=_t(()=>Yn(o,a.props));var c=tt(),u=Dt(c),d=e=>{var s=tt(),n=Dt(s);_s(n,()=>t.child,()=>({props:mt(l)})),et(e,s)},p=e=>{var s=Mi();Jt(s,()=>({...mt(l)}));var n=kt(s);_s(n,()=>t.children??Ot),$t(s),et(e,s)};Vt(u,e=>{t.child?e(d):e(p,!1)}),et(e,c),Ct()}var Ei=Je("<!> <!>",1),Ti=Je("<!> <div><!></div>",1);function Fi(e,t){const s=rt();wt(t,!0);let n=es(t,"id",19,()=>mr(s)),r=es(t,"ref",15,null),i=es(t,"forceMount",3,!1),o=es(t,"onCloseAutoFocus",3,gr),a=es(t,"onOpenAutoFocus",3,gr),l=es(t,"onEscapeKeydown",3,gr),c=es(t,"onInteractOutside",3,gr),u=es(t,"trapFocus",3,!0),d=es(t,"preventScroll",3,!0),p=es(t,"restoreScrollDelay",3,null),v=ts(t,["$$slots","$$events","$$legacy","id","children","child","ref","forceMount","onCloseAutoFocus","onOpenAutoFocus","onEscapeKeydown","onInteractOutside","trapFocus","preventScroll","restoreScrollDelay"]);const h=xr.create({id:An(()=>n()),ref:An(()=>r(),e=>r(e))}),f=_t(()=>Yn(v,h.props));var g=tt(),m=Dt(g),y=e=>{{const s=(e,s)=>{let n=()=>s?.().props;!function(e,t){wt(t,!0);let s=es(t,"escapeKeydownBehavior",3,"close"),n=es(t,"onEscapeKeydown",3,gr);li.create({escapeKeydownBehavior:An(()=>s()),onEscapeKeydown:An(()=>n()),enabled:An(()=>t.enabled),ref:t.ref});var r=tt(),i=Dt(r);_s(i,()=>t.children??Ot),et(e,r),Ct()}(e,ss(()=>mt(f),{get enabled(){return h.root.opts.open.current},get ref(){return h.opts.ref},onEscapeKeydown:e=>{l()(e),e.defaultPrevented||h.root.handleClose()},children:(e,s)=>{!function(e,t){wt(t,!0);let s=es(t,"interactOutsideBehavior",3,"close"),n=es(t,"onInteractOutside",3,gr),r=es(t,"onFocusOutside",3,gr),i=es(t,"isValidEvent",3,()=>!1);const o=oi.create({id:An(()=>t.id),interactOutsideBehavior:An(()=>s()),onInteractOutside:An(()=>n()),enabled:An(()=>t.enabled),onFocusOutside:An(()=>r()),isValidEvent:An(()=>i()),ref:t.ref});var a=tt(),l=Dt(a);_s(l,()=>t.children??Ot,()=>({props:o.props})),et(e,a),Ct()}(e,ss(()=>mt(f),{get ref(){return h.opts.ref},get enabled(){return h.root.opts.open.current},onInteractOutside:e=>{c()(e),e.defaultPrevented||h.root.handleClose()},children:(e,s)=>{!function(e,t){wt(t,!0);let s=es(t,"preventOverflowTextSelection",3,!0),n=es(t,"onPointerDown",3,gr),r=es(t,"onPointerUp",3,gr);pi.create({id:An(()=>t.id),onPointerDown:An(()=>n()),onPointerUp:An(()=>r()),enabled:An(()=>t.enabled&&s()),ref:t.ref});var i=tt(),o=Dt(i);_s(o,()=>t.children??Ot),et(e,i),Ct()}(e,ss(()=>mt(f),{get ref(){return h.opts.ref},get enabled(){return h.root.opts.open.current},children:(e,s)=>{var r=tt(),i=Dt(r),o=e=>{var s=Ei(),r=Dt(s),i=e=>{_i(0,{get preventScroll(){return d()},get restoreScrollDelay(){return p()}})};Vt(r,e=>{h.root.opts.open.current&&e(i)});var o=Lt(r,2);{let e=_t(()=>({props:Yn(mt(f),n()),...h.snippetProps}));_s(o,()=>t.child,()=>mt(e))}et(e,s)},a=e=>{var s=Ti(),r=Dt(s);_i(0,{get preventScroll(){return d()}});var i=Lt(r,2);Jt(i,e=>({...e}),[()=>Yn(mt(f),n())]);var o=kt(i);_s(o,()=>t.children??Ot),$t(i),et(e,s)};Vt(i,e=>{t.child?e(o):e(a,!1)}),et(e,r)},$$slots:{default:!0}}))},$$slots:{default:!0}}))},$$slots:{default:!0}}))};!function(e,t){wt(t,!0);let s=es(t,"enabled",3,!1),n=es(t,"trapFocus",3,!1),r=es(t,"loop",3,!1),i=es(t,"onCloseAutoFocus",3,gr),o=es(t,"onOpenAutoFocus",3,gr);const a=di.use({enabled:An(()=>s()),trap:An(()=>n()),loop:r(),onCloseAutoFocus:An(()=>i()),onOpenAutoFocus:An(()=>o()),ref:t.ref});var l=tt(),c=Dt(l);_s(c,()=>t.focusScope??Ot,()=>({props:a.props})),et(e,l),Ct()}(e,{get ref(){return h.opts.ref},loop:!0,get trapFocus(){return u()},get enabled(){return h.root.opts.open.current},get onOpenAutoFocus(){return a()},get onCloseAutoFocus(){return o()},focusScope:s,$$slots:{focusScope:!0}})}};Vt(m,e=>{(h.shouldRender||i())&&e(y)}),et(e,g),Ct()}var Wi=at("<svg></svg>");var Oi=Je('<!> <span class="sr-only">Close</span>',1),Bi=Je("<!> <!>",1),Ii=Je("<!> <!>",1);function Ni(e,t){wt(t,!0);let s=es(t,"class",3,void 0),n=ts(t,["$$slots","$$events","$$legacy","children","class"]);!function(e,t){let s=ts(t,["$$slots","$$events","$$legacy","children"]);var n=tt(),r=Dt(n);Cs(r,()=>Tr,(e,n)=>{n(e,ss(()=>s,{children:(e,s)=>{var n=tt(),r=Dt(n),i=e=>{var s=tt(),n=Dt(s);_s(n,()=>t.children),et(e,s)};Vt(r,e=>{t.children&&e(i)}),et(e,n)},$$slots:{default:!0}}))}),et(e,n)}(e,{children:(e,r)=>{var i=Ii(),o=Dt(i);!function(e,t){wt(t,!0);let s=es(t,"class",3,void 0),n=ts(t,["$$slots","$$events","$$legacy","class"]);var r=tt(),i=Dt(r);{let e=_t(()=>hs("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s()));Cs(i,()=>Ai,(t,s)=>{s(t,ss({get class(){return mt(e)}},()=>n))})}et(e,r),Ct()}(o,{});var a=Lt(o,2);{let e=_t(()=>hs("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s()));Cs(a,()=>Fi,(s,r)=>{r(s,ss({get class(){return mt(e)}},()=>n,{children:(e,s)=>{var n=Bi(),r=Dt(n),i=e=>{var s=tt(),n=Dt(s);_s(n,()=>t.children),et(e,s)};Vt(r,e=>{t.children&&e(i)});var o=Lt(r,2);Cs(o,()=>ji,(e,t)=>{t(e,{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:(e,t)=>{var s=Oi();!function(e,t){let s=es(t,"size",3,24),n=es(t,"color",3,"currentColor"),r=es(t,"strokeWidth",3,2),i=es(t,"class",3,""),o=ts(t,["$$slots","$$events","$$legacy","size","color","strokeWidth","class"]);const a=[["line",{x1:"18",y1:"6",x2:"6",y2:"18"}],["line",{x1:"6",y1:"6",x2:"18",y2:"18"}]];var l=Wi();Jt(l,()=>({xmlns:"http://www.w3.org/2000/svg",width:s(),height:s(),viewBox:"0 0 24 24",fill:"none",stroke:n(),"stroke-width":r(),"stroke-linecap":"round","stroke-linejoin":"round",class:`lucide-icon lucide-x ${i()}`,...o})),Ut(l,21,()=>a,Gt,(e,t)=>{var s=_t(()=>Nt(mt(t),2)),n=tt(),r=Dt(n);As(r,()=>mt(s)[0],!0,(e,t)=>{Jt(e,()=>({...mt(s)[1]}))}),et(e,n)}),$t(l),et(e,l)}(Dt(s),{class:"h-4 w-4"}),zt(2),et(e,s)},$$slots:{default:!0}})}),et(e,n)},$$slots:{default:!0}}))})}et(e,i)},$$slots:{default:!0}}),Ct()}var zi=Je("<div><!></div>");var Ri=Je("<div><!></div>");var Vi=Je("<!> <!>",1),Ui=Je('<div class="error-message svelte-vv5wyp"> <button class="retry-button"> </button></div>'),Gi=Je('<div class="success-message svelte-vv5wyp"> </div>'),Ki=Je("<option> </option>"),qi=Je("<option> </option>"),Zi=Je("<option> </option>"),Hi=Je("<option> </option>"),Yi=Je('<div class="form-row svelte-vv5wyp"><div class="form-group svelte-vv5wyp"><label for="lesson-category" class="svelte-vv5wyp"> </label> <select id="lesson-category" class="svelte-vv5wyp"><option> </option><!></select></div> <div class="form-group svelte-vv5wyp"><label for="lesson-part-of-speech" class="svelte-vv5wyp"> </label> <select id="lesson-part-of-speech" class="svelte-vv5wyp"><option> </option><!></select></div></div>'),Xi=Je('<div class="form-group svelte-vv5wyp"><label for="lesson-concept-type" class="svelte-vv5wyp"> </label> <input id="lesson-concept-type" type="text" class="svelte-vv5wyp"/></div>'),Ji=Je('<div class="form-group checkbox-group svelte-vv5wyp"><label class="svelte-vv5wyp"><input type="checkbox" class="svelte-vv5wyp"/> </label></div>'),Qi=Je('<div class="form-group checkbox-group svelte-vv5wyp"><label class="svelte-vv5wyp"><input type="checkbox" class="svelte-vv5wyp"/> </label></div>'),eo=Je("<!> <!>",1),to=Je('<!> <div class="lesson-generator-form svelte-vv5wyp"><!> <!> <div class="form-section svelte-vv5wyp"><h3 class="svelte-vv5wyp"> </h3> <div class="form-group svelte-vv5wyp"><label for="lesson-title" class="svelte-vv5wyp"> </label> <input id="lesson-title" type="text" class="svelte-vv5wyp"/></div> <div class="form-group svelte-vv5wyp"><label for="lesson-description" class="svelte-vv5wyp"> </label> <textarea id="lesson-description" rows="3" class="svelte-vv5wyp"></textarea></div></div> <div class="form-section svelte-vv5wyp"><h3 class="svelte-vv5wyp"> </h3> <div class="form-row svelte-vv5wyp"><div class="form-group svelte-vv5wyp"><label for="lesson-type" class="svelte-vv5wyp"> </label> <select id="lesson-type" class="svelte-vv5wyp"><option> </option><!></select></div> <div class="form-group svelte-vv5wyp"><label for="lesson-difficulty" class="svelte-vv5wyp"> </label> <select id="lesson-difficulty" class="svelte-vv5wyp"><option> </option><!></select></div></div> <!> <!> <div class="form-group svelte-vv5wyp"><label for="lesson-limit" class="svelte-vv5wyp"> </label> <select id="lesson-limit" class="svelte-vv5wyp"><option> </option><option> </option><option selected> </option><option> </option><option> </option></select></div></div> <div class="form-section svelte-vv5wyp"><h3 class="svelte-vv5wyp"> </h3> <div class="form-row svelte-vv5wyp"><div class="form-group checkbox-group svelte-vv5wyp"><label class="svelte-vv5wyp"><input type="checkbox" class="svelte-vv5wyp"/> </label></div> <!> <!></div></div></div> <!>',1);function so(e,t){function s(e,t){console.error(`[${t}]`,e)}wt(t,!0);let n=es(t,"isOpen",3,!1),r=es(t,"onClose",3,()=>{}),i=es(t,"onLessonGenerated",3,()=>{}),o=ht(!1),a=ht(null),l=ht(null),c=ht(!1),u=ht(Pt({title:"",description:"",type:"",difficulty:"",category:"",partOfSpeech:"",conceptType:"",limit:10,includePractice:!0,includeComparison:!1,includeReview:!1})),d=_t(()=>"vocabulary"===mt(u).type),p=_t(()=>"grammar"===mt(u).type),v=_t(()=>"mixed"===mt(u).type),h=_t(()=>ns("lesson.generator.generate_lesson")||"Generate Lesson"),f=_t(()=>ns("lesson.generator.generating")||"Generating...");function g(){yt(u,{title:"",description:"",type:"",difficulty:"",category:"",partOfSpeech:"",conceptType:"",limit:10,includePractice:!0,includeComparison:!1,includeReview:!1},!0),yt(a,null),yt(l,null),r()()}function m(){return["A1","A2","B1","B2","C1"]}function y(){return["greetings","numbers","family","food","colors","animals","body-parts","clothing","home","nature","transport","technology","time","weather","professions","places","grammar","culture","everyday-phrases"]}function b(){return["noun","verb","adjective","adverb","pronoun","preposition","conjunction","phrase"]}function w(){return["vocabulary","grammar","mixed","conversation","culture"]}!function(e,t){wt(t,!0);let s=es(t,"open",15,!1),n=ts(t,["$$slots","$$events","$$legacy","children","open"]);var r=tt(),i=Dt(r);Cs(i,()=>Si,(e,r)=>{r(e,ss(()=>n,{get open(){return s()},set open(e){s(e)},children:(e,s)=>{var n=tt(),r=Dt(n),i=e=>{var s=tt(),n=Dt(s);_s(n,()=>t.children),et(e,s)};Vt(r,e=>{t.children&&e(i)}),et(e,n)},$$slots:{default:!0}}))}),et(e,r),Ct()}(e,{get open(){return n()},onOpenChange:e=>{try{e||g()}catch(t){s(t,"Failed to close lesson generator modal"),yt(c,!0)}},children:(e,t)=>{Ni(e,{class:"lesson-generator-modal",children:(e,t)=>{var n=to(),r=Dt(n);!function(e,t){wt(t,!0);let s=es(t,"class",3,void 0),n=ts(t,["$$slots","$$events","$$legacy","children","class"]);var r=Ri();Jt(r,e=>({class:e,...n}),[()=>hs("flex flex-col space-y-1.5 text-center sm:text-left",s())]);var i=kt(r),o=e=>{var s=tt(),n=Dt(s);_s(n,()=>t.children),et(e,s)};Vt(i,e=>{t.children&&e(o)}),$t(r),et(e,r),Ct()}(r,{children:(e,t)=>{var s=Vi(),n=Dt(s);!function(e,t){wt(t,!0);let s=es(t,"class",3,void 0),n=ts(t,["$$slots","$$events","$$legacy","children","class"]);var r=tt(),i=Dt(r);{let e=_t(()=>hs("text-lg font-semibold leading-none tracking-tight",s()));Cs(i,()=>Ar,(s,r)=>{r(s,ss({get class(){return mt(e)}},()=>n,{children:(e,s)=>{var n=tt(),r=Dt(n),i=e=>{var s=tt(),n=Dt(s);_s(n,()=>t.children),et(e,s)};Vt(r,e=>{t.children&&e(i)}),et(e,n)},$$slots:{default:!0}}))})}et(e,r),Ct()}(n,{children:(e,t)=>{zt();var s=lt();xt(e=>Qe(s,e),[()=>ns("lesson.generator.title")]),et(e,s)},$$slots:{default:!0}}),function(e,t){wt(t,!0);let s=es(t,"class",3,void 0),n=ts(t,["$$slots","$$events","$$legacy","children","class"]);var r=tt(),i=Dt(r);{let e=_t(()=>hs("text-sm text-muted-foreground",s()));Cs(i,()=>Pi,(s,r)=>{r(s,ss({get class(){return mt(e)}},()=>n,{children:(e,s)=>{var n=tt(),r=Dt(n),i=e=>{var s=tt(),n=Dt(s);_s(n,()=>t.children),et(e,s)};Vt(r,e=>{t.children&&e(i)}),et(e,n)},$$slots:{default:!0}}))})}et(e,r),Ct()}(Lt(n,2),{children:(e,t)=>{zt();var s=lt();xt(e=>Qe(s,e),[()=>ns("lesson.generator.description")]),et(e,s)},$$slots:{default:!0}}),et(e,s)},$$slots:{default:!0}});var k=Lt(r,2),$=kt(k),L=e=>{var t=Ui(),n=kt(t),r=Lt(n);r.__click=()=>{try{yt(a,null),yt(c,!1)}catch(e){s(e,"Failed to clear error state")}};var i=kt(r,!0);$t(r),$t(t),xt(e=>{Qe(n,`‚ö†Ô∏è ${mt(a)??""} `),Qe(i,e)},[()=>ns("common.try_again")]),et(e,t)};Vt($,e=>{mt(c)&&e(L)});var x=Lt($,2),_=e=>{var t=Gi(),s=kt(t);$t(t),xt(()=>Qe(s,`‚úÖ ${mt(l)??""}`)),et(e,t)};Vt(x,e=>{mt(l)&&e(_)});var C=Lt(x,2),A=kt(C),D=kt(A,!0);$t(A);var P=Lt(A,2),S=kt(P),M=kt(S,!0);$t(S);var j=Lt(S,2);Kt(j),$t(P);var E=Lt(P,2),T=kt(E),F=kt(T,!0);$t(T);var W=Lt(T,2);Rt(W),$t(E),$t(C);var O=Lt(C,2),B=kt(O),I=kt(B,!0);$t(B);var N=Lt(B,2),z=kt(N),R=kt(z),V=kt(R,!0);$t(R);var U=Lt(R,2),G=kt(U),K=kt(G,!0);$t(G),G.value=G.__value="";var q=Lt(G);Ut(q,17,w,Gt,(e,t)=>{var s=Ki(),n=kt(s,!0);$t(s);var r={};xt(e=>{Qe(n,e),r!==(r=mt(t))&&(s.value=(s.__value=mt(t))??"")},[()=>function(e){return{vocabulary:ns("lesson.types.vocabulary"),grammar:ns("lesson.types.grammar"),mixed:ns("lesson.types.mixed"),conversation:ns("lesson.types.conversation"),reading:ns("lesson.types.reading"),listening:ns("lesson.types.listening"),writing:ns("lesson.types.writing"),culture:ns("lesson.types.culture"),contextual:ns("lesson.types.contextual")}[e]||e}(mt(t))]),et(e,s)}),$t(U),$t(z);var Z=Lt(z,2),H=kt(Z),Y=kt(H,!0);$t(H);var X=Lt(H,2),J=kt(X),Q=kt(J,!0);$t(J),J.value=J.__value="";var ee=Lt(J);Ut(ee,17,m,Gt,(e,t)=>{var s=qi(),n=kt(s,!0);$t(s);var r={};xt(()=>{Qe(n,mt(t)),r!==(r=mt(t))&&(s.value=(s.__value=mt(t))??"")}),et(e,s)}),$t(X),$t(Z),$t(N);var te=Lt(N,2),se=e=>{var t=Yi(),s=kt(t),n=kt(s),r=kt(n,!0);$t(n);var i=Lt(n,2),o=kt(i),a=kt(o,!0);$t(o),o.value=o.__value="";var l=Lt(o);Ut(l,17,y,Gt,(e,t)=>{var s=Zi(),n=kt(s,!0);$t(s);var r={};xt(e=>{Qe(n,e),r!==(r=mt(t))&&(s.value=(s.__value=mt(t))??"")},[()=>function(e){return{greetings:ns("vocabulary.categories.greetings"),numbers:ns("vocabulary.categories.numbers"),family:ns("vocabulary.categories.family"),food:ns("vocabulary.categories.food"),colors:ns("vocabulary.categories.colors"),animals:ns("vocabulary.categories.animals"),body:ns("vocabulary.categories.body_parts"),clothing:ns("vocabulary.categories.clothing"),house:ns("vocabulary.categories.house_home"),nature:ns("vocabulary.categories.nature"),transport:ns("vocabulary.categories.transportation"),technology:ns("vocabulary.categories.technology"),time:ns("vocabulary.categories.time_date"),weather:ns("vocabulary.categories.weather"),professions:ns("vocabulary.categories.professions"),places:ns("vocabulary.categories.places"),grammar:ns("vocabulary.categories.grammar"),culture:ns("vocabulary.categories.culture"),common_phrases:ns("vocabulary.categories.common_phrases"),uncategorized:ns("vocabulary.categories.uncategorized")}[e]||e}(mt(t))]),et(e,s)}),$t(i),$t(s);var c=Lt(s,2),d=kt(c),p=kt(d,!0);$t(d);var v=Lt(d,2),h=kt(v),f=kt(h,!0);$t(h),h.value=h.__value="";var g=Lt(h);Ut(g,17,b,Gt,(e,t)=>{var s=Hi(),n=kt(s,!0);$t(s);var r={};xt(e=>{Qe(n,e),r!==(r=mt(t))&&(s.value=(s.__value=mt(t))??"")},[()=>function(e){return{noun:ns("vocabulary.parts_of_speech.nouns"),verb:ns("vocabulary.parts_of_speech.verbs"),adjective:ns("vocabulary.parts_of_speech.adjectives"),adverb:ns("vocabulary.parts_of_speech.adverbs"),pronoun:ns("vocabulary.parts_of_speech.pronouns"),preposition:ns("vocabulary.parts_of_speech.prepositions"),conjunction:ns("vocabulary.parts_of_speech.conjunctions"),interjection:ns("vocabulary.parts_of_speech.interjections"),article:ns("vocabulary.parts_of_speech.articles"),number:ns("vocabulary.parts_of_speech.numbers"),phrase:ns("vocabulary.parts_of_speech.phrases")}[e]||e}(mt(t))]),et(e,s)}),$t(v),$t(c),$t(t),xt((e,t,s,n)=>{Qe(r,e),Qe(a,t),Qe(p,s),Qe(f,n)},[()=>ns("lesson.generator.category"),()=>ns("lesson.generator.any_category"),()=>ns("lesson.generator.part_of_speech"),()=>ns("lesson.generator.any_part_of_speech")]),Qt(i,()=>mt(u).category,e=>mt(u).category=e),Qt(v,()=>mt(u).partOfSpeech,e=>mt(u).partOfSpeech=e),et(e,t)};Vt(te,e=>{(mt(d)||mt(v))&&e(se)});var ne=Lt(te,2),re=e=>{var t=Xi(),s=kt(t),n=kt(s,!0);$t(s);var r=Lt(s,2);Kt(r),$t(t),xt((e,t)=>{Qe(n,e),Ht(r,"placeholder",t)},[()=>ns("lesson.generator.grammar_concept"),()=>ns("lesson.generator.grammar_concept_placeholder")]),fs(r,()=>mt(u).conceptType,e=>mt(u).conceptType=e),et(e,t)};Vt(ne,e=>{mt(p)&&e(re)});var ie=Lt(ne,2),oe=kt(ie),ae=kt(oe,!0);$t(oe);var le=Lt(oe,2),ce=kt(le),ue=kt(ce);$t(ce),ce.value=ce.__value="5";var de=Lt(ce),pe=kt(de);$t(de),de.value=de.__value="8";var ve=Lt(de),he=kt(ve);$t(ve),ve.value=ve.__value="10";var fe=Lt(ve),ge=kt(fe);$t(fe),fe.value=fe.__value="15";var me=Lt(fe),ye=kt(me);$t(me),me.value=me.__value="20",$t(le),$t(ie),$t(O);var be=Lt(O,2),we=kt(be),ke=kt(we,!0);$t(we);var $e=Lt(we,2),Le=kt($e),xe=kt(Le),_e=kt(xe);Kt(_e);var Ce=Lt(_e);$t(xe),$t(Le);var Ae=Lt(Le,2),De=e=>{var t=Ji(),s=kt(t),n=kt(s);Kt(n);var r=Lt(n);$t(s),$t(t),xt(e=>Qe(r,` ${e??""}`),[()=>ns("lesson.generator.include_language_comparison")]),gs(n,()=>mt(u).includeComparison,e=>mt(u).includeComparison=e),et(e,t)};Vt(Ae,e=>{mt(p)&&e(De)});var Pe=Lt(Ae,2),Se=e=>{var t=Qi(),s=kt(t),n=kt(s);Kt(n);var r=Lt(n);$t(s),$t(t),xt(e=>Qe(r,` ${e??""}`),[()=>ns("lesson.generator.include_review_section")]),gs(n,()=>mt(u).includeReview,e=>mt(u).includeReview=e),et(e,t)};Vt(Pe,e=>{(mt(d)||mt(v))&&e(Se)}),$t($e),$t(be),$t(k),function(e,t){wt(t,!0);let s=es(t,"class",3,void 0),n=ts(t,["$$slots","$$events","$$legacy","children","class"]);var r=zi();Jt(r,e=>({class:e,...n}),[()=>hs("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s())]);var i=kt(r),o=e=>{var s=tt(),n=Dt(s);_s(n,()=>t.children),et(e,s)};Vt(i,e=>{t.children&&e(o)}),$t(r),et(e,r),Ct()}(Lt(k,2),{children:(e,t)=>{var n=eo(),r=Dt(n);Ds(r,{variant:"secondary",size:"default",class:"",onclick:()=>{try{g()}catch(e){s(e,"Failed to close modal"),yt(c,!0)}},get disabled(){return mt(o)},children:(e,t)=>{zt();var s=lt();xt(e=>Qe(s,e),[()=>ns("common.cancel")]),et(e,s)},$$slots:{default:!0}});var m=Lt(r,2);Ds(m,{variant:"default",size:"default",class:"",onclick:()=>{try{!async function(){try{if(yt(o,!0),yt(a,null),yt(l,null),yt(c,!1),!mt(u).type||"string"!=typeof mt(u).type)throw new Error(ns("lesson.generator.errors.select_valid_lesson_type"));if(!mt(u).difficulty||"string"!=typeof mt(u).difficulty)throw new Error(ns("lesson.generator.errors.select_valid_difficulty"));let e;if(mt(d)){const t=mt(u).category?[mt(u).category]:void 0;e=await kn.generateThematicLesson(t||[],mt(u).difficulty,{includePractice:mt(u).includePractice,includeReview:mt(u).includeReview})}else if(mt(p))e=await kn.generateGrammarLesson(mt(u).conceptType||"basic",mt(u).difficulty,{includePractice:mt(u).includePractice,includeComparison:mt(u).includeComparison});else if(mt(v)){const t=mt(u).category||"everyday-phrases";e=await kn.generateMixedLesson(t,mt(u).difficulty,{includePractice:mt(u).includePractice,includeReview:mt(u).includeReview})}else{const t={type:mt(u).type,difficulty:mt(u).difficulty,criteria:{categories:mt(u).category&&"uncategorized"!==mt(u).category?[mt(u).category]:[],...mt(u).partOfSpeech?{partOfSpeech:mt(u).partOfSpeech}:{},conceptType:mt(u).conceptType,limit:mt(u).limit},userId:"local-user",metadata:{includePractice:mt(u).includePractice,includeComparison:mt(u).includeComparison,includeReview:mt(u).includeReview}};e=await kn.generateDynamicLesson(t)}mt(u).title&&(e.title=mt(u).title),mt(u).description&&(e.description=mt(u).description),i()(e),yt(l,ns("lesson.generator.success_message"),!0),setTimeout(()=>{g()},2e3)}catch(e){throw s(e,"Failed to generate lesson"),yt(a,e instanceof Error?e.message:ns("lesson.generator.errors.generation_failed"),!0),yt(c,!0),e}finally{yt(o,!1)}}()}catch(e){}},get disabled(){return mt(o)},children:(e,t)=>{zt();var s=lt();xt(()=>Qe(s,mt(o)?mt(f):mt(h))),et(e,s)},$$slots:{default:!0}}),et(e,n)},$$slots:{default:!0}}),xt((e,t,s,n,r,i,o,a,l,c,u,d,p,v,h,f,g,m)=>{Qe(D,e),Qe(M,t),Ht(j,"placeholder",s),Qe(F,n),Ht(W,"placeholder",r),Qe(I,i),Qe(V,o),Qe(K,a),Qe(Y,l),Qe(Q,c),Qe(ae,u),Qe(ue,`5 ${d??""}`),Qe(pe,`8 ${p??""}`),Qe(he,`10 ${v??""}`),Qe(ge,`15 ${h??""}`),Qe(ye,`20 ${f??""}`),Qe(ke,g),Qe(Ce,` ${m??""}`)},[()=>ns("lesson.generator.basic_information"),()=>ns("lesson.generator.lesson_title"),()=>ns("lesson.generator.lesson_title_placeholder"),()=>ns("lesson.generator.description"),()=>ns("lesson.generator.description_placeholder"),()=>ns("lesson.generator.lesson_parameters"),()=>ns("lesson.generator.lesson_type_required"),()=>ns("lesson.generator.select_lesson_type"),()=>ns("lesson.generator.difficulty_level_required"),()=>ns("lesson.generator.select_difficulty"),()=>ns("lesson.generator.number_of_items"),()=>ns("lesson.generator.items"),()=>ns("lesson.generator.items"),()=>ns("lesson.generator.items"),()=>ns("lesson.generator.items"),()=>ns("lesson.generator.items"),()=>ns("lesson.generator.options"),()=>ns("lesson.generator.include_practice_exercises")]),fs(j,()=>mt(u).title,e=>mt(u).title=e),fs(W,()=>mt(u).description,e=>mt(u).description=e),Qt(U,()=>mt(u).type,e=>mt(u).type=e),Qt(X,()=>mt(u).difficulty,e=>mt(u).difficulty=e),Qt(le,()=>mt(u).limit,e=>mt(u).limit=e),gs(_e,()=>mt(u).includePractice,e=>mt(u).includePractice=e),et(e,n)},$$slots:{default:!0}})},$$slots:{default:!0}}),Ct()}Xe(["click"]);var no=Je('<div class="loading-state svelte-1vg779e"><div class="spinner svelte-1vg779e"></div> <p class="svelte-1vg779e"> </p></div>'),ro=Je('<div class="error-state svelte-1vg779e"><div class="error-icon svelte-1vg779e">‚ö†Ô∏è</div> <p class="svelte-1vg779e"> </p> <button class="retry-button svelte-1vg779e"> </button></div>'),io=Je('<div class="empty-state svelte-1vg779e"><div class="empty-icon svelte-1vg779e">üìö</div> <p class="svelte-1vg779e"> </p> <button class="create-lesson-button svelte-1vg779e"> </button></div>'),oo=Je('<option class="svelte-1vg779e"> </option>'),ao=Je('<option class="svelte-1vg779e"> </option>'),lo=Je('<!> <div class="back-to-lessons svelte-1vg779e"><button class="back-button svelte-1vg779e"> </button></div>',1),co=Je('<div class="lesson-card-wrapper svelte-1vg779e"><!></div>'),uo=Je('<div class="lessons-grid svelte-1vg779e"></div>'),po=Je('‚Ä¢ <button class="reset-filters svelte-1vg779e"> </button>',1),vo=Je('<div class="lessons-filters svelte-1vg779e"><div class="filter-group svelte-1vg779e"><label for="difficulty-filter" class="svelte-1vg779e"> </label> <select id="difficulty-filter" class="svelte-1vg779e"><option class="svelte-1vg779e"> </option><!></select></div> <div class="filter-group svelte-1vg779e"><label for="type-filter" class="svelte-1vg779e"> </label> <select id="type-filter" class="svelte-1vg779e"><option class="svelte-1vg779e"> </option><!></select></div> <button class="create-lesson-button mobile svelte-1vg779e"> </button></div> <!> <div class="lessons-summary svelte-1vg779e"><p class="svelte-1vg779e"> <!></p></div>',1),ho=Je('<div class="lessons-page svelte-1vg779e"><header class="lessons-header svelte-1vg779e"><h1 class="svelte-1vg779e"> </h1> <p class="subtitle svelte-1vg779e"> </p> <button class="create-lesson-button svelte-1vg779e"> </button></header> <!> <!></div>');function fo(e,t){wt(t,!0);let s=ht(Pt([])),n=ht(!0),r=ht(null),i=ht("all"),o=ht("all"),a=ht(!1),l=ht(null);const c={de:{vocabulary:"Vokabular",grammar:"Grammatik",conversation:"Konversation",reading:"Lesen",listening:"H√∂ren",writing:"Schreiben",culture:"Kultur",mixed:"Gemischt"},bg:{vocabulary:"–†–µ—á–Ω–∏–∫",grammar:"–ì—Ä–∞–º–∞—Ç–∏–∫–∞",conversation:"–†–∞–∑–≥–æ–≤–æ—Ä",reading:"–ß–µ—Ç–µ–Ω–µ",listening:"–°–ª—É—à–∞–Ω–µ",writing:"–ü–∏—Å–∞–Ω–µ",culture:"–ö—É–ª—Ç—É—Ä–∞",mixed:"–°–º–µ—Å–µ–Ω–æ"}},u={de:{greetings:"Begr√º√üungen",numbers:"Zahlen",family:"Familie",food:"Essen",colors:"Farben",animals:"Tiere","body-parts":"K√∂rperteile",clothing:"Kleidung",home:"Zuhause",nature:"Natur",transport:"Verkehr",technology:"Technologie",time:"Zeit",weather:"Wetter",professions:"Berufe",places:"Orte",grammar:"Grammatik",culture:"Kultur","everyday-phrases":"Alltagsphrasen"},bg:{greetings:"–ü–æ–∑–¥—Ä–∞–≤–∏",numbers:"–ß–∏—Å–ª–∞",family:"–°–µ–º–µ–π—Å—Ç–≤–æ",food:"–•—Ä–∞–Ω–∞",colors:"–¶–≤–µ—Ç–æ–≤–µ",animals:"–ñ–∏–≤–æ—Ç–Ω–∏","body-parts":"–ß–∞—Å—Ç–∏ –Ω–∞ —Ç—è–ª–æ—Ç–æ",clothing:"–û–±–ª–µ–∫–ª–æ",home:"–î–æ–º",nature:"–ü—Ä–∏—Ä–æ–¥–∞",transport:"–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç",technology:"–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏",time:"–í—Ä–µ–º–µ",weather:"–í—Ä–µ–º–µ—Ç–æ",professions:"–ü—Ä–æ—Ñ–µ—Å–∏–∏",places:"–ú–µ—Å—Ç–∞",grammar:"–ì—Ä–∞–º–∞—Ç–∏–∫–∞",culture:"–ö—É–ª—Ç—É—Ä–∞","everyday-phrases":"–ß–µ—Å—Ç–æ —Å—Ä–µ—â–∞–Ω–∏ –∏–∑—Ä–∞–∑–∏"}},d={de:{noun:"Nomen",verb:"Verben",adjective:"Adjektive",adverb:"Adverbien",pronoun:"Pronomen",preposition:"Pr√§positionen",conjunction:"Konjunktionen",interjection:"Interjektionen",article:"Artikel",number:"Zahlw√∂rter",phrase:"Redewendungen"},bg:{noun:"–°—ä—â–µ—Å—Ç–≤–∏—Ç–µ–ª–Ω–∏",verb:"–ì–ª–∞–≥–æ–ª–∏",adjective:"–ü—Ä–∏–ª–∞–≥–∞—Ç–µ–ª–Ω–∏",adverb:"–ù–∞—Ä–µ—á–∏—è",pronoun:"–ú–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è",preposition:"–ü—Ä–µ–¥–ª–æ–∑–∏",conjunction:"–°—ä—é–∑–∏",interjection:"–ú–µ–∂–¥—É–º–µ—Ç–∏—è",article:"–ß–ª–µ–Ω–æ–≤–µ",number:"–ß–∏—Å–ª–∏—Ç–µ–ª–Ω–∏",phrase:"–ò–∑—Ä–∞–∑–∏"}},p=_t(()=>"DE_BG"===rs.languageMode?{title:"Lektionen",subtitle:"Strukturierte Lernerlebnisse f√ºr Bulgarisch und Deutsch",createDynamicLesson:"‚ú® Dynamische Lektion erstellen",createLesson:"‚ú® Lektion erstellen",createFirstLesson:"Erstelle deine erste Lektion",loading:"Lektionen werden geladen...",error:"Fehler beim Laden. Bitte erneut versuchen.",retry:"Erneut versuchen",emptyTitle:"Keine Lektionen verf√ºgbar",emptyDescription:"Erstelle deine erste individuelle Lektion!",difficultyLabel:"Niveau",typeLabel:"Typ",allLevels:"Alle Niveaus",allTypes:"Alle Typen",backToLessons:"‚Üê Zur√ºck zu allen Lektionen",showingLessons:(e,t)=>`Zeige ${e} von ${t} Lektionen`,resetFilters:"Filter zur√ºcksetzen",mixedEveryday:"Gemischt: Allt√§gliche Gespr√§che",basicVocabulary:"Grundwortschatz",categoryPrefix:"Kategorie",grammarPrefix:"Grammatik"}:{title:"–£—Ä–æ—Ü–∏",subtitle:"–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–∞–Ω–∏ —É—Ä–æ—Ü–∏ –ø–æ –±—ä–ª–≥–∞—Ä—Å–∫–∏ –∏ –Ω–µ–º—Å–∫–∏",createDynamicLesson:"‚ú® –°—ä–∑–¥–∞–π –¥–∏–Ω–∞–º–∏—á–µ–Ω —É—Ä–æ–∫",createLesson:"‚ú® –°—ä–∑–¥–∞–π —É—Ä–æ–∫",createFirstLesson:"–°—ä–∑–¥–∞–π –ø—ä—Ä–≤–∏—è —Å–∏ —É—Ä–æ–∫",loading:"–ó–∞—Ä–µ–∂–¥–∞–º–µ —É—Ä–æ—Ü–∏—Ç–µ...",error:"–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ. –û–ø–∏—Ç–∞–π—Ç–µ –ø–∞–∫.",retry:"–û–ø–∏—Ç–∞–π –æ—Ç–Ω–æ–≤–æ",emptyTitle:"–ù—è–º–∞ –Ω–∞–ª–∏—á–Ω–∏ —É—Ä–æ—Ü–∏",emptyDescription:"–°—ä–∑–¥–∞–π –ø—ä—Ä–≤–∏—è —Å–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω —É—Ä–æ–∫!",difficultyLabel:"–ù–∏–≤–æ",typeLabel:"–¢–∏–ø",allLevels:"–í—Å–∏—á–∫–∏ –Ω–∏–≤–∞",allTypes:"–í—Å–∏—á–∫–∏ —Ç–∏–ø–æ–≤–µ",backToLessons:"‚Üê –ù–∞–∑–∞–¥ –∫—ä–º –≤—Å–∏—á–∫–∏ —É—Ä–æ—Ü–∏",showingLessons:(e,t)=>`–ü–æ–∫–∞–∑–∞–Ω–∏ ${e} –æ—Ç –æ–±—â–æ ${t} —É—Ä–æ–∫–∞`,resetFilters:"–ù—É–ª–∏—Ä–∞–π —Ñ–∏–ª—Ç—Ä–∏—Ç–µ",mixedEveryday:"–°–º–µ—Å–µ–Ω–æ: –ï–∂–µ–¥–Ω–µ–≤–Ω–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–∏",basicVocabulary:"–û—Å–Ω–æ–≤–Ω–∞ –ª–µ–∫—Å–∏–∫–∞",categoryPrefix:"–ö–∞—Ç–µ–≥–æ—Ä–∏—è",grammarPrefix:"–ì—Ä–∞–º–∞—Ç–∏–∫–∞"});let v=_t(()=>mt(s).filter(e=>{const t="all"===mt(i)||e.difficulty===mt(i),s="all"===mt(o)||e.type===mt(o);return t&&s}));async function h(){try{yt(n,!0),yt(r,null),await kn.initialize();const e=await async function(){const e=[],t=cs.getVocabularyStatsByDifficulty(),s=["A1","A2","B1","B2","C1"];for(const o of s)if(t[o]>=5){const s=Math.min(3,Math.floor(t[o]/5));for(let t=0;t<s;t++)try{const s=await wn.generateLessonFromCriteria({difficulty:o,limit:8,type:0===t?"vocabulary":1===t?"conversation":"mixed"});e.push(s)}catch(i){console.error(`Failed to generate ${o} lesson ${t+1}:`,i)}}const n=["greetings","numbers","family","food","colors","animals","body-parts","clothing"];for(const o of n)try{if(cs.getVocabularyByCategory(o).length>=5){const t=await wn.generateLessonFromCriteria({categories:[o],limit:8,type:"vocabulary",title:`${mt(p).categoryPrefix}: ${y(o)}`});e.push(t)}}catch(i){console.error(`Failed to generate ${o} category lesson:`,i)}const r=["noun","verb","adjective","adverb"];for(const o of r)try{if(cs.getVocabularyByPartOfSpeech(o).length>=5){const t=await wn.generateLessonFromCriteria({partOfSpeech:o,limit:8,type:"vocabulary",title:`${mt(p).grammarPrefix}: ${b(o)}`});e.push(t)}}catch(i){console.error(`Failed to generate ${o} lesson:`,i)}if(cs.getVocabularyCount()>=15)try{const t=await wn.generateLessonFromCriteria({limit:10,type:"mixed",title:mt(p).mixedEveryday});e.push(t)}catch(i){console.error("Failed to generate mixed lesson:",i)}if(0===e.length&&cs.getVocabularyCount()>0){console.warn("No lessons generated, creating fallback lessons");const t=function(){const e=[],t=cs.getVocabulary();if(t.length>=5){const s={A1:[],A2:[],B1:[],B2:[],C1:[]};t.forEach(e=>{e.difficulty<=1.5?s.A1.push(e):e.difficulty<=2.5?s.A2.push(e):e.difficulty<=3.5?s.B1.push(e):e.difficulty<=4.5?s.B2.push(e):s.C1.push(e)});for(const[t,n]of Object.entries(s))if(n.length>=5){const s=wn.generateLessonFromVocabulary(n.slice(0,8).map(e=>{const t="string"==typeof e.transliteration?{german:e.transliteration}:e.transliteration??{};return{...e,isCommon:e.metadata?.isCommon??!1,isVerified:e.metadata?.isVerified??!1,learningPhase:e.metadata?.learningPhase??0,cefrLevel:(()=>{const t=e.metadata?.level??e.level??"A1";return"C1"===t?"B2":t})(),transliteration:t,culturalNotes:e.culturalNotes}}),{title:`${t}: ${mt(p).basicVocabulary}`,difficulty:t,type:"vocabulary"});e.push(s)}}return e}();e.push(...t)}return e}();yt(s,e,!0)}catch(e){console.error("Failed to load lessons:",e),yt(r,e instanceof Error?e.message:mt(p).error,!0)}finally{yt(n,!1)}}function f(){yt(l,null)}function g(){const e=new Set;return mt(s).forEach(t=>e.add(t.type)),["all",...Array.from(e)]}function m(){return["A1","A2","B1","B2","C1"]}function y(e){return("DE_BG"===rs.languageMode?u.de:u.bg)[e]??e}function b(e){const t="DE_BG"===rs.languageMode?d.de:d.bg;return e in t?t[e]:e}St(()=>{h()});var w=ho(),k=kt(w),$=kt(k),L=kt($,!0);$t($);var x=Lt($,2),_=kt(x,!0);$t(x);var C=Lt(x,2);C.__click=()=>yt(a,!0);var A=kt(C,!0);$t(C),$t(k);var D=Lt(k,2),P=e=>{var t=no(),s=Lt(kt(t),2),n=kt(s,!0);$t(s),$t(t),xt(()=>Qe(n,mt(p).loading)),et(e,t)},S=e=>{var t=tt(),n=Dt(t),u=e=>{var t=ro(),s=Lt(kt(t),2),n=kt(s,!0);$t(s);var i=Lt(s,2);i.__click=h;var o=kt(i,!0);$t(i),$t(t),xt(()=>{Qe(n,mt(r)),Qe(o,mt(p).retry)}),et(e,t)},d=e=>{var t=tt(),n=Dt(t),r=e=>{var t=io(),s=Lt(kt(t),2),n=kt(s,!0);$t(s);var r=Lt(s,2);r.__click=()=>yt(a,!0);var i=kt(r,!0);$t(r),$t(t),xt(()=>{Qe(n,mt(p).emptyDescription),Qe(i,mt(p).createFirstLesson)}),et(e,t)},u=e=>{var t=vo(),n=Dt(t),r=kt(n),u=kt(r),d=kt(u,!0);$t(u);var h=Lt(u,2),y=kt(h),b=kt(y,!0);$t(y),y.value=y.__value="all";var w=Lt(y);Ut(w,17,m,Gt,(e,t)=>{var s=oo(),n=kt(s,!0);$t(s);var r={};xt(()=>{Qe(n,mt(t)),r!==(r=mt(t))&&(s.value=(s.__value=mt(t))??"")}),et(e,s)}),$t(h),$t(r);var k=Lt(r,2),$=kt(k),L=kt($,!0);$t($);var x=Lt($,2),_=kt(x),C=kt(_,!0);$t(_),_.value=_.__value="all";var A=Lt(_);Ut(A,17,g,Gt,(e,t)=>{var s=ao(),n=kt(s,!0);$t(s);var r={};xt(e=>{Qe(n,e),r!==(r=mt(t))&&(s.value=(s.__value=mt(t))??"")},[()=>function(e){return("DE_BG"===rs.languageMode?c.de:c.bg)[e]??e}(mt(t))]),et(e,s)}),$t(x),$t(k);var D=Lt(k,2);D.__click=()=>yt(a,!0);var P=kt(D,!0);$t(D),$t(n);var S=Lt(n,2),M=e=>{var t=lo(),s=Dt(t);pn(s,{get lesson(){return mt(l)}});var n=Lt(s,2),r=kt(n);r.__click=f;var i=kt(r,!0);$t(r),$t(n),xt(()=>Qe(i,mt(p).backToLessons)),et(e,t)},j=e=>{var t=uo();Ut(t,21,()=>mt(v),e=>e.id,(e,t)=>{var s=co();Us(kt(s),{get lesson(){return mt(t)}}),$t(s),et(e,s)}),$t(t),et(e,t)};Vt(S,e=>{mt(l)?e(M):e(j,!1)});var E=Lt(S,2),T=kt(E),F=kt(T),W=Lt(F),O=e=>{var t=po(),s=Lt(Dt(t));s.__click=()=>{yt(i,"all"),yt(o,"all")};var n=kt(s,!0);$t(s),xt(()=>Qe(n,mt(p).resetFilters)),et(e,t)};Vt(W,e=>{"all"===mt(i)&&"all"===mt(o)||e(O)}),$t(T),$t(E),xt(e=>{Qe(d,mt(p).difficultyLabel),Qe(b,mt(p).allLevels),Qe(L,mt(p).typeLabel),Qe(C,mt(p).allTypes),Qe(P,mt(p).createLesson),Qe(F,`${e??""} `)},[()=>mt(p).showingLessons(mt(v).length,mt(s).length)]),Qt(h,()=>mt(i),e=>yt(i,e)),Qt(x,()=>mt(o),e=>yt(o,e)),et(e,t)};Vt(n,e=>{0===mt(s).length?e(r):e(u,!1)},!0),et(e,t)};Vt(n,e=>{mt(r)?e(u):e(d,!1)},!0),et(e,t)};Vt(D,e=>{mt(n)?e(P):e(S,!1)}),so(Lt(D,2),{get isOpen(){return mt(a)},onClose:()=>yt(a,!1),onLessonGenerated:function(e){mt(s).push(e),yt(l,e,!0),yt(a,!1)}}),$t(w),xt(()=>{Qe(L,mt(p).title),Qe(_,mt(p).subtitle),Qe(A,mt(p).createDynamicLesson)}),et(e,w),Ct()}Xe(["click"]);export{fo as component};
//# sourceMappingURL=12.Be875SrI.js.map
