import{f as e,a,s as t,t as r,c as n}from"../chunks/Df5ltUoG.js";import{o as s}from"../chunks/BVLhrf_7.js";import{W as l,_ as i,X as o,Z as d,$ as c,v,Y as g,a2 as u,a5 as m,a0 as p,a6 as h,a3 as f,ad as y,ae as k}from"../chunks/BkkwGZv8.js";import{i as b}from"../chunks/BCvKA9Gv.js";import{b as w}from"../chunks/DWVEL8cS.js";import{s as $}from"../chunks/C2lh0-di.js";import{D as P,v as L,a as j}from"../chunks/COna7ZuQ.js";import{V as B}from"../chunks/BdWoqrr1.js";import{A as N}from"../chunks/C6GF6BQM.js";var S=e('<div><!></div> <div class="button-container svelte-1ntlv2v"><!> <!></div>',1),z=e('<div class="completion-message svelte-1ntlv2v"><h2 class="svelte-1ntlv2v"> </h2> <p class="svelte-1ntlv2v"> </p> <!></div>'),A=e('<p class="svelte-1ntlv2v"> </p> <!>',1),T=e('<p class="svelte-1ntlv2v"> </p>'),D=e('<p class="svelte-1ntlv2v"> </p> <!>',1),E=e('<div class="loading-message svelte-1ntlv2v"><!></div>'),F=e('<div class="learn-page svelte-1ntlv2v"><div class="progress-container svelte-1ntlv2v"><div class="progress-bar svelte-1ntlv2v"></div> <div class="progress-text svelte-1ntlv2v"> </div></div> <div class="content-container svelte-1ntlv2v"><!></div></div>');function G(e,G){l(G,!0);let M=i(0),W=i(!1),x=i(!1),C=i(o([])),O=i(!1),V=i(null),_=i(null),I=i(!1);function K(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function U(e){const a=(e.german||"").trim();if(!a)return a;if(/^(der|die|das|ein|eine|einen|einem|einer|eines)\s/i.test(a)){const[t,...r]=a.split(/\s+/),n=r.join(" ");return[t,"noun"===e.partOfSpeech?K(n):n].filter(Boolean).join(" ").trim()}const t="noun"===e.partOfSpeech?K(a):a,r=(n=e.grammar?.gender,s=e.grammar?.verbPartnerId,s||n&&{masculine:"der",feminine:"die",neuter:"das"}[n]||null||("noun"===e.partOfSpeech?"der":null));var n,s;return r?`${r} ${t}`:t}const Q=f(()=>"DE_BG"===j.languageMode?{heading:"Lernkarten",hard:"ðŸ”´ Schwer",easy:"ðŸŸ¢ Leicht",completedTitle:"ðŸŽ‰ GroÃŸartige Arbeit!",completedBody:"Du hast diese Lerneinheit beendet.",startNew:"Neue Einheit starten",loading:"Vokabular wird geladen...",retry:"Erneut versuchen",mastered:"Keine WÃ¶rter zu Ã¼ben. Alles gemeistert!"}:{heading:"ÐšÐ°Ñ€Ñ‚Ð¸ Ð·Ð° ÑƒÑ‡ÐµÐ½Ðµ",hard:"ðŸ”´ Ð¢Ñ€ÑƒÐ´Ð½Ð¾",easy:"ðŸŸ¢ Ð›ÐµÑÐ½Ð¾",completedTitle:"ðŸŽ‰ Ð¡Ñ‚Ñ€Ð°Ñ…Ð¾Ñ‚Ð½Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ð°!",completedBody:"Ð—Ð°Ð²ÑŠÑ€ÑˆÐ¸ Ñ‚Ð°Ð·Ð¸ ÑÐµÑÐ¸Ñ Ð·Ð° ÑƒÑ‡ÐµÐ½Ðµ.",startNew:"Ð—Ð°Ð¿Ð¾Ñ‡Ð½Ð¸ Ð½Ð¾Ð²Ð° ÑÐµÑÐ¸Ñ",loading:"Ð—Ð°Ñ€ÐµÐ¶Ð´Ð°Ð½Ðµ Ð½Ð° Ñ€ÐµÑ‡Ð½Ð¸ÐºÐ°...",retry:"ÐžÐ¿Ð¸Ñ‚Ð°Ð¹ Ð¾Ñ‚Ð½Ð¾Ð²Ð¾",mastered:"ÐÑÐ¼Ð° Ð´ÑƒÐ¼Ð¸ Ð·Ð° ÑƒÐ¿Ñ€Ð°Ð¶Ð½ÐµÐ½Ð¸Ðµ. Ð’ÑÐ¸Ñ‡ÐºÐ¾ Ðµ ÑƒÑÐ²Ð¾ÐµÐ½Ð¾!"});async function R(){try{p(_,null),P.log("LearnPage","Starting learning session"),await L.initialize();const e=L.getVocabulary().map(e=>({...e,german:U(e)}));if(0===e.length)return p(_,"No vocabulary loaded. Please check the data files and try again."),p(W,!1),p(x,!1),void p(C,[],!0);P.log("LearnPage","Vocabulary loaded",{totalWords:e.length}),p(C,[...e].sort(()=>.5-Math.random()),!0),P.log("LearnPage","Session cards prepared",{cardCount:v(C).length}),p(M,0),p(W,!0),p(x,!1),p(O,!1),p(V,null),P.log("LearnPage","Session started",{cardCount:v(C).length,firstCard:v(C)[0]?.id})}catch(e){P.error("LearnPage","Failed to start session",e),p(_,"Failed to start session. Please retry."),p(W,!1),p(C,[],!0)}}function X(){if(!v(W)||v(O))return;p(O,!0),p(V,"easy");const e=v(C)[v(M)];if(e){const a=e.xp_value||10;P.log("LearnPage","Word marked as easy",{wordId:e.id,xpAdded:a})}setTimeout(()=>{Z(),p(O,!1),p(V,null)},600)}function Y(){v(W)&&!v(O)&&(p(O,!0),p(V,"hard"),P.log("LearnPage","Word marked as hard",{wordId:v(C)[v(M)]?.id}),setTimeout(()=>{Z(),p(O,!1),p(V,null)},600))}function Z(){v(M)<v(C).length-1?(k(M),p(I,!1)):(p(W,!1),p(x,!0),P.log("LearnPage","Session completed"))}function q(){p(I,!v(I)),P.log("LearnPage","Flashcard flipped",{isFlipped:v(I)})}function H(){const e=v(C)[v(M)];return e?{...e,literalBreakdown:e.literalBreakdown??e.metadata?.components?.map(e=>({segment:e.part,literal:e.meaning,grammarTag:""}))??[]}:null}s(()=>{R()});var J=F(),ee=g(J),ae=g(ee),te=u(ae,2),re=g(te,!0);m(te),m(ee);var ne=u(ee,2),se=g(ne),le=e=>{var n=S(),s=h(n),l=g(s);{let e=f(H),a=f(()=>"DE_BG"===j.languageMode?"DE->BG":"BG->DE");B(l,{get item(){return v(e)},variant:"flashcard",get direction(){return v(a)},get isFlipped(){return v(I)},showMetadata:!0,showActions:!1,showTags:!1,onFlip:q})}m(s);var i=u(s,2),o=g(i);N(o,{variant:"secondary",size:"lg",get disabled(){return v(O)},onclick:Y,get label(){return v(Q).hard},children:(e,n)=>{y();var s=r();d(()=>t(s,v(Q).hard)),a(e,s)},$$slots:{default:!0}});var c=u(o,2);N(c,{variant:"primary",size:"lg",get disabled(){return v(O)},onclick:X,get label(){return v(Q).easy},children:(e,n)=>{y();var s=r();d(()=>t(s,v(Q).easy)),a(e,s)},$$slots:{default:!0}}),m(i),d(()=>w(s,1,`flashcard-wrapper ${v(V)??""}`,"svelte-1ntlv2v")),a(e,n)},ie=e=>{var s=n(),l=h(s),i=e=>{var n=z(),s=g(n),l=g(s,!0);m(s);var i=u(s,2),o=g(i,!0);m(i);var c=u(i,2);N(c,{variant:"primary",size:"lg",onclick:R,get label(){return v(Q).startNew},children:(e,n)=>{y();var s=r();d(()=>t(s,v(Q).startNew)),a(e,s)},$$slots:{default:!0}}),m(n),d(()=>{t(l,v(Q).completedTitle),t(o,v(Q).completedBody)}),a(e,n)},o=e=>{var s=E(),l=g(s),i=e=>{var n=A(),s=h(n),l=g(s,!0);m(s);var i=u(s,2);N(i,{variant:"secondary",size:"lg",onclick:R,get label(){return v(Q).retry},children:(e,n)=>{y();var s=r();d(()=>t(s,v(Q).retry)),a(e,s)},$$slots:{default:!0}}),d(()=>t(l,v(_))),a(e,n)},o=e=>{var s=n(),l=h(s),i=e=>{var r=T(),n=g(r,!0);m(r),d(()=>t(n,v(Q).loading)),a(e,r)},o=e=>{var n=D(),s=h(n),l=g(s,!0);m(s);var i=u(s,2);N(i,{variant:"primary",size:"lg",onclick:R,get label(){return v(Q).startNew},children:(e,n)=>{y();var s=r();d(()=>t(s,v(Q).startNew)),a(e,s)},$$slots:{default:!0}}),d(()=>t(l,v(Q).mastered)),a(e,n)};b(l,e=>{0===v(C).length?e(i):e(o,!1)},!0),a(e,s)};b(l,e=>{v(_)?e(i):e(o,!1)}),m(s),a(e,s)};b(l,e=>{v(x)?e(i):e(o,!1)},!0),a(e,s)};b(se,e=>{v(W)&&H()?e(le):e(ie,!1)}),m(ne),m(J),d((e,a)=>{$(ae,e),t(re,a)},[()=>`width: ${0===v(C).length?0:Math.round((v(M)+1)/v(C).length*100)}%`,function(){return 0===v(C).length?"0/0":`${v(M)+1}/${v(C).length}`}]),a(e,J),c()}export{G as component};
//# sourceMappingURL=11.CwvgdNQN.js.map
