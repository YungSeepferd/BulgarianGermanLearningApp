{"version":3,"file":"14.0MIGKUU4.js","sources":["../../../../../../src/lib/components/learning/GrammarInfo.svelte","../../../../../../src/lib/components/learning/LearningDashboard.svelte","../../../../../../src/lib/db/queries.ts","../../../../../../src/lib/components/learning/WordCard.svelte","../../../../../../src/lib/components/learning/ProgressStats.svelte","../../../../../../src/lib/components/learning/ExampleCard.svelte","../../../../../../src/lib/db/mutations.ts","../../../../../../src/routes/test-dashboard/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import type { VocabularyItem } from '$lib/types/vocabulary';\n\n  interface Props {\n    item: VocabularyItem;\n  }\n\n  let { item }: Props = $props();\n\n  // Gender display for nouns\n  const genderInfo = $derived.by(() => {\n    if (item.partOfSpeech === 'noun' && item.grammar?.gender) {\n      const genderDetails: Record<string, { label: string; article: string; description: string }> = {\n        masculine: {\n          label: 'Masculine',\n          article: 'der',\n          description: 'Masculine nouns typically end in consonants or -er'\n        },\n        feminine: {\n          label: 'Feminine',\n          article: 'die',\n          description: 'Feminine nouns often end in -e, -in, -ung, -heit, -keit'\n        },\n        neuter: {\n          label: 'Neuter',\n          article: 'das',\n          description: 'Neuter nouns often end in -chen, -lein, -um'\n        }\n      };\n      return genderDetails[item.grammar.gender] || null;\n    }\n    return null;\n  });\n\n  // Declension info for nouns\n  const hasDeclension = $derived(\n    item.partOfSpeech === 'noun' && item.grammar?.declension\n  );\n</script>\n\n<div class=\"grammar-info\">\n  <h3>Grammar Information</h3>\n\n  <!-- Part of Speech -->\n  <section class=\"grammar-section\">\n    <h4>Part of Speech</h4>\n    <div class=\"info-card\">\n      <p class=\"part-of-speech\">{item.partOfSpeech}</p>\n    </div>\n  </section>\n\n  <!-- Gender (for nouns) -->\n  {#if genderInfo}\n    <section class=\"grammar-section\">\n      <h4>Gender & Article</h4>\n      <div class=\"info-card gender-card\">\n        <div class=\"gender-header\">\n          <span class=\"article\">{genderInfo.article}</span>\n          <span class=\"gender-label\">{genderInfo.label}</span>\n        </div>\n        <p class=\"gender-description\">{genderInfo.description}</p>\n      </div>\n    </section>\n  {/if}\n\n  <!-- Declension (for nouns) -->\n  {#if hasDeclension && item.grammar?.declension}\n    <section class=\"grammar-section\">\n      <h4>Declension</h4>\n      <div class=\"declension-table\">\n        <div class=\"table-row header\">\n          <div class=\"table-cell\">Case</div>\n          <div class=\"table-cell\">Singular</div>\n          <div class=\"table-cell\">Plural</div>\n        </div>\n        {#each Object.entries(item.grammar.declension) as [caseName, caseValue]}\n          <div class=\"table-row\">\n            <div class=\"table-cell case-label\">{caseName}</div>\n            <div class=\"table-cell\">{caseValue.singular || '-'}</div>\n            <div class=\"table-cell\">{caseValue.plural || '-'}</div>\n          </div>\n        {/each}\n      </div>\n    </section>\n  {/if}\n\n  <!-- Conjugation (for verbs) - Future Phase 2 -->\n  {#if item.partOfSpeech === 'verb'}\n    <section class=\"grammar-section\">\n      <h4>Conjugation</h4>\n      <div class=\"info-card coming-soon\">\n        <p>üìö Verb conjugation tables coming in Phase 2</p>\n      </div>\n    </section>\n  {/if}\n\n  <!-- Usage Notes -->\n  {#if item.notes?.linguistic}\n    <section class=\"grammar-section\">\n      <h4>Linguistic Notes</h4>\n      <div class=\"info-card usage-notes\">\n        <p>{item.notes.linguistic}</p>\n      </div>\n    </section>\n  {/if}\n\n  <!-- Grammar Topics (removed - not in schema) -->\n</div>\n\n<style>\n  .grammar-info {\n    padding: var(--spacing-6, 1.5rem);\n  }\n\n  .grammar-info h3 {\n    font-size: 1.5rem;\n    font-weight: 600;\n    color: var(--color-text-primary, #111827);\n    margin: 0 0 var(--spacing-6, 1.5rem) 0;\n  }\n\n  .grammar-section {\n    margin-bottom: var(--spacing-6, 1.5rem);\n  }\n\n  .grammar-section:last-child {\n    margin-bottom: 0;\n  }\n\n  .grammar-section h4 {\n    font-size: 1.125rem;\n    font-weight: 600;\n    color: var(--color-text-primary, #111827);\n    margin: 0 0 var(--spacing-3, 0.75rem) 0;\n  }\n\n  .info-card {\n    padding: var(--spacing-4, 1rem);\n    background-color: var(--color-bg-secondary, #f9fafb);\n    border: 1px solid var(--color-border, #e5e7eb);\n    border-radius: var(--radius-md, 0.375rem);\n  }\n\n  .part-of-speech {\n    margin: 0;\n    font-size: 1rem;\n    font-weight: 500;\n    color: var(--color-text-primary, #111827);\n    text-transform: capitalize;\n  }\n\n  /* Gender Card */\n  .gender-card {\n    background-color: var(--color-bg-tertiary, #eff6ff);\n    border-color: #bfdbfe;\n  }\n\n  .gender-header {\n    display: flex;\n    align-items: center;\n    gap: var(--spacing-3, 0.75rem);\n    margin-bottom: var(--spacing-2, 0.5rem);\n  }\n\n  .article {\n    font-size: 1.25rem;\n    font-weight: 700;\n    color: var(--color-primary, #3b82f6);\n  }\n\n  .gender-label {\n    font-size: 1rem;\n    font-weight: 600;\n    color: var(--color-text-primary, #111827);\n  }\n\n  .gender-description {\n    margin: 0;\n    font-size: 0.875rem;\n    color: var(--color-text-secondary, #6b7280);\n    line-height: 1.5;\n  }\n\n  /* Declension Table */\n  .declension-table {\n    border: 1px solid var(--color-border, #e5e7eb);\n    border-radius: var(--radius-md, 0.375rem);\n    overflow: hidden;\n  }\n\n  .table-row {\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n  }\n\n  .table-row.header {\n    background-color: var(--color-bg-tertiary, #f3f4f6);\n    font-weight: 600;\n  }\n\n  .table-row:not(.header):nth-child(even) {\n    background-color: var(--color-bg-secondary, #f9fafb);\n  }\n\n  .table-cell {\n    padding: var(--spacing-3, 0.75rem);\n    border-right: 1px solid var(--color-border, #e5e7eb);\n    font-size: 0.875rem;\n  }\n\n  .table-cell:last-child {\n    border-right: none;\n  }\n\n  .case-label {\n    font-weight: 600;\n    color: var(--color-text-secondary, #6b7280);\n  }\n\n  /* Usage Notes */\n  .usage-notes {\n    background-color: var(--color-bg-tertiary, #f0fdf4);\n    border-color: #bbf7d0;\n  }\n\n  .usage-notes p {\n    margin: 0;\n    font-size: 0.875rem;\n    line-height: 1.6;\n    color: var(--color-text-primary, #111827);\n  }\n\n  /* Grammar Topics */\n  .grammar-topics {\n    display: flex;\n    flex-wrap: wrap;\n    gap: var(--spacing-2, 0.5rem);\n  }\n\n  .topic-badge {\n    padding: var(--spacing-2, 0.5rem) var(--spacing-3, 0.75rem);\n    background-color: var(--color-bg-secondary, #f3f4f6);\n    border: 1px solid var(--color-border, #e5e7eb);\n    border-radius: var(--radius-full, 9999px);\n    font-size: 0.875rem;\n    color: var(--color-text-secondary, #6b7280);\n  }\n\n  /* Coming Soon */\n  .coming-soon {\n    text-align: center;\n    font-size: 1rem;\n    color: var(--color-text-secondary, #6b7280);\n  }\n\n  .coming-soon p {\n    margin: 0;\n  }\n\n  @media (max-width: 640px) {\n    .table-row {\n      grid-template-columns: 1fr;\n    }\n\n    .table-cell {\n      border-right: none;\n      border-bottom: 1px solid var(--color-border, #e5e7eb);\n    }\n\n    .table-row:last-child .table-cell:last-child {\n      border-bottom: none;\n    }\n\n    .case-label::before {\n      content: 'Case: ';\n      font-weight: 400;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { onMount } from 'svelte';\n  import type { VocabularyItem } from '$lib/types/vocabulary';\n  import type { VocabularyProgress } from '$lib/types/progress';\n  import { getVocabularyProgress } from '$lib/db/queries';\n  import WordCard from './WordCard.svelte';\n  import ProgressStats from './ProgressStats.svelte';\n  import ExampleCard from './ExampleCard.svelte';\n  import GrammarInfo from './GrammarInfo.svelte';\n\n  interface Props {\n    item: VocabularyItem;\n  }\n\n  let { item }: Props = $props();\n\n  // Reactive state with Svelte 5 runes\n  let progress = $state<VocabularyProgress | undefined>();\n  let loading = $state(true);\n  let error = $state<string | undefined>();\n  let activeTab = $state<'overview' | 'exercises' | 'grammar' | 'edit'>('overview');\n\n  // Load data from IndexedDB on mount\n  onMount(async () => {\n    try {\n      loading = true;\n      error = undefined;\n\n      // Load vocabulary progress\n      const vocabProgress = await getVocabularyProgress(item.id);\n      progress = vocabProgress;\n\n    } catch (e) {\n      error = e instanceof Error ? e.message : 'Failed to load progress data';\n      console.error('Error loading dashboard data:', e);\n    } finally {\n      loading = false;\n    }\n  });\n\n  // Tab navigation handler\n  function selectTab(tab: typeof activeTab) {\n    activeTab = tab;\n  }\n</script>\n\n<div class=\"learning-dashboard\">\n  <!-- Header with word information -->\n  <div class=\"dashboard-header\">\n    <WordCard {item} />\n    {#if !loading && progress}\n      <ProgressStats {progress} />\n    {/if}\n  </div>\n\n  <!-- Tab Navigation -->\n  <div class=\"tabs\" role=\"tablist\">\n    <button\n      role=\"tab\"\n      aria-selected={activeTab === 'overview'}\n      class=\"tab\"\n      class:active={activeTab === 'overview'}\n      onclick={() => selectTab('overview')}\n    >\n      Overview\n    </button>\n    <button\n      role=\"tab\"\n      aria-selected={activeTab === 'exercises'}\n      class=\"tab\"\n      class:active={activeTab === 'exercises'}\n      onclick={() => selectTab('exercises')}\n    >\n      Exercises\n    </button>\n    <button\n      role=\"tab\"\n      aria-selected={activeTab === 'grammar'}\n      class=\"tab\"\n      class:active={activeTab === 'grammar'}\n      onclick={() => selectTab('grammar')}\n    >\n      Grammar\n    </button>\n    <button\n      role=\"tab\"\n      aria-selected={activeTab === 'edit'}\n      class=\"tab\"\n      class:active={activeTab === 'edit'}\n      onclick={() => selectTab('edit')}\n    >\n      Edit\n    </button>\n  </div>\n\n  <!-- Tab Content -->\n  <div class=\"tab-content\" role=\"tabpanel\">\n    {#if loading}\n      <div class=\"loading\">\n        <div class=\"spinner\"></div>\n        <p>Loading...</p>\n      </div>\n    {:else if error}\n      <div class=\"error\">\n        <p>‚ö†Ô∏è {error}</p>\n      </div>\n    {:else}\n      <!-- Overview Tab -->\n      {#if activeTab === 'overview'}\n        <div class=\"overview-panel\">\n          <section class=\"examples-section\">\n            <h3>Example Sentences</h3>\n            {#if item.examples && item.examples.length > 0}\n              <div class=\"examples-grid\">\n                {#each item.examples as example}\n                  <ExampleCard {example} />\n                {/each}\n              </div>\n            {:else}\n              <p class=\"empty-state\">No examples available yet.</p>\n            {/if}\n          </section>\n\n          {#if item.culturalNotes}\n            <section class=\"cultural-notes\">\n              <h3>Cultural Notes</h3>\n              <p>{item.culturalNotes}</p>\n            </section>\n          {/if}\n\n          {#if item.synonyms && item.synonyms.length > 0}\n            <section class=\"synonyms\">\n              <h3>Synonyms</h3>\n              <div class=\"synonym-list\">\n                {#each item.synonyms as synonym}\n                  <span class=\"synonym-badge\">{synonym}</span>\n                {/each}\n              </div>\n            </section>\n          {/if}\n        </div>\n      {/if}\n\n      <!-- Exercises Tab -->\n      {#if activeTab === 'exercises'}\n        <div class=\"exercises-panel\">\n          <h3>Practice Exercises</h3>\n          <p class=\"coming-soon\">üìö Exercises coming in Phase 2</p>\n          <div class=\"exercise-preview\">\n            <p>Future exercise types:</p>\n            <ul>\n              <li>Fill in the blank (Cloze)</li>\n              <li>Sentence builder</li>\n              <li>Multiple choice</li>\n              <li>Typing practice</li>\n              <li>Listening comprehension</li>\n            </ul>\n          </div>\n        </div>\n      {/if}\n\n      <!-- Grammar Tab -->\n      {#if activeTab === 'grammar'}\n        <GrammarInfo {item} />\n      {/if}\n\n      <!-- Edit Tab -->\n      {#if activeTab === 'edit'}\n        <div class=\"edit-panel\">\n          <h3>Edit Word</h3>\n          <p class=\"coming-soon\">‚úèÔ∏è User editing coming in Phase 3</p>\n          <p class=\"info\">\n            You'll be able to:\n          </p>\n          <ul>\n            <li>Add your own examples</li>\n            <li>Add personal notes</li>\n            <li>Suggest corrections</li>\n            <li>Add custom mnemonics</li>\n          </ul>\n        </div>\n      {/if}\n    {/if}\n  </div>\n</div>\n\n<style>\n  .learning-dashboard {\n    max-width: 1200px;\n    margin: 0 auto;\n    padding: var(--spacing-4, 1rem);\n  }\n\n  .dashboard-header {\n    display: grid;\n    grid-template-columns: 1fr auto;\n    gap: var(--spacing-4, 1rem);\n    margin-bottom: var(--spacing-6, 1.5rem);\n    align-items: start;\n  }\n\n  @media (max-width: 768px) {\n    .dashboard-header {\n      grid-template-columns: 1fr;\n    }\n  }\n\n  /* Tabs */\n  .tabs {\n    display: flex;\n    gap: var(--spacing-2, 0.5rem);\n    border-bottom: 2px solid var(--color-border, #e5e7eb);\n    margin-bottom: var(--spacing-4, 1rem);\n    overflow-x: auto;\n  }\n\n  .tab {\n    padding: var(--spacing-3, 0.75rem) var(--spacing-4, 1rem);\n    background: none;\n    border: none;\n    border-bottom: 3px solid transparent;\n    cursor: pointer;\n    font-weight: 500;\n    color: var(--color-text-secondary, #6b7280);\n    transition: all 0.2s ease;\n    white-space: nowrap;\n  }\n\n  .tab:hover {\n    color: var(--color-text-primary, #111827);\n    background-color: var(--color-bg-hover, #f9fafb);\n  }\n\n  .tab.active {\n    color: var(--color-primary, #3b82f6);\n    border-bottom-color: var(--color-primary, #3b82f6);\n  }\n\n  .tab:focus-visible {\n    outline: 2px solid var(--color-primary, #3b82f6);\n    outline-offset: 2px;\n  }\n\n  /* Tab Content */\n  .tab-content {\n    min-height: 400px;\n  }\n\n  /* Loading & Error States */\n  .loading {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: var(--spacing-8, 2rem);\n    gap: var(--spacing-4, 1rem);\n  }\n\n  .spinner {\n    width: 40px;\n    height: 40px;\n    border: 4px solid var(--color-border, #e5e7eb);\n    border-top-color: var(--color-primary, #3b82f6);\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n  }\n\n  @keyframes spin {\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  .error {\n    padding: var(--spacing-4, 1rem);\n    background-color: var(--color-error-bg, #fef2f2);\n    border: 1px solid var(--color-error-border, #fecaca);\n    border-radius: var(--radius-md, 0.375rem);\n    color: var(--color-error-text, #991b1b);\n  }\n\n  /* Overview Panel */\n  .overview-panel {\n    display: flex;\n    flex-direction: column;\n    gap: var(--spacing-6, 1.5rem);\n  }\n\n  .examples-section h3,\n  .cultural-notes h3,\n  .synonyms h3 {\n    font-size: 1.25rem;\n    font-weight: 600;\n    margin-bottom: var(--spacing-4, 1rem);\n    color: var(--color-text-primary, #111827);\n  }\n\n  .examples-grid {\n    display: grid;\n    gap: var(--spacing-4, 1rem);\n  }\n\n  .empty-state {\n    padding: var(--spacing-6, 1.5rem);\n    text-align: center;\n    color: var(--color-text-secondary, #6b7280);\n    background-color: var(--color-bg-secondary, #f9fafb);\n    border-radius: var(--radius-md, 0.375rem);\n  }\n\n  .cultural-notes {\n    padding: var(--spacing-4, 1rem);\n    background-color: var(--color-bg-tertiary, #eff6ff);\n    border-left: 4px solid var(--color-primary, #3b82f6);\n    border-radius: var(--radius-md, 0.375rem);\n  }\n\n  .cultural-notes p {\n    color: var(--color-text-primary, #111827);\n    line-height: 1.6;\n  }\n\n  .synonym-list {\n    display: flex;\n    flex-wrap: wrap;\n    gap: var(--spacing-2, 0.5rem);\n  }\n\n  .synonym-badge {\n    padding: var(--spacing-2, 0.5rem) var(--spacing-3, 0.75rem);\n    background-color: var(--color-bg-secondary, #f9fafb);\n    border: 1px solid var(--color-border, #e5e7eb);\n    border-radius: var(--radius-full, 9999px);\n    font-size: 0.875rem;\n    color: var(--color-text-secondary, #6b7280);\n  }\n\n  /* Exercises Panel */\n  .exercises-panel,\n  .edit-panel {\n    padding: var(--spacing-6, 1.5rem);\n  }\n\n  .exercises-panel h3,\n  .edit-panel h3 {\n    font-size: 1.5rem;\n    font-weight: 600;\n    margin-bottom: var(--spacing-4, 1rem);\n  }\n\n  .coming-soon {\n    font-size: 1.125rem;\n    color: var(--color-text-secondary, #6b7280);\n    margin-bottom: var(--spacing-4, 1rem);\n  }\n\n  .exercise-preview,\n  .info {\n    margin-top: var(--spacing-4, 1rem);\n    padding: var(--spacing-4, 1rem);\n    background-color: var(--color-bg-secondary, #f9fafb);\n    border-radius: var(--radius-md, 0.375rem);\n  }\n\n  .exercise-preview ul,\n  .edit-panel ul {\n    margin-top: var(--spacing-2, 0.5rem);\n    padding-left: var(--spacing-6, 1.5rem);\n    color: var(--color-text-secondary, #6b7280);\n  }\n\n  .exercise-preview li,\n  .edit-panel li {\n    margin-bottom: var(--spacing-2, 0.5rem);\n  }\n</style>\n","/**\n * Database Query Operations\n * Read-only operations for retrieving data from IndexedDB\n */\n\nimport { getDB } from './idb';\nimport type { VocabularyProgress, ExerciseProgress } from '$lib/types/progress';\nimport type { LessonProgress } from '$lib/types/lesson';\nimport type { LearningPathProgress } from '$lib/types/learning-path';\n\n/**\n * Get vocabulary progress for a specific item\n */\nexport async function getVocabularyProgress(itemId: string): Promise<VocabularyProgress | undefined> {\n\tconst db = await getDB();\n\treturn await db.get('vocabularyProgress', itemId);\n}\n\n/**\n * Get all vocabulary progress (for dashboard stats)\n */\nexport async function getAllVocabularyProgress(): Promise<VocabularyProgress[]> {\n\tconst db = await getDB();\n\treturn await db.getAll('vocabularyProgress');\n}\n\n/**\n * Get vocabulary items due for review (spaced repetition)\n */\nexport async function getVocabularyDueForReview(): Promise<VocabularyProgress[]> {\n\tconst db = await getDB();\n\tconst now = new Date().toISOString();\n\tconst allProgress = await db.getAll('vocabularyProgress');\n\treturn allProgress.filter(\n\t\t(item) => item.nextReview && item.nextReview <= now\n\t);\n}\n\n/**\n * Get lesson progress by lesson ID\n */\nexport async function getLessonProgress(lessonId: string): Promise<LessonProgress | undefined> {\n\tconst db = await getDB();\n\treturn await db.get('lessonProgress', lessonId);\n}\n\n/**\n * Get all lesson progress\n */\nexport async function getAllLessonProgress(): Promise<LessonProgress[]> {\n\tconst db = await getDB();\n\treturn await db.getAll('lessonProgress');\n}\n\n/**\n * Get completed lessons count\n */\nexport async function getCompletedLessonsCount(): Promise<number> {\n\tconst db = await getDB();\n\tconst tx = db.transaction('lessonProgress', 'readonly');\n\tconst index = tx.store.index('completed');\n\treturn await index.count(IDBKeyRange.only(true));\n}\n\n/**\n * Get learning path progress\n */\nexport async function getLearningPathProgress(\n\tpathId: string\n): Promise<LearningPathProgress | undefined> {\n\tconst db = await getDB();\n\treturn await db.get('learningPathProgress', pathId);\n}\n\n/**\n * Get all learning path progress\n */\nexport async function getAllLearningPathProgress(): Promise<LearningPathProgress[]> {\n\tconst db = await getDB();\n\treturn await db.getAll('learningPathProgress');\n}\n\n/**\n * Get exercise progress by exercise ID\n */\nexport async function getExerciseProgress(exerciseId: string): Promise<ExerciseProgress | undefined> {\n\tconst db = await getDB();\n\treturn await db.get('exerciseProgress', exerciseId);\n}\n\n/**\n * Get all exercise progress for a lesson\n */\nexport async function getExerciseProgressByLesson(lessonId: string): Promise<ExerciseProgress[]> {\n\tconst db = await getDB();\n\tconst tx = db.transaction('exerciseProgress', 'readonly');\n\tconst index = tx.store.index('lessonId');\n\treturn await index.getAll(lessonId);\n}\n\n/**\n * Get user progress (global stats)\n */\nexport async function getUserProgress(userId: string = 'local-user'): Promise<any> {\n\tconst db = await getDB();\n\tconst progress = await db.get('userProgress', userId);\n\t\n\t// Initialize default if not found\n\tif (!progress) {\n\t\treturn {\n\t\t\tuserId,\n\t\t\tvocabulary: {},\n\t\t\tpaths: {},\n\t\t\tstreak: {\n\t\t\t\tcurrent: 0,\n\t\t\t\tlongest: 0,\n\t\t\t\tlastActive: new Date().toISOString()\n\t\t\t},\n\t\t\tstats: {\n\t\t\t\txp: 0,\n\t\t\t\tlevel: 1,\n\t\t\t\twordsLearned: 0,\n\t\t\t\tlessonsCompleted: 0,\n\t\t\t\texercisesCompleted: 0,\n\t\t\t\ttotalTimeMinutes: 0,\n\t\t\t\tjoinDate: new Date().toISOString()\n\t\t\t},\n\t\t\tpreferences: {\n\t\t\t\tlanguageMode: 'DE_BG' as const,\n\t\t\t\tuiLanguage: 'de' as const,\n\t\t\t\ttheme: 'auto' as const,\n\t\t\t\tnotificationsEnabled: true,\n\t\t\t\tdailyGoal: 15\n\t\t\t},\n\t\t\tlastUpdated: new Date().toISOString()\n\t\t};\n\t}\n\t\n\treturn progress;\n}\n\n/**\n * Get edit history for a vocabulary item\n */\nexport async function getEditHistory(itemId: string): Promise<any[]> {\n\tconst db = await getDB();\n\tconst tx = db.transaction('editHistory', 'readonly');\n\tconst index = tx.store.index('itemId');\n\treturn await index.getAll(itemId);\n}\n\n/**\n * Get vocabulary item with user edits\n */\nexport async function getVocabularyItem(itemId: string): Promise<any> {\n\tconst db = await getDB();\n\treturn await db.get('vocabulary', itemId);\n}\n\n/**\n * Get all vocabulary items\n */\nexport async function getAllVocabularyItems(): Promise<any[]> {\n\tconst db = await getDB();\n\treturn await db.getAll('vocabulary');\n}\n\n/**\n * Search vocabulary by part of speech\n */\nexport async function getVocabularyByPartOfSpeech(partOfSpeech: string): Promise<any[]> {\n\tconst db = await getDB();\n\tconst tx = db.transaction('vocabulary', 'readonly');\n\tconst index = tx.store.index('partOfSpeech');\n\treturn await index.getAll(partOfSpeech);\n}\n\n/**\n * Get mastered vocabulary (mastery >= 0.8)\n */\nexport async function getMasteredVocabulary(): Promise<VocabularyProgress[]> {\n\tconst db = await getDB();\n\tconst allProgress = await db.getAll('vocabularyProgress');\n\treturn allProgress.filter((item) => item.mastery >= 0.8);\n}\n\n/**\n * Get learning vocabulary (0.3 <= mastery < 0.8)\n */\nexport async function getLearningVocabulary(): Promise<VocabularyProgress[]> {\n\tconst db = await getDB();\n\tconst allProgress = await db.getAll('vocabularyProgress');\n\treturn allProgress.filter((item) => item.mastery >= 0.3 && item.mastery < 0.8);\n}\n\n/**\n * Get struggling vocabulary (mastery < 0.3)\n */\nexport async function getStrugglingVocabulary(): Promise<VocabularyProgress[]> {\n\tconst db = await getDB();\n\tconst allProgress = await db.getAll('vocabularyProgress');\n\treturn allProgress.filter((item) => item.mastery < 0.3);\n}\n","<script lang=\"ts\">\n  import type { VocabularyItem } from '$lib/types/vocabulary';\n\n  interface Props {\n    item: VocabularyItem;\n  }\n\n  let { item }: Props = $props();\n\n  // Part of speech display mapping\n  const partOfSpeechLabels: Record<string, string> = {\n    noun: 'Noun',\n    verb: 'Verb',\n    adjective: 'Adjective',\n    adverb: 'Adverb',\n    preposition: 'Preposition',\n    conjunction: 'Conjunction',\n    pronoun: 'Pronoun',\n    interjection: 'Interjection',\n    particle: 'Particle',\n    number: 'Number',\n    phrase: 'Phrase'\n  };\n\n  const partOfSpeechLabel = $derived(\n    partOfSpeechLabels[item.partOfSpeech] || item.partOfSpeech\n  );\n\n  // Gender display for nouns\n  const genderDisplay = $derived.by(() => {\n    if (item.partOfSpeech === 'noun' && item.grammar?.gender) {\n      const genderMap: Record<string, string> = {\n        masculine: '‚ôÇ',\n        feminine: '‚ôÄ',\n        neuter: '‚¨≤'\n      };\n      return genderMap[item.grammar.gender] || item.grammar.gender;\n    }\n    return null;\n  });\n</script>\n\n<div class=\"word-card\">\n  <div class=\"word-header\">\n    <div class=\"word-main\">\n      <h2 class=\"german-word\">{item.german}</h2>\n      <p class=\"bulgarian-word\">{item.bulgarian}</p>\n    </div>\n    <div class=\"word-meta\">\n      <span class=\"part-of-speech-badge\" data-pos={item.partOfSpeech}>\n        {partOfSpeechLabel}\n      </span>\n      {#if genderDisplay}\n        <span class=\"gender-badge\">\n          {genderDisplay}\n        </span>\n      {/if}\n    </div>\n  </div>\n\n  {#if item.transliteration?.german}\n    <div class=\"pronunciation\">\n      <span class=\"pronunciation-label\">Pronunciation:</span>\n      <span class=\"pronunciation-text\">{item.transliteration.german}</span>\n      <!-- Future: Audio button -->\n      <!-- <button class=\"audio-button\" aria-label=\"Play pronunciation\">\n        <span class=\"audio-icon\">üîä</span>\n      </button> -->\n    </div>\n  {/if}\n\n  {#if item.definitions && item.definitions.length > 0}\n    <div class=\"definition\">\n      <p>See definitions: {item.definitions.length} source(s)</p>\n    </div>\n  {/if}\n</div>\n\n<style>\n  .word-card {\n    padding: var(--spacing-6, 1.5rem);\n    background-color: var(--color-bg-primary, #ffffff);\n    border: 1px solid var(--color-border, #e5e7eb);\n    border-radius: var(--radius-lg, 0.5rem);\n    box-shadow: var(--shadow-sm, 0 1px 2px 0 rgba(0, 0, 0, 0.05));\n  }\n\n  .word-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    gap: var(--spacing-4, 1rem);\n    margin-bottom: var(--spacing-4, 1rem);\n  }\n\n  .word-main {\n    flex: 1;\n  }\n\n  .german-word {\n    font-size: 2rem;\n    font-weight: 700;\n    color: var(--color-text-primary, #111827);\n    margin: 0;\n    line-height: 1.2;\n  }\n\n  .bulgarian-word {\n    font-size: 1.5rem;\n    font-weight: 500;\n    color: var(--color-text-secondary, #6b7280);\n    margin: var(--spacing-2, 0.5rem) 0 0 0;\n  }\n\n  .word-meta {\n    display: flex;\n    flex-direction: column;\n    gap: var(--spacing-2, 0.5rem);\n    align-items: flex-end;\n  }\n\n  .part-of-speech-badge {\n    padding: var(--spacing-1, 0.25rem) var(--spacing-3, 0.75rem);\n    background-color: var(--color-bg-secondary, #f3f4f6);\n    border: 1px solid var(--color-border, #e5e7eb);\n    border-radius: var(--radius-full, 9999px);\n    font-size: 0.75rem;\n    font-weight: 600;\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n    color: var(--color-text-secondary, #6b7280);\n  }\n\n  /* Part of speech specific colors */\n  .part-of-speech-badge[data-pos='noun'] {\n    background-color: #dbeafe;\n    color: #1e40af;\n    border-color: #bfdbfe;\n  }\n\n  .part-of-speech-badge[data-pos='verb'] {\n    background-color: #dcfce7;\n    color: #166534;\n    border-color: #bbf7d0;\n  }\n\n  .part-of-speech-badge[data-pos='adjective'] {\n    background-color: #fef3c7;\n    color: #92400e;\n    border-color: #fde68a;\n  }\n\n  .part-of-speech-badge[data-pos='adverb'] {\n    background-color: #fce7f3;\n    color: #9f1239;\n    border-color: #fbcfe8;\n  }\n\n  .gender-badge {\n    padding: var(--spacing-1, 0.25rem) var(--spacing-2, 0.5rem);\n    background-color: var(--color-bg-secondary, #f9fafb);\n    border: 1px solid var(--color-border, #e5e7eb);\n    border-radius: var(--radius-md, 0.375rem);\n    font-size: 1rem;\n  }\n\n  .gender-badge[data-gender='masculine'] {\n    background-color: #dbeafe;\n    border-color: #bfdbfe;\n  }\n\n  .gender-badge[data-gender='feminine'] {\n    background-color: #fce7f3;\n    border-color: #fbcfe8;\n  }\n\n  .gender-badge[data-gender='neuter'] {\n    background-color: #e0e7ff;\n    border-color: #c7d2fe;\n  }\n\n  .pronunciation {\n    display: flex;\n    align-items: center;\n    gap: var(--spacing-2, 0.5rem);\n    padding: var(--spacing-3, 0.75rem);\n    background-color: var(--color-bg-tertiary, #f9fafb);\n    border-radius: var(--radius-md, 0.375rem);\n    margin-bottom: var(--spacing-4, 1rem);\n  }\n\n  .pronunciation-label {\n    font-size: 0.875rem;\n    font-weight: 600;\n    color: var(--color-text-secondary, #6b7280);\n  }\n\n  .pronunciation-text {\n    font-size: 0.875rem;\n    font-family: 'Courier New', monospace;\n    color: var(--color-text-primary, #111827);\n  }\n\n  .definition {\n    padding-top: var(--spacing-4, 1rem);\n    border-top: 1px solid var(--color-border, #e5e7eb);\n  }\n\n  .definition p {\n    font-size: 1rem;\n    line-height: 1.6;\n    color: var(--color-text-primary, #111827);\n    margin: 0;\n  }\n\n  @media (max-width: 640px) {\n    .word-header {\n      flex-direction: column;\n      align-items: flex-start;\n    }\n\n    .word-meta {\n      flex-direction: row;\n      align-items: center;\n    }\n\n    .german-word {\n      font-size: 1.5rem;\n    }\n\n    .bulgarian-word {\n      font-size: 1.25rem;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import type { VocabularyProgress } from '$lib/types/progress';\n\n  interface Props {\n    progress: VocabularyProgress;\n  }\n\n  let { progress }: Props = $props();\n\n  // Calculate mastery percentage\n  const masteryPercentage = $derived(Math.round(progress.mastery * 100));\n\n  // Format next review date\n  const nextReviewFormatted = $derived.by(() => {\n    if (!progress.nextReview) return 'Not scheduled';\n    \n    const date = new Date(progress.nextReview);\n    const now = new Date();\n    const diffMs = date.getTime() - now.getTime();\n    const diffDays = Math.ceil(diffMs / (1000 * 60 * 60 * 24));\n    \n    if (diffDays < 0) return 'Due now';\n    if (diffDays === 0) return 'Due today';\n    if (diffDays === 1) return 'Due tomorrow';\n    return `Due in ${diffDays} days`;\n  });\n\n  // SVG circle calculations for progress ring\n  const radius = 40;\n  const circumference = 2 * Math.PI * radius;\n  const progressOffset = $derived(\n    circumference - (masteryPercentage / 100) * circumference\n  );\n\n  // Get mastery level color\n  const masteryColor = $derived.by(() => {\n    if (masteryPercentage >= 80) return '#10b981'; // green\n    if (masteryPercentage >= 50) return '#f59e0b'; // orange\n    return '#ef4444'; // red\n  });\n</script>\n\n<div class=\"progress-stats\">\n  <div class=\"stats-header\">\n    <h3>Your Progress</h3>\n  </div>\n\n  <!-- Circular Progress -->\n  <div class=\"circular-progress\">\n    <svg viewBox=\"0 0 100 100\" class=\"progress-ring\">\n      <!-- Background circle -->\n      <circle\n        cx=\"50\"\n        cy=\"50\"\n        r={radius}\n        fill=\"none\"\n        stroke=\"#e5e7eb\"\n        stroke-width=\"8\"\n      />\n      <!-- Progress circle -->\n      <circle\n        cx=\"50\"\n        cy=\"50\"\n        r={radius}\n        fill=\"none\"\n        stroke={masteryColor}\n        stroke-width=\"8\"\n        stroke-dasharray={circumference}\n        stroke-dashoffset={progressOffset}\n        stroke-linecap=\"round\"\n        transform=\"rotate(-90 50 50)\"\n        class=\"progress-circle\"\n      />\n    </svg>\n    <div class=\"progress-text\">\n      <span class=\"percentage\">{masteryPercentage}%</span>\n      <span class=\"label\">Mastery</span>\n    </div>\n  </div>\n\n  <!-- Stats Grid -->\n  <div class=\"stats-grid\">\n    <div class=\"stat-item\">\n      <div class=\"stat-value\">{progress.attempts}</div>\n      <div class=\"stat-label\">Attempts</div>\n    </div>\n    <div class=\"stat-item\">\n      <div class=\"stat-value correct\">{progress.correct}</div>\n      <div class=\"stat-label\">Correct</div>\n    </div>\n    <div class=\"stat-item\">\n      <div class=\"stat-value incorrect\">{progress.attempts - progress.correct}</div>\n      <div class=\"stat-label\">Incorrect</div>\n    </div>\n  </div>\n\n  <!-- Next Review -->\n  <div class=\"next-review\">\n    <span class=\"review-icon\">üìÖ</span>\n    <div class=\"review-info\">\n      <div class=\"review-label\">Next Review</div>\n      <div class=\"review-date\">{nextReviewFormatted}</div>\n    </div>\n  </div>\n\n  <!-- User Stats removed - will add in Phase 2 with full gamification -->\n</div>\n\n<style>\n  .progress-stats {\n    padding: var(--spacing-6, 1.5rem);\n    background-color: var(--color-bg-primary, #ffffff);\n    border: 1px solid var(--color-border, #e5e7eb);\n    border-radius: var(--radius-lg, 0.5rem);\n    box-shadow: var(--shadow-sm, 0 1px 2px 0 rgba(0, 0, 0, 0.05));\n    min-width: 280px;\n  }\n\n  .stats-header h3 {\n    font-size: 1.125rem;\n    font-weight: 600;\n    color: var(--color-text-primary, #111827);\n    margin: 0 0 var(--spacing-4, 1rem) 0;\n  }\n\n  /* Circular Progress */\n  .circular-progress {\n    position: relative;\n    width: 120px;\n    height: 120px;\n    margin: 0 auto var(--spacing-6, 1.5rem) auto;\n  }\n\n  .progress-ring {\n    width: 100%;\n    height: 100%;\n    transform: rotate(0deg);\n  }\n\n  .progress-circle {\n    transition: stroke-dashoffset 0.5s ease-in-out;\n  }\n\n  .progress-text {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    text-align: center;\n  }\n\n  .percentage {\n    display: block;\n    font-size: 1.5rem;\n    font-weight: 700;\n    color: var(--color-text-primary, #111827);\n    line-height: 1;\n  }\n\n  .label {\n    display: block;\n    font-size: 0.75rem;\n    color: var(--color-text-secondary, #6b7280);\n    margin-top: var(--spacing-1, 0.25rem);\n  }\n\n  /* Stats Grid */\n  .stats-grid {\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    gap: var(--spacing-3, 0.75rem);\n    margin-bottom: var(--spacing-4, 1rem);\n    padding-bottom: var(--spacing-4, 1rem);\n    border-bottom: 1px solid var(--color-border, #e5e7eb);\n  }\n\n  .stat-item {\n    text-align: center;\n  }\n\n  .stat-value {\n    font-size: 1.25rem;\n    font-weight: 700;\n    color: var(--color-text-primary, #111827);\n    margin-bottom: var(--spacing-1, 0.25rem);\n  }\n\n  .stat-value.correct {\n    color: #10b981;\n  }\n\n  .stat-value.incorrect {\n    color: #ef4444;\n  }\n\n  .stat-label {\n    font-size: 0.75rem;\n    color: var(--color-text-secondary, #6b7280);\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n  }\n\n  /* Next Review */\n  .next-review {\n    display: flex;\n    align-items: center;\n    gap: var(--spacing-3, 0.75rem);\n    padding: var(--spacing-3, 0.75rem);\n    background-color: var(--color-bg-tertiary, #eff6ff);\n    border-radius: var(--radius-md, 0.375rem);\n    margin-bottom: var(--spacing-4, 1rem);\n  }\n\n  .review-icon {\n    font-size: 1.5rem;\n  }\n\n  .review-info {\n    flex: 1;\n  }\n\n  .review-label {\n    font-size: 0.75rem;\n    font-weight: 600;\n    color: var(--color-text-secondary, #6b7280);\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n  }\n\n  .review-date {\n    font-size: 0.875rem;\n    font-weight: 500;\n    color: var(--color-text-primary, #111827);\n    margin-top: var(--spacing-1, 0.25rem);\n  }\n\n  /* User Stats */\n  .user-stats {\n    display: flex;\n    flex-direction: column;\n    gap: var(--spacing-2, 0.5rem);\n  }\n\n  .stat-row {\n    display: flex;\n    align-items: center;\n    gap: var(--spacing-2, 0.5rem);\n    padding: var(--spacing-2, 0.5rem);\n    background-color: var(--color-bg-secondary, #f9fafb);\n    border-radius: var(--radius-md, 0.375rem);\n  }\n\n  .stat-icon {\n    font-size: 1rem;\n  }\n\n  .stat-text {\n    font-size: 0.875rem;\n    font-weight: 500;\n    color: var(--color-text-primary, #111827);\n  }\n\n  @media (max-width: 640px) {\n    .progress-stats {\n      min-width: auto;\n    }\n\n    .stats-grid {\n      grid-template-columns: 1fr;\n    }\n\n    .stat-item {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: var(--spacing-2, 0.5rem);\n      background-color: var(--color-bg-secondary, #f9fafb);\n      border-radius: var(--radius-md, 0.375rem);\n    }\n\n    .stat-label {\n      font-size: 0.875rem;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import type { Example } from '$lib/schemas/unified-vocabulary';\n\n  interface Props {\n    example: Example;\n  }\n\n  let { example }: Props = $props();\n</script>\n\n<div class=\"example-card\">\n  <div class=\"example-text german\">\n    <span class=\"language-tag\">DE</span>\n    <p>{example.german}</p>\n  </div>\n  \n  <div class=\"example-divider\">\n    <span class=\"arrow\">‚Üí</span>\n  </div>\n  \n  <div class=\"example-text bulgarian\">\n    <span class=\"language-tag\">BG</span>\n    <p>{example.bulgarian}</p>\n  </div>\n\n  {#if example.context}\n    <div class=\"example-context\">\n      <span class=\"context-icon\">üí°</span>\n      <p>{example.context}</p>\n    </div>\n  {/if}\n\n  <!-- Future: Audio button -->\n  <!-- <button class=\"audio-button\" aria-label=\"Play example\">\n    <span class=\"audio-icon\">üîä</span>\n  </button> -->\n</div>\n\n<style>\n  .example-card {\n    padding: var(--spacing-4, 1rem);\n    background-color: var(--color-bg-primary, #ffffff);\n    border: 1px solid var(--color-border, #e5e7eb);\n    border-radius: var(--radius-md, 0.375rem);\n    transition: box-shadow 0.2s ease, border-color 0.2s ease;\n  }\n\n  .example-card:hover {\n    box-shadow: var(--shadow-md, 0 4px 6px -1px rgba(0, 0, 0, 0.1));\n    border-color: var(--color-primary-light, #bfdbfe);\n  }\n\n  .example-text {\n    display: flex;\n    align-items: flex-start;\n    gap: var(--spacing-3, 0.75rem);\n    margin-bottom: var(--spacing-3, 0.75rem);\n  }\n\n  .language-tag {\n    flex-shrink: 0;\n    padding: var(--spacing-1, 0.25rem) var(--spacing-2, 0.5rem);\n    font-size: 0.625rem;\n    font-weight: 700;\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n    border-radius: var(--radius-sm, 0.25rem);\n    background-color: var(--color-bg-secondary, #f3f4f6);\n    color: var(--color-text-secondary, #6b7280);\n  }\n\n  .example-text.german .language-tag {\n    background-color: #dbeafe;\n    color: #1e40af;\n  }\n\n  .example-text.bulgarian .language-tag {\n    background-color: #fef3c7;\n    color: #92400e;\n  }\n\n  .example-text p {\n    flex: 1;\n    margin: 0;\n    font-size: 1rem;\n    line-height: 1.6;\n    color: var(--color-text-primary, #111827);\n  }\n\n  .example-divider {\n    display: flex;\n    align-items: center;\n    margin: var(--spacing-2, 0.5rem) 0;\n  }\n\n  .arrow {\n    font-size: 1.25rem;\n    color: var(--color-text-secondary, #6b7280);\n    margin-left: var(--spacing-8, 2rem);\n  }\n\n  .example-context {\n    display: flex;\n    align-items: flex-start;\n    gap: var(--spacing-2, 0.5rem);\n    padding: var(--spacing-3, 0.75rem);\n    margin-top: var(--spacing-3, 0.75rem);\n    background-color: var(--color-bg-tertiary, #f0fdf4);\n    border-left: 3px solid #10b981;\n    border-radius: var(--radius-sm, 0.25rem);\n  }\n\n  .context-icon {\n    font-size: 1rem;\n    flex-shrink: 0;\n  }\n\n  .example-context p {\n    flex: 1;\n    margin: 0;\n    font-size: 0.875rem;\n    line-height: 1.5;\n    color: var(--color-text-secondary, #6b7280);\n    font-style: italic;\n  }\n\n  @media (max-width: 640px) {\n    .example-text {\n      flex-direction: column;\n      gap: var(--spacing-2, 0.5rem);\n    }\n\n    .arrow {\n      margin-left: 0;\n    }\n  }\n</style>\n","/**\n * Database Mutation Operations\n * Write operations for updating IndexedDB data\n */\n\nimport { getDB } from './idb';\nimport type { VocabularyProgress, ExerciseProgress, UserProgress } from '$lib/types/progress';\nimport type { LessonProgress } from '$lib/types/lesson';\nimport type { LearningPathProgress } from '$lib/types/learning-path';\n\n/**\n * Save or update vocabulary progress\n */\nexport async function saveVocabularyProgress(progress: VocabularyProgress): Promise<void> {\n\tconst db = await getDB();\n\tawait db.put('vocabularyProgress', progress);\n}\n\n/**\n * Record a practice attempt for vocabulary\n */\nexport async function recordVocabularyAttempt(\n\titemId: string,\n\tcorrect: boolean\n): Promise<VocabularyProgress> {\n\tconst db = await getDB();\n\tlet progress = await db.get('vocabularyProgress', itemId);\n\n\tif (!progress) {\n\t\t// Initialize new progress\n\t\tprogress = {\n\t\t\titemId,\n\t\t\tattempts: 0,\n\t\t\tcorrect: 0,\n\t\t\tmastery: 0,\n\t\t\tlastAttempt: new Date().toISOString(),\n\t\t\tinterval: 1,\n\t\t\teaseFactor: 2.5,\n\t\t\tfirstSeen: new Date().toISOString(),\n\t\t\tfavorited: false\n\t\t};\n\t}\n\n\t// Update progress\n\tprogress.attempts++;\n\tif (correct) {\n\t\tprogress.correct++;\n\t}\n\tprogress.mastery = progress.correct / progress.attempts;\n\tprogress.lastAttempt = new Date().toISOString();\n\n\t// Calculate next review (simplified SM-2 algorithm)\n\tif (correct) {\n\t\tprogress.interval = Math.round(progress.interval * progress.easeFactor);\n\t\tprogress.easeFactor = Math.max(1.3, progress.easeFactor + 0.1);\n\t} else {\n\t\tprogress.interval = 1;\n\t\tprogress.easeFactor = Math.max(1.3, progress.easeFactor - 0.2);\n\t}\n\n\tconst nextReview = new Date();\n\tnextReview.setDate(nextReview.getDate() + progress.interval);\n\tprogress.nextReview = nextReview.toISOString();\n\n\tawait db.put('vocabularyProgress', progress);\n\treturn progress;\n}\n\n/**\n * Save or update lesson progress\n */\nexport async function saveLessonProgress(progress: LessonProgress): Promise<void> {\n\tconst db = await getDB();\n\tawait db.put('lessonProgress', progress as any);\n}\n\n/**\n * Mark lesson as completed\n */\nexport async function completLesson(lessonId: string): Promise<void> {\n\tconst db = await getDB();\n\tlet progress: any = await db.get('lessonProgress', lessonId);\n\n\tif (!progress) {\n\t\tprogress = {\n\t\t\tlessonId,\n\t\t\tcompleted: false,\n\t\t\tprogress: 0,\n\t\t\tcompletedVocabulary: [],\n\t\t\tcompletedExercises: [],\n\t\t\ttimeSpent: 0\n\t\t};\n\t}\n\n\tprogress.completed = true;\n\tprogress.completedAt = new Date().toISOString();\n\tprogress.progress = 100;\n\n\tawait db.put('lessonProgress', progress);\n}\n\n/**\n * Save or update learning path progress\n */\nexport async function saveLearningPathProgress(progress: LearningPathProgress): Promise<void> {\n\tconst db = await getDB();\n\tawait db.put('learningPathProgress', progress);\n}\n\n/**\n * Save or update exercise progress\n */\nexport async function saveExerciseProgress(progress: ExerciseProgress): Promise<void> {\n\tconst db = await getDB();\n\tawait db.put('exerciseProgress', progress as any);\n}\n\n/**\n * Mark exercise as completed\n */\nexport async function completeExercise(\n\texerciseId: string,\n\tlessonId: string,\n\tcorrect: boolean,\n\ttimeSpent: number\n): Promise<void> {\n\tconst db = await getDB();\n\tlet progress = await db.get('exerciseProgress', exerciseId);\n\n\tlet ex: any = progress;\n\tif (!ex) {\n\t\tex = {\n\t\t\texerciseId,\n\t\t\tlessonId,\n\t\t\tcompleted: false,\n\t\t\tattempts: 0,\n\t\t\tfirstTryCorrect: false,\n\t\t\tmistakes: [],\n\t\t\ttimeSpent: 0\n\t\t};\n\t}\n\n\tex.attempts++;\n\tex.completed = correct;\n\tif (correct && ex.attempts === 1) {\n\t\tex.firstTryCorrect = true;\n\t}\n\tif (correct) {\n\t\tex.completedAt = new Date().toISOString();\n\t}\n\tex.timeSpent += timeSpent;\n\n\tawait db.put('exerciseProgress', ex);\n}\n\n/**\n * Save user progress (global stats)\n */\nexport async function saveUserProgress(progress: UserProgress): Promise<void> {\n\tconst db = await getDB();\n\tprogress.lastUpdated = new Date().toISOString();\n\tawait db.put('userProgress', progress);\n}\n\n/**\n * Update user streak\n */\nexport async function updateStreak(userId: string = 'local-user'): Promise<void> {\n\tconst db = await getDB();\n\tconst progress = await db.get('userProgress', userId);\n\n\tif (!progress) return;\n\n\tconst now = new Date();\n\tconst lastActive = new Date(progress.streak.lastActive);\n\tconst daysSinceActive = Math.floor(\n\t\t(now.getTime() - lastActive.getTime()) / (1000 * 60 * 60 * 24)\n\t);\n\n\tif (daysSinceActive === 0) {\n\t\t// Same day, no change\n\t\treturn;\n\t} else if (daysSinceActive === 1) {\n\t\t// Continue streak\n\t\tprogress.streak.current++;\n\t\tprogress.streak.longest = Math.max(progress.streak.current, progress.streak.longest);\n\t} else {\n\t\t// Streak broken\n\t\tprogress.streak.current = 1;\n\t}\n\n\tprogress.streak.lastActive = now.toISOString();\n\tawait saveUserProgress(progress);\n}\n\n/**\n * Add XP to user\n */\nexport async function addXP(xp: number, userId: string = 'local-user'): Promise<void> {\n\tconst db = await getDB();\n\tconst progress = await db.get('userProgress', userId);\n\n\tif (!progress) return;\n\n\tprogress.stats.xp += xp;\n\n\t// Level up calculation (100 XP per level)\n\tconst newLevel = Math.floor(progress.stats.xp / 100) + 1;\n\tif (newLevel > progress.stats.level) {\n\t\tprogress.stats.level = newLevel;\n\t\tconsole.log(`[Gamification] Level up! Now level ${newLevel}`);\n\t}\n\n\tawait saveUserProgress(progress);\n}\n\n/**\n * Save vocabulary item edit\n */\nexport async function saveVocabularyEdit(\n\titemId: string,\n\tfield: string,\n\tnewValue: string,\n\tuserId: string = 'local-user'\n): Promise<void> {\n\tconst db = await getDB();\n\n\t// Get current vocabulary item\n\tconst item = await db.get('vocabulary', itemId);\n\tif (!item) return;\n\n\t// Save edit history\n\tconst edit = {\n\t\titemId,\n\t\tfield,\n\t\toldValue: (item as any)[field] || '',\n\t\tnewValue,\n\t\ttimestamp: new Date().toISOString(),\n\t\tuserId\n\t};\n\tawait db.put('editHistory', edit);\n\n\t// Update vocabulary item\n\tif (!item.userEdits) {\n\t\titem.userEdits = {};\n\t}\n\t(item.userEdits as any)[field] = newValue;\n\titem.userEdits.editedAt = new Date().toISOString();\n\n\tawait db.put('vocabulary', item);\n}\n\n/**\n * Toggle favorite status for vocabulary item\n */\nexport async function toggleFavorite(itemId: string): Promise<boolean> {\n\tconst db = await getDB();\n\tlet progress = await db.get('vocabularyProgress', itemId);\n\n\tif (!progress) {\n\t\tprogress = {\n\t\t\titemId,\n\t\t\tattempts: 0,\n\t\t\tcorrect: 0,\n\t\t\tmastery: 0,\n\t\t\tinterval: 1,\n\t\t\teaseFactor: 2.5,\n\t\t\tfirstSeen: new Date().toISOString(),\n\t\t\tfavorited: false\n\t\t};\n\t}\n\n\tprogress.favorited = !progress.favorited;\n\tawait db.put('vocabularyProgress', progress);\n\n\treturn progress.favorited;\n}\n\n/**\n * Reset all user progress (for testing)\n */\nexport async function resetAllProgress(userId: string = 'local-user'): Promise<void> {\n\tconst db = await getDB();\n\n\t// Clear all progress stores\n\tawait db.clear('vocabularyProgress');\n\tawait db.clear('lessonProgress');\n\tawait db.clear('learningPathProgress');\n\tawait db.clear('exerciseProgress');\n\n\t// Reset user progress\n\tconst defaultProgress: UserProgress = {\n\t\tuserId,\n\t\tvocabulary: {},\n\t\tpaths: {},\n\t\tstreak: {\n\t\t\tcurrent: 0,\n\t\t\tlongest: 0,\n\t\t\tlastActive: new Date().toISOString()\n\t\t},\n\t\tstats: {\n\t\t\txp: 0,\n\t\t\tlevel: 1,\n\t\t\twordsLearned: 0,\n\t\t\tlessonsCompleted: 0,\n\t\t\texercisesCompleted: 0,\n\t\t\ttotalTimeMinutes: 0,\n\t\t\tjoinDate: new Date().toISOString()\n\t\t},\n\t\tpreferences: {\n\t\t\tlanguageMode: 'DE_BG',\n\t\t\tuiLanguage: 'de',\n\t\t\ttheme: 'auto',\n\t\t\tnotificationsEnabled: true,\n\t\t\tdailyGoal: 15\n\t\t},\n\t\tlastUpdated: new Date().toISOString()\n\t};\n\n\tawait db.put('userProgress', defaultProgress);\n\tconsole.log('[IndexedDB] All progress reset');\n}\n","<script lang=\"ts\">\n  import { onMount } from 'svelte';\n  import LearningDashboard from '$lib/components/learning/LearningDashboard.svelte';\n  import type { VocabularyItem, PartOfSpeech } from '$lib/types/vocabulary';\n  import { getDB } from '$lib/db/idb';\n  import { recordVocabularyAttempt } from '$lib/db/mutations';\n\n  // Test vocabulary item\n  const testItem: VocabularyItem = {\n    id: 'acht',\n    type: 'word',\n    german: 'acht',\n    bulgarian: '–æ—Å–µ–º',\n    partOfSpeech: 'number' as PartOfSpeech,\n    difficulty: 2,\n    cefrLevel: 'A1',\n    categories: ['numbers'],\n    examples: [\n      {\n        german: 'Ich bin acht Jahre alt.',\n        bulgarian: '–ê–∑ —Å—ä–º –Ω–∞ –æ—Å–µ–º –≥–æ–¥–∏–Ω–∏.',\n        context: 'Stating age',\n        source: 'generated' as const\n      },\n      {\n        german: 'Es ist acht Uhr.',\n        bulgarian: '–ß–∞—Å—ä—Ç –µ –æ—Å–µ–º.',\n        context: 'Telling time',\n        source: 'generated' as const\n      }\n    ],\n    transliteration: {\n      german: 'axt'\n    },\n    synonyms: [],\n    culturalNotes: 'The number eight in German is used for counting, telling time, and ages.',\n    isCommon: true,\n    isVerified: true,\n    learningPhase: 0,\n    createdAt: new Date(),\n    updatedAt: new Date(),\n    version: 1\n  };\n\n  let initialized = $state(false);\n  let error = $state<string | undefined>();\n\n  onMount(async () => {\n    try {\n      // Initialize database\n      await getDB();\n      \n      // Add some test progress data\n      await recordVocabularyAttempt('acht', true);\n      await recordVocabularyAttempt('acht', true);\n      await recordVocabularyAttempt('acht', false);\n      await recordVocabularyAttempt('acht', true);\n      \n      initialized = true;\n    } catch (e) {\n      error = e instanceof Error ? e.message : 'Failed to initialize test';\n      console.error('Test initialization error:', e);\n    }\n  });\n</script>\n\n<svelte:head>\n  <title>Learning Dashboard Test - Phase 1 Day 2-3</title>\n</svelte:head>\n\n<div class=\"test-page\">\n  <header class=\"test-header\">\n    <h1>üß™ Learning Dashboard Component Test</h1>\n    <p class=\"test-info\">\n      Testing Phase 1 Day 2-3 components with live IndexedDB data\n    </p>\n  </header>\n\n  <main class=\"test-content\">\n    {#if error}\n      <div class=\"test-error\">\n        <h2>‚ùå Initialization Error</h2>\n        <p>{error}</p>\n      </div>\n    {:else if !initialized}\n      <div class=\"test-loading\">\n        <div class=\"spinner\"></div>\n        <p>Initializing test environment...</p>\n      </div>\n    {:else}\n      <div class=\"test-success\">\n        <h2>‚úÖ Test Environment Ready</h2>\n        <p>Database initialized with test data for word: <strong>acht (8)</strong></p>\n        <ul>\n          <li>4 practice attempts added (3 correct, 1 incorrect)</li>\n          <li>Progress tracking enabled</li>\n          <li>All 5 components loaded</li>\n        </ul>\n      </div>\n\n      <div class=\"component-showcase\">\n        <h2>Learning Dashboard Component</h2>\n        <LearningDashboard item={testItem} />\n      </div>\n\n      <div class=\"test-actions\">\n        <h3>Test Actions</h3>\n        <div class=\"action-buttons\">\n          <button\n            class=\"test-button\"\n            onclick={async () => {\n              await recordVocabularyAttempt('acht', true);\n              window.location.reload();\n            }}\n          >\n            ‚úÖ Add Correct Answer\n          </button>\n          <button\n            class=\"test-button\"\n            onclick={async () => {\n              await recordVocabularyAttempt('acht', false);\n              window.location.reload();\n            }}\n          >\n            ‚ùå Add Incorrect Answer\n          </button>\n          <button\n            class=\"test-button secondary\"\n            onclick={() => window.location.reload()}\n          >\n            üîÑ Refresh Page\n          </button>\n        </div>\n        <p class=\"test-note\">\n          Click buttons to update progress and reload page to see changes\n        </p>\n      </div>\n\n      <div class=\"test-checklist\">\n        <h3>Manual Test Checklist</h3>\n        <ul>\n          <li>\n            <label>\n              <input type=\"checkbox\" />\n              WordCard displays correctly (German, Bulgarian, part of speech)\n            </label>\n          </li>\n          <li>\n            <label>\n              <input type=\"checkbox\" />\n              ProgressStats shows circular progress (should be ~75%)\n            </label>\n          </li>\n          <li>\n            <label>\n              <input type=\"checkbox\" />\n              Tab navigation works (Overview, Exercises, Grammar, Edit)\n            </label>\n          </li>\n          <li>\n            <label>\n              <input type=\"checkbox\" />\n              Example sentences display in ExampleCard components\n            </label>\n          </li>\n          <li>\n            <label>\n              <input type=\"checkbox\" />\n              GrammarInfo shows part of speech information\n            </label>\n          </li>\n          <li>\n            <label>\n              <input type=\"checkbox\" />\n              No console errors in DevTools\n            </label>\n          </li>\n          <li>\n            <label>\n              <input type=\"checkbox\" />\n              Responsive on mobile (test with DevTools)\n            </label>\n          </li>\n        </ul>\n      </div>\n    {/if}\n  </main>\n</div>\n\n<style>\n  .test-page {\n    min-height: 100vh;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    padding: var(--spacing-6, 1.5rem);\n  }\n\n  .test-header {\n    text-align: center;\n    color: white;\n    margin-bottom: var(--spacing-8, 2rem);\n  }\n\n  .test-header h1 {\n    font-size: 2.5rem;\n    font-weight: 700;\n    margin: 0 0 var(--spacing-2, 0.5rem) 0;\n  }\n\n  .test-info {\n    font-size: 1.125rem;\n    opacity: 0.9;\n  }\n\n  .test-content {\n    max-width: 1400px;\n    margin: 0 auto;\n  }\n\n  .test-loading,\n  .test-error,\n  .test-success {\n    padding: var(--spacing-6, 1.5rem);\n    background-color: white;\n    border-radius: var(--radius-lg, 0.5rem);\n    margin-bottom: var(--spacing-6, 1.5rem);\n    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);\n  }\n\n  .test-loading {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: var(--spacing-4, 1rem);\n  }\n\n  .spinner {\n    width: 50px;\n    height: 50px;\n    border: 5px solid #f3f4f6;\n    border-top-color: #667eea;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n  }\n\n  @keyframes spin {\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  .test-error h2 {\n    color: #dc2626;\n  }\n\n  .test-success h2 {\n    color: #10b981;\n    margin-bottom: var(--spacing-3, 0.75rem);\n  }\n\n  .test-success ul {\n    margin: var(--spacing-3, 0.75rem) 0 0 var(--spacing-6, 1.5rem);\n  }\n\n  .test-success li {\n    margin-bottom: var(--spacing-2, 0.5rem);\n  }\n\n  .component-showcase {\n    background-color: white;\n    border-radius: var(--radius-lg, 0.5rem);\n    padding: var(--spacing-6, 1.5rem);\n    margin-bottom: var(--spacing-6, 1.5rem);\n    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);\n  }\n\n  .component-showcase h2 {\n    margin: 0 0 var(--spacing-6, 1.5rem) 0;\n    font-size: 1.5rem;\n    font-weight: 600;\n  }\n\n  .test-actions {\n    background-color: white;\n    border-radius: var(--radius-lg, 0.5rem);\n    padding: var(--spacing-6, 1.5rem);\n    margin-bottom: var(--spacing-6, 1.5rem);\n    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);\n  }\n\n  .test-actions h3 {\n    margin: 0 0 var(--spacing-4, 1rem) 0;\n    font-size: 1.25rem;\n    font-weight: 600;\n  }\n\n  .action-buttons {\n    display: flex;\n    gap: var(--spacing-3, 0.75rem);\n    margin-bottom: var(--spacing-3, 0.75rem);\n    flex-wrap: wrap;\n  }\n\n  .test-button {\n    padding: var(--spacing-3, 0.75rem) var(--spacing-4, 1rem);\n    background-color: #667eea;\n    color: white;\n    border: none;\n    border-radius: var(--radius-md, 0.375rem);\n    font-size: 1rem;\n    font-weight: 600;\n    cursor: pointer;\n    transition: all 0.2s ease;\n  }\n\n  .test-button:hover {\n    background-color: #5a67d8;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  }\n\n  .test-button.secondary {\n    background-color: #6b7280;\n  }\n\n  .test-button.secondary:hover {\n    background-color: #4b5563;\n  }\n\n  .test-note {\n    font-size: 0.875rem;\n    color: #6b7280;\n    font-style: italic;\n  }\n\n  .test-checklist {\n    background-color: white;\n    border-radius: var(--radius-lg, 0.5rem);\n    padding: var(--spacing-6, 1.5rem);\n    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);\n  }\n\n  .test-checklist h3 {\n    margin: 0 0 var(--spacing-4, 1rem) 0;\n    font-size: 1.25rem;\n    font-weight: 600;\n  }\n\n  .test-checklist ul {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n  }\n\n  .test-checklist li {\n    margin-bottom: var(--spacing-3, 0.75rem);\n  }\n\n  .test-checklist label {\n    display: flex;\n    align-items: center;\n    gap: var(--spacing-3, 0.75rem);\n    cursor: pointer;\n    padding: var(--spacing-2, 0.5rem);\n    border-radius: var(--radius-md, 0.375rem);\n    transition: background-color 0.2s ease;\n  }\n\n  .test-checklist label:hover {\n    background-color: #f9fafb;\n  }\n\n  .test-checklist input[type='checkbox'] {\n    width: 20px;\n    height: 20px;\n    cursor: pointer;\n  }\n</style>\n"],"names":["genderInfo","$.derived","$$props","item","partOfSpeech","grammar","gender","masculine","label","article","description","feminine","neuter","hasDeclension","declension","div","root","section","div_1","p","section_1","root_1","div_2","div_3","span","span_1","p_1","$.set_text","text_1","$.get","text_2","text_3","$$render","consequent","section_2","root_2","div_4","$.each","node_2","Object","entries","$.index","$$anchor","$$item","caseValue","$$array","div_5","root_3","div_6","div_7","div_8","singular","plural","consequent_1","section_3","root_4","consequent_2","section_4","root_5","div_9","p_2","$.template_effect","text_7","notes","linguistic","consequent_3","progress","$.state","loading","error","activeTab","selectTab","tab","$.set","onMount","async","vocabProgress","itemId","db","getDB","get","getVocabularyProgress","id","e","Error","message","console","partOfSpeechLabels","noun","verb","adjective","adverb","preposition","conjunction","pronoun","interjection","particle","number","phrase","partOfSpeechLabel","genderDisplay","h2","span_2","text_4","transliteration","german","text_5","definitions","length","bulgarian","$.set_attribute","WordCard","node","masteryPercentage","Math","round","mastery","nextReviewFormatted","nextReview","date","Date","now","diffMs","getTime","diffDays","ceil","circumference","PI","progressOffset","masteryColor","svg","circle","$.child","circle_1","$.sibling","div_10","div_11","div_12","attempts","correct","ProgressStats","button","__click","button_1","button_2","button_3","root_6","root_7","examples","example","context","ExampleCard","root_9","alternate","root_10","culturalNotes","consequent_4","root_11","synonyms","synonym","root_12","consequent_5","consequent_6","root_13","consequent_7","GrammarInfo","consequent_8","root_15","consequent_9","alternate_1","alternate_2","classes","active","classes_1","classes_2","classes_3","recordVocabularyAttempt","lastAttempt","toISOString","interval","easeFactor","firstSeen","favorited","max","setDate","getDate","put","testItem","type","difficulty","cefrLevel","categories","source","isCommon","isVerified","learningPhase","createdAt","updatedAt","version","initialized","$.head","title","main","$.first_child","fragment_1","LearningDashboard","window","location","reload"],"mappings":"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"}