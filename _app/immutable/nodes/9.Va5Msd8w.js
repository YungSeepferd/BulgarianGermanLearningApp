import{d as s,f as e,a as t,c as a,s as n}from"../chunks/Df5ltUoG.js";import{o as l}from"../chunks/BVLhrf_7.js";import{W as r,_ as o,X as d,Y as i,$ as c,a0 as u,a5 as v,a2 as p,v as h,a6 as k,Z as m,a3 as g,ad as f}from"../chunks/BkkwGZv8.js";import{i as b}from"../chunks/BCvKA9Gv.js";import{g as j}from"../chunks/Dp09BJYw.js";import{b as y}from"../chunks/CPptHiaW.js";import{L,P as _}from"../chunks/P_ZOSxVQ.js";import{g as I,b as w,a as x,m as P}from"../chunks/DbbWWgvA.js";const S=Object.freeze(Object.defineProperty({__proto__:null,load:async({params:s})=>({pathId:s.path})},Symbol.toStringTag,{value:"Module"}));var $=e('<div class="state svelte-1nusdek">Loading path…</div>'),O=e('<div class="state error svelte-1nusdek"> </div>'),B=e('<div class="state svelte-1nusdek">Path not found.</div>'),M=e('<p class="subtitle svelte-1nusdek"> </p>'),X=e('<p class="description svelte-1nusdek"> </p>'),z=e('<div class="actions svelte-1nusdek"><button class="action-btn svelte-1nusdek">Mark next lesson complete</button> <p class="hint svelte-1nusdek">Updates progress and persists to IndexedDB.</p></div>'),A=e('<section class="panel svelte-1nusdek"><!></section>'),D=e('<div class="header svelte-1nusdek"><div><p class="eyebrow svelte-1nusdek">Learning Path</p> <h1 class="svelte-1nusdek"> </h1> <!> <!></div> <!></div> <!> <section class="panel svelte-1nusdek"><!></section>',1),E=e('<div class="page svelte-1nusdek"><div class="toolbar svelte-1nusdek"><button class="link svelte-1nusdek">← Back to all paths</button></div> <!></div>');function F(s,e){r(e,!0);let S=o(!0),F=o(null),T=o(null),U=o(d([])),V=o(null);l(async()=>{try{const s=await I();u(T,s.find(s=>s.id===e.data.pathId)??null,!0),u(U,await w(e.data.pathId),!0),u(V,await x(e.data.pathId),!0)}catch(s){u(F,s.message??"Failed to load path",!0)}finally{u(S,!1)}});const W=s=>{j(`${y}/learn/paths/${e.data.pathId}/${s}`)};async function Y(){if(!h(T)||0===h(U).length)return;const s=h(U).find(s=>!h(V)?.completedLessons.includes(s.id))??h(U)[h(U).length-1];if(!s)return;const t=await P(e.data.pathId,s.id);u(V,t,!0)}var Z=E(),q=i(Z);i(q).__click=()=>j(`${y}/learn/paths`),v(q);var C=p(q,2),G=s=>{var e=$();t(s,e)},H=s=>{var e=a(),l=k(e),r=s=>{var e=O(),a=i(e,!0);v(e),m(()=>n(a,h(F))),t(s,e)},o=s=>{var e=a(),l=k(e),r=s=>{var e=B();t(s,e)},o=s=>{var e=D(),a=k(e),l=i(a),r=p(i(l),2),o=i(r,!0);v(r);var d=p(r,2),c=s=>{var e=M(),a=i(e,!0);v(e),m(()=>n(a,h(T).subtitle)),t(s,e)};b(d,s=>{h(T).subtitle&&s(c)});var u=p(d,2),j=s=>{var e=X(),a=i(e,!0);v(e),m(()=>n(a,h(T).description)),t(s,e)};b(u,s=>{h(T).description&&s(j)}),v(l);var y=p(l,2),I=s=>{var e=z();i(e).__click=Y,f(2),v(e),t(s,e)};b(y,s=>{h(V)&&s(I)}),v(a);var w=p(a,2),x=s=>{var e=A(),a=i(e);{let s=g(()=>h(T).lessons?.length??h(U).length),e=g(()=>h(V).totalXP??0),t=g(()=>h(V).timeSpent??h(V).completedLessons.length*(h(T).lessons?.[0]?.duration??15));_(a,{get completed(){return h(V).completedLessons.length},get total(){return h(s)},get xpEarned(){return h(e)},get timeSpent(){return h(t)}})}v(e),t(s,e)};b(w,s=>{h(V)&&s(x)});var P=p(w,2),S=i(P);{let s=g(()=>h(V)?.currentLesson);L(S,{get lessons(){return h(U)},get currentLessonId(){return h(s)},onLessonSelect:W})}v(P),m(()=>n(o,h(T).title)),t(s,e)};b(l,s=>{h(T)?s(o,!1):s(r)},!0),t(s,e)};b(l,s=>{h(F)?s(r):s(o,!1)},!0),t(s,e)};b(C,s=>{h(S)?s(G):s(H,!1)}),v(Z),t(s,Z),c()}s(["click"]);export{F as component,S as universal};
//# sourceMappingURL=9.Va5Msd8w.js.map
