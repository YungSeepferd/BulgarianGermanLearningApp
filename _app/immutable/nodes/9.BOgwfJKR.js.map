{"version":3,"file":"9.BOgwfJKR.js","sources":["../../../../../../src/routes/vocabulary/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { onMount } from 'svelte';\n  import { t } from '$lib/services/localization';\n  import { vocabularyDb } from '$lib/data/db.svelte';\n  import { appState } from '$lib/state/app-state';\n  import type { VocabularyItem } from '$lib/types/vocabulary';\n  import type { VocabularyCategory } from '$lib/schemas/vocabulary';\n  import { PRACTICE_ICONS } from '$lib/constants/icons';\n  import ActionButton from '$lib/components/ui/ActionButton.svelte';\n  import VocabularyCard from '$lib/components/ui/VocabularyCard.svelte';\n  import { goto } from '$app/navigation';\n  import { base } from '$app/paths';\n\n  type ActiveFilter = {\n    key: string;\n    label: string;\n    onClear: () => void;\n  };\n\n  // State management with Svelte 5 Runes\n  let vocabularyItems = $state<VocabularyItem[]>([]);\n  let searchTerm = $state('');\n  let loading = $state(true);\n  let error = $state<string | null>(null);\n  let selectedCategory = $state<VocabularyCategory | 'all'>('all');\n  let selectedDifficulty = $state<string | null>(null);\n  let selectedPartOfSpeech = $state<string | null>(null);\n  let selectedLearningPhase = $state<number | null>(null);\n  let currentPage = $state(0);\n  const ITEMS_PER_PAGE = 750; // Load all items at once\n  let selectedItems = $state(new Set<string>());\n  let filteredCount = $state(0);\n  let totalCount = $state(0);\n\n  const ui = $derived(appState.languageMode === 'DE_BG'\n    ? {\n        title: 'Vokabular',\n        introTitle: 'Wortschatz sicher aufbauen',\n        introLede: 'Filtern nach Kategorie, Schwierigkeit oder Wortart und direkt mit den ausgew√§hlten W√∂rtern √ºben.',\n        searchPlaceholder: t('search.search_placeholder'),\n        searchAria: t('search.search_vocabulary'),\n        category: 'Kategorie',\n        difficulty: 'Schwierigkeit',\n        pos: 'Wortart',\n        learningPhase: 'Lernphase',\n        reset: 'Filter zur√ºcksetzen',\n        practiceSelected: (n: number) => `Auswahl √ºben (${n})`,\n        loading: 'Vokabular wird geladen...',\n        error: 'Fehler beim Laden. Bitte erneut versuchen.',\n        emptyTitle: 'Keine Eintr√§ge gefunden',\n        emptyHint: 'Passe Suche oder Filter an.',\n        loadMore: 'Mehr laden'\n      }\n    : {\n        title: '–†–µ—á–Ω–∏–∫',\n        introTitle: '–ù–∞–¥–≥—Ä–∞–∂–¥–∞–π —É–≤–µ—Ä–µ–Ω–æ, –¥—É–º–∞ –ø–æ –¥—É–º–∞',\n        introLede: '–§–∏–ª—Ç—Ä–∏—Ä–∞–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è, —Ç—Ä—É–¥–Ω–æ—Å—Ç –∏–ª–∏ —á–∞—Å—Ç –Ω–∞ —Ä–µ—á—Ç–∞ –∏ –∑–∞–ø–æ—á–Ω–∏ –ø—Ä–∞–∫—Ç–∏–∫–∞ —Å –∏–∑–±—Ä–∞–Ω–∏—Ç–µ –¥—É–º–∏.',\n        searchPlaceholder: t('search.search_placeholder'),\n        searchAria: t('search.search_vocabulary'),\n        category: '–ö–∞—Ç–µ–≥–æ—Ä–∏—è',\n        difficulty: '–¢—Ä—É–¥–Ω–æ—Å—Ç',\n        pos: '–ß–∞—Å—Ç –Ω–∞ —Ä–µ—á—Ç–∞',\n        learningPhase: '–ï—Ç–∞–ø –Ω–∞ —É—á–µ–Ω–µ',\n        reset: '–ù—É–ª–∏—Ä–∞–π —Ñ–∏–ª—Ç—Ä–∏—Ç–µ',\n        practiceSelected: (n: number) => `–£–ø—Ä–∞–∂–Ω—è–≤–∞–π –∏–∑–±—Ä–∞–Ω–∏—Ç–µ (${n})`,\n        loading: '–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Ä–µ—á–Ω–∏–∫–∞...',\n        error: '–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ. –û–ø–∏—Ç–∞–π—Ç–µ –æ—Ç–Ω–æ–≤–æ.',\n        emptyTitle: '–ù—è–º–∞ –Ω–∞–º–µ—Ä–µ–Ω–∏ –∑–∞–ø–∏—Å–∏',\n        emptyHint: '–ü—Ä–æ–º–µ–Ω–µ—Ç–µ —Ç—ä—Ä—Å–µ–Ω–µ—Ç–æ –∏–ª–∏ —Ñ–∏–ª—Ç—Ä–∏—Ç–µ.',\n        loadMore: '–ó–∞—Ä–µ–¥–∏ –æ—â–µ'\n      });\n\n  const countLabel = $derived(appState.languageMode === 'DE_BG'\n    ? `${filteredCount} von ${totalCount} Eintr√§gen`\n    : `${filteredCount} –æ—Ç ${totalCount} –∑–∞–ø–∏—Å–∞`);\n \n  // Categories for filtering\n  const categories: VocabularyCategory[] = [\n    'greetings',\n    'numbers',\n    'family',\n    'food',\n    'colors',\n    'animals',\n    'body-parts',\n    'clothing',\n    'home',\n    'nature',\n    'transport',\n    'technology',\n    'time',\n    'weather',\n    'professions',\n    'places',\n    'grammar',\n    'culture',\n    'everyday-phrases'\n  ];\n\n  const categoryLabels = {\n    de: {\n      greetings: 'Begr√º√üungen',\n      numbers: 'Zahlen',\n      family: 'Familie',\n      food: 'Essen',\n      colors: 'Farben',\n      animals: 'Tiere',\n      'body-parts': 'K√∂rperteile',\n      clothing: 'Kleidung',\n      home: 'Zuhause',\n      nature: 'Natur',\n      transport: 'Verkehr',\n      technology: 'Technologie',\n      time: 'Zeit',\n      weather: 'Wetter',\n      professions: 'Berufe',\n      places: 'Orte',\n      grammar: 'Grammatik',\n      culture: 'Kultur',\n      'everyday-phrases': 'Alltagsphrasen'\n    },\n    bg: {\n      greetings: '–ü–æ–∑–¥—Ä–∞–≤–∏',\n      numbers: '–ß–∏—Å–ª–∞',\n      family: '–°–µ–º–µ–π—Å—Ç–≤–æ',\n      food: '–•—Ä–∞–Ω–∞',\n      colors: '–¶–≤–µ—Ç–æ–≤–µ',\n      animals: '–ñ–∏–≤–æ—Ç–Ω–∏',\n      'body-parts': '–ß–∞—Å—Ç–∏ –Ω–∞ —Ç—è–ª–æ—Ç–æ',\n      clothing: '–û–±–ª–µ–∫–ª–æ',\n      home: '–î–æ–º',\n      nature: '–ü—Ä–∏—Ä–æ–¥–∞',\n      transport: '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç',\n      technology: '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏',\n      time: '–í—Ä–µ–º–µ',\n      weather: '–í—Ä–µ–º–µ—Ç–æ',\n      professions: '–ü—Ä–æ—Ñ–µ—Å–∏–∏',\n      places: '–ú–µ—Å—Ç–∞',\n      grammar: '–ì—Ä–∞–º–∞—Ç–∏–∫–∞',\n      culture: '–ö—É–ª—Ç—É—Ä–∞',\n      'everyday-phrases': '–ß–µ—Å—Ç–æ —Å—Ä–µ—â–∞–Ω–∏ –∏–∑—Ä–∞–∑–∏'\n    }\n  } as const;\n\n  // CEFR Difficulty levels\n  const difficultyLevels = ['A1', 'A2', 'B1', 'B2', 'C1'];\n\n  // Parts of speech for filtering\n  const partsOfSpeech = [\n    'noun', 'verb', 'adjective', 'adverb', 'pronoun',\n    'preposition', 'conjunction', 'interjection', 'article', 'number', 'phrase'\n  ];\n  \n  const partOfSpeechLabels = {\n    de: {\n      noun: 'Substantiv',\n      verb: 'Verb',\n      adjective: 'Adjektiv',\n      adverb: 'Adverb',\n      pronoun: 'Pronomen',\n      preposition: 'Pr√§position',\n      conjunction: 'Konjunktion',\n      interjection: 'Interjektion',\n      article: 'Artikel',\n      number: 'Zahlwort',\n      phrase: 'Redewendung'\n    },\n    bg: {\n      noun: '–°—ä—â–µ—Å—Ç–≤–∏—Ç–µ–ª–Ω–æ',\n      verb: '–ì–ª–∞–≥–æ–ª',\n      adjective: '–ü—Ä–∏–ª–∞–≥–∞—Ç–µ–ª–Ω–æ',\n      adverb: '–ù–∞—Ä–µ—á–∏–µ',\n      pronoun: '–ú–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ',\n      preposition: '–ü—Ä–µ–¥–ª–æ–≥',\n      conjunction: '–°—ä—é–∑',\n      interjection: '–ú–µ–∂–¥—É–º–µ—Ç–∏–µ',\n      article: '–ß–ª–µ–Ω',\n      number: '–ß–∏—Å–ª–∏—Ç–µ–ª–Ω–æ',\n      phrase: '–ò–∑—Ä–∞–∑'\n    }\n  } as const;\n\n  const learningPhases = [\n    { value: 0, de: 'Nicht gestartet', bg: '–ù–µ –µ –∑–∞–ø–æ—á–Ω–∞—Ç–∞' },\n    { value: 1, de: 'Phase 1: Neu', bg: '–§–∞–∑–∞ 1: –ù–æ–≤–∞' },\n    { value: 2, de: 'Phase 2: Lernen', bg: '–§–∞–∑–∞ 2: –£—á–µ–Ω–µ' },\n    { value: 3, de: 'Phase 3: Vertraut', bg: '–§–∞–∑–∞ 3: –ü–æ–∑–Ω–∞—Ç–∞' },\n    { value: 4, de: 'Phase 4: Bekannt', bg: '–§–∞–∑–∞ 4: –ü–æ–∑–Ω–∞—Ç–∞ –¥–æ–±—Ä–µ' },\n    { value: 5, de: 'Phase 5: Beherrscht', bg: '–§–∞–∑–∞ 5: –û–≤–ª–∞–¥—è–Ω–∞' },\n    { value: 6, de: 'Phase 6: Experte', bg: '–§–∞–∑–∞ 6: –ï–∫—Å–ø–µ—Ä—Ç' }\n  ] as const;\n\n  function getCategoryLabel(category: VocabularyCategory | string | undefined): string {\n    if (!category) return '';\n    const labels = appState.languageMode === 'DE_BG' ? categoryLabels.de : categoryLabels.bg;\n    return (labels[category as VocabularyCategory] ?? category) as string;\n  }\n\n  function getPartOfSpeechLabel(pos: string): string {\n    const labels = appState.languageMode === 'DE_BG' ? partOfSpeechLabels.de : partOfSpeechLabels.bg;\n    return labels[pos as keyof typeof labels] ?? pos;\n  }\n\n  function getLearningPhaseLabel(value: number): string {\n    const phase = learningPhases.find((p) => p.value === value);\n    if (!phase) return String(value);\n    return appState.languageMode === 'DE_BG' ? phase.de : phase.bg;\n  }\n\n  const activeFilters = $derived<ActiveFilter[]>([\n    searchTerm\n      ? {\n          key: 'search',\n          label: appState.languageMode === 'DE_BG' ? `Suche: \"${searchTerm}\"` : `–¢—ä—Ä—Å–µ–Ω–µ: \"${searchTerm}\"`,\n          onClear: () => (searchTerm = '')\n        }\n      : null,\n    selectedDifficulty\n      ? {\n          key: 'difficulty',\n          label: `${ui.difficulty}: ${selectedDifficulty}`,\n          onClear: () => (selectedDifficulty = null)\n        }\n      : null,\n    selectedCategory !== 'all'\n      ? {\n          key: 'category',\n          label: `${ui.category}: ${getCategoryLabel(selectedCategory)}`,\n          onClear: () => (selectedCategory = 'all')\n        }\n      : null,\n    selectedPartOfSpeech\n      ? {\n          key: 'pos',\n          label: `${ui.pos}: ${getPartOfSpeechLabel(selectedPartOfSpeech)}`,\n          onClear: () => (selectedPartOfSpeech = null)\n        }\n      : null,\n    selectedLearningPhase !== null\n      ? {\n          key: 'learningPhase',\n          label: `${ui.learningPhase}: ${getLearningPhaseLabel(selectedLearningPhase)}`,\n          onClear: () => (selectedLearningPhase = null)\n        }\n      : null\n  ].filter(Boolean) as ActiveFilter[]);\n \n  // Helper to filter all items based on current UI state\n  function filterItems(all: VocabularyItem[]) {\n    return all.filter((item) => {\n      const q = (searchTerm || '').toLowerCase();\n      const queryMatch = q\n        ? item.german.toLowerCase().includes(q) ||\n          item.bulgarian.toLowerCase().includes(q) ||\n          item.categories.some(cat => cat.toLowerCase().includes(q))\n        : true;\n      const posMatch = selectedPartOfSpeech ? item.partOfSpeech === selectedPartOfSpeech : true;\n      const diffMatch = selectedDifficulty != null ? item.cefrLevel === selectedDifficulty : true;\n        const catMatch = selectedCategory !== 'all' ? item.categories.includes(selectedCategory as VocabularyCategory) : true;\n      // learningPhase not present in app type; ignore for now\n      return queryMatch && posMatch && diffMatch && catMatch;\n    });\n  }\n\n  // Fetch vocabulary data with filters\n  async function loadVocabulary() {\n    try {\n      loading = true;\n      error = null;\n\n      await vocabularyDb.initialize();\n      const all = vocabularyDb.getVocabulary();\n      totalCount = all.length;\n      const offset = currentPage * ITEMS_PER_PAGE;\n\n      const filtered = filterItems(all);\n      filteredCount = filtered.length;\n\n      hasMore = offset + ITEMS_PER_PAGE < filtered.length;\n      vocabularyItems = filtered.slice(offset, offset + ITEMS_PER_PAGE);\n    } catch (err) {\n      console.error('Failed to load vocabulary:', err);\n      error = ui.error;\n    } finally {\n      loading = false;\n    }\n  }\n\n  // Handle item selection for practice\n  function handleSelectItem(item: VocabularyItem) {\n    appState.startPracticeSession(item);\n    goto(`${base}/practice`);\n  }\n\n  function handleToggleSelectItem(itemId: string) {\n    if (selectedItems.has(itemId)) {\n      selectedItems.delete(itemId);\n    } else {\n      selectedItems.add(itemId);\n    }\n    selectedItems = new Set(selectedItems);\n  }\n\n  function startPracticeWithSelected() {\n    const itemsToPractice = vocabularyItems.filter(item => selectedItems.has(item.id));\n    const firstItem = itemsToPractice[0];\n    if (firstItem) {\n      // Start practice with the first selected item\n      appState.startPracticeSession(firstItem);\n      selectedItems.clear();\n      goto(`${base}/practice`);\n    }\n  }\n\n  // React to search and filter changes\n  $effect(() => {\n    // Track dependencies explicitly for the effect\n    searchTerm;\n    selectedCategory;\n    selectedDifficulty;\n    selectedPartOfSpeech;\n    selectedLearningPhase;\n\n    currentPage = 0;\n    loadVocabulary();\n  });\n\n  // Initialize on component mount\n  onMount(async () => {\n    await loadVocabulary();\n  });\n\n  // Load more items\n  let hasMore = $state(false);\n  async function loadMore() {\n    if (!hasMore) return;\n\n    currentPage++;\n    try {\n      loading = true;\n      await vocabularyDb.initialize();\n      const all = vocabularyDb.getVocabulary();\n      const offset = currentPage * ITEMS_PER_PAGE;\n      const filtered = filterItems(all);\n      filteredCount = filtered.length;\n      hasMore = offset + ITEMS_PER_PAGE < filtered.length;\n      const nextSlice = filtered.slice(offset, offset + ITEMS_PER_PAGE);\n      vocabularyItems = [...vocabularyItems, ...nextSlice];\n    } catch (err) {\n      console.error('Failed to load more vocabulary:', err);\n    } finally {\n      loading = false;\n    }\n  }\n\n  async function resetFilters() {\n    searchTerm = '';\n    selectedCategory = 'all';\n    selectedDifficulty = null;\n    selectedPartOfSpeech = null;\n    selectedLearningPhase = null;\n    currentPage = 0;\n    await loadVocabulary();\n  }\n\n\n\n  // Sidebar state\n  let showFilters = $state(true);\n</script>\n\n<svelte:head>\n  <title>{ui.title} | {appState.languageMode === 'DE_BG' ? 'BulgarianApp' : 'BulgarianApp'}</title>\n</svelte:head>\n\n<div class=\"vocabulary-page\">\n  <header class=\"page-header\">\n    <div class=\"headline\">\n      <p class=\"eyebrow\">{appState.languageMode === 'DE_BG' ? 'Wortschatz ‚Ä¢ Vocabulary' : '–†–µ—á–Ω–∏–∫ ‚Ä¢ Vocabulary'}</p>\n      <h1 class=\"vocabulary-title\">{ui.introTitle}</h1>\n      <p class=\"intro-lede\">{ui.introLede}</p>\n    </div>\n    <div class=\"header-actions\">\n      <ActionButton\n        variant=\"primary\"\n        size=\"md\"\n        iconLeft={PRACTICE_ICONS.STANDARD}\n        aria-label={ui.practiceSelected(selectedItems.size)}\n        disabled={selectedItems.size === 0}\n        onclick={startPracticeWithSelected}\n      >\n        {ui.practiceSelected(selectedItems.size)}\n      </ActionButton>\n      <button class=\"filter-toggle\" onclick={() => (showFilters = !showFilters)} aria-expanded={showFilters}>\n        {showFilters ? (appState.languageMode === 'DE_BG' ? 'Filter ausblenden' : '–°–∫—Ä–∏–π —Ñ–∏–ª—Ç—Ä–∏—Ç–µ') : (appState.languageMode === 'DE_BG' ? 'Filter anzeigen' : '–ü–æ–∫–∞–∂–∏ —Ñ–∏–ª—Ç—Ä–∏—Ç–µ')}\n      </button>\n    </div>\n  </header>\n\n  <div class=\"vocabulary-layout\">\n    <aside class=\"filter-panel\" data-open={showFilters}>\n      <div class=\"filter-panel__header\">\n        <div>\n          <p class=\"eyebrow-small\">{ui.title}</p>\n          <h2 class=\"panel-title\">{appState.languageMode === 'DE_BG' ? 'Gezielt filtern' : '–ù–∞–º–µ—Ä–∏ —Ç–æ—á–Ω–∏—Ç–µ –¥—É–º–∏'}</h2>\n        </div>\n        <button class=\"panel-reset\" onclick={resetFilters}>{ui.reset}</button>\n      </div>\n\n      <div class=\"filter-stack\">\n        <div class=\"filter-group\">\n          <label for=\"search-input\" class=\"filter-label\">{ui.searchAria || (appState.languageMode === 'DE_BG' ? 'Vokabular durchsuchen' : '–¢—ä—Ä—Å–µ–Ω–µ –≤ —Ä–µ—á–Ω–∏–∫–∞')}</label>\n          <input\n            id=\"search-input\"\n            type=\"search\"\n            placeholder={ui.searchPlaceholder}\n            bind:value={searchTerm}\n            class=\"filter-input\"\n            aria-label={ui.searchAria || (appState.languageMode === 'DE_BG' ? 'Vokabular durchsuchen' : '–¢—ä—Ä—Å–µ–Ω–µ –≤ —Ä–µ—á–Ω–∏–∫–∞')}\n          />\n        </div>\n\n        <div class=\"filter-group\">\n          <span id=\"difficulty-label\" class=\"filter-label\">{ui.difficulty}</span>\n          <div class=\"pill-row\" role=\"group\" aria-labelledby=\"difficulty-label\">\n            <button\n              class={`pill ${selectedDifficulty === null ? 'pill--active' : ''}`}\n              onclick={() => (selectedDifficulty = null)}\n            >\n              {appState.languageMode === 'DE_BG' ? 'Alle' : '–í—Å–∏—á–∫–∏'}\n            </button>\n            {#each difficultyLevels as level}\n              <button\n                class={`pill ${selectedDifficulty === level ? 'pill--active' : ''}`}\n                onclick={() => (selectedDifficulty = level)}\n              >\n                {level}\n              </button>\n            {/each}\n          </div>\n        </div>\n\n        <div class=\"filter-group\">\n          <label for=\"category-filter\" class=\"filter-label\">{ui.category}</label>\n          <select id=\"category-filter\" bind:value={selectedCategory} class=\"filter-select\">\n            <option value=\"all\">{appState.languageMode === 'DE_BG' ? 'Alle Kategorien' : '–í—Å–∏—á–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏'}</option>\n            {#each categories as category}\n              <option value={category}>{getCategoryLabel(category)}</option>\n            {/each}\n          </select>\n        </div>\n\n        <div class=\"filter-group\">\n          <label for=\"pos-filter\" class=\"filter-label\">{ui.pos}</label>\n          <select id=\"pos-filter\" bind:value={selectedPartOfSpeech} class=\"filter-select\">\n            <option value={null}>{appState.languageMode === 'DE_BG' ? 'Alle Wortarten' : '–í—Å–∏—á–∫–∏ —á–∞—Å—Ç–∏ –Ω–∞ —Ä–µ—á—Ç–∞'}</option>\n            {#each partsOfSpeech as pos}\n              <option value={pos}>{getPartOfSpeechLabel(pos)}</option>\n            {/each}\n          </select>\n        </div>\n\n        <div class=\"filter-group\">\n          <label for=\"learning-phase-filter\" class=\"filter-label\">{ui.learningPhase}</label>\n          <select id=\"learning-phase-filter\" bind:value={selectedLearningPhase} class=\"filter-select\">\n            <option value={null}>{appState.languageMode === 'DE_BG' ? 'Alle Phasen' : '–í—Å–∏—á–∫–∏ –µ—Ç–∞–ø–∏'}</option>\n            {#each learningPhases as phase}\n              <option value={phase.value}>{getLearningPhaseLabel(phase.value)}</option>\n            {/each}\n          </select>\n        </div>\n\n        <div class=\"filter-actions\">\n          <button class=\"secondary-button\" onclick={resetFilters}>{ui.reset}</button>\n          <button class=\"primary-button\" onclick={startPracticeWithSelected} disabled={selectedItems.size === 0}>\n            {ui.practiceSelected(selectedItems.size)}\n          </button>\n        </div>\n      </div>\n    </aside>\n\n    <div class=\"vocabulary-content\">\n      <div class=\"summary-bar\">\n        <div class=\"summary-count\">{countLabel}</div>\n        <div class=\"active-filters\">\n          {#if activeFilters.length > 0}\n            {#each activeFilters as filter (filter.key)}\n              <button class=\"filter-chip\" onclick={filter.onClear}>\n                <span>{filter.label}</span>\n                <span aria-hidden=\"true\">‚úï</span>\n              </button>\n            {/each}\n            <button class=\"clear-all\" onclick={resetFilters}>\n              {appState.languageMode === 'DE_BG' ? 'Alle zur√ºcksetzen' : '–ò–∑—á–∏—Å—Ç–∏ –≤—Å–∏—á–∫–∏'}\n            </button>\n          {:else}\n            <span class=\"no-active-filters\">{appState.languageMode === 'DE_BG' ? 'Alle Eintr√§ge aktiv' : '–ò–∑–ø–æ–ª–∑–≤–∞—à –≤—Å–∏—á–∫–∏ –∑–∞–ø–∏—Å–∏'}</span>\n          {/if}\n        </div>\n      </div>\n\n      {#if loading && vocabularyItems.length === 0}\n        <div class=\"state-block\">\n          <div class=\"spinner\">üåÄ</div>\n          <p>{ui.loading}</p>\n        </div>\n      {:else if error}\n        <div class=\"state-block\" role=\"alert\">\n          <span class=\"state-icon\">‚ö†Ô∏è</span>\n          <p>{ui.error}</p>\n        </div>\n      {:else if vocabularyItems.length === 0}\n        <div class=\"state-block\">\n          <div class=\"state-icon\">üîç</div>\n          <h3>{ui.emptyTitle}</h3>\n          <p>{ui.emptyHint}</p>\n        </div>\n      {/if}\n\n      {#if vocabularyItems.length > 0}\n        <div class=\"vocabulary-grid-items\">\n          {#each vocabularyItems as item (item.id)}\n            <div class=\"card-link\">\n              <VocabularyCard\n                {item}\n                variant=\"grid\"\n                direction={appState.languageMode === 'DE_BG' ? 'DE->BG' : 'BG->DE'}\n                isSelected={selectedItems.has(item.id)}\n                showMetadata={true}\n                showActions={true}\n                showTags={true}\n                onPractice={handleSelectItem}\n                onToggleSelect={handleToggleSelectItem}\n                onOpenDetail={(item) => goto(`${base}/learn/${item.id}`)}\n              />\n            </div>\n          {/each}\n        </div>\n\n        {#if hasMore}\n          <div class=\"load-more-container\">\n            <button\n              onclick={loadMore}\n              disabled={loading}\n              class=\"primary-button\"\n              aria-label={loading ? ui.loading : ui.loadMore}\n            >\n              {loading ? ui.loading : ui.loadMore}\n            </button>\n          </div>\n        {/if}\n      {/if}\n    </div>\n  </div>\n</div>\n\n<style>\n  .vocabulary-page {\n    max-width: var(--container-max-width);\n    margin: 0 auto;\n    padding: var(--space-7) var(--space-5) var(--space-7);\n    color: var(--color-neutral-text-dark);\n  }\n\n  .page-header {\n    display: flex;\n    align-items: flex-start;\n    justify-content: space-between;\n    gap: var(--space-4);\n    margin-bottom: var(--space-6);\n  }\n\n  .headline {\n    display: flex;\n    flex-direction: column;\n    gap: var(--space-2);\n  }\n\n  .vocabulary-title {\n    margin: 0;\n    font-size: var(--text-3xl);\n    line-height: var(--leading-tight);\n    font-weight: var(--font-extrabold);\n    color: var(--color-neutral-dark);\n  }\n\n  .intro-lede {\n    margin: 0;\n    font-size: var(--text-base);\n    line-height: var(--leading-normal);\n    color: var(--color-neutral-text);\n  }\n\n  .header-actions {\n    display: flex;\n    align-items: center;\n    gap: var(--space-3);\n  }\n\n  .filter-toggle {\n    display: none;\n    padding: var(--space-2) var(--space-3);\n    border: 1px solid var(--color-neutral-border);\n    border-radius: var(--border-radius-lg);\n    background: var(--color-neutral-light);\n    color: var(--color-neutral-dark);\n    cursor: pointer;\n    transition: var(--transition-filter);\n  }\n\n  .vocabulary-layout {\n    display: grid;\n    grid-template-columns: minmax(var(--filter-panel-width), 360px) 1fr;\n    gap: var(--space-6);\n    align-items: start;\n  }\n\n  .filter-panel {\n    position: sticky;\n    top: 0;\n    background: var(--color-filter-bg);\n    border: 1px solid var(--color-neutral-border);\n    border-radius: var(--border-radius-xl);\n    padding: var(--filter-panel-padding);\n    box-shadow: var(--shadow-filter-panel);\n    display: flex;\n    flex-direction: column;\n    gap: var(--filter-group-spacing);\n  }\n\n  .filter-panel__header {\n    display: flex;\n    align-items: flex-start;\n    justify-content: space-between;\n    gap: var(--space-3);\n  }\n\n  .panel-title {\n    margin: 0;\n    font-size: var(--text-lg);\n    color: var(--color-neutral-dark);\n  }\n\n  .panel-reset {\n    border: none;\n    background: transparent;\n    color: var(--color-primary-darker);\n    font-weight: var(--font-semibold);\n    cursor: pointer;\n    padding: var(--space-1) var(--space-2);\n  }\n\n  .filter-stack {\n    display: flex;\n    flex-direction: column;\n    gap: var(--filter-group-spacing);\n  }\n\n  .filter-group {\n    display: flex;\n    flex-direction: column;\n    gap: var(--space-2);\n  }\n\n  .filter-label {\n    font-size: var(--text-sm);\n    color: var(--color-neutral-text-dark);\n    font-weight: var(--font-semibold);\n  }\n\n  .filter-input,\n  .filter-select {\n    width: 100%;\n    padding: var(--space-3);\n    border-radius: var(--border-radius-lg);\n    border: 1px solid var(--color-neutral-border);\n    background: var(--color-neutral-light);\n    font-size: var(--text-base);\n    color: var(--color-neutral-dark);\n    transition: var(--transition-filter);\n  }\n\n  .filter-input:focus,\n  .filter-select:focus {\n    outline: 2px solid var(--color-focus-ring);\n    outline-offset: var(--color-focus-ring-offset);\n  }\n\n  .pill-row {\n    display: flex;\n    flex-wrap: wrap;\n    gap: var(--space-2);\n  }\n\n  .pill {\n    border: 1px solid var(--color-neutral-border);\n    background: var(--color-neutral-light);\n    color: var(--color-neutral-dark);\n    border-radius: 999px;\n    padding: var(--space-2) var(--space-3);\n    font-size: var(--text-sm);\n    cursor: pointer;\n    transition: var(--transition-filter);\n  }\n\n  .pill:hover {\n    border-color: var(--color-primary);\n  }\n\n  .pill--active {\n    background: var(--color-primary-light);\n    color: var(--color-primary-darker);\n    border-color: var(--color-primary);\n    font-weight: var(--font-semibold);\n  }\n\n  .filter-actions {\n    display: flex;\n    gap: var(--space-3);\n    justify-content: flex-end;\n  }\n\n  .primary-button {\n    padding: var(--space-3) var(--space-4);\n    border-radius: var(--border-radius-lg);\n    border: none;\n    background: var(--color-button-primary);\n    color: var(--color-neutral-light);\n    font-weight: var(--font-semibold);\n    cursor: pointer;\n    transition: var(--transition-filter);\n  }\n\n  .primary-button:disabled {\n    background: var(--color-neutral-border);\n    cursor: not-allowed;\n  }\n\n  .primary-button:not(:disabled):hover {\n    background: var(--color-button-primary-hover);\n  }\n\n  .secondary-button {\n    padding: var(--space-3) var(--space-4);\n    border-radius: var(--border-radius-lg);\n    border: 1px solid var(--color-neutral-border);\n    background: var(--color-neutral-light);\n    color: var(--color-neutral-dark);\n    font-weight: var(--font-semibold);\n    cursor: pointer;\n    transition: var(--transition-filter);\n  }\n\n  .secondary-button:hover {\n    border-color: var(--color-primary);\n    color: var(--color-primary);\n  }\n\n  .vocabulary-content {\n    background: var(--color-neutral-light);\n    border: 1px solid var(--color-neutral-border);\n    border-radius: var(--border-radius-xl);\n    padding: var(--space-5);\n    box-shadow: var(--shadow-card);\n  }\n\n  .summary-bar {\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    justify-content: space-between;\n    gap: var(--space-3);\n    margin-bottom: var(--space-4);\n  }\n\n  .summary-count {\n    font-weight: var(--font-semibold);\n    color: var(--color-neutral-dark);\n  }\n\n  .active-filters {\n    display: flex;\n    flex-wrap: wrap;\n    gap: var(--space-2);\n  }\n\n  .filter-chip {\n    display: inline-flex;\n    align-items: center;\n    gap: var(--space-2);\n    padding: var(--space-2) var(--space-3);\n    border-radius: 999px;\n    border: 1px solid var(--color-primary);\n    background: var(--color-primary-lighter);\n    color: var(--color-primary-darker);\n    cursor: pointer;\n    transition: var(--transition-filter);\n  }\n\n  .filter-chip:hover {\n    background: var(--color-primary-light);\n  }\n\n  .clear-all {\n    border: none;\n    background: transparent;\n    color: var(--color-primary-dark);\n    font-weight: var(--font-semibold);\n    cursor: pointer;\n    padding: var(--space-1) var(--space-2);\n  }\n\n  .no-active-filters {\n    color: var(--color-neutral-text);\n    font-size: var(--text-sm);\n  }\n\n  .state-block {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: var(--space-3);\n    padding: var(--space-6) 0;\n    color: var(--color-neutral-text);\n    text-align: center;\n  }\n\n  .state-icon {\n    font-size: var(--text-2xl);\n  }\n\n  .spinner {\n    font-size: var(--text-2xl);\n    animation: spin 1s linear infinite;\n  }\n\n  @keyframes spin {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  .vocabulary-grid-items {\n    display: grid;\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n    gap: var(--vocabulary-grid-gap);\n    margin-top: var(--space-4);\n  }\n\n  .card-link {\n    display: block;\n    outline: none;\n    border-radius: var(--border-radius-xl);\n  }\n\n  .card-link:focus {\n    box-shadow: 0 0 0 2px var(--color-focus-ring);\n  }\n\n  .load-more-container {\n    display: flex;\n    justify-content: center;\n    margin-top: var(--space-5);\n  }\n\n  @media (max-width: var(--breakpoint-lg)) {\n    .vocabulary-layout {\n      grid-template-columns: 1fr;\n    }\n\n    .filter-toggle {\n      display: inline-flex;\n    }\n\n    .filter-panel {\n      position: relative;\n      top: 0;\n    }\n\n    .filter-panel[data-open='false'] {\n      display: none;\n    }\n  }\n\n  @media (max-width: var(--breakpoint-md)) {\n    .page-header {\n      flex-direction: column;\n      align-items: flex-start;\n    }\n\n    .header-actions {\n      width: 100%;\n      justify-content: space-between;\n    }\n  }\n\n  @media (max-width: var(--breakpoint-mobile)) {\n    .vocabulary-content {\n      padding: var(--space-4);\n    }\n\n    .vocabulary-grid-items {\n      grid-template-columns: 1fr;\n    }\n  }\n</style>"],"names":["vocabularyItems","$.state","$.proxy","searchTerm","loading","error","selectedCategory","selectedDifficulty","selectedPartOfSpeech","selectedLearningPhase","currentPage","ITEMS_PER_PAGE","selectedItems","Set","filteredCount","totalCount","ui","$.derived","appState","languageMode","title","introTitle","introLede","searchPlaceholder","t","searchAria","category","difficulty","pos","learningPhase","reset","practiceSelected","n","emptyTitle","emptyHint","loadMore","countLabel","$.get","categories","categoryLabels","de","greetings","numbers","family","food","colors","animals","clothing","home","nature","transport","technology","time","weather","professions","places","grammar","culture","bg","difficultyLevels","partsOfSpeech","partOfSpeechLabels","noun","verb","adjective","adverb","pronoun","preposition","conjunction","interjection","article","number","phrase","learningPhases","value","getCategoryLabel","getPartOfSpeechLabel","getLearningPhaseLabel","phase","find","p","String","activeFilters","key","label","onClear","$.set","filter","Boolean","filterItems","all","item","q","toLowerCase","queryMatch","german","includes","bulgarian","some","cat","posMatch","partOfSpeech","diffMatch","cefrLevel","catMatch","async","loadVocabulary","vocabularyDb","initialize","getVocabulary","length","offset","filtered","hasMore","slice","err","console","handleSelectItem","startPracticeSession","goto","base","handleToggleSelectItem","itemId","has","delete","add","startPracticeWithSelected","firstItem","id","clear","$.user_effect","onMount","nextSlice","resetFilters","showFilters","div","root","$.head","$$anchor","header","div_1","p_1","h1","p_2","div_2","$0","size","ActionButton","node","PRACTICE_ICONS","STANDARD","$.template_effect","$.set_text","text_3","button","$.sibling","__click","div_3","aside","div_4","div_5","p_3","h2","button_1","div_6","div_7","input","$.remove_input_defaults","div_8","span","div_9","button_2","$.child","text_10","$.reset","node_1","$.each","level","button_3","root_3","text_11","$.set_class","$.append","div_10","label_1","select","option","__value","node_2","option_1","root_4","div_11","label_2","select_1","option_2","node_3","option_3","root_5","div_12","label_3","select_2","option_4","node_4","option_5","root_6","option_5_value","div_13","button_4","button_5","div_14","div_15","div_16","div_17","node_6","button_6","root_8","$$args","apply","this","span_1","text_24","button_7","text_25","span_2","root_9","text_26","consequent","$$render","alternate","div_18","root_10","p_4","text_27","div_19","root_12","p_5","text_28","div_20","root_14","h3","p_6","text_29","text_30","consequent_3","consequent_2","alternate_1","consequent_1","alternate_2","div_21","$.first_child","fragment_4","div_22","root_16","$1","VocabularyCard","node_11","onOpenDetail","div_23","root_17","button_8","text_31","disabled","consequent_4","consequent_5","text","text_1","text_2","$.set_attribute","text_5","text_6","text_7","text_9","text_12","text_13","text_15","text_16","text_18","text_19","text_21","$$value"],"mappings":"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"}