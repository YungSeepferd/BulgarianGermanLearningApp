import{f as e,a,b as t,t as r,c as n}from"../chunks/CP5eoV68.js";import{o as s}from"../chunks/Cx5GHCVW.js";import{a5 as l,a9 as i,a6 as o,a8 as d,aa as c,ad as v,a7 as g,L as u,ag as p,ab as m,ah as h,ae as f,ao as y,ap as k}from"../chunks/wBlqi3UJ.js";import{i as b}from"../chunks/DXLtWB7C.js";import{b as w,c as $}from"../chunks/rXKuYn7R.js";import{D as L,v as P,a as j}from"../chunks/joAWAgwS.js";import{V as B}from"../chunks/Cvwc0J1I.js";import{A as z}from"../chunks/CHmdkdWe.js";var N=e('<div><!></div> <div class="button-container svelte-1ntlv2v"><!> <!></div>',1),S=e('<div class="completion-message svelte-1ntlv2v"><h2 class="svelte-1ntlv2v"> </h2> <p class="svelte-1ntlv2v"> </p> <!></div>'),T=e('<p class="svelte-1ntlv2v"> </p> <!>',1),A=e('<p class="svelte-1ntlv2v"> </p>'),D=e('<p class="svelte-1ntlv2v"> </p> <!>',1),E=e('<div class="loading-message svelte-1ntlv2v"><!></div>'),F=e('<div class="learn-page svelte-1ntlv2v"><div class="progress-container svelte-1ntlv2v"><div class="progress-bar svelte-1ntlv2v"></div> <div class="progress-text svelte-1ntlv2v"> </div></div> <div class="content-container svelte-1ntlv2v"><!></div></div>');function G(e,G){l(G,!0);let M=i(0),x=i(!1),C=i(!1),O=i(o([])),V=i(!1),W=i(null),I=i(null),_=i(!1);function K(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function Q(e){const a=(e.german||"").trim();if(!a)return a;if(/^(der|die|das|ein|eine|einen|einem|einer|eines)\s/i.test(a)){const[t,...r]=a.split(/\s+/),n=r.join(" ");return[t,"noun"===e.partOfSpeech?K(n):n].filter(Boolean).join(" ").trim()}const t="noun"===e.partOfSpeech?K(a):a,r=(n=e.grammar?.gender,s=e.grammar?.verbPartnerId,s||n&&{masculine:"der",feminine:"die",neuter:"das"}[n]||null||("noun"===e.partOfSpeech?"der":null));var n,s;return r?`${r} ${t}`:t}const U=f(()=>"DE_BG"===j.languageMode?{heading:"Lernkarten",hard:"ðŸ”´ Schwer",easy:"ðŸŸ¢ Leicht",completedTitle:"ðŸŽ‰ GroÃŸartige Arbeit!",completedBody:"Du hast diese Lerneinheit beendet.",startNew:"Neue Einheit starten",loading:"Vokabular wird geladen...",retry:"Erneut versuchen",mastered:"Keine WÃ¶rter zu Ã¼ben. Alles gemeistert!"}:{heading:"ÐšÐ°Ñ€Ñ‚Ð¸ Ð·Ð° ÑƒÑ‡ÐµÐ½Ðµ",hard:"ðŸ”´ Ð¢Ñ€ÑƒÐ´Ð½Ð¾",easy:"ðŸŸ¢ Ð›ÐµÑÐ½Ð¾",completedTitle:"ðŸŽ‰ Ð¡Ñ‚Ñ€Ð°Ñ…Ð¾Ñ‚Ð½Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ð°!",completedBody:"Ð—Ð°Ð²ÑŠÑ€ÑˆÐ¸ Ñ‚Ð°Ð·Ð¸ ÑÐµÑÐ¸Ñ Ð·Ð° ÑƒÑ‡ÐµÐ½Ðµ.",startNew:"Ð—Ð°Ð¿Ð¾Ñ‡Ð½Ð¸ Ð½Ð¾Ð²Ð° ÑÐµÑÐ¸Ñ",loading:"Ð—Ð°Ñ€ÐµÐ¶Ð´Ð°Ð½Ðµ Ð½Ð° Ñ€ÐµÑ‡Ð½Ð¸ÐºÐ°...",retry:"ÐžÐ¿Ð¸Ñ‚Ð°Ð¹ Ð¾Ñ‚Ð½Ð¾Ð²Ð¾",mastered:"ÐÑÐ¼Ð° Ð´ÑƒÐ¼Ð¸ Ð·Ð° ÑƒÐ¿Ñ€Ð°Ð¶Ð½ÐµÐ½Ð¸Ðµ. Ð’ÑÐ¸Ñ‡ÐºÐ¾ Ðµ ÑƒÑÐ²Ð¾ÐµÐ½Ð¾!"});async function q(){try{m(I,null),L.log("LearnPage","Starting learning session"),await P.initialize();const e=P.getVocabulary().map(e=>({...e,german:Q(e)}));if(0===e.length)return m(I,"No vocabulary loaded. Please check the data files and try again."),m(x,!1),m(C,!1),void m(O,[],!0);L.log("LearnPage","Vocabulary loaded",{totalWords:e.length}),m(O,[...e].sort(()=>.5-Math.random()),!0),L.log("LearnPage","Session cards prepared",{cardCount:u(O).length}),m(M,0),m(x,!0),m(C,!1),m(V,!1),m(W,null),L.log("LearnPage","Session started",{cardCount:u(O).length,firstCard:u(O)[0]?.id})}catch(e){L.error("LearnPage","Failed to start session",e),m(I,"Failed to start session. Please retry."),m(x,!1),m(O,[],!0)}}function H(){if(!u(x)||u(V))return;m(V,!0),m(W,"easy");const e=u(O)[u(M)];if(e){const a=e.xp_value||10;L.log("LearnPage","Word marked as easy",{wordId:e.id,xpAdded:a})}setTimeout(()=>{R(),m(V,!1),m(W,null)},600)}function J(){u(x)&&!u(V)&&(m(V,!0),m(W,"hard"),L.log("LearnPage","Word marked as hard",{wordId:u(O)[u(M)]?.id}),setTimeout(()=>{R(),m(V,!1),m(W,null)},600))}function R(){u(M)<u(O).length-1?(k(M),m(_,!1)):(m(x,!1),m(C,!0),L.log("LearnPage","Session completed"))}function X(){m(_,!u(_)),L.log("LearnPage","Flashcard flipped",{isFlipped:u(_)})}function Y(){const e=u(O)[u(M)];return e?{...e,literalBreakdown:e.literalBreakdown??e.metadata?.components?.map(e=>({segment:e.part,literal:e.meaning,grammarTag:""}))??[]}:null}s(()=>{q()});var Z=F(),ee=g(Z),ae=g(ee),te=v(ae,2),re=g(te,!0);p(te),p(ee);var ne=v(ee,2),se=g(ne),le=e=>{var n=N(),s=h(n),l=g(s);{let e=f(Y),a=f(()=>"DE_BG"===j.languageMode?"DE->BG":"BG->DE");B(l,{get item(){return u(e)},variant:"flashcard",get direction(){return u(a)},get isFlipped(){return u(_)},showMetadata:!0,showActions:!1,showTags:!1,onFlip:X})}p(s);var i=v(s,2),o=g(i);z(o,{variant:"secondary",size:"lg",get disabled(){return u(V)},onclick:J,get label(){return u(U).hard},children:(e,n)=>{y();var s=r();d(()=>t(s,u(U).hard)),a(e,s)},$$slots:{default:!0}});var c=v(o,2);z(c,{variant:"primary",size:"lg",get disabled(){return u(V)},onclick:H,get label(){return u(U).easy},children:(e,n)=>{y();var s=r();d(()=>t(s,u(U).easy)),a(e,s)},$$slots:{default:!0}}),p(i),d(()=>$(s,1,`flashcard-wrapper ${u(W)??""}`,"svelte-1ntlv2v")),a(e,n)},ie=e=>{var s=n(),l=h(s),i=e=>{var n=S(),s=g(n),l=g(s,!0);p(s);var i=v(s,2),o=g(i,!0);p(i);var c=v(i,2);z(c,{variant:"primary",size:"lg",onclick:q,get label(){return u(U).startNew},children:(e,n)=>{y();var s=r();d(()=>t(s,u(U).startNew)),a(e,s)},$$slots:{default:!0}}),p(n),d(()=>{t(l,u(U).completedTitle),t(o,u(U).completedBody)}),a(e,n)},o=e=>{var s=E(),l=g(s),i=e=>{var n=T(),s=h(n),l=g(s,!0);p(s);var i=v(s,2);z(i,{variant:"secondary",size:"lg",onclick:q,get label(){return u(U).retry},children:(e,n)=>{y();var s=r();d(()=>t(s,u(U).retry)),a(e,s)},$$slots:{default:!0}}),d(()=>t(l,u(I))),a(e,n)},o=e=>{var s=n(),l=h(s),i=e=>{var r=A(),n=g(r,!0);p(r),d(()=>t(n,u(U).loading)),a(e,r)},o=e=>{var n=D(),s=h(n),l=g(s,!0);p(s);var i=v(s,2);z(i,{variant:"primary",size:"lg",onclick:q,get label(){return u(U).startNew},children:(e,n)=>{y();var s=r();d(()=>t(s,u(U).startNew)),a(e,s)},$$slots:{default:!0}}),d(()=>t(l,u(U).mastered)),a(e,n)};b(l,e=>{0===u(O).length?e(i):e(o,!1)},!0),a(e,s)};b(l,e=>{u(I)?e(i):e(o,!1)}),p(s),a(e,s)};b(l,e=>{u(C)?e(i):e(o,!1)},!0),a(e,s)};b(se,e=>{u(x)&&Y()?e(le):e(ie,!1)}),p(ne),p(Z),d((e,a)=>{w(ae,e),t(re,a)},[()=>`width: ${0===u(O).length?0:Math.round((u(M)+1)/u(O).length*100)}%`,function(){return 0===u(O).length?"0/0":`${u(M)+1}/${u(O).length}`}]),a(e,Z),c()}export{G as component};
//# sourceMappingURL=11.Dr-DZedi.js.map
