{"version":3,"file":"10.CX6_02Qr.js","sources":["../../../../../../src/routes/learn/paths/[path]/[lesson]/+page.ts","../../../../../../src/routes/learn/paths/[path]/[lesson]/+page.svelte"],"sourcesContent":["export const load = async ({ params }) => ({ pathId: params.path, lessonId: params.lesson });\n","<script lang=\"ts\">\n  import { onMount } from 'svelte';\n  import { goto } from '$app/navigation';\n  import { base } from '$app/paths';\n  import type { Lesson } from '$lib/types/lesson';\n  import type { LearningPathProgress } from '$lib/types/learning-path';\n  import { getLessonsForPath, getLearningPathProgress, markLessonComplete } from '$lib/services/learning-paths';\n\n  let { data } = $props<{ data: { pathId: string; lessonId: string } }>();\n\n  let loading = $state(true);\n  let error = $state<string | null>(null);\n  let lesson = $state<Lesson | null>(null);\n  let progress = $state<LearningPathProgress | null>(null);\n\n  onMount(async () => {\n    try {\n      const lessons = await getLessonsForPath(data.pathId);\n      lesson = lessons.find((l) => l.id === data.lessonId) ?? null;\n      progress = await getLearningPathProgress(data.pathId);\n    } catch (e) {\n      error = (e as Error).message ?? 'Failed to load lesson';\n    } finally {\n      loading = false;\n    }\n  });\n\n  const backToPath = () => goto(`${base}/learn/paths/${data.pathId}`);\n\n  async function completeLesson() {\n    if (!lesson) return;\n    const updated = await markLessonComplete(data.pathId, lesson.id);\n    progress = updated;\n  }\n</script>\n\n<div class=\"page\">\n  <div class=\"toolbar\">\n    <button class=\"link\" onclick={backToPath}>← Back to path</button>\n  </div>\n\n  {#if loading}\n    <div class=\"state\">Loading lesson…</div>\n  {:else if error}\n    <div class=\"state error\">{error}</div>\n  {:else if !lesson}\n    <div class=\"state\">Lesson not found.</div>\n  {:else}\n    <header class=\"header\">\n      <div>\n        <p class=\"eyebrow\">Lesson</p>\n        <h1>{lesson.title}</h1>\n        {#if lesson.subtitle}<p class=\"subtitle\">{lesson.subtitle}</p>{/if}\n      </div>\n      <div class=\"actions\">\n        <button class=\"action-btn\" onclick={completeLesson}>Mark lesson complete</button>\n        {#if progress}\n          <p class=\"hint\">Progress is persisted; current lesson: {progress.currentLesson}</p>\n        {/if}\n      </div>\n    </header>\n\n    <section class=\"panel\">\n      <h3>Details</h3>\n      <ul class=\"meta\">\n        <li><strong>Path:</strong> {data.pathId}</li>\n        <li><strong>Duration:</strong> {lesson.duration ?? 15} min</li>\n        {#if lesson.difficulty}<li><strong>Level:</strong> {lesson.difficulty}</li>{/if}\n        {#if lesson.vocabularyIds?.length}\n          <li><strong>Vocabulary IDs:</strong> {lesson.vocabularyIds.join(', ')}</li>\n        {/if}\n      </ul>\n      {#if lesson.objectives?.length}\n        <h4>Objectives</h4>\n        <ul>\n          {#each lesson.objectives as objective}\n            <li>{objective}</li>\n          {/each}\n        </ul>\n      {/if}\n      {#if lesson.grammarTopics?.length}\n        <h4>Grammar Topics</h4>\n        <ul>\n          {#each lesson.grammarTopics as topic}\n            <li>{topic}</li>\n          {/each}\n        </ul>\n      {/if}\n    </section>\n  {/if}\n</div>\n\n<style>\n  .page {\n    display: flex;\n    flex-direction: column;\n    gap: 1.5rem;\n    padding: 2rem;\n    background: var(--color-background, #f9fafb);\n    min-height: 100vh;\n  }\n\n  .toolbar {\n    display: flex;\n    justify-content: flex-start;\n  }\n\n  .link {\n    background: none;\n    border: none;\n    color: var(--color-primary, #3b82f6);\n    cursor: pointer;\n    font-weight: 600;\n  }\n\n  .header {\n    display: flex;\n    justify-content: space-between;\n    gap: 1rem;\n    align-items: flex-start;\n  }\n\n  .eyebrow {\n    margin: 0;\n    text-transform: uppercase;\n    letter-spacing: 0.08em;\n    font-weight: 700;\n    font-size: 0.75rem;\n    color: var(--color-text-secondary, #6b7280);\n  }\n\n  h1 {\n    margin: 0.25rem 0;\n    font-size: 1.75rem;\n    color: var(--color-text-primary, #111827);\n  }\n\n  .subtitle {\n    margin: 0;\n    color: var(--color-text-secondary, #6b7280);\n  }\n\n  .panel {\n    background: var(--color-surface, #ffffff);\n    border: 1px solid var(--color-border, #e5e7eb);\n    border-radius: 0.75rem;\n    padding: 1.5rem;\n  }\n\n  .state {\n    padding: 1rem;\n    background: var(--color-surface, #ffffff);\n    border: 1px solid var(--color-border, #e5e7eb);\n    border-radius: 0.75rem;\n    color: var(--color-text-primary, #111827);\n  }\n\n  .state.error {\n    border-color: #ef4444;\n    color: #b91c1c;\n  }\n\n  .actions {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-end;\n    gap: 0.5rem;\n  }\n\n  .action-btn {\n    padding: 0.6rem 1rem;\n    border-radius: 0.5rem;\n    border: 1px solid var(--color-primary, #3b82f6);\n    background: var(--color-primary, #3b82f6);\n    color: #fff;\n    cursor: pointer;\n    font-weight: 600;\n    transition: transform 0.15s ease, box-shadow 0.15s ease;\n  }\n\n  .action-btn:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 6px 18px rgba(59, 130, 246, 0.25);\n  }\n\n  .action-btn:focus-visible {\n    outline: 3px solid rgba(59, 130, 246, 0.35);\n    outline-offset: 2px;\n  }\n\n  .hint {\n    margin: 0;\n    color: var(--color-text-secondary, #6b7280);\n    font-size: 0.875rem;\n  }\n\n  .meta {\n    list-style: none;\n    padding-left: 0;\n    display: flex;\n    flex-direction: column;\n    gap: 0.35rem;\n  }\n\n  .meta strong {\n    color: var(--color-text-primary, #111827);\n  }\n</style>\n"],"names":["async","params","pathId","path","lessonId","lesson","loading","$.state","error","progress","onMount","lessons","getLessonsForPath","$$props","data","$.set","find","l","id","getLearningPathProgress","e","message","completeLesson","updated","markLessonComplete","$.get","div","root","div_1","__click","goto","base","div_2","root_1","div_3","root_3","div_4","root_5","header","$.first_child","fragment_2","div_5","h1","p","root_7","$.template_effect","$.set_text","text_2","subtitle","consequent_3","div_6","button_1","p_1","root_8","text_3","currentLesson","$$render","consequent_4","section","ul","li","li_1","li_2","root_9","text_6","difficulty","consequent_5","li_3","root_10","$0","text_7","vocabularyIds","join","length","consequent_6","ul_1","$.sibling","fragment_3","$.each","objectives","objective","li_4","root_12","consequent_7","ul_2","fragment_4","grammarTopics","topic","li_5","root_14","consequent_8","text_1","title","duration","alternate","consequent_2","consequent_1","alternate_1","consequent","alternate_2"],"mappings":"+bAAO,iEAAaA,OAASC,aAAA,CAAgBC,OAAQD,EAAOE,KAAMC,SAAUH,EAAOI,gvCCU7EC,EAAUC,GAAO,GACjBC,EAAQD,EAAsB,MAC9BF,EAASE,EAAsB,MAC/BE,EAAWF,EAAoC,MAEnDG,EAAOV,UACD,UACIW,QAAgBC,EAAiBC,EAAAC,KAAMZ,QAC7Ca,EAAAV,EAASM,EAAQK,KAAMC,GAAMA,EAAEC,KAAEL,EAAAC,KAAUV,WAAa,MAAI,KAC5DK,QAAiBU,EAAuBN,EAAAC,KAAMZ,SAAM,EACtD,OAASkB,GACPL,EAAAP,EAASY,EAAYC,SAAW,yBAAuB,EACzD,CAAA,QACEN,EAAAT,GAAU,EACZ,IAKaN,eAAAsB,UACRjB,GAAM,OACL,MAAAkB,QAAgBC,EAAkBX,EAAAC,KAAMZ,OAAMuB,EAAEpB,GAAOa,IAC7DH,EAAAN,EAAWc,GAAO,EACpB,KAGDG,EAAGC,IACDC,IADFF,KACEE,GACsBC,QAXP,IAASC,EAAI,GAAIC,wBAAyB7B,YAUzD0B,WAAAA,EAAG,aAKDI,EAAGC,QAAHD,qCAEAE,EAAGC,QAAHD,GAAG,KAAHA,eAAyB1B,SAAzB0B,qCAEAE,EAAGC,QAAHD,oBAEAE,EAAMC,EAAAC,GACJC,IADFH,GAGII,MAFFD,GAAG,OAEDC,GAAE,KAAFA,WAAAA,EAAE,aACmBC,EAACC,QAADD,GAAC,KAADA,GAAoBE,EAAA,IAAAC,EAAAC,EAAAtB,EAAApB,GAAO2C,eAA3BL,YAAjBlB,EAAApB,GAAO2C,YAAQC,OAHrBR,GAKA,IAAAS,IALAT,EAAG,GAMDU,IADFD,GACEC,EAA0BtB,QAASP,UAAnC6B,EAAM,aAEJC,EAACC,QAADD,KAAAA,GAAuDP,EAAA,IAAAC,EAAAQ,EAAA,0CAAA7B,EAAAhB,GAAS8C,eAAa,WAA7EH,cADE3C,IAAQ+C,EAAAC,OAFdP,KANFZ,GAcA,IAAAoB,IAdApB,EAAM,GAgBJqB,MAFFD,GAAO,GAGHE,IADFD,SACEC,MAAAA,GACA,IAAAC,IADAD,EAAE,SACFC,MAAAA,WAAAA,EAAE,aACqBC,EAAEC,UAAFD,MAAAA,GAA4BjB,EAAA,IAAAC,EAAAkB,EAAA,IAAAvC,EAAApB,GAAO4D,YAAU,WAA7CH,YAAnBrC,EAAApB,GAAO4D,cAAUC,4BAEnBC,EAAEC,UAAFD,MAAAA,GAAqCtB,EAAAwB,GAAAvB,EAAAwB,EAAA,IAAAD,GAAA,MAAA,CAAA,IAAA5C,EAAApB,GAAOkE,cAAcC,KAAK,YAA/DL,cADE9D,GAAOkE,eAAeE,UAAMC,OAJlCf,WAAAA,EAAE,mBAUAgB,EAAEC,EAAArC,EAAAsC,GAAA,GAAFC,EAAAH,EAAE,GAAA,IAAAlD,EACMpB,GAAO0E,gBAAcC,SACzBC,EAAEC,QAAFD,GAAE,KAAFA,eAAID,SAAJC,OAFJN,qBAFEtE,GAAO0E,YAAYN,UAAMU,kCAU3BC,EAAER,EAAArC,EAAA8C,GAAA,GAAFP,EAAAM,EAAE,GAAA,IAAA3D,EACMpB,GAAOiF,mBAAiBC,SAC5BC,EAAEC,QAAFD,GAAE,KAAFA,eAAID,SAAJC,OAFJJ,qBAFE/E,GAAOiF,eAAeb,UAAMiB,OAlBlChC,UAXQZ,EAAA6C,EAAAlE,EAAApB,GAAOuF,sBAcqB1F,QAAM,gBACPG,GAAOwF,UAAY,IAAE,8BArBhDxF,GAAMmD,EAAAsC,GAAA,KAAAC,0BAFPvF,GAAKgD,EAAAwC,GAAAxC,EAAAyC,GAAA,0BAFV3F,GAAOkD,EAAA0C,GAAA1C,EAAA2C,GAAA,OALbzE,OAAAA,MAFD"}