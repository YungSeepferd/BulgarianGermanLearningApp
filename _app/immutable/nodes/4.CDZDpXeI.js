import{f as e,a,s as r,t,c as s}from"../chunks/X8DggyAK.js";import{o as n}from"../chunks/D1roHGRK.js";import{y as l,D as i,z as o,B as d,F as c,C as g,A as u,I as v,K as m,G as h,L as p,J as f,M as y,N as k}from"../chunks/04JSYR5_.js";import{i as b}from"../chunks/CTTefEun.js";import{b as w,c as $}from"../chunks/CPCi8ybY.js";import{D as L,v as B,a as P}from"../chunks/FuNYA0xg.js";import{V as j,A as z}from"../chunks/CH4LTDro.js";var N=e('<div><!></div> <div class="button-container svelte-8s3559"><!> <!></div>',1),S=e('<div class="completion-message svelte-8s3559"><h2 class="svelte-8s3559"> </h2> <p class="svelte-8s3559"> </p> <!></div>'),A=e('<p class="svelte-8s3559"> </p> <!>',1),D=e('<p class="svelte-8s3559"> </p>'),T=e('<p class="svelte-8s3559"> </p> <!>',1),E=e('<div class="loading-message svelte-8s3559"><!></div>'),G=e('<div class="learn-page svelte-8s3559"><div class="progress-container svelte-8s3559"><div class="progress-bar svelte-8s3559"></div> <div class="progress-text svelte-8s3559"> </div></div> <div class="content-container svelte-8s3559"><!></div></div>');function M(e,M){l(M,!0);let x=i(0),C=i(!1),I=i(!1),V=i(o([])),W=i(!1),F=i(null),O=i(null);function _(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function K(e){const a=(e.german||"").trim();if(!a)return a;if(/^(der|die|das|ein|eine|einen|einem|einer|eines)\s/i.test(a)){const[r,...t]=a.split(/\s+/),s=t.join(" ");return[r,"noun"===e.partOfSpeech?_(s):s].filter(Boolean).join(" ").trim()}const r="noun"===e.partOfSpeech?_(a):a,t=(s=e.grammar?.gender,n=e.grammar?.verbPartnerId,n||s&&{masculine:"der",feminine:"die",neuter:"das"}[s]||null||("noun"===e.partOfSpeech?"der":null));var s,n;return t?`${t} ${r}`:r}const J=f(()=>"DE_BG"===P.languageMode?{heading:"Lernkarten",hard:"ðŸ”´ Schwer",easy:"ðŸŸ¢ Leicht",completedTitle:"ðŸŽ‰ GroÃŸartige Arbeit!",completedBody:"Du hast diese Lerneinheit beendet.",startNew:"Neue Einheit starten",loading:"Vokabular wird geladen...",retry:"Erneut versuchen",mastered:"Keine WÃ¶rter zu Ã¼ben. Alles gemeistert!"}:{heading:"ÐšÐ°Ñ€Ñ‚Ð¸ Ð·Ð° ÑƒÑ‡ÐµÐ½Ðµ",hard:"ðŸ”´ Ð¢Ñ€ÑƒÐ´Ð½Ð¾",easy:"ðŸŸ¢ Ð›ÐµÑÐ½Ð¾",completedTitle:"ðŸŽ‰ Ð¡Ñ‚Ñ€Ð°Ñ…Ð¾Ñ‚Ð½Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ð°!",completedBody:"Ð—Ð°Ð²ÑŠÑ€ÑˆÐ¸ Ñ‚Ð°Ð·Ð¸ ÑÐµÑÐ¸Ñ Ð·Ð° ÑƒÑ‡ÐµÐ½Ðµ.",startNew:"Ð—Ð°Ð¿Ð¾Ñ‡Ð½Ð¸ Ð½Ð¾Ð²Ð° ÑÐµÑÐ¸Ñ",loading:"Ð—Ð°Ñ€ÐµÐ¶Ð´Ð°Ð½Ðµ Ð½Ð° Ñ€ÐµÑ‡Ð½Ð¸ÐºÐ°...",retry:"ÐžÐ¿Ð¸Ñ‚Ð°Ð¹ Ð¾Ñ‚Ð½Ð¾Ð²Ð¾",mastered:"ÐÑÐ¼Ð° Ð´ÑƒÐ¼Ð¸ Ð·Ð° ÑƒÐ¿Ñ€Ð°Ð¶Ð½ÐµÐ½Ð¸Ðµ. Ð’ÑÐ¸Ñ‡ÐºÐ¾ Ðµ ÑƒÑÐ²Ð¾ÐµÐ½Ð¾!"});async function U(){try{h(O,null),L.log("LearnPage","Starting learning session"),await B.initialize();const e=B.getVocabulary().map(e=>({...e,german:K(e)}));if(0===e.length)return h(O,"No vocabulary loaded. Please check the data files and try again."),h(C,!1),h(I,!1),void h(V,[],!0);L.log("LearnPage","Vocabulary loaded",{totalWords:e.length}),h(V,[...e].sort(()=>.5-Math.random()),!0),L.log("LearnPage","Session cards prepared",{cardCount:g(V).length}),h(x,0),h(C,!0),h(I,!1),h(W,!1),h(F,null),L.log("LearnPage","Session started",{cardCount:g(V).length,firstCard:g(V)[0]?.id})}catch(e){L.error("LearnPage","Failed to start session",e),h(O,"Failed to start session. Please retry."),h(C,!1),h(V,[],!0)}}function q(){if(!g(C)||g(W))return;h(W,!0),h(F,"easy");const e=g(V)[g(x)];if(e){const a=e.xp_value||10;L.log("LearnPage","Word marked as easy",{wordId:e.id,xpAdded:a})}setTimeout(()=>{Q(),h(W,!1),h(F,null)},600)}function H(){g(C)&&!g(W)&&(h(W,!0),h(F,"hard"),L.log("LearnPage","Word marked as hard",{wordId:g(V)[g(x)]?.id}),setTimeout(()=>{Q(),h(W,!1),h(F,null)},600))}function Q(){g(x)<g(V).length-1?k(x):(h(C,!1),h(I,!0),L.log("LearnPage","Session completed"))}function R(){const e=g(V)[g(x)];return e?{...e,literalBreakdown:e.literalBreakdown??e.metadata?.components?.map(e=>({segment:e.part,literal:e.meaning,grammarTag:""}))??[]}:null}n(()=>{U()});var X=G(),Y=u(X),Z=u(Y),ee=v(Z,2),ae=u(ee,!0);m(ee),m(Y);var re=v(Y,2),te=u(re),se=e=>{var s=N(),n=p(s),l=u(n);{let e=f(R),a=f(()=>"DE_BG"===P.languageMode?"DE->BG":"BG->DE");j(l,{get item(){return g(e)},variant:"flashcard",get direction(){return g(a)},showMetadata:!0,showActions:!1,showTags:!1})}m(n);var i=v(n,2),o=u(i);z(o,{variant:"secondary",size:"lg",get disabled(){return g(W)},onclick:H,get label(){return g(J).hard},children:(e,s)=>{y();var n=t();d(()=>r(n,g(J).hard)),a(e,n)},$$slots:{default:!0}});var c=v(o,2);z(c,{variant:"primary",size:"lg",get disabled(){return g(W)},onclick:q,get label(){return g(J).easy},children:(e,s)=>{y();var n=t();d(()=>r(n,g(J).easy)),a(e,n)},$$slots:{default:!0}}),m(i),d(()=>$(n,1,`flashcard-wrapper ${g(F)??""}`,"svelte-8s3559")),a(e,s)},ne=e=>{var n=s(),l=p(n),i=e=>{var s=S(),n=u(s),l=u(n,!0);m(n);var i=v(n,2),o=u(i,!0);m(i);var c=v(i,2);z(c,{variant:"primary",size:"lg",onclick:U,get label(){return g(J).startNew},children:(e,s)=>{y();var n=t();d(()=>r(n,g(J).startNew)),a(e,n)},$$slots:{default:!0}}),m(s),d(()=>{r(l,g(J).completedTitle),r(o,g(J).completedBody)}),a(e,s)},o=e=>{var n=E(),l=u(n),i=e=>{var s=A(),n=p(s),l=u(n,!0);m(n);var i=v(n,2);z(i,{variant:"secondary",size:"lg",onclick:U,get label(){return g(J).retry},children:(e,s)=>{y();var n=t();d(()=>r(n,g(J).retry)),a(e,n)},$$slots:{default:!0}}),d(()=>r(l,g(O))),a(e,s)},o=e=>{var n=s(),l=p(n),i=e=>{var t=D(),s=u(t,!0);m(t),d(()=>r(s,g(J).loading)),a(e,t)},o=e=>{var s=T(),n=p(s),l=u(n,!0);m(n);var i=v(n,2);z(i,{variant:"primary",size:"lg",onclick:U,get label(){return g(J).startNew},children:(e,s)=>{y();var n=t();d(()=>r(n,g(J).startNew)),a(e,n)},$$slots:{default:!0}}),d(()=>r(l,g(J).mastered)),a(e,s)};b(l,e=>{0===g(V).length?e(i):e(o,!1)},!0),a(e,n)};b(l,e=>{g(O)?e(i):e(o,!1)}),m(n),a(e,n)};b(l,e=>{g(I)?e(i):e(o,!1)},!0),a(e,n)};b(te,e=>{g(C)&&R()?e(se):e(ne,!1)}),m(re),m(X),d((e,a)=>{w(Z,e),r(ae,a)},[()=>`width: ${0===g(V).length?0:Math.round((g(x)+1)/g(V).length*100)}%`,function(){return 0===g(V).length?"0/0":`${g(x)+1}/${g(V).length}`}]),a(e,X),c()}export{M as component};
//# sourceMappingURL=4.CDZDpXeI.js.map
