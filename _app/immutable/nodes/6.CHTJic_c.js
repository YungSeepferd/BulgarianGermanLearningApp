import{f as e,a,s as t,t as r,c as n}from"../chunks/UthrXGob.js";import{o as s}from"../chunks/Br0dZwy2.js";import{D as l,K as i,F as o,I as d,L as c,J as v,G as g,O as u,Q as p,M as m,R as h,P as f,Y as y,Z as k}from"../chunks/BVnrsRMV.js";import{i as b}from"../chunks/DkKxGmb5.js";import{b as w,c as $}from"../chunks/6swH9x4L.js";import{D as L,v as P,a as B}from"../chunks/BXYAvhHx.js";import{V as j,A as D}from"../chunks/Cq3r-Znd.js";var N=e('<div><!></div> <div class="button-container svelte-1ntlv2v"><!> <!></div>',1),S=e('<div class="completion-message svelte-1ntlv2v"><h2 class="svelte-1ntlv2v"> </h2> <p class="svelte-1ntlv2v"> </p> <!></div>'),z=e('<p class="svelte-1ntlv2v"> </p> <!>',1),F=e('<p class="svelte-1ntlv2v"> </p>'),T=e('<p class="svelte-1ntlv2v"> </p> <!>',1),A=e('<div class="loading-message svelte-1ntlv2v"><!></div>'),E=e('<div class="learn-page svelte-1ntlv2v"><div class="progress-container svelte-1ntlv2v"><div class="progress-bar svelte-1ntlv2v"></div> <div class="progress-text svelte-1ntlv2v"> </div></div> <div class="content-container svelte-1ntlv2v"><!></div></div>');function G(e,G){l(G,!0);let M=i(0),C=i(!1),x=i(!1),I=i(o([])),O=i(!1),V=i(null),W=i(null),_=i(!1);function K(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function J(e){const a=(e.german||"").trim();if(!a)return a;if(/^(der|die|das|ein|eine|einen|einem|einer|eines)\s/i.test(a)){const[t,...r]=a.split(/\s+/),n=r.join(" ");return[t,"noun"===e.partOfSpeech?K(n):n].filter(Boolean).join(" ").trim()}const t="noun"===e.partOfSpeech?K(a):a,r=(n=e.grammar?.gender,s=e.grammar?.verbPartnerId,s||n&&{masculine:"der",feminine:"die",neuter:"das"}[n]||null||("noun"===e.partOfSpeech?"der":null));var n,s;return r?`${r} ${t}`:t}const Q=f(()=>"DE_BG"===B.languageMode?{heading:"Lernkarten",hard:"ðŸ”´ Schwer",easy:"ðŸŸ¢ Leicht",completedTitle:"ðŸŽ‰ GroÃŸartige Arbeit!",completedBody:"Du hast diese Lerneinheit beendet.",startNew:"Neue Einheit starten",loading:"Vokabular wird geladen...",retry:"Erneut versuchen",mastered:"Keine WÃ¶rter zu Ã¼ben. Alles gemeistert!"}:{heading:"ÐšÐ°Ñ€Ñ‚Ð¸ Ð·Ð° ÑƒÑ‡ÐµÐ½Ðµ",hard:"ðŸ”´ Ð¢Ñ€ÑƒÐ´Ð½Ð¾",easy:"ðŸŸ¢ Ð›ÐµÑÐ½Ð¾",completedTitle:"ðŸŽ‰ Ð¡Ñ‚Ñ€Ð°Ñ…Ð¾Ñ‚Ð½Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ð°!",completedBody:"Ð—Ð°Ð²ÑŠÑ€ÑˆÐ¸ Ñ‚Ð°Ð·Ð¸ ÑÐµÑÐ¸Ñ Ð·Ð° ÑƒÑ‡ÐµÐ½Ðµ.",startNew:"Ð—Ð°Ð¿Ð¾Ñ‡Ð½Ð¸ Ð½Ð¾Ð²Ð° ÑÐµÑÐ¸Ñ",loading:"Ð—Ð°Ñ€ÐµÐ¶Ð´Ð°Ð½Ðµ Ð½Ð° Ñ€ÐµÑ‡Ð½Ð¸ÐºÐ°...",retry:"ÐžÐ¿Ð¸Ñ‚Ð°Ð¹ Ð¾Ñ‚Ð½Ð¾Ð²Ð¾",mastered:"ÐÑÐ¼Ð° Ð´ÑƒÐ¼Ð¸ Ð·Ð° ÑƒÐ¿Ñ€Ð°Ð¶Ð½ÐµÐ½Ð¸Ðµ. Ð’ÑÐ¸Ñ‡ÐºÐ¾ Ðµ ÑƒÑÐ²Ð¾ÐµÐ½Ð¾!"});async function R(){try{m(W,null),L.log("LearnPage","Starting learning session"),await P.initialize();const e=P.getVocabulary().map(e=>({...e,german:J(e)}));if(0===e.length)return m(W,"No vocabulary loaded. Please check the data files and try again."),m(C,!1),m(x,!1),void m(I,[],!0);L.log("LearnPage","Vocabulary loaded",{totalWords:e.length}),m(I,[...e].sort(()=>.5-Math.random()),!0),L.log("LearnPage","Session cards prepared",{cardCount:v(I).length}),m(M,0),m(C,!0),m(x,!1),m(O,!1),m(V,null),L.log("LearnPage","Session started",{cardCount:v(I).length,firstCard:v(I)[0]?.id})}catch(e){L.error("LearnPage","Failed to start session",e),m(W,"Failed to start session. Please retry."),m(C,!1),m(I,[],!0)}}function U(){if(!v(C)||v(O))return;m(O,!0),m(V,"easy");const e=v(I)[v(M)];if(e){const a=e.xp_value||10;L.log("LearnPage","Word marked as easy",{wordId:e.id,xpAdded:a})}setTimeout(()=>{Z(),m(O,!1),m(V,null)},600)}function Y(){v(C)&&!v(O)&&(m(O,!0),m(V,"hard"),L.log("LearnPage","Word marked as hard",{wordId:v(I)[v(M)]?.id}),setTimeout(()=>{Z(),m(O,!1),m(V,null)},600))}function Z(){v(M)<v(I).length-1?(k(M),m(_,!1)):(m(C,!1),m(x,!0),L.log("LearnPage","Session completed"))}function q(){m(_,!v(_)),L.log("LearnPage","Flashcard flipped",{isFlipped:v(_)})}function H(){const e=v(I)[v(M)];return e?{...e,literalBreakdown:e.literalBreakdown??e.metadata?.components?.map(e=>({segment:e.part,literal:e.meaning,grammarTag:""}))??[]}:null}s(()=>{R()});var X=E(),ee=g(X),ae=g(ee),te=u(ae,2),re=g(te,!0);p(te),p(ee);var ne=u(ee,2),se=g(ne),le=e=>{var n=N(),s=h(n),l=g(s);{let e=f(H),a=f(()=>"DE_BG"===B.languageMode?"DE->BG":"BG->DE");j(l,{get item(){return v(e)},variant:"flashcard",get direction(){return v(a)},get isFlipped(){return v(_)},showMetadata:!0,showActions:!1,showTags:!1,onFlip:q})}p(s);var i=u(s,2),o=g(i);D(o,{variant:"secondary",size:"lg",get disabled(){return v(O)},onclick:Y,get label(){return v(Q).hard},children:(e,n)=>{y();var s=r();d(()=>t(s,v(Q).hard)),a(e,s)},$$slots:{default:!0}});var c=u(o,2);D(c,{variant:"primary",size:"lg",get disabled(){return v(O)},onclick:U,get label(){return v(Q).easy},children:(e,n)=>{y();var s=r();d(()=>t(s,v(Q).easy)),a(e,s)},$$slots:{default:!0}}),p(i),d(()=>$(s,1,`flashcard-wrapper ${v(V)??""}`,"svelte-1ntlv2v")),a(e,n)},ie=e=>{var s=n(),l=h(s),i=e=>{var n=S(),s=g(n),l=g(s,!0);p(s);var i=u(s,2),o=g(i,!0);p(i);var c=u(i,2);D(c,{variant:"primary",size:"lg",onclick:R,get label(){return v(Q).startNew},children:(e,n)=>{y();var s=r();d(()=>t(s,v(Q).startNew)),a(e,s)},$$slots:{default:!0}}),p(n),d(()=>{t(l,v(Q).completedTitle),t(o,v(Q).completedBody)}),a(e,n)},o=e=>{var s=A(),l=g(s),i=e=>{var n=z(),s=h(n),l=g(s,!0);p(s);var i=u(s,2);D(i,{variant:"secondary",size:"lg",onclick:R,get label(){return v(Q).retry},children:(e,n)=>{y();var s=r();d(()=>t(s,v(Q).retry)),a(e,s)},$$slots:{default:!0}}),d(()=>t(l,v(W))),a(e,n)},o=e=>{var s=n(),l=h(s),i=e=>{var r=F(),n=g(r,!0);p(r),d(()=>t(n,v(Q).loading)),a(e,r)},o=e=>{var n=T(),s=h(n),l=g(s,!0);p(s);var i=u(s,2);D(i,{variant:"primary",size:"lg",onclick:R,get label(){return v(Q).startNew},children:(e,n)=>{y();var s=r();d(()=>t(s,v(Q).startNew)),a(e,s)},$$slots:{default:!0}}),d(()=>t(l,v(Q).mastered)),a(e,n)};b(l,e=>{0===v(I).length?e(i):e(o,!1)},!0),a(e,s)};b(l,e=>{v(W)?e(i):e(o,!1)}),p(s),a(e,s)};b(l,e=>{v(x)?e(i):e(o,!1)},!0),a(e,s)};b(se,e=>{v(C)&&H()?e(le):e(ie,!1)}),p(ne),p(X),d((e,a)=>{w(ae,e),t(re,a)},[()=>`width: ${0===v(I).length?0:Math.round((v(M)+1)/v(I).length*100)}%`,function(){return 0===v(I).length?"0/0":`${v(M)+1}/${v(I).length}`}]),a(e,X),c()}export{G as component};
//# sourceMappingURL=6.CHTJic_c.js.map
