var e,t,s,n,r,i,o,a,l,c,u,d,p,v,h,f,g,m,y,b,w,k,$,L,x,_,C,A,D,P,S,M,j,E,T,F,W,O,B,I,N,R,z,V,U,G,q,K,Z,H,Y,X,J,Q,ee,te,se,ne,re,ie,oe,ae,le,ce,ue,de,pe,ve,he,fe,ge,me,ye,be,we,ke,$e,Le,xe,_e,Ce,Ae,De,Pe,Se,Me,je,Ee,Te,Fe,We,Oe,Be,Ie,Ne,Re=Object.defineProperty,ze=Object.getPrototypeOf,Ve=Reflect.get,Ue=e=>{throw TypeError(e)},Ge=(e,t,s)=>((e,t,s)=>t in e?Re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s),qe=(e,t,s)=>t.has(e)||Ue("Cannot "+s),Ke=(e,t,s)=>(qe(e,t,"read from private field"),s?s.call(e):t.get(e)),Ze=(e,t,s)=>t.has(e)?Ue("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),He=(e,t,s,n)=>(qe(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),Ye=(e,t,s)=>(qe(e,t,"access private method"),s);import{d as Xe,f as Je,s as Qe,a as et,c as tt,q as st,r as nt,v as rt,m as it,u as ot,o as at,t as lt}from"../chunks/WXzogbS2.js";import{aO as ct,h as ut,a as dt,bg as pt,b as vt,D as ht,G as ft,Q as gt,O as mt,J as yt,K as bt,I as wt,P as kt,M as $t,L as Lt,Z as xt,R as _t,F as Ct,u as At,bh as Dt,ah as Pt,aU as St,bi as Mt,bj as jt,bk as Et,S as Tt,k as Ft,t as Wt,_ as Ot,bl as Bt,bm as It,bd as Nt,Y as Rt,be as zt}from"../chunks/BdPJ2Ayj.js";import{i as Vt}from"../chunks/Sk65GWiF.js";import{e as Ut,r as Gt,a as qt,c as Kt,i as Zt,s as Ht,b as Yt,f as Xt,d as Jt}from"../chunks/CpbCYuaZ.js";import{p as Qt,r as es,b as ts}from"../chunks/DxG0BWd-.js";import{t as ss}from"../chunks/Cz2q-W0Q.js";import{a as ns,o as rs,i as is,u as os,V as as,j as ls,n as cs,P as us,k as ds,L as ps,m as vs,_ as hs,p as fs,v as gs,q as ms,r as ys,w as bs,x as ws,g as ks,e as $s}from"../chunks/Bq4FSag3.js";import{b as Ls,a as xs}from"../chunks/t2loJsdl.js";import{s as _s}from"../chunks/Cl3HDYrZ.js";import{c as Cs}from"../chunks/cxm2XN8C.js";import{e as As,B as Ds}from"../chunks/DZZw8yEQ.js";import{B as Ps}from"../chunks/e8g_uvw4.js";function Ss(){return Symbol(ct)}var Ms=Je('<span class="vocabulary-tag svelte-10g5if6"> </span>'),js=Je('<span class="vocabulary-tag more svelte-10g5if6"> </span>'),Es=Je("<!> <!>",1),Ts=Je('<span class="vocabulary-tag svelte-10g5if6"> </span>'),Fs=Je('<button class="show-more-button svelte-10g5if6"> </button>'),Ws=Je("<!> <!>",1),Os=Je('<li class="objective-item svelte-10g5if6"><label class="objective-checkbox svelte-10g5if6"><input type="checkbox" class="svelte-10g5if6"/> <span> </span></label></li>'),Bs=Je('<span class="part-of-speech svelte-10g5if6"> </span>'),Is=Je('<span class="difficulty-indicator svelte-10g5if6"> </span>'),Ns=Je('<div role="button" tabindex="0"><span class="vocab-german svelte-10g5if6"> </span> <span class="vocab-bulgarian svelte-10g5if6"> </span></div>'),Rs=Je('<div class="lesson-card-container svelte-10g5if6"><div tabindex="0" role="button"><div class="lesson-card-front svelte-10g5if6"><div class="lesson-header svelte-10g5if6"><div> </div> <div class="lesson-type-icon svelte-10g5if6"> </div></div> <h3 class="lesson-title svelte-10g5if6"> </h3> <p class="lesson-description svelte-10g5if6"> </p> <div class="lesson-progress svelte-10g5if6"><div class="progress-bar-container svelte-10g5if6"><div class="progress-bar svelte-10g5if6" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <span class="progress-text svelte-10g5if6"> </span></div> <div class="lesson-vocabulary-preview svelte-10g5if6"><div class="vocabulary-tags svelte-10g5if6"><!></div></div> <div class="lesson-actions svelte-10g5if6"><button class="action-button primary svelte-10g5if6" aria-label="View lesson details">View Details</button> <button class="action-button secondary svelte-10g5if6" aria-label="Start this lesson">‚ñ∂Ô∏è Start</button></div></div> <div class="lesson-card-back svelte-10g5if6"><div class="lesson-header svelte-10g5if6"><button class="back-button svelte-10g5if6" aria-label="Back to lesson overview">‚Üê Back</button> <div> </div></div> <h3 class="lesson-title svelte-10g5if6"> </h3> <div class="lesson-objectives svelte-10g5if6"><h4 class="svelte-10g5if6">Learning Objectives</h4> <ul class="objectives-list svelte-10g5if6"></ul></div> <div class="lesson-vocabulary-details svelte-10g5if6"><h4 class="svelte-10g5if6"> </h4> <div class="vocabulary-navigation svelte-10g5if6"><button aria-label="Previous vocabulary item" class="svelte-10g5if6">‚óÄÔ∏è</button> <span class="vocabulary-counter svelte-10g5if6"> </span> <button aria-label="Next vocabulary item" class="svelte-10g5if6">‚ñ∂Ô∏è</button></div> <div class="vocabulary-card svelte-10g5if6"><div class="vocabulary-language german svelte-10g5if6"> </div> <div class="vocabulary-language bulgarian svelte-10g5if6"> </div> <div class="vocabulary-meta svelte-10g5if6"><!> <!></div></div> <div class="vocabulary-list svelte-10g5if6"></div></div> <div class="lesson-actions svelte-10g5if6"><button class="action-button primary svelte-10g5if6" aria-label="Start this lesson">Start Lesson</button></div></div></div></div>');function zs(e,t){ht(t,!0);let s=Qt(t,"lesson",7),n=bt(!1),r=bt(0),i=bt(!1),o=kt(()=>s().vocabulary.map(e=>"string"==typeof e?{id:e,german:e.split("-")[0]||e,bulgarian:e.split("-")[1]||e,partOfSpeech:"noun",difficulty:1}:e&&"object"==typeof e?{id:e.id||`vocab-${Date.now()}`,german:e.german||e.bulgarian||"Unknown",bulgarian:e.bulgarian||e.german||"Unknown",partOfSpeech:e.partOfSpeech||"noun",difficulty:e.difficulty||1}:{id:`vocab-${Date.now()}`,german:"Unknown",bulgarian:"Unknown",partOfSpeech:"noun",difficulty:1})),a=kt(()=>yt(o).length>0?yt(o):[{id:"fallback-vocab",german:"Example",bulgarian:"–ü—Ä–∏–º–µ—Ä",partOfSpeech:"noun",difficulty:1}]),l=kt(()=>yt(a)[yt(r)]||yt(a)[0]),c=kt(()=>Math.round(s().objectives.filter(e=>e.isCompleted).length/s().objectives.length*100));function u(){$t(n,!yt(n))}function d(e){return{A1:"bg-green-100 text-green-800 border-green-300",A2:"bg-green-200 text-green-900 border-green-400",B1:"bg-blue-100 text-blue-800 border-blue-300",B2:"bg-blue-200 text-blue-900 border-blue-400",C1:"bg-purple-100 text-purple-800 border-purple-300"}[e]||"bg-gray-100 text-gray-800 border-gray-300"}var p=Rs(),v=ft(p);v.__keydown=e=>"Enter"===e.key||" "===e.key?u():null;var h=ft(v),f=ft(h),g=ft(f),m=ft(g);gt(g);var y=mt(g,2),b=ft(y,!0);gt(y),gt(f);var w=mt(f,2),k=ft(w,!0);gt(w);var $=mt(w,2),L=ft($,!0);gt($);var x=mt($,2),_=ft(x),C=ft(_);gt(_);var A=mt(_,2),D=ft(A);gt(A),gt(x);var P=mt(x,2),S=ft(P),M=ft(S),j=e=>{var t=Es(),s=_t(t);Ut(s,17,()=>yt(o).slice(0,5),Zt,(e,t)=>{var s=Ms(),n=ft(s,!0);gt(s),wt(()=>{Ht(s,"title",yt(t).german),Qe(n,yt(t).german)}),et(e,s)});var n=mt(s,2),r=e=>{var t=js(),s=ft(t);gt(t),wt(()=>Qe(s,"+"+(yt(o).length-5))),et(e,t)};Vt(n,e=>{yt(o).length>5&&e(r)}),et(e,t)},E=e=>{var t=Ws(),s=_t(t);Ut(s,17,()=>yt(o).slice(0,3),Zt,(e,t)=>{var s=Ts(),n=ft(s,!0);gt(s),wt(()=>{Ht(s,"title",yt(t).german),Qe(n,yt(t).german)}),et(e,s)});var n=mt(s,2),r=e=>{var t=Fs();t.__click=()=>$t(i,!0);var s=ft(t);gt(t),wt(()=>{Ht(t,"aria-label",`Show all ${yt(o).length} vocabulary items`),Qe(s,"+"+(yt(o).length-3))}),et(e,t)};Vt(n,e=>{yt(o).length>3&&e(r)}),et(e,t)};Vt(M,e=>{yt(i)?e(j):e(E,!1)}),gt(S),gt(P);var T=mt(P,2),F=ft(T);F.__click=u,mt(F,2).__click=()=>t.onStart?.(),gt(T),gt(h);var W=mt(h,2),O=ft(W),B=ft(O);B.__click=u;var I=mt(B,2),N=ft(I);gt(I),gt(O);var R=mt(O,2),z=ft(R,!0);gt(R);var V=mt(R,2),U=mt(ft(V),2);Ut(U,21,()=>s().objectives,e=>e.id,(e,t)=>{var n=Os(),r=ft(n),i=ft(r);Gt(i),i.__change=()=>{return e=yt(t).id,s().objectives=s().objectives.map(t=>t.id===e?{...t,isCompleted:!t.isCompleted}:t),void(s().updatedAt=new Date);var e};var o=mt(i,2);let a;var l=ft(o,!0);gt(o),gt(r),gt(n),wt(()=>{qt(i,yt(t).isCompleted),a=Kt(o,1,"svelte-10g5if6",null,a,{completed:yt(t).isCompleted}),Qe(l,yt(t).description)}),et(e,n)}),gt(U),gt(V);var G=mt(V,2),q=ft(G),K=ft(q);gt(q);var Z=mt(q,2),H=ft(Z);H.__click=function(){yt(r)>0&&xt(r,-1)};var Y=mt(H,2),X=ft(Y);gt(Y);var J=mt(Y,2);J.__click=function(){yt(r)<yt(o).length-1&&xt(r)},gt(Z);var Q=mt(Z,2),ee=ft(Q),te=ft(ee,!0);gt(ee);var se=mt(ee,2),ne=ft(se,!0);gt(se);var re=mt(se,2),ie=ft(re),oe=e=>{var t=Bs(),s=ft(t,!0);gt(t),wt(()=>Qe(s,yt(l).partOfSpeech)),et(e,t)};Vt(ie,e=>{yt(l)?.partOfSpeech&&e(oe)});var ae=mt(ie,2),le=e=>{var t=Is(),s=ft(t,!0);gt(t),wt(e=>Qe(s,e),[()=>"‚≠ê".repeat(yt(l).difficulty)]),et(e,t)};Vt(ae,e=>{yt(l)?.difficulty&&e(le)}),gt(re),gt(Q);var ce=mt(Q,2);Ut(ce,21,()=>yt(o),Zt,(e,t,s)=>{var n=Ns();n.__click=()=>$t(r,s,!0),n.__keydown=e=>"Enter"===e.key?$t(r,s,!0):null;var i=ft(n),o=ft(i,!0);gt(i);var a=mt(i,2),l=ft(a,!0);gt(a),gt(n),wt(()=>{Kt(n,1,"vocabulary-list-item "+(s===yt(r)?"active":""),"svelte-10g5if6"),Qe(o,yt(t)?.german||"Unknown"),Qe(l,yt(t)?.bulgarian||"Unknown")}),et(e,n)}),gt(ce),gt(G);var ue=mt(G,2);ft(ue).__click=()=>t.onStart?.(),gt(ue),gt(W),gt(v),gt(p),wt((e,t,i)=>{Kt(v,1,"lesson-card "+(yt(n)?"flipped":""),"svelte-10g5if6"),Ht(v,"aria-label",`Lesson: ${s().title}`),Kt(g,1,`lesson-badge ${e??""}`,"svelte-10g5if6"),Qe(m,`${s().difficulty??""} ‚Ä¢ ${s().duration??""} min`),Ht(y,"aria-label",`Lesson type: ${s().type}`),Qe(b,t),Qe(k,s().title),Qe(L,s().description),Yt(C,`width: ${yt(c)}%`),Ht(C,"aria-valuenow",yt(c)),Qe(D,`${yt(c)??""}% complete`),Kt(I,1,`lesson-badge ${i??""}`,"svelte-10g5if6"),Qe(N,`${s().difficulty??""} ‚Ä¢ ${s().duration??""} min`),Qe(z,s().title),Qe(K,`Vocabulary (${yt(o).length??""})`),H.disabled=0===yt(r),Qe(X,`${yt(r)+1} / ${yt(o).length??""}`),J.disabled=yt(r)===yt(o).length-1,Qe(te,yt(l).german),Qe(ne,yt(l).bulgarian)},[()=>d(s().difficulty),()=>({vocabulary:"üìö",grammar:"üìñ",conversation:"üí¨",reading:"üìÑ",listening:"üîä",writing:"‚úçÔ∏è",culture:"üèõÔ∏è",mixed:"üîÑ",contextual:"üåê"}[s().type]||"üìö"),()=>d(s().difficulty)]),et(e,p),Lt()}Xe(["keydown","click","change"]);var Vs=Je('<div class="error-message"><div class="error-icon">‚ö†Ô∏è</div> <h3> </h3> <p> </p> <button class="btn btn-secondary"> </button></div>'),Us=Je('<div class="fallback-lesson-message svelte-7i5fkp"><div class="fallback-icon svelte-7i5fkp">‚ö†Ô∏è</div> <h3> </h3> <p> </p> <button class="btn btn-secondary"> </button></div>'),Gs=Je('<span class="lesson-tag svelte-7i5fkp"> </span>'),qs=Je('<span class="lesson-tag more svelte-7i5fkp"> </span>'),Ks=Je('<div class="lesson-tags svelte-7i5fkp"><!> <!></div>'),Zs=Je('<li class="objective-item svelte-7i5fkp"><label class="objective-checkbox svelte-7i5fkp"><input type="checkbox" class="svelte-7i5fkp"/> <span> </span></label></li>'),Hs=Je('<li class="objective-item more-objectives svelte-7i5fkp"><button class="svelte-7i5fkp"> </button></li>'),Ys=Je('<div class="lesson-objectives svelte-7i5fkp"><div class="objectives-header svelte-7i5fkp"><h3 class="svelte-7i5fkp"> </h3> <button class="toggle-objectives svelte-7i5fkp"> </button></div> <ul class="objectives-list svelte-7i5fkp"><!> <!></ul></div>'),Xs=Je('<span class="more-vocabulary svelte-7i5fkp"> </span>'),Js=Je('<div class="vocabulary-part-of-speech svelte-7i5fkp"> </div>'),Qs=Je('<div class="vocabulary-difficulty svelte-7i5fkp"> </div>'),en=Je('<div class="vocabulary-item svelte-7i5fkp"><div class="vocabulary-source svelte-7i5fkp"> </div> <div class="vocabulary-target svelte-7i5fkp"> </div> <!> <!></div>'),tn=Je('<div class="vocabulary-list svelte-7i5fkp"></div>'),sn=Je('<div class="lesson-vocabulary svelte-7i5fkp"><div class="vocabulary-header svelte-7i5fkp"><h3 class="svelte-7i5fkp"> </h3> <button class="toggle-vocabulary svelte-7i5fkp"> </button></div> <div class="vocabulary-preview svelte-7i5fkp"> <!></div> <!></div>'),nn=Je('<div class="section-meta svelte-7i5fkp"><span class="template-id"> </span></div>'),rn=Je('<div role="button" tabindex="0"><div class="section-overview-icon svelte-7i5fkp"> </div> <div class="section-overview-title svelte-7i5fkp"> </div> <div class="section-overview-type svelte-7i5fkp"> </div></div>'),on=Je('<div class="lesson-sections svelte-7i5fkp"><div class="sections-navigation svelte-7i5fkp"><button class="svelte-7i5fkp"> </button> <div class="section-indicator svelte-7i5fkp"> </div> <button class="svelte-7i5fkp"> </button></div> <div class="section-content svelte-7i5fkp"><div class="section-header svelte-7i5fkp"><div class="section-icon svelte-7i5fkp"> </div> <h2 class="section-title svelte-7i5fkp"> </h2> <div class="section-type svelte-7i5fkp"> </div></div> <div class="section-body svelte-7i5fkp"><div class="section-content-text svelte-7i5fkp"></div> <!></div></div> <div class="sections-overview svelte-7i5fkp"><h3 class="svelte-7i5fkp">Lesson Sections</h3> <div class="sections-list svelte-7i5fkp"></div></div></div>'),an=Je('<div class="no-sections-message svelte-7i5fkp"> </div>'),ln=Je('<div class="lesson-header svelte-7i5fkp"><div class="lesson-title-section svelte-7i5fkp"><div class="lesson-type-icon svelte-7i5fkp"> </div> <h1 class="lesson-title svelte-7i5fkp"> </h1></div> <div class="lesson-meta svelte-7i5fkp"><div> </div> <!></div></div> <div class="lesson-description svelte-7i5fkp"> </div> <div class="lesson-progress-container svelte-7i5fkp"><div class="progress-bar-container"><div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <span class="progress-text svelte-7i5fkp"> </span></div> <!> <!> <!> <div class="lesson-actions svelte-7i5fkp"><button class="btn btn-secondary"> </button> <button class="btn btn-primary"> </button></div>',1),cn=Je('<div class="generated-lesson-container svelte-7i5fkp"><!></div>');function un(e,t){function s(e){return"DE_BG"===ns.languageMode?e.german:e.bulgarian}ht(t,!0);let n=Qt(t,"lesson",7),r=bt(!1),i=bt(null);function o(e,t){console.error(`[${t}]`,e)}let a=bt(0),l=bt(!1),c=bt(!1);Ct({}),At(()=>{try{if(!n())throw new Error("Lesson data is required")}catch(e){o(e,"Failed to initialize GeneratedLesson component"),$t(r,!0),$t(i,e instanceof Error?e.message:"Invalid lesson data",!0)}});let u=kt(()=>{try{return n().sections&&0!==n().sections.length?n().sections:[{id:"default-section",title:"Lesson Content",content:n().content||"No content available",type:"summary",metadata:{}}]}catch(e){return o(e,"Failed to derive lesson sections"),$t(r,!0),$t(i,"Failed to load lesson sections"),[{id:"error-section",title:"Error",content:"Failed to load lesson content",type:"summary",metadata:{}}]}}),d=kt(()=>{try{return yt(u)[yt(a)]||null}catch(e){return o(e,"Failed to get current section"),$t(r,!0),$t(i,"Failed to load section content"),null}}),p=kt(()=>{try{return n().objectives&&0!==n().objectives.length?Math.round(n().objectives.filter(e=>e.isCompleted).length/n().objectives.length*100):0}catch(e){return o(e,"Failed to calculate completion percentage"),$t(r,!0),$t(i,"Failed to calculate progress"),0}}),v=kt(()=>{try{return n().vocabulary||[]}catch(e){return o(e,"Failed to load vocabulary items"),$t(r,!0),$t(i,"Failed to load vocabulary"),[]}}),h=kt(()=>{try{return yt(v).length>0}catch(e){return o(e,"Failed to check vocabulary availability"),!1}}),f=kt(()=>{try{return n().objectives&&n().objectives.length>0}catch(e){return o(e,"Failed to check objectives availability"),!1}}),g=kt(()=>{try{return yt(u).length>0}catch(e){return o(e,"Failed to check sections availability"),!1}}),m=kt(()=>{try{return!0===n().metadata?.fallback}catch(e){return o(e,"Failed to check fallback status"),!1}});function y(){try{yt(a)<yt(u).length-1&&xt(a)}catch(e){o(e,"Failed to navigate to next section"),$t(r,!0),$t(i,"Failed to navigate sections")}}function b(){try{yt(a)>0&&xt(a,-1)}catch(e){o(e,"Failed to navigate to previous section"),$t(r,!0),$t(i,"Failed to navigate sections")}}function w(e){return{introduction:"üìò",vocabulary:"üìö",grammar:"üìñ",exercise:"‚úèÔ∏è",cultural:"üèõÔ∏è",summary:"üìù",conversation:"üí¨",reading:"üìÑ",listening:"üîä",writing:"‚úçÔ∏è"}[e]||"üìñ"}function k(e){return names={introduction:ss("sections.introduction")||"Introduction",vocabulary:ss("sections.vocabulary")||"Vocabulary",grammar:ss("sections.grammar")||"Grammar",exercise:ss("sections.exercise")||"Exercise",cultural:ss("sections.cultural_note")||"Cultural Note",summary:ss("sections.summary")||"Summary",conversation:ss("sections.conversation")||"Conversation",reading:ss("sections.reading")||"Reading",listening:ss("sections.listening")||"Listening",writing:ss("sections.writing")||"Writing"},names[e]||e}var $=cn(),L=ft($),x=e=>{var t=Vs(),s=mt(ft(t),2),n=ft(s,!0);gt(s);var r=mt(s,2),o=ft(r,!0);gt(r);var a=mt(r,2);a.__click=()=>window.location.reload();var l=ft(a,!0);gt(a),gt(t),wt((e,t,s)=>{Qe(n,e),Qe(o,t),Qe(l,s)},[()=>ss("errors.lesson_load_error"),()=>yt(i)||ss("errors.unknown_error"),()=>ss("common.reload_page")]),et(e,t)},_=e=>{var t=tt(),$=_t(t),L=e=>{var t=Us(),s=mt(ft(t),2),r=ft(s,!0);gt(s);var i=mt(s,2),o=ft(i,!0);gt(i);var a=mt(i,2);a.__click=()=>window.location.reload();var l=ft(a,!0);gt(a),gt(t),wt((e,t)=>{Qe(r,e),Qe(o,n().description),Qe(l,t)},[()=>ss("lesson.unavailable"),()=>ss("common.try_again")]),et(e,t)},x=e=>{var t=ln(),m=_t(t),$=ft(m),L=ft($),x=ft(L,!0);gt(L);var _=mt(L,2),C=ft(_,!0);gt(_),gt($);var A=mt($,2),D=ft(A),P=ft(D);gt(D);var S=mt(D,2),M=e=>{var t=Ks(),s=ft(t);Ut(s,17,()=>n().metadata.tags.slice(0,3),Zt,(e,t)=>{var s=Gs(),n=ft(s,!0);gt(s),wt(()=>Qe(n,yt(t))),et(e,s)});var r=mt(s,2),i=e=>{var t=qs(),s=ft(t);gt(t),wt(()=>Qe(s,"+"+(n().metadata.tags.length-3))),et(e,t)};Vt(r,e=>{n().metadata.tags.length>3&&e(i)}),gt(t),et(e,t)};Vt(S,e=>{n().metadata?.tags&&n().metadata.tags.length>0&&e(M)}),gt(A),gt(m);var j=mt(m,2),E=ft(j,!0);gt(j);var T=mt(j,2),F=ft(T),W=ft(F);gt(F);var O=mt(F,2),B=ft(O);gt(O),gt(T);var I=mt(T,2),N=e=>{var t=Ys(),s=ft(t),a=ft(s),l=ft(a,!0);gt(a);var u=mt(a,2);u.__click=()=>$t(c,!yt(c));var d=ft(u,!0);gt(u),gt(s);var p=mt(s,2),v=ft(p);Ut(v,17,()=>yt(c)?n().objectives:n().objectives.slice(0,3),e=>e.id,(e,t)=>{var s=Zs(),a=ft(s),l=ft(a);Gt(l),l.__change=()=>function(e){try{if(!n().objectives)throw new Error("Lesson objectives are not available");n().objectives=n().objectives.map(t=>t.id===e?{...t,isCompleted:!t.isCompleted}:t),n().updatedAt=new Date}catch(t){o(t,"Failed to toggle objective"),$t(r,!0),$t(i,"Failed to update objective status")}}(yt(t).id);var c=mt(l,2);let u;var d=ft(c,!0);gt(c),gt(a),gt(s),wt(()=>{qt(l,yt(t).isCompleted),u=Kt(c,1,"svelte-7i5fkp",null,u,{completed:yt(t).isCompleted}),Qe(d,yt(t).description)}),et(e,s)});var h=mt(v,2),f=e=>{var t=Hs(),s=ft(t);s.__click=()=>$t(c,!0);var r=ft(s);gt(s),gt(t),wt(e=>Qe(r,`+${n().objectives.length-3} ${e??""}`),[()=>ss("common.more_objectives")]),et(e,t)};Vt(h,e=>{n().objectives.length>3&&!yt(c)&&e(f)}),gt(p),gt(t),wt((e,t)=>{Qe(l,e),Qe(d,t)},[()=>ss("sections.learning_objectives"),()=>yt(c)?ss("common.show_less"):ss("common.show_all")]),et(e,t)};Vt(I,e=>{yt(f)&&e(N)});var R=mt(I,2),z=e=>{var t=sn(),n=ft(t),r=ft(n),i=ft(r);gt(r);var o=mt(r,2);o.__click=()=>$t(l,!yt(l));var a=ft(o,!0);gt(o),gt(n);var c=mt(n,2),u=ft(c),d=mt(u),p=e=>{var t=Xs(),s=ft(t);gt(t),wt(e=>Qe(s,`+${yt(v).length-5} ${e??""}`),[()=>ss("common.more_words")]),et(e,t)};Vt(d,e=>{yt(v).length>5&&!yt(l)&&e(p)}),gt(c);var h=mt(c,2),f=e=>{var t=tn();Ut(t,21,()=>yt(v),e=>e.german,(e,t)=>{var n=en(),r=ft(n),i=ft(r,!0);gt(r);var o=mt(r,2),a=ft(o,!0);gt(o);var l=mt(o,2),c=e=>{var s=Js(),n=ft(s,!0);gt(s),wt(e=>Qe(n,e),[()=>{return{noun:"Noun",verb:"Verb",adjective:"Adjective",adverb:"Adverb",preposition:"Preposition",conjunction:"Conjunction"}[e=yt(t).partOfSpeech]||e;var e}]),et(e,s)};Vt(l,e=>{yt(t).partOfSpeech&&e(c)});var u=mt(l,2),d=e=>{var s=Qs(),n=ft(s,!0);gt(s),wt(e=>Qe(n,e),[()=>"‚≠ê".repeat(Math.round(yt(t).difficulty))]),et(e,s)};Vt(u,e=>{yt(t).difficulty&&e(d)}),gt(n),wt((e,t)=>{Qe(i,e),Qe(a,t)},[()=>s(yt(t)),()=>{return e=yt(t),"DE_BG"===ns.languageMode?e.bulgarian:e.german;var e}]),et(e,n)}),gt(t),et(e,t)};Vt(h,e=>{yt(l)&&e(f)}),gt(t),wt((e,t,s)=>{Qe(i,`${e??""} (${yt(v).length??""})`),Qe(a,t),Qe(u,`${s??""} `)},[()=>ss("sections.vocabulary"),()=>yt(l)?ss("common.show_less"):ss("common.show_all"),()=>{return e=yt(l)?yt(v).length:5,0===yt(v).length?"":yt(v).slice(0,e).map(e=>s(e)).join(", ");var e}]),et(e,t)};Vt(R,e=>{yt(h)&&e(z)});var V=mt(R,2),U=e=>{var t=on(),s=ft(t),n=ft(s);n.__click=b;var r=ft(n);gt(n);var i=mt(n,2),o=ft(i);gt(i);var l=mt(i,2);l.__click=y;var c=ft(l);gt(l),gt(s);var p=mt(s,2),v=ft(p),h=ft(v),f=ft(h,!0);gt(h);var g=mt(h,2),m=ft(g,!0);gt(g);var $=mt(g,2),L=ft($,!0);gt($),gt(v);var x=mt(v,2),_=ft(x),C=mt(_,2),A=e=>{var t=nn(),s=ft(t),n=ft(s);gt(s),gt(t),wt(()=>Qe(n,`Template: ${yt(d).metadata.templateId??""}`)),et(e,t)};Vt(C,e=>{yt(d).metadata?.templateId&&e(A)}),gt(x),gt(p);var D=mt(p,2),P=mt(ft(D),2);Ut(P,23,()=>yt(u),e=>e.id,(e,t,s)=>{var n=rn();n.__click=()=>$t(a,yt(s),!0),n.__keydown=e=>"Enter"===e.key||" "===e.key?$t(a,yt(s),!0):null;var r=ft(n),i=ft(r,!0);gt(r);var o=mt(r,2),l=ft(o,!0);gt(o);var c=mt(o,2),u=ft(c,!0);gt(c),gt(n),wt((e,r)=>{Kt(n,1,"section-overview-item "+(yt(s)===yt(a)?"active":""),"svelte-7i5fkp"),Qe(i,e),Qe(l,yt(t).title),Qe(u,r)},[()=>w(yt(t).type),()=>k(yt(t).type)]),et(e,n)}),gt(P),gt(D),gt(t),wt((e,t,s,i,p,v,h,g,y)=>{n.disabled=0===yt(a),Ht(n,"aria-label",e),Qe(r,`‚óÄÔ∏è ${t??""}`),Qe(o,`${s??""} ${yt(a)+1} ${i??""} ${yt(u).length??""}`),l.disabled=yt(a)===yt(u).length-1,Ht(l,"aria-label",p),Qe(c,`${v??""} ‚ñ∂Ô∏è`),Qe(f,h),Qe(m,yt(d).title),Qe(L,g),Ht(_,"innerhtml",y)},[()=>ss("common.previous_section"),()=>ss("common.previous"),()=>ss("common.section"),()=>ss("common.of"),()=>ss("common.next_section"),()=>ss("common.next"),()=>w(yt(d).type),()=>k(yt(d).type),()=>yt(d).content.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")]),et(e,t)},G=e=>{var t=an(),s=ft(t,!0);gt(t),wt(e=>Qe(s,e),[()=>ss("lesson.no_sections")]),et(e,t)};Vt(V,e=>{yt(g)?e(U):e(G,!1)});var q=mt(V,2),K=ft(q);K.__click=()=>window.history.back();var Z=ft(K,!0);gt(K);var H=mt(K,2);H.__click=()=>alert(ss("lesson.start_alert"));var Y=ft(H,!0);gt(H),gt(q),wt((e,t,s,r,i)=>{Ht(L,"aria-label",`Lesson type: ${n().type}`),Qe(x,e),Qe(C,n().title),Kt(D,1,`lesson-badge ${t??""}`,"svelte-7i5fkp"),Qe(P,`${n().difficulty??""} ‚Ä¢ ${n().duration??""} ${s??""}`),Qe(E,n().description),Yt(W,`width: ${yt(p)}%`),Ht(W,"aria-valuenow",yt(p)),Qe(B,`${yt(p)??""}% complete`),Qe(Z,r),Qe(Y,i)},[()=>({vocabulary:"üìö",grammar:"üìñ",conversation:"üí¨",reading:"üìÑ",listening:"üîä",writing:"‚úçÔ∏è",culture:"üèõÔ∏è",mixed:"üéØ",contextual:"üåç"}[n().type]||"üìö"),()=>({A1:"bg-green-100 text-green-800 border-green-300",A2:"bg-green-200 text-green-900 border-green-400",B1:"bg-blue-100 text-blue-800 border-blue-300",B2:"bg-blue-200 text-blue-900 border-blue-400",C1:"bg-purple-100 text-purple-800 border-purple-300"}[n().difficulty]||"bg-gray-100 text-gray-800 border-gray-300"),()=>ss("common.minutes"),()=>ss("common.back_to_lessons"),()=>ss("common.start_lesson")]),et(e,t)};Vt($,e=>{yt(m)?e(L):e(x,!1)},!0),et(e,t)};Vt(L,e=>{yt(r)?e(x):e(_,!1)}),gt($),et(e,$),Lt()}Xe(["click","change","keydown"]);const dn=rs({id:ps,german:ds().min(1).max(100),bulgarian:ds().min(1).max(100),partOfSpeech:us.default("noun"),difficulty:cs().min(1).max(5).default(1).describe("1-5 scale where 1 is easiest"),categories:ls(fs).min(1).default(["uncategorized"]),metadata:as.optional(),createdAt:os([vs(),ds().datetime().transform(e=>new Date(e))]).default(new Date).transform(e=>e instanceof Date?e:new Date(e)),updatedAt:os([vs(),ds().datetime().transform(e=>new Date(e))]).default(new Date).transform(e=>e instanceof Date?e:new Date(e)),isCommon:is().default(!1),isVerified:is().default(!1)}),pn=os([dn.omit({id:!0}),ps,ds().uuid()]),vn=hs(["A1","A2","B1","B2","C1"]),hn=hs(["vocabulary","grammar","conversation","reading","listening","writing","culture","mixed"]),fn=rs({id:ds().uuid(),description:ds().min(5).max(200),isCompleted:is().default(!1),createdAt:vs().default(new Date)}),gn=rs({tags:ls(ds()).default([]),prerequisites:ls(ps).default([]),relatedLessons:ls(ps).default([]),isPremium:is().default(!1)}).default({}),mn=rs({id:ps,title:ds().min(3).max(100),description:ds().min(10).max(1e3),difficulty:vn.default("A1"),type:hn.default("vocabulary"),duration:cs().min(5).max(120).default(15),vocabulary:ls(pn).default([]),objectives:ls(fn).default([]),content:ds().optional(),isCompleted:is().default(!1),completionPercentage:cs().min(0).max(100).default(0),createdAt:os([vs(),ds().datetime().transform(e=>new Date(e))]).default(new Date),updatedAt:os([vs(),ds().datetime().transform(e=>new Date(e))]).default(new Date),metadata:gn}).catch(e=>({id:`fallback-${Date.now()}`,title:"Invalid Lesson",description:"This lesson failed validation",difficulty:"A1",type:"vocabulary",duration:15,vocabulary:[],objectives:[],createdAt:new Date,updatedAt:new Date,metadata:{}}));const yn=new class{constructor(){this.lessons=[],this.vocabularyData=[],this.initialized=!1}async initialize(){if(!this.initialized)try{await gs.initialize();const e=await gs.getVocabulary();this.vocabularyData=e.map(e=>({...e,categories:this.normalizeCategories(e.categories),metadata:e.metadata??{},isCommon:e.isCommon??!1,isVerified:e.isVerified??!1,learningPhase:e.learningPhase??0,createdAt:e.createdAt??new Date,updatedAt:e.updatedAt??new Date,cefrLevel:this.normalizeCefrLevel(e.cefrLevel)})),this.initialized=!0}catch(e){throw this.vocabularyData=[],this.initialized=!1,e}}isInitialized(){return this.initialized}generateLessonFromVocabulary(e,t={}){if(!e||0===e.length)return this.createFallbackLesson("No vocabulary items provided");const{title:s,difficulty:n,type:r="vocabulary",description:i}=t,o=s||this.generateLessonTitle(e,r),a=n||this.determineLessonDifficulty(e),l=this.createLearningObjectives(e,a,r),c={id:crypto.randomUUID(),title:o,description:i||this.generateLessonDescription(e,a,r),difficulty:a,type:r,duration:this.calculateLessonDuration(e.length),vocabulary:e.map(e=>this.normalizeVocabularyItem(e)),objectives:l,isCompleted:!1,completionPercentage:0,createdAt:new Date,updatedAt:new Date,metadata:{tags:this.generateLessonTags(e,a,r),prerequisites:[],relatedLessons:[],isPremium:!1}};return this.validateLesson(c)}async generateLessonFromCriteria(e={}){try{this.initialized||await this.initialize();const t=this.queryVocabulary(e),s=(e.limit?t.slice(0,e.limit):t).map(e=>this.normalizeVocabularyItem(e));return this.generateLessonFromVocabulary(s,{title:e.title??"Untitled Lesson",difficulty:e.difficulty??"A1",type:e.type??"vocabulary",description:e.description??""})}catch(t){return this.createFallbackLesson("Failed to generate lesson from criteria")}}queryVocabulary(e){if(0===this.vocabularyData.length)return[];const t=e.difficulty?this.getDifficultyRange(e.difficulty):null;return this.vocabularyData.filter(s=>{const n=!t||s.difficulty>=t.min&&s.difficulty<=t.max,r=!(e.categories&&e.categories.length>0)||s.categories.some(t=>e.categories?.includes(t)),i=!e.partOfSpeech||s.partOfSpeech===e.partOfSpeech;return n&&r&&i})}getDifficultyRange(e){return{A1:{min:1,max:1.5},A2:{min:1.5,max:2.5},B1:{min:2.5,max:3.5},B2:{min:3.5,max:4.5},C1:{min:4.5,max:5}}[e]}normalizeCefrLevel(e){return"A1"===e||"A2"===e||"B1"===e||"B2"===e?e:"A1"}generateLessonTitle(e,t){if(0===e.length)return"New Lesson";const s=new Set;e.forEach(e=>{this.normalizeCategories(e.categories).forEach(e=>s.add(e))});const n={vocabulary:"Vocabulary",grammar:"Grammar",conversation:"Conversation",reading:"Reading",listening:"Listening",writing:"Writing",culture:"Culture",mixed:"Mixed Topics",contextual:"Contextual"}[t]||"Lesson";if(1===s.size){const e=s.values().next();if(!e.done)return`${n}: ${this.getCategoryDisplayName(e.value)}`}return`${n} Lesson (${e.length} items)`}generateLessonDescription(e,t,s){const n=new Set;e.forEach(e=>n.add(e.partOfSpeech));const r=Array.from(n).map(e=>this.getPartOfSpeechDisplayName(e)).join(", ");return`This ${t} level lesson focuses on ${{vocabulary:"vocabulary building",grammar:"grammar concepts",conversation:"conversation practice",reading:"reading comprehension",listening:"listening skills",writing:"writing practice",culture:"cultural insights",mixed:"various language skills",contextual:"contextual usage"}[s]} with ${e.length} vocabulary items covering ${r}.`}calculateLessonDuration(e){const t=2*e;return e>15?Math.min(t+10,120):e>10?t+5:Math.max(t,15)}createLearningObjectives(e,t,s){const n=[];n.push({id:crypto.randomUUID(),description:`Learn ${e.length} new vocabulary items at ${t} level`,isCompleted:!1,createdAt:new Date});return n.push({id:crypto.randomUUID(),description:{vocabulary:"Practice using new vocabulary in context",grammar:"Understand and apply grammar concepts",conversation:"Engage in conversation using learned vocabulary",reading:"Read and comprehend texts using learned vocabulary",listening:"Listen and understand spoken language at this level",writing:"Write sentences or paragraphs using learned vocabulary",culture:"Understand cultural context of vocabulary",mixed:"Practice various language skills at this level",contextual:"Use vocabulary in specific contexts"}[s],isCompleted:!1,createdAt:new Date}),"A1"===t||"A2"===t?n.push({id:crypto.randomUUID(),description:"Recognize basic words and phrases in context",isCompleted:!1,createdAt:new Date}):"B1"===t||"B2"===t?n.push({id:crypto.randomUUID(),description:"Use vocabulary in complete sentences and questions",isCompleted:!1,createdAt:new Date}):n.push({id:crypto.randomUUID(),description:"Use advanced vocabulary in complex sentences and discussions",isCompleted:!1,createdAt:new Date}),n}generateLessonTags(e,t,s){const n=[s,t],r=new Set;return e.forEach(e=>{this.normalizeCategories(e.categories).forEach(e=>r.add(e))}),Array.from(r).slice(0,3).forEach(e=>{n.push(this.getCategoryDisplayName(e))}),n}getCategoryDisplayName(e){return{greetings:"Greetings",numbers:"Numbers",family:"Family",food:"Food",colors:"Colors",animals:"Animals","body-parts":"Body Parts",clothing:"Clothing",home:"House & Home",nature:"Nature",transport:"Transportation",technology:"Technology",time:"Time & Date",weather:"Weather",professions:"Professions",places:"Places",grammar:"Grammar",culture:"Culture","everyday-phrases":"Everyday Phrases"}[e]||e}getPartOfSpeechDisplayName(e){return{noun:"Nouns",verb:"Verbs",adjective:"Adjectives",adverb:"Adverbs",pronoun:"Pronouns",preposition:"Prepositions",conjunction:"Conjunctions",interjection:"Interjections",article:"Articles",number:"Numbers",phrase:"Phrases",expression:"Expressions"}[e]||e}normalizeCategories(e){const t=["greetings","numbers","family","food","colors","animals","body-parts","clothing","home","nature","transport","technology","time","weather","professions","places","grammar","culture","everyday-phrases"];if(!e||0===e.length)return["culture"];const s=e.map(e=>t.includes(e)?e:"culture").filter(Boolean);return s.length>0?s:["culture"]}normalizeVocabularyItem(e){return{...e,categories:this.normalizeCategories(e.categories),metadata:e.metadata??{},isCommon:e.isCommon??!1,isVerified:e.isVerified??!1,learningPhase:e.learningPhase??0,createdAt:e.createdAt??new Date,updatedAt:e.updatedAt??new Date,cefrLevel:e.cefrLevel??"A1"}}determineLessonDifficulty(e){if(0===e.length)return"A1";const t=e.reduce((e,t)=>e+t.difficulty,0)/e.length;return t<=1.5?"A1":t<=2.5?"A2":t<=3.5?"B1":t<=4.5?"B2":"C1"}validateLesson(e){const t=mn.safeParse(e);return t.success?t.data:this.createFallbackLesson("Lesson validation failed")}createFallbackLesson(e){return{id:`fallback-${Date.now()}-${crypto.randomUUID()}`,title:"Lesson Unavailable",description:"This lesson could not be generated. Please try again later.",difficulty:"A1",type:"vocabulary",duration:15,vocabulary:[],objectives:[{id:crypto.randomUUID(),description:"Lesson generation failed - please try again",isCompleted:!1,createdAt:new Date}],isCompleted:!1,completionPercentage:0,createdAt:new Date,updatedAt:new Date,metadata:{tags:["error"],prerequisites:[],relatedLessons:[],isPremium:!1}}}getLessons(){return this.lessons}getLessonById(e){return this.lessons.find(t=>t.id===e)}addLesson(e){const t=this.validateLesson(e);this.lessons.push(t)}updateLesson(e,t){const s=this.lessons.findIndex(t=>t.id===e);if(-1===s)return;const n={...this.lessons[s],...t,updatedAt:new Date},r={...n,id:n.id??`lesson_${Date.now()}`,title:n.title??"Untitled",description:n.description??"",difficulty:n.difficulty??"A1",type:n.type??"vocabulary",vocabulary:n.vocabulary??[],duration:n.duration??0,objectives:n.objectives??[],isCompleted:n.isCompleted??!1,completionPercentage:n.completionPercentage??0},i=this.validateLesson(r);return this.lessons[s]=i,i}removeLesson(e){const t=this.lessons.length;return this.lessons=this.lessons.filter(t=>t.id!==e),this.lessons.length!==t}getLessonsByDifficulty(e){return this.lessons.filter(t=>t.difficulty===e)}getLessonsByType(e){return this.lessons.filter(t=>t.type===e)}getLessonsByTag(e){return this.lessons.filter(t=>t.metadata.tags.includes(e))}getRandomLessons(e=3){if(0===this.lessons.length)return[];return[...this.lessons].sort(()=>.5-Math.random()).slice(0,Math.min(e,this.lessons.length))}};const bn=new class{constructor(){this.initialized=!1}async initialize(){await yn.initialize(),this.initialized=!0}isInitialized(){return this.initialized}async generateDynamicLesson(e){try{const t=this.validateLessonGenerationParams(e),s=await ms.generateLesson(t);return this.convertGeneratedLessonToLesson(s)}catch(t){return this.createFallbackLesson(e.type||"vocabulary",e.difficulty||"A1")}}async generateThematicLesson(e,t,s){const n={userId:"default",type:"vocabulary",difficulty:ws(t)?t:"A1",criteria:{categories:e},metadata:{includePractice:s?.includePractice??!0,includeReview:s?.includeReview??!1}};return this.generateDynamicLesson(n)}async generateGrammarLesson(e,t,s){const n={userId:"default",type:"grammar",difficulty:ws(t)?t:"A1",criteria:{conceptType:e},metadata:{includePractice:s?.includePractice??!0,includeComparison:s?.includeComparison??!1}};return this.generateDynamicLesson(n)}async generateMixedLesson(e,t,s){const n={userId:"default",type:"mixed",difficulty:ws(t)?t:"A1",criteria:{categories:[e]},metadata:{includePractice:s?.includePractice??!0,includeReview:s?.includeReview??!1}};return this.generateDynamicLesson(n)}validateLessonGenerationParams(e){const t={userId:"default",type:"vocabulary",difficulty:"A1",criteria:{},metadata:{}};return{userId:e.userId||t.userId,type:["vocabulary","grammar","mixed","culture","contextual"].includes(e.type)?e.type:t.type,difficulty:["A1","A2","B1","B2","C1"].includes(e.difficulty)?e.difficulty:t.difficulty,criteria:e.criteria||t.criteria,metadata:e.metadata||t.metadata}}convertGeneratedLessonToLesson(e){const t=e.sections.map(e=>`## ${e.title||e.type}\n${e.content||""}`).join("\n\n"),s=e.learningObjectives.map(e=>({id:ys(),description:e,isCompleted:!1,createdAt:new Date})),n=5*e.sections.length+5,r=this.generateLessonTags(e);return{id:e.id,title:e.title,description:this.generateLessonDescription(e),difficulty:this.normalizeDifficulty(e.difficulty),type:this.normalizeLessonType(e.type),duration:n,vocabulary:this.normalizeVocabulary(e.vocabulary||[]),objectives:s,content:t||this.generateLessonDescription(e),isCompleted:!1,completionPercentage:0,createdAt:e.createdAt||new Date,updatedAt:e.updatedAt||new Date,metadata:{tags:r,prerequisites:[],relatedLessons:[],isPremium:!1,...e.metadata}}}generateLessonTags(e){const t=[];if(t.push(e.type),t.push(e.difficulty),e.grammarConcepts&&e.grammarConcepts.length>0&&e.grammarConcepts.forEach(e=>{e.name?.german&&t.push(e.name.german)}),e.vocabulary&&e.vocabulary.length>0){const s=new Set;e.vocabulary.forEach(e=>{e.categories&&e.categories.forEach(e=>{const t=yn.getCategoryDisplayName(e);s.add(t),s.add(e)})}),t.push(...Array.from(s))}return t}generateLessonDescription(e){const t={A1:"beginner",A2:"elementary",B1:"intermediate",B2:"upper intermediate",C1:"advanced"}[e.difficulty]||"beginner",s={vocabulary:"vocabulary building",grammar:"grammar concepts",mixed:"various language skills",contextual:"contextual learning"}[e.type]||"language learning",n=e.vocabulary?.length||0;let r="";if(e.grammarConcepts&&e.grammarConcepts.length>0){r=`. It covers grammar concepts including ${e.grammarConcepts.map(e=>e.name?.german||e.id).join(", ")}.`}return`This ${t} level lesson focuses on ${s} with ${n} vocabulary items${r}`}normalizeLessonType(e){return"vocabulary"===e||"grammar"===e||"conversation"===e||"reading"===e||"listening"===e||"writing"===e||"culture"===e||"mixed"===e?e:"mixed"}normalizeDifficulty(e){return"A1"===e||"A2"===e||"B1"===e||"B2"===e||"C1"===e?e:"A1"}normalizeVocabulary(e){return e.map(e=>({...e,isCommon:e.isCommon??!1,isVerified:e.isVerified??!1,learningPhase:e.learningPhase??0,categories:e.categories??[],metadata:e.metadata??{}}))}createFallbackLesson(e,t){return{id:`fallback-lesson-${ys()}`,title:"Lesson Unavailable",description:"Dynamic lesson generation failed. Please try again or select a different lesson.",difficulty:ws(t)?t:"A1",type:bs(e)?e:"vocabulary",duration:10,vocabulary:[],objectives:[],isCompleted:!1,completionPercentage:0,createdAt:new Date,updatedAt:new Date,metadata:{tags:[e,t],prerequisites:[],relatedLessons:[],isPremium:!1}}}getLessons(){return yn.getLessons()||[]}getLessonById(e){return yn.getLessonById(e)}generateLessonFromVocabulary(e){return yn.generateLessonFromVocabulary(e)}async generateLessonFromCriteria(e){const t={...e,type:e.type?this.normalizeLessonType(e.type):void 0,difficulty:e.difficulty?this.normalizeDifficulty(e.difficulty):void 0,categories:e.categories};return await yn.generateLessonFromCriteria(t)||this.createFallbackLesson("vocabulary","A1")}getLessonsByDifficulty(e){return ws(e)&&yn.getLessonsByDifficulty(e)||[]}getLessonsByType(e){return bs(e)&&yn.getLessonsByType(e)||[]}getLessonsByTag(e){return yn.getLessonsByTag(e)||[]}getRandomLessons(e){return yn.getRandomLessons(e)||[]}addLesson(e){return yn.addLesson(e)}updateLesson(e,t){return yn.updateLesson(e,t)}removeLesson(e){return yn.removeLesson(e)}};function wn(e){return null!==e&&"object"==typeof e}const kn=["string","number","bigint","boolean"];function $n(e){return null==e||(!!kn.includes(typeof e)||(Array.isArray(e)?e.every(e=>$n(e)):"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype))}const Ln=Symbol("box"),xn=Symbol("is-writable");function _n(e,t){const s=kt(e);return t?{[Ln]:!0,[xn]:!0,get current(){return yt(s)},set current(e){t(e)}}:{[Ln]:!0,get current(){return e()}}}function Cn(...e){return function(t){for(const s of e)if(s){if(t.defaultPrevented)return;"function"==typeof s?s.call(this,t):s.current?.call(this,t)}}}var An=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Dn=/\n/g,Pn=/^\s*/,Sn=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Mn=/^:\s*/,jn=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,En=/^[;\s]*/,Tn=/^\s+|\s+$/g,Fn="";function Wn(e){return e?e.replace(Tn,Fn):Fn}function On(e,t){let s=null;if(!e||"string"!=typeof e)return s;const n=function(e,t){if("string"!=typeof e)throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var s=1,n=1;function r(e){var t=e.match(Dn);t&&(s+=t.length);var r=e.lastIndexOf("\n");n=~r?e.length-r:n+e.length}function i(){var e={line:s,column:n};return function(t){return t.position=new o(e),c(),t}}function o(e){this.start=e,this.end={line:s,column:n},this.source=t.source}function a(r){var i=new Error(t.source+":"+s+":"+n+": "+r);if(i.reason=r,i.filename=t.source,i.line=s,i.column=n,i.source=e,!t.silent)throw i}function l(t){var s=t.exec(e);if(s){var n=s[0];return r(n),e=e.slice(n.length),s}}function c(){l(Pn)}function u(e){var t;for(e=e||[];t=d();)!1!==t&&e.push(t);return e}function d(){var t=i();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var s=2;Fn!=e.charAt(s)&&("*"!=e.charAt(s)||"/"!=e.charAt(s+1));)++s;if(s+=2,Fn===e.charAt(s-1))return a("End of comment missing");var o=e.slice(2,s-2);return n+=2,r(o),e=e.slice(s),n+=2,t({type:"comment",comment:o})}}function p(){var e=i(),t=l(Sn);if(t){if(d(),!l(Mn))return a("property missing ':'");var s=l(jn),n=e({type:"declaration",property:Wn(t[0].replace(An,Fn)),value:s?Wn(s[0].replace(An,Fn)):Fn});return l(En),n}}return o.prototype.content=e,c(),function(){var e,t=[];for(u(t);e=p();)!1!==e&&(t.push(e),u(t));return t}()}(e),r="function"==typeof t;return n.forEach(e=>{if("declaration"!==e.type)return;const{property:n,value:i}=e;r?t(n,i,e):i&&(s=s||{},s[n]=i)}),s}const Bn=/\d/,In=["-","_","/","."];function Nn(e=""){if(!Bn.test(e))return e!==e.toLowerCase()}function Rn(e){return e?function(e){const t=[];let s,n,r="";for(const i of e){const e=In.includes(i);if(!0===e){t.push(r),r="",s=void 0;continue}const o=Nn(i);if(!1===n){if(!1===s&&!0===o){t.push(r),r=i,s=o;continue}if(!0===s&&!1===o&&r.length>1){const e=r.at(-1);t.push(r.slice(0,Math.max(0,r.length-1))),r=e+i,s=o;continue}}r+=i,s=o,n=e}return t.push(r),t}(e).map(e=>function(e){return e?e[0].toUpperCase()+e.slice(1):""}(e)).join(""):""}function zn(e){if(!e)return{};const t={};return On(e,function(e,s){var n;e.startsWith("-moz-")||e.startsWith("-webkit-")||e.startsWith("-ms-")||e.startsWith("-o-")?t[Rn(e)]=s:e.startsWith("--")?t[e]=s:t[(n=e,function(e){return e?e[0].toLowerCase()+e.slice(1):""}(Rn(n||"")))]=s}),t}function Vn(...e){return(...t)=>{for(const s of e)"function"==typeof s&&s(...t)}}const Un=function(e,t){const s=RegExp(e,"g");return e=>{if("string"!=typeof e)throw new TypeError("expected an argument of type string, but got "+typeof e);return e.match(s)?e.replace(s,t):e}}(/[A-Z]/,e=>`-${e.toLowerCase()}`);function Gn(e={}){return function(e){if(!e||"object"!=typeof e||Array.isArray(e))throw new TypeError("expected an argument of type object, but got "+typeof e);return Object.keys(e).map(t=>`${Un(t)}: ${e[t]};`).join("\n")}(e).replace("\n"," ")}const qn=new Set(["onabort","onanimationcancel","onanimationend","onanimationiteration","onanimationstart","onauxclick","onbeforeinput","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncompositionend","oncompositionstart","oncompositionupdate","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onfocusin","onfocusout","onformdata","ongotpointercapture","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onlostpointercapture","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onpaste","onpause","onplay","onplaying","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointermove","onpointerout","onpointerover","onpointerup","onprogress","onratechange","onreset","onresize","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onselectionchange","onselectstart","onslotchange","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ontransitioncancel","ontransitionend","ontransitionrun","ontransitionstart","onvolumechange","onwaiting","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkittransitionend","onwheel"]);function Kn(e){return qn.has(e)}function Zn(...e){const t={...e[0]};for(let s=1;s<e.length;s++){const n=e[s];if(n){for(const e of Object.keys(n)){const s=t[e],r=n[e],i="function"==typeof s,o="function"==typeof r;if(i&&Kn(e)){const n=s,i=r;t[e]=Cn(n,i)}else if(i&&o)t[e]=Vn(s,r);else if("class"===e){const n=$n(s),i=$n(r);n&&i?t[e]=ks(s,r):n?t[e]=ks(s):i&&(t[e]=ks(r))}else if("style"===e){const n="object"==typeof s,i="object"==typeof r,o="string"==typeof s,a="string"==typeof r;if(n&&i)t[e]={...s,...r};else if(n&&a){const n=zn(r);t[e]={...s,...n}}else if(o&&i){const n=zn(s);t[e]={...n,...r}}else if(o&&a){const n=zn(s),i=zn(r);t[e]={...n,...i}}else n?t[e]=s:i?t[e]=r:o?t[e]=s:a&&(t[e]=r)}else t[e]=void 0!==r?r:s}for(const e of Object.getOwnPropertySymbols(n)){const s=t[e],r=n[e];t[e]=void 0!==r?r:s}}}return"object"==typeof t.style&&(t.style=Gn(t.style).replaceAll("\n"," ")),!1===t.hidden&&(t.hidden=void 0,delete t.hidden),!1===t.disabled&&(t.disabled=void 0,delete t.disabled),t}const Hn="undefined"!=typeof window?window:void 0;const Yn=class extends Map{constructor(i){if(super(),Ze(this,r),Ze(this,e,new Map),Ze(this,t,bt(0)),Ze(this,s,bt(0)),Ze(this,n,Dt||-1),i){for(var[o,a]of i)super.set(o,a);Ke(this,s).v=super.size}}has(s){var n=Ke(this,e),o=n.get(s);if(void 0===o){if(void 0===super.get(s))return yt(Ke(this,t)),!1;o=Ye(this,r,i).call(this,0),n.set(s,o)}return yt(o),!0}forEach(e,t){Ye(this,r,o).call(this),super.forEach(e,t)}get(s){var n=Ke(this,e),o=n.get(s);if(void 0===o){if(void 0===super.get(s))return void yt(Ke(this,t));o=Ye(this,r,i).call(this,0),n.set(s,o)}return yt(o),super.get(s)}set(n,o){var a=Ke(this,e),l=a.get(n),c=super.get(n),u=super.set(n,o),d=Ke(this,t);if(void 0===l)l=Ye(this,r,i).call(this,0),a.set(n,l),$t(Ke(this,s),super.size),St(d);else if(c!==o){St(l);var p=null===d.reactions?null:new Set(d.reactions);(null===p||!l.reactions?.every(e=>p.has(e)))&&St(d)}return u}delete(n){var r=Ke(this,e),i=r.get(n),o=super.delete(n);return void 0!==i&&(r.delete(n),$t(Ke(this,s),super.size),$t(i,-1),St(Ke(this,t))),o}clear(){if(0!==super.size){super.clear();var n=Ke(this,e);for(var r of($t(Ke(this,s),0),n.values()))$t(r,-1);St(Ke(this,t)),n.clear()}}keys(){return yt(Ke(this,t)),super.keys()}values(){return Ye(this,r,o).call(this),super.values()}entries(){return Ye(this,r,o).call(this),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return yt(Ke(this,s)),super.size}};e=new WeakMap,t=new WeakMap,s=new WeakMap,n=new WeakMap,r=new WeakSet,i=function(e){return Dt===Ke(this,n)?bt(e):Pt(e)},o=function(){yt(Ke(this,t));var n=Ke(this,e);if(Ke(this,s).v!==n.size)for(var o of((e,t,s)=>Ve(ze(e),s,t))(Yn.prototype,this,"keys").call(this))if(!n.has(o)){var a=Ye(this,r,i).call(this,0);n.set(o,a)}for([,a]of Ke(this,e))yt(a)};let Xn=Yn;a=new WeakMap,l=new WeakMap,new class{constructor(e={}){Ze(this,a),Ze(this,l);const{window:t=Hn,document:s=t?.document}=e;void 0!==t&&(He(this,a,s),He(this,l,st(e=>{const s=nt(t,"focusin",e),n=nt(t,"focusout",e);return()=>{s(),n()}})))}get current(){var e;return null==(e=Ke(this,l))||e.call(this),Ke(this,a)?function(e){let t=e.activeElement;for(;t?.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}(Ke(this,a)):null}};class Jn{constructor(e){Ze(this,c),Ze(this,u),He(this,c,e),He(this,u,Symbol(e))}get key(){return Ke(this,u)}exists(){return Mt(Ke(this,u))}get(){const e=jt(Ke(this,u));if(void 0===e)throw new Error(`Context "${Ke(this,c)}" not found`);return e}getOr(e){const t=jt(Ke(this,u));return void 0===t?e:t}set(e){return Et(Ke(this,u),e)}}function Qn(e,t,s,n={}){const{lazy:r=!1}=n;let i=!r,o=Array.isArray(e)?[]:void 0;!function(e,t){switch(e){case"post":At(t);break;case"pre":Tt(t)}}(t,()=>{const t=Array.isArray(e)?e.map(e=>e()):e();if(!i)return i=!0,void(o=t);const n=Ft(()=>s(t,o));return o=t,n})}function er(e,t,s){Qn(e,"post",t,s)}function tr(e){At(()=>()=>{e()})}function sr(e){Wt().then(e)}c=new WeakMap,u=new WeakMap,er.pre=function(e,t,s){Qn(e,"pre",t,s)};function nr(e){return wn(e)&&1===e.nodeType&&"string"==typeof e.nodeName}function rr(e){return function(e){return wn(e)&&void 0!==e.nodeType}(e)&&11===e.nodeType&&"host"in e}function ir(e){return function(e){return wn(e)&&9===e.nodeType}(e)?e:function(e){return wn(e)&&"VisualViewport"===e.constructor?.name}(e)?e.document:e?.ownerDocument??document}class or{constructor(e){Ge(this,"element"),Ze(this,d,kt(()=>{if(!this.element.current)return document;return this.element.current.getRootNode()??document})),Ge(this,"getDocument",()=>ir(this.root)),Ge(this,"getWindow",()=>this.getDocument().defaultView??window),Ge(this,"getActiveElement",()=>function(e){let t=e.activeElement;for(;t?.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}(this.root)),Ge(this,"isActiveElement",e=>e===this.getActiveElement()),Ge(this,"querySelector",e=>this.root?this.root.querySelector(e):null),Ge(this,"querySelectorAll",e=>this.root?this.root.querySelectorAll(e):[]),Ge(this,"setTimeout",(e,t)=>this.getWindow().setTimeout(e,t)),Ge(this,"clearTimeout",e=>this.getWindow().clearTimeout(e)),this.element="function"==typeof e?_n(e):e}get root(){return yt(Ke(this,d))}set root(e){$t(Ke(this,d),e)}getElementById(e){return this.root.getElementById(e)}}function ar(e,t){return{[Ss()]:s=>{return wn(n=e)&&Ln in n?(e.current=s,Ft(()=>t?.(s)),()=>{"isConnected"in s&&s.isConnected||(e.current=null,t?.(null))}):(e(s),Ft(()=>t?.(s)),()=>{"isConnected"in s&&s.isConnected||(e(null),t?.(null))});var n}}}function lr(e){return e?"":void 0}d=new WeakMap;class cr{constructor(e){Ze(this,p),Ze(this,v),Ge(this,"attrs"),He(this,p,e.getVariant?e.getVariant():null),He(this,v,Ke(this,p)?`data-${Ke(this,p)}-`:`data-${e.component}-`),this.getAttr=this.getAttr.bind(this),this.selector=this.selector.bind(this),this.attrs=Object.fromEntries(e.parts.map(e=>[e,this.getAttr(e)]))}getAttr(e,t){return t?`data-${t}-${e}`:`${Ke(this,v)}${e}`}selector(e,t){return`[${this.getAttr(e,t)}]`}}function ur(e){const t=new cr(e);return{...t.attrs,selector:t.selector,getAttr:t.getAttr}}p=new WeakMap,v=new WeakMap;const dr="undefined"!=typeof document,pr=dr&&window?.navigator?.userAgent&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||window?.navigator?.maxTouchPoints>2&&/iPad|Macintosh/.test(window?.navigator.userAgent));function vr(e){return e instanceof HTMLElement}class hr{constructor(e){Ze(this,g),Ze(this,h),Ze(this,f,null),He(this,h,e),tr(()=>Ye(this,g,m).call(this))}run(e){Ye(this,g,m).call(this);const t=Ke(this,h).ref.current;t&&("function"==typeof t.getAnimations?He(this,f,window.requestAnimationFrame(()=>{const s=t.getAnimations();0!==s.length?Promise.allSettled(s.map(e=>e.finished)).then(()=>{Ye(this,g,y).call(this,e)}):Ye(this,g,y).call(this,e)})):Ye(this,g,y).call(this,e))}}h=new WeakMap,f=new WeakMap,g=new WeakSet,m=function(){Ke(this,f)&&(window.cancelAnimationFrame(Ke(this,f)),He(this,f,null))},y=function(e){const t=()=>{e()};Ke(this,h).afterTick?sr(t):t()};class fr{constructor(e){Ze(this,b),Ze(this,w),Ze(this,k),Ze(this,$,bt(!1)),He(this,b,e),$t(Ke(this,$),e.open.current,!0),He(this,w,e.enabled??!0),He(this,k,new hr({ref:Ke(this,b).ref,afterTick:Ke(this,b).open})),er(()=>Ke(this,b).open.current,e=>{e&&$t(Ke(this,$),!0),Ke(this,w)&&Ke(this,k).run(()=>{e===Ke(this,b).open.current&&(Ke(this,b).open.current||$t(Ke(this,$),!1),Ke(this,b).onComplete?.())})})}get shouldRender(){return yt(Ke(this,$))}}function gr(){}function mr(e,t){return`bits-${e}`}b=new WeakMap,w=new WeakMap,k=new WeakMap,$=new WeakMap;const yr=ur({component:"dialog",parts:["content","trigger","overlay","title","description","close","cancel","action"]}),br=new Jn("Dialog.Root | AlertDialog.Root");L=new WeakMap,x=new WeakMap,_=new WeakMap,C=new WeakMap,A=new WeakMap,D=new WeakMap,P=new WeakMap,S=new WeakMap,M=new WeakMap,j=new WeakMap,E=new WeakMap;let wr=class e{constructor(e,t){Ge(this,"opts"),Ze(this,L,bt(null)),Ze(this,x,bt(null)),Ze(this,_,bt(null)),Ze(this,C,bt(null)),Ze(this,A,bt(void 0)),Ze(this,D,bt(void 0)),Ze(this,P,bt(void 0)),Ze(this,S,bt(void 0)),Ze(this,M,bt(null)),Ze(this,j,bt(0)),Ge(this,"depth"),Ge(this,"parent"),Ge(this,"contentPresence"),Ge(this,"overlayPresence"),Ge(this,"getBitsAttr",e=>yr.getAttr(e,this.opts.variant.current)),Ze(this,E,kt(()=>{return{"data-state":(e=this.opts.open.current,e?"open":"closed")};var e})),this.opts=e,this.parent=t,this.depth=t?t.depth+1:0,this.handleOpen=this.handleOpen.bind(this),this.handleClose=this.handleClose.bind(this),this.contentPresence=new fr({ref:_n(()=>this.contentNode),open:this.opts.open,enabled:!0,onComplete:()=>{this.opts.onOpenChangeComplete.current(this.opts.open.current)}}),this.overlayPresence=new fr({ref:_n(()=>this.overlayNode),open:this.opts.open,enabled:!0}),er(()=>this.opts.open.current,e=>{this.parent&&(e?this.parent.incrementNested():this.parent.decrementNested())},{lazy:!0}),tr(()=>{this.opts.open.current&&this.parent?.decrementNested()})}static create(t){const s=br.getOr(null);return br.set(new e(t,s))}get triggerNode(){return yt(Ke(this,L))}set triggerNode(e){$t(Ke(this,L),e,!0)}get contentNode(){return yt(Ke(this,x))}set contentNode(e){$t(Ke(this,x),e,!0)}get overlayNode(){return yt(Ke(this,_))}set overlayNode(e){$t(Ke(this,_),e,!0)}get descriptionNode(){return yt(Ke(this,C))}set descriptionNode(e){$t(Ke(this,C),e,!0)}get contentId(){return yt(Ke(this,A))}set contentId(e){$t(Ke(this,A),e,!0)}get titleId(){return yt(Ke(this,D))}set titleId(e){$t(Ke(this,D),e,!0)}get triggerId(){return yt(Ke(this,P))}set triggerId(e){$t(Ke(this,P),e,!0)}get descriptionId(){return yt(Ke(this,S))}set descriptionId(e){$t(Ke(this,S),e,!0)}get cancelNode(){return yt(Ke(this,M))}set cancelNode(e){$t(Ke(this,M),e,!0)}get nestedOpenCount(){return yt(Ke(this,j))}set nestedOpenCount(e){$t(Ke(this,j),e,!0)}handleOpen(){this.opts.open.current||(this.opts.open.current=!0)}handleClose(){this.opts.open.current&&(this.opts.open.current=!1)}incrementNested(){this.nestedOpenCount++,this.parent?.incrementNested()}decrementNested(){0!==this.nestedOpenCount&&(this.nestedOpenCount--,this.parent?.decrementNested())}get sharedProps(){return yt(Ke(this,E))}set sharedProps(e){$t(Ke(this,E),e)}};T=new WeakMap;let kr=class e{constructor(e,t){Ge(this,"opts"),Ge(this,"root"),Ge(this,"attachment"),Ze(this,T,kt(()=>({id:this.opts.id.current,[this.root.getBitsAttr(this.opts.variant.current)]:"",onclick:this.onclick,onkeydown:this.onkeydown,disabled:!!this.opts.disabled.current||void 0,tabindex:0,...this.root.sharedProps,...this.attachment}))),this.opts=e,this.root=t,this.attachment=ar(this.opts.ref),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}static create(t){return new e(t,br.get())}onclick(e){this.opts.disabled.current||e.button>0||this.root.handleClose()}onkeydown(e){this.opts.disabled.current||" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),this.root.handleClose())}get props(){return yt(Ke(this,T))}set props(e){$t(Ke(this,T),e)}};F=new WeakMap;let $r=class e{constructor(e,t){Ge(this,"opts"),Ge(this,"root"),Ge(this,"attachment"),Ze(this,F,kt(()=>({id:this.opts.id.current,role:"heading","aria-level":this.opts.level.current,[this.root.getBitsAttr("title")]:"",...this.root.sharedProps,...this.attachment}))),this.opts=e,this.root=t,this.root.titleId=this.opts.id.current,this.attachment=ar(this.opts.ref),er.pre(()=>this.opts.id.current,e=>{this.root.titleId=e})}static create(t){return new e(t,br.get())}get props(){return yt(Ke(this,F))}set props(e){$t(Ke(this,F),e)}};W=new WeakMap;let Lr=class e{constructor(e,t){Ge(this,"opts"),Ge(this,"root"),Ge(this,"attachment"),Ze(this,W,kt(()=>({id:this.opts.id.current,[this.root.getBitsAttr("description")]:"",...this.root.sharedProps,...this.attachment}))),this.opts=e,this.root=t,this.root.descriptionId=this.opts.id.current,this.attachment=ar(this.opts.ref,e=>{this.root.descriptionNode=e}),er.pre(()=>this.opts.id.current,e=>{this.root.descriptionId=e})}static create(t){return new e(t,br.get())}get props(){return yt(Ke(this,W))}set props(e){$t(Ke(this,W),e)}};O=new WeakMap,B=new WeakMap;let xr=class e{constructor(e,t){Ge(this,"opts"),Ge(this,"root"),Ge(this,"attachment"),Ze(this,O,kt(()=>({open:this.root.opts.open.current}))),Ze(this,B,kt(()=>({id:this.opts.id.current,role:"alert-dialog"===this.root.opts.variant.current?"alertdialog":"dialog","aria-modal":"true","aria-describedby":this.root.descriptionId,"aria-labelledby":this.root.titleId,[this.root.getBitsAttr("content")]:"",style:{pointerEvents:"auto",outline:"alert-dialog"===this.root.opts.variant.current?"none":void 0,"--bits-dialog-depth":this.root.depth,"--bits-dialog-nested-count":this.root.nestedOpenCount},tabindex:"alert-dialog"===this.root.opts.variant.current?-1:void 0,"data-nested-open":lr(this.root.nestedOpenCount>0),"data-nested":lr(null!==this.root.parent),...this.root.sharedProps,...this.attachment}))),this.opts=e,this.root=t,this.attachment=ar(this.opts.ref,e=>{this.root.contentNode=e,this.root.contentId=e?.id})}static create(t){return new e(t,br.get())}get snippetProps(){return yt(Ke(this,O))}set snippetProps(e){$t(Ke(this,O),e)}get props(){return yt(Ke(this,B))}set props(e){$t(Ke(this,B),e)}get shouldRender(){return this.root.contentPresence.shouldRender}};I=new WeakMap,N=new WeakMap;let _r=class e{constructor(e,t){Ge(this,"opts"),Ge(this,"root"),Ge(this,"attachment"),Ze(this,I,kt(()=>({open:this.root.opts.open.current}))),Ze(this,N,kt(()=>({id:this.opts.id.current,[this.root.getBitsAttr("overlay")]:"",style:{pointerEvents:"auto","--bits-dialog-depth":this.root.depth,"--bits-dialog-nested-count":this.root.nestedOpenCount},"data-nested-open":lr(this.root.nestedOpenCount>0),"data-nested":lr(null!==this.root.parent),...this.root.sharedProps,...this.attachment}))),this.opts=e,this.root=t,this.attachment=ar(this.opts.ref,e=>this.root.overlayNode=e)}static create(t){return new e(t,br.get())}get snippetProps(){return yt(Ke(this,I))}set snippetProps(e){$t(Ke(this,I),e)}get props(){return yt(Ke(this,N))}set props(e){$t(Ke(this,N),e)}get shouldRender(){return this.root.overlayPresence.shouldRender}};var Cr=Je("<div><!></div>");function Ar(e,t){const s=rt();ht(t,!0);let n=Qt(t,"id",19,()=>mr(s)),r=Qt(t,"ref",15,null),i=Qt(t,"level",3,2),o=es(t,["$$slots","$$events","$$legacy","id","ref","child","children","level"]);const a=$r.create({id:_n(()=>n()),level:_n(()=>i()),ref:_n(()=>r(),e=>r(e))}),l=kt(()=>Zn(o,a.props));var c=tt(),u=_t(c),d=e=>{var s=tt(),n=_t(s);_s(n,()=>t.child,()=>({props:yt(l)})),et(e,s)},p=e=>{var s=Cr();Xt(s,()=>({...yt(l)}));var n=ft(s);_s(n,()=>t.children??Ot),gt(s),et(e,s)};Vt(u,e=>{t.child?e(d):e(p,!1)}),et(e,c),Lt()}function Dr(e,t){var s=tt();!function(e,t,s){ut&&dt();var n=new Ps(e),r=!pt();vt(()=>{var e=t();r&&null!==e&&"object"==typeof e&&(e={}),n.ensure(e,s)})}(_t(s),()=>t.children,e=>{var s=tt(),n=_t(s);_s(n,()=>t.children??Ot),et(e,s)}),et(e,s)}const Pr=new Jn("BitsConfig");class Sr{constructor(e,t){Ge(this,"opts");const s=function(e,t){return s=>_n(()=>{const n=s(t)?.current;return void 0!==n?n:null!==e?s(e.opts)?.current:void 0})}(e,t);this.opts={defaultPortalTo:s(e=>e.defaultPortalTo),defaultLocale:s(e=>e.defaultLocale)}}}const Mr=(jr=e=>e.defaultPortalTo,Er="body",e=>{const t=function(){const e=new Sr(null,{});return Pr.getOr(e).opts}();return _n(()=>{const s=e();if(void 0!==s)return s;const n=jr(t).current;return void 0!==n?n:Er})});var jr,Er;function Tr(e,t){ht(t,!0);const s=Mr(()=>t.to),n=Bt();let r,i=kt(function(){if(!dr||t.disabled)return null;let e=null;if("string"==typeof s.current){e=document.querySelector(s.current)}else e=s.current;return e});function o(){r&&(ot(r),r=null)}er([()=>yt(i),()=>t.disabled],([e,s])=>{if(e&&!s)return r=it(Dr,{target:e,props:{children:t.children},context:n}),()=>{o()};o()});var a=tt(),l=_t(a),c=e=>{var s=tt(),n=_t(s);_s(n,()=>t.children??Ot),et(e,s)};Vt(l,e=>{t.disabled&&e(c)}),et(e,a),Lt()}function Fr(e,t=500){let s=null;const n=(...n)=>{null!==s&&clearTimeout(s),s=setTimeout(()=>{e(...n)},t)};return n.destroy=()=>{null!==s&&(clearTimeout(s),s=null)},n}function Wr(e,t){return e===t||e.contains(t)}function Or(e){return e?.ownerDocument??document}var Br=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ir=Br.join(","),Nr="undefined"==typeof Element,Rr=Nr?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,zr=!Nr&&Element.prototype.getRootNode?function(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},Vr=function(e,t){var s;void 0===t&&(t=!0);var n=null==e||null===(s=e.getAttribute)||void 0===s?void 0:s.call(e,"inert");return""===n||"true"===n||t&&e&&Vr(e.parentNode)},Ur=function(e,t,s){if(Vr(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(Ir));return t&&Rr.call(e,Ir)&&n.unshift(e),n=n.filter(s)},Gr=function(e,t,s){for(var n=[],r=Array.from(e);r.length;){var i=r.shift();if(!Vr(i,!1))if("SLOT"===i.tagName){var o=i.assignedElements(),a=o.length?o:i.children,l=Gr(a,!0,s);s.flatten?n.push.apply(n,l):n.push({scopeParent:i,candidates:l})}else{Rr.call(i,Ir)&&s.filter(i)&&(t||!e.includes(i))&&n.push(i);var c=i.shadowRoot||"function"==typeof s.getShadowRoot&&s.getShadowRoot(i),u=!Vr(c,!1)&&(!s.shadowRootFilter||s.shadowRootFilter(i));if(c&&u){var d=Gr(!0===c?i.children:c.children,!0,s);s.flatten?n.push.apply(n,d):n.push({scopeParent:i,candidates:d})}else r.unshift.apply(r,i.children)}}return n},qr=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Kr=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,s=null==e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===s||"true"===s}(e))&&!qr(e)?0:e.tabIndex},Zr=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},Hr=function(e){return"INPUT"===e.tagName},Yr=function(e){return function(e){return Hr(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,s=e.form||zr(e),n=function(e){return s.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=n(window.CSS.escape(e.name));else try{t=n(e.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var r=function(e,t){for(var s=0;s<e.length;s++)if(e[s].checked&&e[s].form===t)return e[s]}(t,e.form);return!r||r===e}(e)},Xr=function(e){var t=e.getBoundingClientRect(),s=t.width,n=t.height;return 0===s&&0===n},Jr=function(e,t){var s=t.displayCheck,n=t.getShadowRoot;if("full-native"===s&&"checkVisibility"in e)return!e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});if("hidden"===getComputedStyle(e).visibility)return!0;var r=Rr.call(e,"details>summary:first-of-type")?e.parentElement:e;if(Rr.call(r,"details:not([open]) *"))return!0;if(s&&"full"!==s&&"full-native"!==s&&"legacy-full"!==s){if("non-zero-area"===s)return Xr(e)}else{if("function"==typeof n){for(var i=e;e;){var o=e.parentElement,a=zr(e);if(o&&!o.shadowRoot&&!0===n(o))return Xr(e);e=e.assignedSlot?e.assignedSlot:o||a===e.ownerDocument?o:a.host}e=i}if(function(e){var t,s,n,r,i=e&&zr(e),o=null===(t=i)||void 0===t?void 0:t.host,a=!1;if(i&&i!==e)for(a=!!(null!==(s=o)&&void 0!==s&&null!==(n=s.ownerDocument)&&void 0!==n&&n.contains(o)||null!=e&&null!==(r=e.ownerDocument)&&void 0!==r&&r.contains(e));!a&&o;){var l,c,u;a=!(null===(c=o=null===(l=i=zr(o))||void 0===l?void 0:l.host)||void 0===c||null===(u=c.ownerDocument)||void 0===u||!u.contains(o))}return a}(e))return!e.getClientRects().length;if("legacy-full"!==s)return!0}return!1},Qr=function(e,t){return!(t.disabled||Vr(t)||function(e){return Hr(e)&&"hidden"===e.type}(t)||Jr(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some(function(e){return"SUMMARY"===e.tagName})}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var s=0;s<t.children.length;s++){var n=t.children.item(s);if("LEGEND"===n.tagName)return!!Rr.call(t,"fieldset[disabled] *")||!n.contains(e)}return!0}t=t.parentElement}return!1}(t))},ei=function(e,t){return!(Yr(t)||Kr(t)<0||!Qr(e,t))},ti=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},si=function(e){var t=[],s=[];return e.forEach(function(e,n){var r=!!e.scopeParent,i=r?e.scopeParent:e,o=function(e,t){var s=Kr(e);return s<0&&t&&!qr(e)?0:s}(i,r),a=r?si(e.candidates):i;0===o?r?t.push.apply(t,a):t.push(i):s.push({documentOrder:n,tabIndex:o,item:e,isScope:r,content:a})}),s.sort(Zr).reduce(function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e},[]).concat(t)},ni=Br.concat("iframe").join(",");const ri="data-context-menu-trigger",ii="data-context-menu-content";ur({component:"menu",parts:["trigger","content","sub-trigger","item","group","group-heading","checkbox-group","checkbox-item","radio-group","radio-item","separator","sub-content","arrow"]}),globalThis.bitsDismissableLayers??(globalThis.bitsDismissableLayers=new Map);R=new WeakMap,z=new WeakMap,V=new WeakMap,U=new WeakMap,G=new WeakMap,q=new WeakMap,K=new WeakMap,Z=new WeakMap,H=new WeakMap,Y=new WeakSet,X=function(){return Vn(nt(Ke(this,q),"pointerdown",Vn(Ke(this,ee),Ke(this,se)),{capture:!0}),nt(Ke(this,q),"pointerdown",Vn(Ke(this,te),Ke(this,Q))),nt(Ke(this,q),"focusin",Ke(this,H)))},J=new WeakMap,Q=new WeakMap,ee=new WeakMap,te=new WeakMap,se=new WeakMap,ne=new WeakMap,re=new WeakMap,ie=function(){return Object.values(Ke(this,V)).some(Boolean)},oe=new WeakMap,ae=new WeakMap;let oi=class e{constructor(e){Ze(this,Y),Ge(this,"opts"),Ze(this,R),Ze(this,z),Ze(this,V,{pointerdown:!1}),Ze(this,U,!1),Ze(this,G,!1),Ze(this,q),Ze(this,K),Ze(this,Z,gr),Ze(this,H,e=>{e.defaultPrevented||this.opts.ref.current&&sr(()=>{this.opts.ref.current&&!Ke(this,ne).call(this,e.target)&&e.target&&!Ke(this,G)&&Ke(this,K).current?.(e)})}),Ze(this,J,e=>{let t=e;t.defaultPrevented&&(t=ai(e)),Ke(this,R).current(e)}),Ze(this,Q,Fr(e=>{if(!this.opts.ref.current)return void Ke(this,Z).call(this);const t=this.opts.isValidEvent.current(e,this.opts.ref.current)||function(e,t){const s=e.target;if(n=s,!(n instanceof Element||n instanceof SVGElement))return!1;var n;const r=Boolean(s.closest(`[${ri}]`));if("button"in e&&e.button>0&&!r)return!1;if("button"in e&&0===e.button&&r)return!0;const i=Boolean(t.closest(`[${ii}]`));if(r&&i)return!1;const o=Or(s).documentElement.contains(s)&&!Wr(t,s)&&function(e,t){const{clientX:s,clientY:n}=e,r=t.getBoundingClientRect();return s<r.left||s>r.right||n<r.top||n>r.bottom}(e,t);return o}(e,this.opts.ref.current);if(!Ke(this,U)||Ye(this,Y,ie).call(this)||!t)return void Ke(this,Z).call(this);let s=e;s.defaultPrevented&&(s=ai(s)),"close"===Ke(this,z).current||"defer-otherwise-close"===Ke(this,z).current?"touch"===e.pointerType?(Ke(this,Z).call(this),He(this,Z,nt(Ke(this,q),"click",Ke(this,J),{once:!0}))):Ke(this,R).current(s):Ke(this,Z).call(this)},10)),Ze(this,ee,e=>{Ke(this,V)[e.type]=!0}),Ze(this,te,e=>{Ke(this,V)[e.type]=!1}),Ze(this,se,()=>{this.opts.ref.current&&He(this,U,function(e){const t=[...globalThis.bitsDismissableLayers],s=function(e=[...globalThis.bitsDismissableLayers]){return e.findLast(([e,{current:t}])=>"close"===t||"ignore"===t)}(t);if(s)return s[0].opts.ref.current===e;const[n]=t[0];return n.opts.ref.current===e}(this.opts.ref.current))}),Ze(this,ne,e=>!!this.opts.ref.current&&Wr(this.opts.ref.current,e)),Ze(this,re,Fr(()=>{for(const e in Ke(this,V))Ke(this,V)[e]=!1;He(this,U,!1)},20)),Ze(this,oe,()=>{He(this,G,!0)}),Ze(this,ae,()=>{He(this,G,!1)}),Ge(this,"props",{onfocuscapture:Ke(this,oe),onblurcapture:Ke(this,ae)}),this.opts=e,He(this,z,e.interactOutsideBehavior),He(this,R,e.onInteractOutside),He(this,K,e.onFocusOutside),At(()=>{He(this,q,Or(this.opts.ref.current))});let t=gr;const s=()=>{Ke(this,re).call(this),globalThis.bitsDismissableLayers.delete(this),Ke(this,Q).destroy(),t()};er([()=>this.opts.enabled.current,()=>this.opts.ref.current],()=>{if(this.opts.enabled.current&&this.opts.ref.current)return setTimeout(()=>{this.opts.ref.current&&(globalThis.bitsDismissableLayers.set(this,Ke(this,z)),t(),t=Ye(this,Y,X).call(this))},1),s}),tr(()=>{Ke(this,re).destroy(),globalThis.bitsDismissableLayers.delete(this),Ke(this,Q).destroy(),Ke(this,Z).call(this),t()})}static create(t){return new e(t)}};function ai(e){const t=e.currentTarget,s=e.target;let n;n=e instanceof PointerEvent?new PointerEvent(e.type,e):new PointerEvent("pointerdown",e);let r=!1;return new Proxy(n,{get:(n,i)=>"currentTarget"===i?t:"target"===i?s:"preventDefault"===i?()=>{r=!0,"function"==typeof n.preventDefault&&n.preventDefault()}:"defaultPrevented"===i?r:i in n?n[i]:e[i]})}globalThis.bitsEscapeLayers??(globalThis.bitsEscapeLayers=new Map);le=new WeakMap,ce=new WeakMap;let li=class e{constructor(e){Ge(this,"opts"),Ge(this,"domContext"),Ze(this,le,()=>nt(this.domContext.getDocument(),"keydown",Ke(this,ce),{passive:!1})),Ze(this,ce,e=>{if("Escape"!==e.key||!function(e){const t=[...globalThis.bitsEscapeLayers],s=t.findLast(([e,{current:t}])=>"close"===t||"ignore"===t);if(s)return s[0]===e;const[n]=t[0];return n===e}(this))return;const t=new KeyboardEvent(e.type,e);e.preventDefault();const s=this.opts.escapeKeydownBehavior.current;"close"!==s&&"defer-otherwise-close"!==s||this.opts.onEscapeKeydown.current(t)}),this.opts=e,this.domContext=new or(this.opts.ref);let t=gr;er(()=>e.enabled.current,s=>(s&&(globalThis.bitsEscapeLayers.set(this,e.escapeKeydownBehavior),t=Ke(this,le).call(this)),()=>{t(),globalThis.bitsEscapeLayers.delete(this)}))}static create(t){return new e(t)}};const ci=class e{constructor(){Ze(this,ue,function(e){let t=bt(Ct(e));return{[Ln]:!0,[xn]:!0,get current(){return yt(t)},set current(e){$t(t,e,!0)}}}([])),Ze(this,de,new WeakMap),Ze(this,pe,new WeakMap)}static getInstance(){return this.instance||(this.instance=new e),this.instance}register(e){const t=this.getActive();t&&t!==e&&t.pause();const s=document.activeElement;s&&s!==document.body&&Ke(this,pe).set(e,s),Ke(this,ue).current=Ke(this,ue).current.filter(t=>t!==e),Ke(this,ue).current.unshift(e)}unregister(e){Ke(this,ue).current=Ke(this,ue).current.filter(t=>t!==e);const t=this.getActive();t&&t.resume()}getActive(){return Ke(this,ue).current[0]}setFocusMemory(e,t){Ke(this,de).set(e,t)}getFocusMemory(e){return Ke(this,de).get(e)}isActiveScope(e){return this.getActive()===e}setPreFocusMemory(e,t){Ke(this,pe).set(e,t)}getPreFocusMemory(e){return Ke(this,pe).get(e)}clearPreFocusMemory(e){Ke(this,pe).delete(e)}};ue=new WeakMap,de=new WeakMap,pe=new WeakMap,Ge(ci,"instance");let ui=ci;ve=new WeakMap,he=new WeakMap,fe=new WeakMap,ge=new WeakMap,me=new WeakMap,ye=new WeakSet,be=function(){for(const e of Ke(this,ge))e();He(this,ge,[])},we=function(){if(!Ke(this,he))return;const e=new CustomEvent("focusScope.onOpenAutoFocus",{bubbles:!1,cancelable:!0});Ke(this,me).onOpenAutoFocus.current(e),e.defaultPrevented||requestAnimationFrame(()=>{if(!Ke(this,he))return;const e=Ye(this,ye,xe).call(this);e?(e.focus(),Ke(this,fe).setFocusMemory(this,e)):Ke(this,he).focus()})},ke=function(){const e=new CustomEvent("focusScope.onCloseAutoFocus",{bubbles:!1,cancelable:!0});if(Ke(this,me).onCloseAutoFocus.current?.(e),!e.defaultPrevented){const e=Ke(this,fe).getPreFocusMemory(this);if(e&&document.contains(e))try{e.focus()}catch{document.body.focus()}}},$e=function(){if(!Ke(this,he)||!Ke(this,me).trap.current)return;const e=Ke(this,he),t=e.ownerDocument;Ke(this,ge).push(nt(t,"focusin",t=>{if(Ke(this,ve)||!Ke(this,fe).isActiveScope(this))return;const s=t.target;if(!s)return;if(e.contains(s))Ke(this,fe).setFocusMemory(this,s);else{const s=Ke(this,fe).getFocusMemory(this);if(s&&e.contains(s)&&function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==Rr.call(e,ni)&&Qr(t,e)}(s))t.preventDefault(),s.focus();else{const t=Ye(this,ye,xe).call(this),s=Ye(this,ye,_e).call(this)[0];(t||s||e).focus()}}},{capture:!0}),nt(e,"keydown",e=>{if(!Ke(this,me).loop||Ke(this,ve)||"Tab"!==e.key)return;if(!Ke(this,fe).isActiveScope(this))return;const s=Ye(this,ye,Le).call(this);if(s.length<2)return;const n=s[0],r=s[s.length-1];e.shiftKey||t.activeElement!==r?e.shiftKey&&t.activeElement===n&&(e.preventDefault(),r.focus()):(e.preventDefault(),n.focus())}));const s=new MutationObserver(()=>{const t=Ke(this,fe).getFocusMemory(this);if(t&&!e.contains(t)){const t=Ye(this,ye,xe).call(this),s=Ye(this,ye,_e).call(this)[0],n=t||s;n?(n.focus(),Ke(this,fe).setFocusMemory(this,n)):e.focus()}});s.observe(e,{childList:!0,subtree:!0}),Ke(this,ge).push(()=>s.disconnect())},Le=function(){return Ke(this,he)?(e=Ke(this,he),s=(t=(t={includeContainer:!1,getShadowRoot:!0})||{}).getShadowRoot?Gr([e],t.includeContainer,{filter:ei.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:ti}):Ur(e,t.includeContainer,ei.bind(null,t)),si(s)):[];var e,t,s},xe=function(){return Ye(this,ye,Le).call(this)[0]||null},_e=function(){return Ke(this,he)?(e=Ke(this,he),(t=(t={includeContainer:!1,getShadowRoot:!0})||{}).getShadowRoot?Gr([e],t.includeContainer,{filter:Qr.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):Ur(e,t.includeContainer,Qr.bind(null,t))):[];var e,t};let di=class e{constructor(e){Ze(this,ye),Ze(this,ve,!1),Ze(this,he,null),Ze(this,fe,ui.getInstance()),Ze(this,ge,[]),Ze(this,me),He(this,me,e)}get paused(){return Ke(this,ve)}pause(){He(this,ve,!0)}resume(){He(this,ve,!1)}mount(e){Ke(this,he)&&this.unmount(),He(this,he,e),Ke(this,fe).register(this),Ye(this,ye,$e).call(this),Ye(this,ye,we).call(this)}unmount(){Ke(this,he)&&(Ye(this,ye,be).call(this),Ye(this,ye,ke).call(this),Ke(this,fe).unregister(this),Ke(this,fe).clearPreFocusMemory(this),He(this,he,null))}static use(t){let s=null;return er([()=>t.ref.current,()=>t.enabled.current],([n,r])=>{n&&r?(s||(s=new e(t)),s.mount(n)):s&&(s.unmount(),s=null)}),tr(()=>{s?.unmount()}),{get props(){return{tabindex:-1}}}}};globalThis.bitsTextSelectionLayers??(globalThis.bitsTextSelectionLayers=new Map);Ce=new WeakMap,Ae=new WeakSet,De=function(){return Vn(nt(this.domContext.getDocument(),"pointerdown",Ke(this,Pe)),nt(this.domContext.getDocument(),"pointerup",Cn(Ke(this,Se),this.opts.onPointerUp.current)))},Pe=new WeakMap,Se=new WeakMap;let pi=class e{constructor(e){Ze(this,Ae),Ge(this,"opts"),Ge(this,"domContext"),Ze(this,Ce,gr),Ze(this,Pe,e=>{const t=this.opts.ref.current,s=e.target;vr(t)&&vr(s)&&this.opts.enabled.current&&function(e){const t=[...globalThis.bitsTextSelectionLayers];if(!t.length)return!1;const s=t.at(-1);return!!s&&s[0]===e}(this)&&function(e,t){if(!e||!t)return!1;if(!nr(e)||!nr(t))return!1;const s=t.getRootNode?.();if(e===t)return!0;if(e.contains(t))return!0;if(s&&rr(s)){let s=t;for(;s;){if(e===s)return!0;s=s.parentNode||s.host}}return!1}(t,s)&&(this.opts.onPointerDown.current(e),e.defaultPrevented||He(this,Ce,function(e,t){const s=vi(t),n=vi(e);return hi(t,"none"),hi(e,"text"),()=>{hi(t,s),hi(e,n)}}(t,this.domContext.getDocument().body)))}),Ze(this,Se,()=>{Ke(this,Ce).call(this),He(this,Ce,gr)}),this.opts=e,this.domContext=new or(e.ref);let t=gr;er(()=>this.opts.enabled.current,e=>(e&&(globalThis.bitsTextSelectionLayers.set(this,this.opts.enabled),t(),t=Ye(this,Ae,De).call(this)),()=>{t(),Ke(this,Se).call(this),globalThis.bitsTextSelectionLayers.delete(this)}))}static create(t){return new e(t)}};const vi=e=>e.style.userSelect||e.style.webkitUserSelect;function hi(e,t){e.style.userSelect=t,e.style.webkitUserSelect=t}globalThis.bitsIdCounter??(globalThis.bitsIdCounter={current:0});Me=new WeakMap,je=new WeakMap,Ee=new WeakMap,Te=new WeakMap,Fe=new WeakSet,We=function(){He(this,je,Ke(this,je)-1),Ke(this,Te)&&Ke(this,je)<=0&&(Ke(this,Te).call(this),$t(Ke(this,Ee),void 0),He(this,Te,void 0))};const fi=new Xn;let gi=bt(null),mi=null,yi=null,bi=!1;const wi=_n(()=>{for(const e of fi.values())if(e)return!0;return!1});let ki=null;const $i=new class{constructor(e){Ze(this,Fe),Ze(this,Me),Ze(this,je,0),Ze(this,Ee,bt()),Ze(this,Te),He(this,Me,e)}get(...e){return He(this,je,Ke(this,je)+1),void 0===yt(Ke(this,Ee))&&He(this,Te,It(()=>{$t(Ke(this,Ee),Ke(this,Me).call(this,...e),!0)})),At(()=>()=>{Ye(this,Fe,We).call(this)}),yt(Ke(this,Ee))}}(()=>{function e(){null!==yi&&(window.clearTimeout(yi),yi=null)}function t(){null!==yt(gi)||0!==fi.size||bi||$t(gi,document.body.getAttribute("style"),!0)}return er(()=>wi.current,()=>{if(!wi.current)return;t(),bi=!1;const e=getComputedStyle(document.body),s=window.innerWidth-document.documentElement.clientWidth,n=Number.parseInt(e.paddingRight??"0",10)+s,r=Number.parseInt(e.marginRight??"0",10);s>0&&(document.body.style.paddingRight=`${n}px`,document.body.style.marginRight=`${r}px`,document.body.style.setProperty("--scrollbar-width",`${s}px`),document.body.style.overflow="hidden"),pr&&(mi=nt(document,"touchmove",e=>{e.target===document.documentElement&&(e.touches.length>1||e.preventDefault())},{passive:!1})),sr(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})}),tr(()=>()=>{mi?.()}),{get lockMap(){return fi},resetBodyStyle:function(){document.body.setAttribute("style",yt(gi)??""),document.body.style.removeProperty("--scrollbar-width"),pr&&mi?.(),$t(gi,null)},scheduleCleanupIfNoNewLocks:function(t,s){e(),bi=!0,ki=Date.now();const n=ki,r=null===t?24:t;yi=window.setTimeout(()=>{yi=null,ki===n&&(xi(fi)?bi=!1:(bi=!1,s()))},r)},cancelPendingCleanup:e,ensureInitialStyleCaptured:t}});class Li{constructor(e,t=()=>null){Ze(this,Oe,function(e="bits"){return globalThis.bitsIdCounter.current++,`${e}-${globalThis.bitsIdCounter.current}`}()),Ze(this,Be),Ze(this,Ie,()=>null),Ze(this,Ne),Ge(this,"locked"),He(this,Be,e),He(this,Ie,t),He(this,Ne,$i.get()),Ke(this,Ne)&&(Ke(this,Ne).cancelPendingCleanup(),Ke(this,Ne).ensureInitialStyleCaptured(),Ke(this,Ne).lockMap.set(Ke(this,Oe),Ke(this,Be)??!1),this.locked=_n(()=>Ke(this,Ne).lockMap.get(Ke(this,Oe))??!1,e=>Ke(this,Ne).lockMap.set(Ke(this,Oe),e)),tr(()=>{if(Ke(this,Ne).lockMap.delete(Ke(this,Oe)),xi(Ke(this,Ne).lockMap))return;const e=Ke(this,Ie).call(this);Ke(this,Ne).scheduleCleanupIfNoNewLocks(e,()=>{Ke(this,Ne).resetBodyStyle()})}))}}function xi(e){for(const[t,s]of e)if(s)return!0;return!1}function _i(e,t){ht(t,!0);let s=Qt(t,"preventScroll",3,!0),n=Qt(t,"restoreScrollDelay",3,null);s()&&new Li(s(),()=>n()),Lt()}Oe=new WeakMap,Be=new WeakMap,Ie=new WeakMap,Ne=new WeakMap;var Ci=Je("<div><!></div>");function Ai(e,t){const s=rt();ht(t,!0);let n=Qt(t,"id",19,()=>mr(s)),r=Qt(t,"forceMount",3,!1),i=Qt(t,"ref",15,null),o=es(t,["$$slots","$$events","$$legacy","id","forceMount","child","children","ref"]);const a=_r.create({id:_n(()=>n()),ref:_n(()=>i(),e=>i(e))}),l=kt(()=>Zn(o,a.props));var c=tt(),u=_t(c),d=e=>{var s=tt(),n=_t(s),r=e=>{var s=tt(),n=_t(s);{let e=kt(()=>({props:Zn(yt(l)),...a.snippetProps}));_s(n,()=>t.child,()=>yt(e))}et(e,s)},i=e=>{var s=Ci();Xt(s,e=>({...e}),[()=>Zn(yt(l))]);var n=ft(s);_s(n,()=>t.children??Ot,()=>a.snippetProps),gt(s),et(e,s)};Vt(n,e=>{t.child?e(r):e(i,!1)}),et(e,s)};Vt(u,e=>{(a.shouldRender||r())&&e(d)}),et(e,c),Lt()}var Di=Je("<div><!></div>");function Pi(e,t){const s=rt();ht(t,!0);let n=Qt(t,"id",19,()=>mr(s)),r=Qt(t,"ref",15,null),i=es(t,["$$slots","$$events","$$legacy","id","children","child","ref"]);const o=Lr.create({id:_n(()=>n()),ref:_n(()=>r(),e=>r(e))}),a=kt(()=>Zn(i,o.props));var l=tt(),c=_t(l),u=e=>{var s=tt(),n=_t(s);_s(n,()=>t.child,()=>({props:yt(a)})),et(e,s)},d=e=>{var s=Di();Xt(s,()=>({...yt(a)}));var n=ft(s);_s(n,()=>t.children??Ot),gt(s),et(e,s)};Vt(c,e=>{t.child?e(u):e(d,!1)}),et(e,l),Lt()}function Si(e,t){ht(t,!0);let s=Qt(t,"open",15,!1),n=Qt(t,"onOpenChange",3,gr),r=Qt(t,"onOpenChangeComplete",3,gr);wr.create({variant:_n(()=>"dialog"),open:_n(()=>s(),e=>{s(e),n()(e)}),onOpenChangeComplete:_n(()=>r())});var i=tt(),o=_t(i);_s(o,()=>t.children??Ot),et(e,i),Lt()}var Mi=Je("<button><!></button>");function ji(e,t){const s=rt();ht(t,!0);let n=Qt(t,"id",19,()=>mr(s)),r=Qt(t,"ref",15,null),i=Qt(t,"disabled",3,!1),o=es(t,["$$slots","$$events","$$legacy","children","child","id","ref","disabled"]);const a=kr.create({variant:_n(()=>"close"),id:_n(()=>n()),ref:_n(()=>r(),e=>r(e)),disabled:_n(()=>Boolean(i()))}),l=kt(()=>Zn(o,a.props));var c=tt(),u=_t(c),d=e=>{var s=tt(),n=_t(s);_s(n,()=>t.child,()=>({props:yt(l)})),et(e,s)},p=e=>{var s=Mi();Xt(s,()=>({...yt(l)}));var n=ft(s);_s(n,()=>t.children??Ot),gt(s),et(e,s)};Vt(u,e=>{t.child?e(d):e(p,!1)}),et(e,c),Lt()}var Ei=Je("<!> <!>",1),Ti=Je("<!> <div><!></div>",1);function Fi(e,t){const s=rt();ht(t,!0);let n=Qt(t,"id",19,()=>mr(s)),r=Qt(t,"ref",15,null),i=Qt(t,"forceMount",3,!1),o=Qt(t,"onCloseAutoFocus",3,gr),a=Qt(t,"onOpenAutoFocus",3,gr),l=Qt(t,"onEscapeKeydown",3,gr),c=Qt(t,"onInteractOutside",3,gr),u=Qt(t,"trapFocus",3,!0),d=Qt(t,"preventScroll",3,!0),p=Qt(t,"restoreScrollDelay",3,null),v=es(t,["$$slots","$$events","$$legacy","id","children","child","ref","forceMount","onCloseAutoFocus","onOpenAutoFocus","onEscapeKeydown","onInteractOutside","trapFocus","preventScroll","restoreScrollDelay"]);const h=xr.create({id:_n(()=>n()),ref:_n(()=>r(),e=>r(e))}),f=kt(()=>Zn(v,h.props));var g=tt(),m=_t(g),y=e=>{{const s=(e,s)=>{let n=()=>s?.().props;!function(e,t){ht(t,!0);let s=Qt(t,"escapeKeydownBehavior",3,"close"),n=Qt(t,"onEscapeKeydown",3,gr);li.create({escapeKeydownBehavior:_n(()=>s()),onEscapeKeydown:_n(()=>n()),enabled:_n(()=>t.enabled),ref:t.ref});var r=tt(),i=_t(r);_s(i,()=>t.children??Ot),et(e,r),Lt()}(e,ts(()=>yt(f),{get enabled(){return h.root.opts.open.current},get ref(){return h.opts.ref},onEscapeKeydown:e=>{l()(e),e.defaultPrevented||h.root.handleClose()},children:(e,s)=>{!function(e,t){ht(t,!0);let s=Qt(t,"interactOutsideBehavior",3,"close"),n=Qt(t,"onInteractOutside",3,gr),r=Qt(t,"onFocusOutside",3,gr),i=Qt(t,"isValidEvent",3,()=>!1);const o=oi.create({id:_n(()=>t.id),interactOutsideBehavior:_n(()=>s()),onInteractOutside:_n(()=>n()),enabled:_n(()=>t.enabled),onFocusOutside:_n(()=>r()),isValidEvent:_n(()=>i()),ref:t.ref});var a=tt(),l=_t(a);_s(l,()=>t.children??Ot,()=>({props:o.props})),et(e,a),Lt()}(e,ts(()=>yt(f),{get ref(){return h.opts.ref},get enabled(){return h.root.opts.open.current},onInteractOutside:e=>{c()(e),e.defaultPrevented||h.root.handleClose()},children:(e,s)=>{!function(e,t){ht(t,!0);let s=Qt(t,"preventOverflowTextSelection",3,!0),n=Qt(t,"onPointerDown",3,gr),r=Qt(t,"onPointerUp",3,gr);pi.create({id:_n(()=>t.id),onPointerDown:_n(()=>n()),onPointerUp:_n(()=>r()),enabled:_n(()=>t.enabled&&s()),ref:t.ref});var i=tt(),o=_t(i);_s(o,()=>t.children??Ot),et(e,i),Lt()}(e,ts(()=>yt(f),{get ref(){return h.opts.ref},get enabled(){return h.root.opts.open.current},children:(e,s)=>{var r=tt(),i=_t(r),o=e=>{var s=Ei(),r=_t(s),i=e=>{_i(0,{get preventScroll(){return d()},get restoreScrollDelay(){return p()}})};Vt(r,e=>{h.root.opts.open.current&&e(i)});var o=mt(r,2);{let e=kt(()=>({props:Zn(yt(f),n()),...h.snippetProps}));_s(o,()=>t.child,()=>yt(e))}et(e,s)},a=e=>{var s=Ti(),r=_t(s);_i(0,{get preventScroll(){return d()}});var i=mt(r,2);Xt(i,e=>({...e}),[()=>Zn(yt(f),n())]);var o=ft(i);_s(o,()=>t.children??Ot),gt(i),et(e,s)};Vt(i,e=>{t.child?e(o):e(a,!1)}),et(e,r)},$$slots:{default:!0}}))},$$slots:{default:!0}}))},$$slots:{default:!0}}))};!function(e,t){ht(t,!0);let s=Qt(t,"enabled",3,!1),n=Qt(t,"trapFocus",3,!1),r=Qt(t,"loop",3,!1),i=Qt(t,"onCloseAutoFocus",3,gr),o=Qt(t,"onOpenAutoFocus",3,gr);const a=di.use({enabled:_n(()=>s()),trap:_n(()=>n()),loop:r(),onCloseAutoFocus:_n(()=>i()),onOpenAutoFocus:_n(()=>o()),ref:t.ref});var l=tt(),c=_t(l);_s(c,()=>t.focusScope??Ot,()=>({props:a.props})),et(e,l),Lt()}(e,{get ref(){return h.opts.ref},loop:!0,get trapFocus(){return u()},get enabled(){return h.root.opts.open.current},get onOpenAutoFocus(){return a()},get onCloseAutoFocus(){return o()},focusScope:s,$$slots:{focusScope:!0}})}};Vt(m,e=>{(h.shouldRender||i())&&e(y)}),et(e,g),Lt()}var Wi=at("<svg></svg>");var Oi=Je('<!> <span class="sr-only">Close</span>',1),Bi=Je("<!> <!>",1),Ii=Je("<!> <!>",1);function Ni(e,t){ht(t,!0);let s=Qt(t,"class",3,void 0),n=es(t,["$$slots","$$events","$$legacy","children","class"]);!function(e,t){let s=es(t,["$$slots","$$events","$$legacy","children"]);var n=tt(),r=_t(n);Cs(r,()=>Tr,(e,n)=>{n(e,ts(()=>s,{children:(e,s)=>{var n=tt(),r=_t(n),i=e=>{var s=tt(),n=_t(s);_s(n,()=>t.children),et(e,s)};Vt(r,e=>{t.children&&e(i)}),et(e,n)},$$slots:{default:!0}}))}),et(e,n)}(e,{children:(e,r)=>{var i=Ii(),o=_t(i);!function(e,t){ht(t,!0);let s=Qt(t,"class",3,void 0),n=es(t,["$$slots","$$events","$$legacy","class"]);var r=tt(),i=_t(r);{let e=kt(()=>$s("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s()));Cs(i,()=>Ai,(t,s)=>{s(t,ts({get class(){return yt(e)}},()=>n))})}et(e,r),Lt()}(o,{});var a=mt(o,2);{let e=kt(()=>$s("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s()));Cs(a,()=>Fi,(s,r)=>{r(s,ts({get class(){return yt(e)}},()=>n,{children:(e,s)=>{var n=Bi(),r=_t(n),i=e=>{var s=tt(),n=_t(s);_s(n,()=>t.children),et(e,s)};Vt(r,e=>{t.children&&e(i)});var o=mt(r,2);Cs(o,()=>ji,(e,t)=>{t(e,{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:(e,t)=>{var s=Oi();!function(e,t){let s=Qt(t,"size",3,24),n=Qt(t,"color",3,"currentColor"),r=Qt(t,"strokeWidth",3,2),i=Qt(t,"class",3,""),o=es(t,["$$slots","$$events","$$legacy","size","color","strokeWidth","class"]);const a=[["line",{x1:"18",y1:"6",x2:"6",y2:"18"}],["line",{x1:"6",y1:"6",x2:"18",y2:"18"}]];var l=Wi();Xt(l,()=>({xmlns:"http://www.w3.org/2000/svg",width:s(),height:s(),viewBox:"0 0 24 24",fill:"none",stroke:n(),"stroke-width":r(),"stroke-linecap":"round","stroke-linejoin":"round",class:`lucide-icon lucide-x ${i()}`,...o})),Ut(l,21,()=>a,Zt,(e,t)=>{var s=kt(()=>Nt(yt(t),2)),n=tt(),r=_t(n);As(r,()=>yt(s)[0],!0,(e,t)=>{Xt(e,()=>({...yt(s)[1]}))}),et(e,n)}),gt(l),et(e,l)}(_t(s),{class:"h-4 w-4"}),Rt(2),et(e,s)},$$slots:{default:!0}})}),et(e,n)},$$slots:{default:!0}}))})}et(e,i)},$$slots:{default:!0}}),Lt()}var Ri=Je("<div><!></div>");var zi=Je("<div><!></div>");var Vi=Je("<!> <!>",1),Ui=Je('<div class="error-message svelte-vv5wyp"> <button class="retry-button"> </button></div>'),Gi=Je('<div class="success-message svelte-vv5wyp"> </div>'),qi=Je("<option> </option>"),Ki=Je("<option> </option>"),Zi=Je("<option> </option>"),Hi=Je("<option> </option>"),Yi=Je('<div class="form-row svelte-vv5wyp"><div class="form-group svelte-vv5wyp"><label for="lesson-category" class="svelte-vv5wyp"> </label> <select id="lesson-category" class="svelte-vv5wyp"><option> </option><!></select></div> <div class="form-group svelte-vv5wyp"><label for="lesson-part-of-speech" class="svelte-vv5wyp"> </label> <select id="lesson-part-of-speech" class="svelte-vv5wyp"><option> </option><!></select></div></div>'),Xi=Je('<div class="form-group svelte-vv5wyp"><label for="lesson-concept-type" class="svelte-vv5wyp"> </label> <input id="lesson-concept-type" type="text" class="svelte-vv5wyp"/></div>'),Ji=Je('<div class="form-group checkbox-group svelte-vv5wyp"><label class="svelte-vv5wyp"><input type="checkbox" class="svelte-vv5wyp"/> </label></div>'),Qi=Je('<div class="form-group checkbox-group svelte-vv5wyp"><label class="svelte-vv5wyp"><input type="checkbox" class="svelte-vv5wyp"/> </label></div>'),eo=Je("<!> <!>",1),to=Je('<!> <div class="lesson-generator-form svelte-vv5wyp"><!> <!> <div class="form-section svelte-vv5wyp"><h3 class="svelte-vv5wyp"> </h3> <div class="form-group svelte-vv5wyp"><label for="lesson-title" class="svelte-vv5wyp"> </label> <input id="lesson-title" type="text" class="svelte-vv5wyp"/></div> <div class="form-group svelte-vv5wyp"><label for="lesson-description" class="svelte-vv5wyp"> </label> <textarea id="lesson-description" rows="3" class="svelte-vv5wyp"></textarea></div></div> <div class="form-section svelte-vv5wyp"><h3 class="svelte-vv5wyp"> </h3> <div class="form-row svelte-vv5wyp"><div class="form-group svelte-vv5wyp"><label for="lesson-type" class="svelte-vv5wyp"> </label> <select id="lesson-type" class="svelte-vv5wyp"><option> </option><!></select></div> <div class="form-group svelte-vv5wyp"><label for="lesson-difficulty" class="svelte-vv5wyp"> </label> <select id="lesson-difficulty" class="svelte-vv5wyp"><option> </option><!></select></div></div> <!> <!> <div class="form-group svelte-vv5wyp"><label for="lesson-limit" class="svelte-vv5wyp"> </label> <select id="lesson-limit" class="svelte-vv5wyp"><option> </option><option> </option><option selected> </option><option> </option><option> </option></select></div></div> <div class="form-section svelte-vv5wyp"><h3 class="svelte-vv5wyp"> </h3> <div class="form-row svelte-vv5wyp"><div class="form-group checkbox-group svelte-vv5wyp"><label class="svelte-vv5wyp"><input type="checkbox" class="svelte-vv5wyp"/> </label></div> <!> <!></div></div></div> <!>',1);function so(e,t){function s(e,t){console.error(`[${t}]`,e)}ht(t,!0);let n=Qt(t,"isOpen",3,!1),r=Qt(t,"onClose",3,()=>{}),i=Qt(t,"onLessonGenerated",3,()=>{}),o=bt(!1),a=bt(null),l=bt(null),c=bt(!1),u=bt(Ct({title:"",description:"",type:"",difficulty:"",category:"",partOfSpeech:"",conceptType:"",limit:10,includePractice:!0,includeComparison:!1,includeReview:!1})),d=kt(()=>"vocabulary"===yt(u).type),p=kt(()=>"grammar"===yt(u).type),v=kt(()=>"mixed"===yt(u).type),h=kt(()=>ss("lesson.generator.generate_lesson")||"Generate Lesson"),f=kt(()=>ss("lesson.generator.generating")||"Generating...");function g(){$t(u,{title:"",description:"",type:"",difficulty:"",category:"",partOfSpeech:"",conceptType:"",limit:10,includePractice:!0,includeComparison:!1,includeReview:!1},!0),$t(a,null),$t(l,null),r()()}function m(){return["A1","A2","B1","B2","C1"]}function y(){return["greetings","numbers","family","food","colors","animals","body-parts","clothing","home","nature","transport","technology","time","weather","professions","places","grammar","culture","everyday-phrases"]}function b(){return["noun","verb","adjective","adverb","pronoun","preposition","conjunction","phrase"]}function w(){return["vocabulary","grammar","mixed","conversation","culture"]}!function(e,t){ht(t,!0);let s=Qt(t,"open",15,!1),n=es(t,["$$slots","$$events","$$legacy","children","open"]);var r=tt(),i=_t(r);Cs(i,()=>Si,(e,r)=>{r(e,ts(()=>n,{get open(){return s()},set open(e){s(e)},children:(e,s)=>{var n=tt(),r=_t(n),i=e=>{var s=tt(),n=_t(s);_s(n,()=>t.children),et(e,s)};Vt(r,e=>{t.children&&e(i)}),et(e,n)},$$slots:{default:!0}}))}),et(e,r),Lt()}(e,{get open(){return n()},onOpenChange:e=>{try{e||g()}catch(t){s(t,"Failed to close lesson generator modal"),$t(c,!0)}},children:(e,t)=>{Ni(e,{class:"lesson-generator-modal",children:(e,t)=>{var n=to(),r=_t(n);!function(e,t){ht(t,!0);let s=Qt(t,"class",3,void 0),n=es(t,["$$slots","$$events","$$legacy","children","class"]);var r=zi();Xt(r,e=>({class:e,...n}),[()=>$s("flex flex-col space-y-1.5 text-center sm:text-left",s())]);var i=ft(r),o=e=>{var s=tt(),n=_t(s);_s(n,()=>t.children),et(e,s)};Vt(i,e=>{t.children&&e(o)}),gt(r),et(e,r),Lt()}(r,{children:(e,t)=>{var s=Vi(),n=_t(s);!function(e,t){ht(t,!0);let s=Qt(t,"class",3,void 0),n=es(t,["$$slots","$$events","$$legacy","children","class"]);var r=tt(),i=_t(r);{let e=kt(()=>$s("text-lg font-semibold leading-none tracking-tight",s()));Cs(i,()=>Ar,(s,r)=>{r(s,ts({get class(){return yt(e)}},()=>n,{children:(e,s)=>{var n=tt(),r=_t(n),i=e=>{var s=tt(),n=_t(s);_s(n,()=>t.children),et(e,s)};Vt(r,e=>{t.children&&e(i)}),et(e,n)},$$slots:{default:!0}}))})}et(e,r),Lt()}(n,{children:(e,t)=>{Rt();var s=lt();wt(e=>Qe(s,e),[()=>ss("lesson.generator.title")]),et(e,s)},$$slots:{default:!0}}),function(e,t){ht(t,!0);let s=Qt(t,"class",3,void 0),n=es(t,["$$slots","$$events","$$legacy","children","class"]);var r=tt(),i=_t(r);{let e=kt(()=>$s("text-sm text-muted-foreground",s()));Cs(i,()=>Pi,(s,r)=>{r(s,ts({get class(){return yt(e)}},()=>n,{children:(e,s)=>{var n=tt(),r=_t(n),i=e=>{var s=tt(),n=_t(s);_s(n,()=>t.children),et(e,s)};Vt(r,e=>{t.children&&e(i)}),et(e,n)},$$slots:{default:!0}}))})}et(e,r),Lt()}(mt(n,2),{children:(e,t)=>{Rt();var s=lt();wt(e=>Qe(s,e),[()=>ss("lesson.generator.description")]),et(e,s)},$$slots:{default:!0}}),et(e,s)},$$slots:{default:!0}});var k=mt(r,2),$=ft(k),L=e=>{var t=Ui(),n=ft(t),r=mt(n);r.__click=()=>{try{$t(a,null),$t(c,!1)}catch(e){s(e,"Failed to clear error state")}};var i=ft(r,!0);gt(r),gt(t),wt(e=>{Qe(n,`‚ö†Ô∏è ${yt(a)??""} `),Qe(i,e)},[()=>ss("common.try_again")]),et(e,t)};Vt($,e=>{yt(c)&&e(L)});var x=mt($,2),_=e=>{var t=Gi(),s=ft(t);gt(t),wt(()=>Qe(s,`‚úÖ ${yt(l)??""}`)),et(e,t)};Vt(x,e=>{yt(l)&&e(_)});var C=mt(x,2),A=ft(C),D=ft(A,!0);gt(A);var P=mt(A,2),S=ft(P),M=ft(S,!0);gt(S);var j=mt(S,2);Gt(j),gt(P);var E=mt(P,2),T=ft(E),F=ft(T,!0);gt(T);var W=mt(T,2);zt(W),gt(E),gt(C);var O=mt(C,2),B=ft(O),I=ft(B,!0);gt(B);var N=mt(B,2),R=ft(N),z=ft(R),V=ft(z,!0);gt(z);var U=mt(z,2),G=ft(U),q=ft(G,!0);gt(G),G.value=G.__value="";var K=mt(G);Ut(K,17,w,Zt,(e,t)=>{var s=qi(),n=ft(s,!0);gt(s);var r={};wt(e=>{Qe(n,e),r!==(r=yt(t))&&(s.value=(s.__value=yt(t))??"")},[()=>function(e){return{vocabulary:ss("lesson.types.vocabulary"),grammar:ss("lesson.types.grammar"),mixed:ss("lesson.types.mixed"),conversation:ss("lesson.types.conversation"),reading:ss("lesson.types.reading"),listening:ss("lesson.types.listening"),writing:ss("lesson.types.writing"),culture:ss("lesson.types.culture"),contextual:ss("lesson.types.contextual")}[e]||e}(yt(t))]),et(e,s)}),gt(U),gt(R);var Z=mt(R,2),H=ft(Z),Y=ft(H,!0);gt(H);var X=mt(H,2),J=ft(X),Q=ft(J,!0);gt(J),J.value=J.__value="";var ee=mt(J);Ut(ee,17,m,Zt,(e,t)=>{var s=Ki(),n=ft(s,!0);gt(s);var r={};wt(()=>{Qe(n,yt(t)),r!==(r=yt(t))&&(s.value=(s.__value=yt(t))??"")}),et(e,s)}),gt(X),gt(Z),gt(N);var te=mt(N,2),se=e=>{var t=Yi(),s=ft(t),n=ft(s),r=ft(n,!0);gt(n);var i=mt(n,2),o=ft(i),a=ft(o,!0);gt(o),o.value=o.__value="";var l=mt(o);Ut(l,17,y,Zt,(e,t)=>{var s=Zi(),n=ft(s,!0);gt(s);var r={};wt(e=>{Qe(n,e),r!==(r=yt(t))&&(s.value=(s.__value=yt(t))??"")},[()=>function(e){return{greetings:ss("vocabulary.categories.greetings"),numbers:ss("vocabulary.categories.numbers"),family:ss("vocabulary.categories.family"),food:ss("vocabulary.categories.food"),colors:ss("vocabulary.categories.colors"),animals:ss("vocabulary.categories.animals"),body:ss("vocabulary.categories.body_parts"),clothing:ss("vocabulary.categories.clothing"),house:ss("vocabulary.categories.house_home"),nature:ss("vocabulary.categories.nature"),transport:ss("vocabulary.categories.transportation"),technology:ss("vocabulary.categories.technology"),time:ss("vocabulary.categories.time_date"),weather:ss("vocabulary.categories.weather"),professions:ss("vocabulary.categories.professions"),places:ss("vocabulary.categories.places"),grammar:ss("vocabulary.categories.grammar"),culture:ss("vocabulary.categories.culture"),common_phrases:ss("vocabulary.categories.common_phrases"),uncategorized:ss("vocabulary.categories.uncategorized")}[e]||e}(yt(t))]),et(e,s)}),gt(i),gt(s);var c=mt(s,2),d=ft(c),p=ft(d,!0);gt(d);var v=mt(d,2),h=ft(v),f=ft(h,!0);gt(h),h.value=h.__value="";var g=mt(h);Ut(g,17,b,Zt,(e,t)=>{var s=Hi(),n=ft(s,!0);gt(s);var r={};wt(e=>{Qe(n,e),r!==(r=yt(t))&&(s.value=(s.__value=yt(t))??"")},[()=>function(e){return{noun:ss("vocabulary.parts_of_speech.nouns"),verb:ss("vocabulary.parts_of_speech.verbs"),adjective:ss("vocabulary.parts_of_speech.adjectives"),adverb:ss("vocabulary.parts_of_speech.adverbs"),pronoun:ss("vocabulary.parts_of_speech.pronouns"),preposition:ss("vocabulary.parts_of_speech.prepositions"),conjunction:ss("vocabulary.parts_of_speech.conjunctions"),interjection:ss("vocabulary.parts_of_speech.interjections"),article:ss("vocabulary.parts_of_speech.articles"),number:ss("vocabulary.parts_of_speech.numbers"),phrase:ss("vocabulary.parts_of_speech.phrases")}[e]||e}(yt(t))]),et(e,s)}),gt(v),gt(c),gt(t),wt((e,t,s,n)=>{Qe(r,e),Qe(a,t),Qe(p,s),Qe(f,n)},[()=>ss("lesson.generator.category"),()=>ss("lesson.generator.any_category"),()=>ss("lesson.generator.part_of_speech"),()=>ss("lesson.generator.any_part_of_speech")]),Jt(i,()=>yt(u).category,e=>yt(u).category=e),Jt(v,()=>yt(u).partOfSpeech,e=>yt(u).partOfSpeech=e),et(e,t)};Vt(te,e=>{(yt(d)||yt(v))&&e(se)});var ne=mt(te,2),re=e=>{var t=Xi(),s=ft(t),n=ft(s,!0);gt(s);var r=mt(s,2);Gt(r),gt(t),wt((e,t)=>{Qe(n,e),Ht(r,"placeholder",t)},[()=>ss("lesson.generator.grammar_concept"),()=>ss("lesson.generator.grammar_concept_placeholder")]),Ls(r,()=>yt(u).conceptType,e=>yt(u).conceptType=e),et(e,t)};Vt(ne,e=>{yt(p)&&e(re)});var ie=mt(ne,2),oe=ft(ie),ae=ft(oe,!0);gt(oe);var le=mt(oe,2),ce=ft(le),ue=ft(ce);gt(ce),ce.value=ce.__value="5";var de=mt(ce),pe=ft(de);gt(de),de.value=de.__value="8";var ve=mt(de),he=ft(ve);gt(ve),ve.value=ve.__value="10";var fe=mt(ve),ge=ft(fe);gt(fe),fe.value=fe.__value="15";var me=mt(fe),ye=ft(me);gt(me),me.value=me.__value="20",gt(le),gt(ie),gt(O);var be=mt(O,2),we=ft(be),ke=ft(we,!0);gt(we);var $e=mt(we,2),Le=ft($e),xe=ft(Le),_e=ft(xe);Gt(_e);var Ce=mt(_e);gt(xe),gt(Le);var Ae=mt(Le,2),De=e=>{var t=Ji(),s=ft(t),n=ft(s);Gt(n);var r=mt(n);gt(s),gt(t),wt(e=>Qe(r,` ${e??""}`),[()=>ss("lesson.generator.include_language_comparison")]),xs(n,()=>yt(u).includeComparison,e=>yt(u).includeComparison=e),et(e,t)};Vt(Ae,e=>{yt(p)&&e(De)});var Pe=mt(Ae,2),Se=e=>{var t=Qi(),s=ft(t),n=ft(s);Gt(n);var r=mt(n);gt(s),gt(t),wt(e=>Qe(r,` ${e??""}`),[()=>ss("lesson.generator.include_review_section")]),xs(n,()=>yt(u).includeReview,e=>yt(u).includeReview=e),et(e,t)};Vt(Pe,e=>{(yt(d)||yt(v))&&e(Se)}),gt($e),gt(be),gt(k),function(e,t){ht(t,!0);let s=Qt(t,"class",3,void 0),n=es(t,["$$slots","$$events","$$legacy","children","class"]);var r=Ri();Xt(r,e=>({class:e,...n}),[()=>$s("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s())]);var i=ft(r),o=e=>{var s=tt(),n=_t(s);_s(n,()=>t.children),et(e,s)};Vt(i,e=>{t.children&&e(o)}),gt(r),et(e,r),Lt()}(mt(k,2),{children:(e,t)=>{var n=eo(),r=_t(n);Ds(r,{variant:"secondary",size:"default",class:"",onclick:()=>{try{g()}catch(e){s(e,"Failed to close modal"),$t(c,!0)}},get disabled(){return yt(o)},children:(e,t)=>{Rt();var s=lt();wt(e=>Qe(s,e),[()=>ss("common.cancel")]),et(e,s)},$$slots:{default:!0}});var m=mt(r,2);Ds(m,{variant:"default",size:"default",class:"",onclick:()=>{try{!async function(){try{if($t(o,!0),$t(a,null),$t(l,null),$t(c,!1),!yt(u).type||"string"!=typeof yt(u).type)throw new Error(ss("lesson.generator.errors.select_valid_lesson_type"));if(!yt(u).difficulty||"string"!=typeof yt(u).difficulty)throw new Error(ss("lesson.generator.errors.select_valid_difficulty"));let e;if(yt(d)){const t=yt(u).category?[yt(u).category]:void 0;e=await bn.generateThematicLesson(t||[],yt(u).difficulty,{includePractice:yt(u).includePractice,includeReview:yt(u).includeReview})}else if(yt(p))e=await bn.generateGrammarLesson(yt(u).conceptType||"basic",yt(u).difficulty,{includePractice:yt(u).includePractice,includeComparison:yt(u).includeComparison});else if(yt(v)){const t=yt(u).category||"everyday-phrases";e=await bn.generateMixedLesson(t,yt(u).difficulty,{includePractice:yt(u).includePractice,includeReview:yt(u).includeReview})}else{const t={type:yt(u).type,difficulty:yt(u).difficulty,criteria:{categories:yt(u).category&&"uncategorized"!==yt(u).category?[yt(u).category]:[],...yt(u).partOfSpeech?{partOfSpeech:yt(u).partOfSpeech}:{},conceptType:yt(u).conceptType,limit:yt(u).limit},userId:"local-user",metadata:{includePractice:yt(u).includePractice,includeComparison:yt(u).includeComparison,includeReview:yt(u).includeReview}};e=await bn.generateDynamicLesson(t)}yt(u).title&&(e.title=yt(u).title),yt(u).description&&(e.description=yt(u).description),i()(e),$t(l,ss("lesson.generator.success_message"),!0),setTimeout(()=>{g()},2e3)}catch(e){throw s(e,"Failed to generate lesson"),$t(a,e instanceof Error?e.message:ss("lesson.generator.errors.generation_failed"),!0),$t(c,!0),e}finally{$t(o,!1)}}()}catch(e){}},get disabled(){return yt(o)},children:(e,t)=>{Rt();var s=lt();wt(()=>Qe(s,yt(o)?yt(f):yt(h))),et(e,s)},$$slots:{default:!0}}),et(e,n)},$$slots:{default:!0}}),wt((e,t,s,n,r,i,o,a,l,c,u,d,p,v,h,f,g,m)=>{Qe(D,e),Qe(M,t),Ht(j,"placeholder",s),Qe(F,n),Ht(W,"placeholder",r),Qe(I,i),Qe(V,o),Qe(q,a),Qe(Y,l),Qe(Q,c),Qe(ae,u),Qe(ue,`5 ${d??""}`),Qe(pe,`8 ${p??""}`),Qe(he,`10 ${v??""}`),Qe(ge,`15 ${h??""}`),Qe(ye,`20 ${f??""}`),Qe(ke,g),Qe(Ce,` ${m??""}`)},[()=>ss("lesson.generator.basic_information"),()=>ss("lesson.generator.lesson_title"),()=>ss("lesson.generator.lesson_title_placeholder"),()=>ss("lesson.generator.description"),()=>ss("lesson.generator.description_placeholder"),()=>ss("lesson.generator.lesson_parameters"),()=>ss("lesson.generator.lesson_type_required"),()=>ss("lesson.generator.select_lesson_type"),()=>ss("lesson.generator.difficulty_level_required"),()=>ss("lesson.generator.select_difficulty"),()=>ss("lesson.generator.number_of_items"),()=>ss("lesson.generator.items"),()=>ss("lesson.generator.items"),()=>ss("lesson.generator.items"),()=>ss("lesson.generator.items"),()=>ss("lesson.generator.items"),()=>ss("lesson.generator.options"),()=>ss("lesson.generator.include_practice_exercises")]),Ls(j,()=>yt(u).title,e=>yt(u).title=e),Ls(W,()=>yt(u).description,e=>yt(u).description=e),Jt(U,()=>yt(u).type,e=>yt(u).type=e),Jt(X,()=>yt(u).difficulty,e=>yt(u).difficulty=e),Jt(le,()=>yt(u).limit,e=>yt(u).limit=e),xs(_e,()=>yt(u).includePractice,e=>yt(u).includePractice=e),et(e,n)},$$slots:{default:!0}})},$$slots:{default:!0}}),Lt()}Xe(["click"]);var no=Je('<div class="loading-state svelte-1vg779e"><div class="spinner svelte-1vg779e"></div> <p class="svelte-1vg779e"> </p></div>'),ro=Je('<div class="error-state svelte-1vg779e"><div class="error-icon svelte-1vg779e">‚ö†Ô∏è</div> <p class="svelte-1vg779e"> </p> <button class="retry-button svelte-1vg779e"> </button></div>'),io=Je('<div class="empty-state svelte-1vg779e"><div class="empty-icon svelte-1vg779e">üìö</div> <p class="svelte-1vg779e"> </p> <button class="create-lesson-button svelte-1vg779e"> </button></div>'),oo=Je('<option class="svelte-1vg779e"> </option>'),ao=Je('<option class="svelte-1vg779e"> </option>'),lo=Je('<!> <div class="back-to-lessons svelte-1vg779e"><button class="back-button svelte-1vg779e"> </button></div>',1),co=Je('<div class="lesson-card-wrapper svelte-1vg779e"><!></div>'),uo=Je('<div class="lessons-grid svelte-1vg779e"></div>'),po=Je('‚Ä¢ <button class="reset-filters svelte-1vg779e"> </button>',1),vo=Je('<div class="lessons-filters svelte-1vg779e"><div class="filter-group svelte-1vg779e"><label for="difficulty-filter" class="svelte-1vg779e"> </label> <select id="difficulty-filter" class="svelte-1vg779e"><option class="svelte-1vg779e"> </option><!></select></div> <div class="filter-group svelte-1vg779e"><label for="type-filter" class="svelte-1vg779e"> </label> <select id="type-filter" class="svelte-1vg779e"><option class="svelte-1vg779e"> </option><!></select></div> <button class="create-lesson-button mobile svelte-1vg779e"> </button></div> <!> <div class="lessons-summary svelte-1vg779e"><p class="svelte-1vg779e"> <!></p></div>',1),ho=Je('<div class="lessons-page svelte-1vg779e"><header class="lessons-header svelte-1vg779e"><h1 class="svelte-1vg779e"> </h1> <p class="subtitle svelte-1vg779e"> </p> <button class="create-lesson-button svelte-1vg779e"> </button></header> <!> <!></div>');function fo(e,t){ht(t,!0);let s=bt(Ct([])),n=bt(!0),r=bt(null),i=bt("all"),o=bt("all"),a=bt(!1),l=bt(null);const c={de:{vocabulary:"Vokabular",grammar:"Grammatik",conversation:"Konversation",reading:"Lesen",listening:"H√∂ren",writing:"Schreiben",culture:"Kultur",mixed:"Gemischt"},bg:{vocabulary:"–†–µ—á–Ω–∏–∫",grammar:"–ì—Ä–∞–º–∞—Ç–∏–∫–∞",conversation:"–†–∞–∑–≥–æ–≤–æ—Ä",reading:"–ß–µ—Ç–µ–Ω–µ",listening:"–°–ª—É—à–∞–Ω–µ",writing:"–ü–∏—Å–∞–Ω–µ",culture:"–ö—É–ª—Ç—É—Ä–∞",mixed:"–°–º–µ—Å–µ–Ω–æ"}},u={de:{greetings:"Begr√º√üungen",numbers:"Zahlen",family:"Familie",food:"Essen",colors:"Farben",animals:"Tiere","body-parts":"K√∂rperteile",clothing:"Kleidung",home:"Zuhause",nature:"Natur",transport:"Verkehr",technology:"Technologie",time:"Zeit",weather:"Wetter",professions:"Berufe",places:"Orte",grammar:"Grammatik",culture:"Kultur","everyday-phrases":"Alltagsphrasen"},bg:{greetings:"–ü–æ–∑–¥—Ä–∞–≤–∏",numbers:"–ß–∏—Å–ª–∞",family:"–°–µ–º–µ–π—Å—Ç–≤–æ",food:"–•—Ä–∞–Ω–∞",colors:"–¶–≤–µ—Ç–æ–≤–µ",animals:"–ñ–∏–≤–æ—Ç–Ω–∏","body-parts":"–ß–∞—Å—Ç–∏ –Ω–∞ —Ç—è–ª–æ—Ç–æ",clothing:"–û–±–ª–µ–∫–ª–æ",home:"–î–æ–º",nature:"–ü—Ä–∏—Ä–æ–¥–∞",transport:"–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç",technology:"–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏",time:"–í—Ä–µ–º–µ",weather:"–í—Ä–µ–º–µ—Ç–æ",professions:"–ü—Ä–æ—Ñ–µ—Å–∏–∏",places:"–ú–µ—Å—Ç–∞",grammar:"–ì—Ä–∞–º–∞—Ç–∏–∫–∞",culture:"–ö—É–ª—Ç—É—Ä–∞","everyday-phrases":"–ß–µ—Å—Ç–æ —Å—Ä–µ—â–∞–Ω–∏ –∏–∑—Ä–∞–∑–∏"}},d={de:{noun:"Nomen",verb:"Verben",adjective:"Adjektive",adverb:"Adverbien",pronoun:"Pronomen",preposition:"Pr√§positionen",conjunction:"Konjunktionen",interjection:"Interjektionen",article:"Artikel",number:"Zahlw√∂rter",phrase:"Redewendungen"},bg:{noun:"–°—ä—â–µ—Å—Ç–≤–∏—Ç–µ–ª–Ω–∏",verb:"–ì–ª–∞–≥–æ–ª–∏",adjective:"–ü—Ä–∏–ª–∞–≥–∞—Ç–µ–ª–Ω–∏",adverb:"–ù–∞—Ä–µ—á–∏—è",pronoun:"–ú–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è",preposition:"–ü—Ä–µ–¥–ª–æ–∑–∏",conjunction:"–°—ä—é–∑–∏",interjection:"–ú–µ–∂–¥—É–º–µ—Ç–∏—è",article:"–ß–ª–µ–Ω–æ–≤–µ",number:"–ß–∏—Å–ª–∏—Ç–µ–ª–Ω–∏",phrase:"–ò–∑—Ä–∞–∑–∏"}},p=kt(()=>"DE_BG"===ns.languageMode?{title:"Lektionen",subtitle:"Strukturierte Lernerlebnisse f√ºr Bulgarisch und Deutsch",createDynamicLesson:"‚ú® Dynamische Lektion erstellen",createLesson:"‚ú® Lektion erstellen",createFirstLesson:"Erstelle deine erste Lektion",loading:"Lektionen werden geladen...",error:"Fehler beim Laden. Bitte erneut versuchen.",retry:"Erneut versuchen",emptyTitle:"Keine Lektionen verf√ºgbar",emptyDescription:"Erstelle deine erste individuelle Lektion!",difficultyLabel:"Niveau",typeLabel:"Typ",allLevels:"Alle Niveaus",allTypes:"Alle Typen",backToLessons:"‚Üê Zur√ºck zu allen Lektionen",showingLessons:(e,t)=>`Zeige ${e} von ${t} Lektionen`,resetFilters:"Filter zur√ºcksetzen",mixedEveryday:"Gemischt: Allt√§gliche Gespr√§che",basicVocabulary:"Grundwortschatz",categoryPrefix:"Kategorie",grammarPrefix:"Grammatik"}:{title:"–£—Ä–æ—Ü–∏",subtitle:"–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–∞–Ω–∏ —É—Ä–æ—Ü–∏ –ø–æ –±—ä–ª–≥–∞—Ä—Å–∫–∏ –∏ –Ω–µ–º—Å–∫–∏",createDynamicLesson:"‚ú® –°—ä–∑–¥–∞–π –¥–∏–Ω–∞–º–∏—á–µ–Ω —É—Ä–æ–∫",createLesson:"‚ú® –°—ä–∑–¥–∞–π —É—Ä–æ–∫",createFirstLesson:"–°—ä–∑–¥–∞–π –ø—ä—Ä–≤–∏—è —Å–∏ —É—Ä–æ–∫",loading:"–ó–∞—Ä–µ–∂–¥–∞–º–µ —É—Ä–æ—Ü–∏—Ç–µ...",error:"–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ. –û–ø–∏—Ç–∞–π—Ç–µ –ø–∞–∫.",retry:"–û–ø–∏—Ç–∞–π –æ—Ç–Ω–æ–≤–æ",emptyTitle:"–ù—è–º–∞ –Ω–∞–ª–∏—á–Ω–∏ —É—Ä–æ—Ü–∏",emptyDescription:"–°—ä–∑–¥–∞–π –ø—ä—Ä–≤–∏—è —Å–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω —É—Ä–æ–∫!",difficultyLabel:"–ù–∏–≤–æ",typeLabel:"–¢–∏–ø",allLevels:"–í—Å–∏—á–∫–∏ –Ω–∏–≤–∞",allTypes:"–í—Å–∏—á–∫–∏ —Ç–∏–ø–æ–≤–µ",backToLessons:"‚Üê –ù–∞–∑–∞–¥ –∫—ä–º –≤—Å–∏—á–∫–∏ —É—Ä–æ—Ü–∏",showingLessons:(e,t)=>`–ü–æ–∫–∞–∑–∞–Ω–∏ ${e} –æ—Ç –æ–±—â–æ ${t} —É—Ä–æ–∫–∞`,resetFilters:"–ù—É–ª–∏—Ä–∞–π —Ñ–∏–ª—Ç—Ä–∏—Ç–µ",mixedEveryday:"–°–º–µ—Å–µ–Ω–æ: –ï–∂–µ–¥–Ω–µ–≤–Ω–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–∏",basicVocabulary:"–û—Å–Ω–æ–≤–Ω–∞ –ª–µ–∫—Å–∏–∫–∞",categoryPrefix:"–ö–∞—Ç–µ–≥–æ—Ä–∏—è",grammarPrefix:"–ì—Ä–∞–º–∞—Ç–∏–∫–∞"});let v=kt(()=>yt(s).filter(e=>{const t="all"===yt(i)||e.difficulty===yt(i),s="all"===yt(o)||e.type===yt(o);return t&&s}));async function h(){try{$t(n,!0),$t(r,null),await bn.initialize();const e=await async function(){const e=[],t=gs.getVocabularyStatsByDifficulty(),s=["A1","A2","B1","B2","C1"];for(const o of s)if(t[o]>=5){const s=Math.min(3,Math.floor(t[o]/5));for(let t=0;t<s;t++)try{const s=await yn.generateLessonFromCriteria({difficulty:o,limit:8,type:0===t?"vocabulary":1===t?"conversation":"mixed"});e.push(s)}catch(i){console.error(`Failed to generate ${o} lesson ${t+1}:`,i)}}const n=["greetings","numbers","family","food","colors","animals","body-parts","clothing"];for(const o of n)try{if(gs.getVocabularyByCategory(o).length>=5){const t=await yn.generateLessonFromCriteria({categories:[o],limit:8,type:"vocabulary",title:`${yt(p).categoryPrefix}: ${y(o)}`});e.push(t)}}catch(i){console.error(`Failed to generate ${o} category lesson:`,i)}const r=["noun","verb","adjective","adverb"];for(const o of r)try{if(gs.getVocabularyByPartOfSpeech(o).length>=5){const t=await yn.generateLessonFromCriteria({partOfSpeech:o,limit:8,type:"vocabulary",title:`${yt(p).grammarPrefix}: ${b(o)}`});e.push(t)}}catch(i){console.error(`Failed to generate ${o} lesson:`,i)}if(gs.getVocabularyCount()>=15)try{const t=await yn.generateLessonFromCriteria({limit:10,type:"mixed",title:yt(p).mixedEveryday});e.push(t)}catch(i){console.error("Failed to generate mixed lesson:",i)}if(0===e.length&&gs.getVocabularyCount()>0){console.warn("No lessons generated, creating fallback lessons");const t=function(){const e=[],t=gs.getVocabulary();if(t.length>=5){const s={A1:[],A2:[],B1:[],B2:[],C1:[]};t.forEach(e=>{e.difficulty<=1.5?s.A1.push(e):e.difficulty<=2.5?s.A2.push(e):e.difficulty<=3.5?s.B1.push(e):e.difficulty<=4.5?s.B2.push(e):s.C1.push(e)});for(const[t,n]of Object.entries(s))if(n.length>=5){const s=yn.generateLessonFromVocabulary(n.slice(0,8).map(e=>{const t="string"==typeof e.transliteration?{german:e.transliteration}:e.transliteration??{};return{...e,isCommon:e.metadata?.isCommon??!1,isVerified:e.metadata?.isVerified??!1,learningPhase:e.metadata?.learningPhase??0,cefrLevel:(()=>{const t=e.metadata?.level??e.level??"A1";return"C1"===t?"B2":t})(),transliteration:t,culturalNotes:e.culturalNotes}}),{title:`${t}: ${yt(p).basicVocabulary}`,difficulty:t,type:"vocabulary"});e.push(s)}}return e}();e.push(...t)}return e}();$t(s,e,!0)}catch(e){console.error("Failed to load lessons:",e),$t(r,e instanceof Error?e.message:yt(p).error,!0)}finally{$t(n,!1)}}function f(){$t(l,null)}function g(){const e=new Set;return yt(s).forEach(t=>e.add(t.type)),["all",...Array.from(e)]}function m(){return["A1","A2","B1","B2","C1"]}function y(e){return("DE_BG"===ns.languageMode?u.de:u.bg)[e]??e}function b(e){const t="DE_BG"===ns.languageMode?d.de:d.bg;return e in t?t[e]:e}At(()=>{h()});var w=ho(),k=ft(w),$=ft(k),L=ft($,!0);gt($);var x=mt($,2),_=ft(x,!0);gt(x);var C=mt(x,2);C.__click=()=>$t(a,!0);var A=ft(C,!0);gt(C),gt(k);var D=mt(k,2),P=e=>{var t=no(),s=mt(ft(t),2),n=ft(s,!0);gt(s),gt(t),wt(()=>Qe(n,yt(p).loading)),et(e,t)},S=e=>{var t=tt(),n=_t(t),u=e=>{var t=ro(),s=mt(ft(t),2),n=ft(s,!0);gt(s);var i=mt(s,2);i.__click=h;var o=ft(i,!0);gt(i),gt(t),wt(()=>{Qe(n,yt(r)),Qe(o,yt(p).retry)}),et(e,t)},d=e=>{var t=tt(),n=_t(t),r=e=>{var t=io(),s=mt(ft(t),2),n=ft(s,!0);gt(s);var r=mt(s,2);r.__click=()=>$t(a,!0);var i=ft(r,!0);gt(r),gt(t),wt(()=>{Qe(n,yt(p).emptyDescription),Qe(i,yt(p).createFirstLesson)}),et(e,t)},u=e=>{var t=vo(),n=_t(t),r=ft(n),u=ft(r),d=ft(u,!0);gt(u);var h=mt(u,2),y=ft(h),b=ft(y,!0);gt(y),y.value=y.__value="all";var w=mt(y);Ut(w,17,m,Zt,(e,t)=>{var s=oo(),n=ft(s,!0);gt(s);var r={};wt(()=>{Qe(n,yt(t)),r!==(r=yt(t))&&(s.value=(s.__value=yt(t))??"")}),et(e,s)}),gt(h),gt(r);var k=mt(r,2),$=ft(k),L=ft($,!0);gt($);var x=mt($,2),_=ft(x),C=ft(_,!0);gt(_),_.value=_.__value="all";var A=mt(_);Ut(A,17,g,Zt,(e,t)=>{var s=ao(),n=ft(s,!0);gt(s);var r={};wt(e=>{Qe(n,e),r!==(r=yt(t))&&(s.value=(s.__value=yt(t))??"")},[()=>function(e){return("DE_BG"===ns.languageMode?c.de:c.bg)[e]??e}(yt(t))]),et(e,s)}),gt(x),gt(k);var D=mt(k,2);D.__click=()=>$t(a,!0);var P=ft(D,!0);gt(D),gt(n);var S=mt(n,2),M=e=>{var t=lo(),s=_t(t);un(s,{get lesson(){return yt(l)}});var n=mt(s,2),r=ft(n);r.__click=f;var i=ft(r,!0);gt(r),gt(n),wt(()=>Qe(i,yt(p).backToLessons)),et(e,t)},j=e=>{var t=uo();Ut(t,21,()=>yt(v),e=>e.id,(e,t)=>{var s=co();zs(ft(s),{get lesson(){return yt(t)}}),gt(s),et(e,s)}),gt(t),et(e,t)};Vt(S,e=>{yt(l)?e(M):e(j,!1)});var E=mt(S,2),T=ft(E),F=ft(T),W=mt(F),O=e=>{var t=po(),s=mt(_t(t));s.__click=()=>{$t(i,"all"),$t(o,"all")};var n=ft(s,!0);gt(s),wt(()=>Qe(n,yt(p).resetFilters)),et(e,t)};Vt(W,e=>{"all"===yt(i)&&"all"===yt(o)||e(O)}),gt(T),gt(E),wt(e=>{Qe(d,yt(p).difficultyLabel),Qe(b,yt(p).allLevels),Qe(L,yt(p).typeLabel),Qe(C,yt(p).allTypes),Qe(P,yt(p).createLesson),Qe(F,`${e??""} `)},[()=>yt(p).showingLessons(yt(v).length,yt(s).length)]),Jt(h,()=>yt(i),e=>$t(i,e)),Jt(x,()=>yt(o),e=>$t(o,e)),et(e,t)};Vt(n,e=>{0===yt(s).length?e(r):e(u,!1)},!0),et(e,t)};Vt(n,e=>{yt(r)?e(u):e(d,!1)},!0),et(e,t)};Vt(D,e=>{yt(n)?e(P):e(S,!1)}),so(mt(D,2),{get isOpen(){return yt(a)},onClose:()=>$t(a,!1),onLessonGenerated:function(e){yt(s).push(e),$t(l,e,!0),$t(a,!1)}}),gt(w),wt(()=>{Qe(L,yt(p).title),Qe(_,yt(p).subtitle),Qe(A,yt(p).createDynamicLesson)}),et(e,w),Lt()}Xe(["click"]);export{fo as component};
//# sourceMappingURL=7.r29fdaDt.js.map
