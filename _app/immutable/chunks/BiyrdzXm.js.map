{"version":3,"mappings":"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","names":["r","e","t","f","n","Array","isArray","o","length","clsx","arguments","createClassPartObject","nextPart","Map","validators","classGroupId","CLASS_PART_SEPARATOR","EMPTY_CONFLICTS","createClassGroupUtils","config","classMap","createClassMap","conflictingClassGroups","conflictingClassGroupModifiers","getClassGroupId","className","startsWith","endsWith","getGroupIdForArbitraryProperty","classParts","split","startIndex","getGroupRecursive","getConflictingClassGroupIds","hasPostfixModifier","modifierConflicts","baseConflicts","array1","array2","combinedArray","i","concatArrays","classPartObject","currentClassPart","nextClassPartObject","get","result","classRest","join","slice","validatorsLength","validatorObj","validator","indexOf","content","colonIndex","property","theme","classGroups","processClassGroups","group","processClassesRecursively","classGroup","len","classDefinition","processClassDefinition","processObjectDefinition","processFunctionDefinition","processStringDefinition","getPart","isThemeGetter","push","createClassValidatorObject","entries","Object","key","value","path","current","parts","part","next","set","func","createLruCache","maxCacheSize","cacheSize","cache","create","previousCache","update","EMPTY_MODIFIERS","createResultObject","modifiers","hasImportantModifier","baseClassName","maybePostfixModifierPosition","isExternal","createParseClassName","prefix","experimentalParseClassName","parseClassName","postfixModifierPosition","bracketDepth","parenDepth","modifierStart","index","currentCharacter","baseClassNameWithImportantModifier","fullPrefix","parseClassNameOriginal","createSortModifiers","modifierWeights","orderSensitiveModifiers","forEach","mod","currentSegment","modifier","isArbitrary","isOrderSensitive","has","sort","SPLIT_CLASSES_REGEX","toValue","mix","resolvedValue","string","k","createTailwindMerge","createConfigFirst","createConfigRest","configUtils","cacheGet","cacheSet","functionToCall","tailwindMerge","classList","cachedResult","sortModifiers","classGroupsInConflict","classNames","trim","originalClassName","substring","variantModifier","modifierId","classId","conflictGroups","mergeClassList","reduce","previousConfig","createConfigCurrent","createConfigUtils","args","classLists","argument","twJoin","fallbackThemeArr","fromTheme","themeGetter","arbitraryValueRegex","arbitraryVariableRegex","fractionRegex","tshirtUnitRegex","lengthUnitRegex","colorFunctionRegex","shadowRegex","imageRegex","isFraction","test","isNumber","Number","isNaN","isInteger","isPercent","isTshirtSize","isAny","isLengthOnly","isNever","isShadow","isImage","isAnyNonArbitrary","isArbitraryValue","isArbitraryVariable","isArbitrarySize","getIsArbitraryValue","isLabelSize","isArbitraryLength","isLabelLength","isArbitraryNumber","isLabelNumber","isArbitraryPosition","isLabelPosition","isArbitraryImage","isLabelImage","isArbitraryShadow","isLabelShadow","isArbitraryVariableLength","getIsArbitraryVariable","isArbitraryVariableFamilyName","isLabelFamilyName","isArbitraryVariablePosition","isArbitraryVariableSize","isArbitraryVariableImage","isArbitraryVariableShadow","testLabel","testValue","exec","shouldMatchNoLabel","label","getDefaultConfig","themeColor","themeFont","themeText","themeFontWeight","themeTracking","themeLeading","themeBreakpoint","themeContainer","themeSpacing","themeRadius","themeShadow","themeInsetShadow","themeTextShadow","themeDropShadow","themeBlur","themePerspective","themeAspect","themeEase","themeAnimate","scalePositionWithArbitrary","scaleUnambiguousSpacing","scaleInset","scaleGridTemplateColsRows","scaleGridColRowStartAndEnd","span","scaleGridColRowStartOrEnd","scaleGridAutoColsRows","scaleMargin","scaleSizing","scaleColor","scaleBgPosition","position","scaleBgSize","size","scaleGradientStopPosition","scaleRadius","scaleBorderWidth","scaleMaskImagePosition","scaleBlur","scaleRotate","scaleScale","scaleSkew","scaleTranslate","animate","aspect","blur","breakpoint","color","container","ease","font","leading","perspective","radius","shadow","spacing","text","tracking","columns","box","display","sr","float","clear","isolation","object","overflow","overscroll","inset","start","end","top","right","bottom","left","visibility","z","basis","flex","grow","shrink","order","col","row","gap","justify","items","baseline","self","p","px","py","ps","pe","pt","pr","pb","pl","m","mx","my","ms","me","mt","mr","mb","ml","w","screen","h","list","placeholder","decoration","indent","align","whitespace","break","wrap","hyphens","bg","repeat","linear","to","radial","conic","from","via","rounded","border","divide","outline","ring","opacity","mask","closest","farthest","filter","brightness","contrast","grayscale","invert","saturate","sepia","table","caption","transition","duration","delay","backface","rotate","scale","skew","transform","origin","translate","accent","appearance","caret","scheme","cursor","resize","scroll","snap","touch","select","fill","stroke","overrideProperty","baseObject","overrideKey","overrideValue","overrideConfigProperties","overrideObject","mergeConfigProperties","mergeObject","mergeArrayProperties","mergeValue","concat","extendTailwindMerge","configExtension","createConfig","baseConfig","extend","override","mergeConfigs","twMerge","cn","inputs","_Debug","enable","enabled","log","disable","context","message","data","console","PREFIX","error","warn","Debug","AppError","Error","constructor","super","this","name","StateError","DataError","StorageError","ErrorHandler","handleError","eventBus","stack","emit","timestamp","Date","catch","emitError","EventBus","listeners","subscribe","eventType","callback","Set","add","delete","listenersCopy","listener","EventTypes","$constructor","initializer","params","init","inst","def","_zod","defineProperty","constr","_","traits","enumerable","proto","prototype","keys","bind","Parent","Definition","_a","deferred","fn","Symbol","hasInstance","$ZodAsyncError","$ZodEncodeError","globalConfig","newConfig","jsonStringifyReplacer","toString","cached","getter","nullish","input","cleanRegex","source","EVALUATING","defineLazy","v","configurable","assignProp","target","prop","writable","mergeDefs","defs","mergedDescriptors","descriptors","getOwnPropertyDescriptors","assign","defineProperties","esc","str","JSON","stringify","captureStackTrace","_args","isObject","allowsEval","navigator","userAgent","includes","Function","isPlainObject","ctor","prot","hasOwnProperty","call","shallowClone","propertyKeyTypes","escapeRegex","replace","clone","cl","parent","normalizeParams","_params","NUMBER_FORMAT_RANGES","safeint","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","int32","uint32","float32","float64","MAX_VALUE","aborted","x","issues","continue","prefixIssues","map","iss","unshift","unwrapMessage","finalizeIssue","ctx","full","customError","localeError","reportInput","getLengthableOrigin","issue","code","util.jsonStringifyReplacer","$ZodError","$ZodRealError","_parse","_Err","schema","_ctx","async","run","Promise","core.$ZodAsyncError","Err","util.finalizeIssue","core.config","util.captureStackTrace","callee","_parseAsync","_safeParse","success","errors.$ZodError","safeParse","errors.$ZodRealError","_safeParseAsync","safeParseAsync","_encode","direction","_decode","_encodeAsync","_decodeAsync","_safeEncode","_safeDecode","_safeEncodeAsync","_safeDecodeAsync","cuid","cuid2","ulid","xid","ksuid","nanoid","guid","uuid","version","RegExp","email","ipv4","ipv6","cidrv4","cidrv6","base64","base64url","e164","dateSource","date","timeSource","hhmm","precision","integer","number","boolean","lowercase","uppercase","$ZodCheck","core.$constructor","onattach","numericOriginMap","bigint","$ZodCheckLessThan","bag","curr","inclusive","maximum","exclusiveMaximum","POSITIVE_INFINITY","check","payload","abort","$ZodCheckGreaterThan","minimum","exclusiveMinimum","NEGATIVE_INFINITY","$ZodCheckMultipleOf","multipleOf","BigInt","val","step","valDecCount","stepString","stepDecCount","match","parseInt","decCount","toFixed","util.floatSafeRemainder","divisor","$ZodCheckNumberFormat","format","isInt","util.NUMBER_FORMAT_RANGES","pattern","regexes.integer","expected","isSafeInteger","note","$ZodCheckMaxLength","when","util.nullish","util.getLengthableOrigin","$ZodCheckMinLength","$ZodCheckLengthEquals","tooBig","exact","$ZodCheckStringFormat","_b","patterns","lastIndex","$ZodCheckRegex","$ZodCheckLowerCase","regexes.lowercase","$ZodCheckUpperCase","regexes.uppercase","$ZodCheckIncludes","escapedRegex","util.escapeRegex","$ZodCheckStartsWith","$ZodCheckEndsWith","suffix","$ZodCheckOverwrite","tx","Doc","indented","write","arg","execution","lines","minIndent","Math","min","trimStart","dedented","line","compile","F","major","minor","patch","$ZodType","checks","ch","parse","runChecks","asyncResult","isAborted","util.aborted","currLen","resolve","then","handleCanaryResult","canary","checkResult","skipChecks","validate","vendor","$ZodString","pop","coerce","String","$ZodStringFormat","checks.$ZodCheckStringFormat","$ZodGUID","regexes.guid","$ZodUUID","v1","v2","v3","v4","v5","v6","v7","v8","regexes.uuid","$ZodEmail","regexes.email","$ZodURL","trimmed","url","URL","hostname","protocol","normalize","href","$ZodEmoji","$ZodNanoID","regexes.nanoid","$ZodCUID","regexes.cuid","$ZodCUID2","regexes.cuid2","$ZodULID","regexes.ulid","$ZodXID","regexes.xid","$ZodKSUID","regexes.ksuid","$ZodISODateTime","time","opts","local","offset","timeRegex","regexes.datetime","$ZodISODate","regexes.date","$ZodISOTime","$ZodISODuration","regexes.duration","$ZodIPv4","regexes.ipv4","$ZodIPv6","regexes.ipv6","$ZodCIDRv4","regexes.cidrv4","$ZodCIDRv6","regexes.cidrv6","address","prefixNum","isValidBase64","atob","$ZodBase64","regexes.base64","contentEncoding","$ZodBase64URL","regexes.base64url","c","padEnd","ceil","isValidBase64URL","$ZodE164","regexes.e164","$ZodJWT","token","algorithm","tokensParts","header","parsedHeader","typ","alg","isValidJWT","$ZodNumber","regexes.number","isFinite","received","$ZodNumberFormat","checks.$ZodCheckNumberFormat","$ZodBoolean","regexes.boolean","Boolean","$ZodUnknown","$ZodNever","$ZodDate","_err","isDate","getTime","handleArrayResult","final","util.prefixIssues","$ZodArray","proms","item","element","all","handlePropertyResult","normalizeDef","shape","okeys","optin","optout","keySet","numKeys","optionalKeys","handleCatchall","unrecognized","_catchall","catchall","type","$ZodObject","desc","getOwnPropertyDescriptor","sh","newSh","_normalized","util.cached","util.defineLazy","propValues","field","values","util.isObject","$ZodObjectJIT","superParse","fastpass","jit","core.globalConfig","jitless","fastEnabled","util.allowsEval","doc","normalized","parseStr","util.esc","ids","counter","id","generateFastpass","handleUnionResults","results","nonaborted","errors","$ZodUnion","options","some","every","flatMap","option","util.cleanRegex","single","first","$ZodIntersection","handleIntersectionResults","mergeValues","a","b","valid","util.isPlainObject","bKeys","sharedKeys","newObj","sharedValue","mergeErrorPath","newArray","merged","$ZodTuple","reversedIndex","reverse","findIndex","optStart","rest","tooSmall","handleTupleResult","el","$ZodRecord","keyType","recordKeys","valueType","Reflect","ownKeys","keyResult","$ZodEnum","numericValues","util.getEnumValues","valuesSet","util.propertyKeyTypes","$ZodLiteral","$ZodTransform","core.$ZodEncodeError","_out","output","handleOptionalResult","$ZodOptional","innerType","$ZodNullable","$ZodDefault","defaultValue","handleDefaultResult","$ZodPrefault","$ZodNonOptional","handleNonOptionalResult","$ZodCatch","catchValue","$ZodPipe","in","out","handlePipeResult","$ZodReadonly","handleReadonlyResult","freeze","$ZodCustom","checks.$ZodCheck","handleRefineResult","_iss","util.issue","$ZodRegistry","_map","WeakMap","_idmap","_meta","meta","remove","pm","globalThis","__zod_globalRegistry","globalRegistry","_guid","Class","util.normalizeParams","_lt","checks.$ZodCheckLessThan","_lte","_gt","checks.$ZodCheckGreaterThan","_gte","_multipleOf","checks.$ZodCheckMultipleOf","_maxLength","checks.$ZodCheckMaxLength","_minLength","checks.$ZodCheckMinLength","_length","checks.$ZodCheckLengthEquals","_overwrite","checks.$ZodCheckOverwrite","_superRefine","_check","addIssue","_issue","fatal","ZodISODateTime","core.$ZodISODateTime","schemas.ZodStringFormat","datetime","core._isoDateTime","ZodISODate","core.$ZodISODate","core._isoDate","ZodISOTime","core.$ZodISOTime","core._isoTime","ZodISODuration","core.$ZodISODuration","core._isoDuration","ZodRealError","mapper","fieldErrors","_errors","processError","core.formatError","flatten","formErrors","sub","core.flattenError","addIssues","isEmpty","parseAsync","encode","decode","encodeAsync","decodeAsync","safeEncode","safeDecode","safeEncodeAsync","safeDecodeAsync","ZodType","core.$ZodType","util.mergeDefs","core.clone","brand","register","reg","parse.parse","parse.safeParse","parse.parseAsync","parse.safeParseAsync","spa","parse.encode","parse.decode","parse.encodeAsync","parse.decodeAsync","parse.safeEncode","parse.safeDecode","parse.safeEncodeAsync","parse.safeDecodeAsync","refine","core._refine","ZodCustom","superRefine","refinement","core._superRefine","overwrite","checks.overwrite","optional","nullable","nonoptional","ZodNonOptional","array","or","union","and","ZodIntersection","pipe","ZodTransform","default","_default","ZodDefault","util.shallowClone","prefault","ZodPrefault","_catch","ZodCatch","readonly","ZodReadonly","describe","description","core.globalRegistry","isOptional","isNullable","_ZodString","core.$ZodString","minLength","maxLength","regex","checks.$ZodCheckRegex","checks.regex","checks.$ZodCheckIncludes","checks.includes","checks.$ZodCheckStartsWith","checks.startsWith","checks.$ZodCheckEndsWith","checks.endsWith","checks.minLength","max","checks.maxLength","checks.length","nonempty","checks.$ZodCheckLowerCase","checks.lowercase","checks.$ZodCheckUpperCase","checks.uppercase","form","checks.normalize","toLowerCase","toUpperCase","slugify","util.slugify","ZodString","core._email","ZodEmail","core._url","ZodURL","jwt","core._jwt","ZodJWT","emoji","core._emoji","ZodEmoji","core._guid","ZodGUID","core._uuid","ZodUUID","uuidv4","core._uuidv4","uuidv6","core._uuidv6","uuidv7","core._uuidv7","core._nanoid","ZodNanoID","core._cuid","ZodCUID","core._cuid2","ZodCUID2","core._ulid","ZodULID","core._base64","ZodBase64","core._base64url","ZodBase64URL","core._xid","ZodXID","core._ksuid","ZodKSUID","core._ipv4","ZodIPv4","core._ipv6","ZodIPv6","core._cidrv4","ZodCIDRv4","core._cidrv6","ZodCIDRv6","core._e164","ZodE164","iso.datetime","iso.date","iso.time","iso.duration","core._string","ZodStringFormat","core.$ZodStringFormat","core.$ZodEmail","core.$ZodGUID","core.$ZodUUID","core.$ZodURL","core.$ZodEmoji","core.$ZodNanoID","core.$ZodCUID","core.$ZodCUID2","core.$ZodULID","core.$ZodXID","core.$ZodKSUID","core.$ZodIPv4","core.$ZodIPv6","core.$ZodCIDRv4","core.$ZodCIDRv6","core.$ZodBase64","core.$ZodBase64URL","core.$ZodE164","core.$ZodJWT","ZodNumber","core.$ZodNumber","gt","checks.gt","gte","checks.gte","lt","checks.lt","lte","checks.lte","int","safe","positive","nonnegative","negative","nonpositive","checks.multipleOf","finite","minValue","maxValue","core._number","ZodNumberFormat","core.$ZodNumberFormat","core._int","ZodBoolean","core.$ZodBoolean","core._boolean","ZodUnknown","core.$ZodUnknown","unknown","ZodNever","core.$ZodNever","never","core._never","ZodDate","core.$ZodDate","minDate","maxDate","core._date","ZodArray","core.$ZodArray","unwrap","core._array","ZodObject","core.$ZodObjectJIT","keyof","_enum","passthrough","loose","strict","strip","incoming","_shape","util.extend","safeExtend","util.safeExtend","merge","other","util.merge","pick","currDef","newShape","util.pick","omit","util.omit","partial","oldShape","util.partial","ZodOptional","required","util.required","ZodUnion","core.$ZodUnion","core.$ZodIntersection","ZodTuple","core.$ZodTuple","tuple","_paramsOrRest","hasRest","ZodRecord","core.$ZodRecord","record","ZodEnum","core.$ZodEnum","enum","extract","newEntries","exclude","fromEntries","ZodLiteral","core.$ZodLiteral","literal","core.$ZodTransform","core.$ZodOptional","ZodNullable","core.$ZodNullable","core.$ZodDefault","removeDefault","core.$ZodPrefault","core.$ZodNonOptional","core.$ZodCatch","removeCatch","ZodPipe","core.$ZodPipe","in_","core.$ZodReadonly","core.$ZodCustom","PartOfSpeechSchema","z.enum","VocabularyCategorySchema","LanguageLevelSchema","VerbAspectSchema","z.union","z.literal","NounGenderSchema","TransliterationSchema","z.object","german","z.string","bulgarian","AudioSchema","GrammarSchema","gender","pluralForm","verbAspect","verbPartnerId","conjugation","z.record","EnrichmentSchema","enriched","z.boolean","confidence","z.number","sourceURL","enrichedAt","DefinitionLinkSchema","language","ExampleSchema","NotesSchema","general","forBulgarianSpeakers","forGermanSpeakers","linguistic","linguisticForBulgarians","linguisticForGermans","VocabularyMetadataSchema","frequency","level","isCommon","isVerified","learningPhase","xpValue","components","z.array","meaning","notes","mnemonic","etymology","culturalNote","sourceFiles","mergeSources","createdBy","lastUpdatedBy","declension","singular","plural","links","UnifiedVocabularyItemSchema","partOfSpeech","difficulty","cefrLevel","categories","transliteration","literalBreakdown","segment","grammarTag","audio","grammar","examples","culturalNotes","mnemonics","synonyms","antonyms","relatedWords","tags","xp_value","global_stats","correct_count","incorrect_count","success_rate","metadata","enrichment","definitions","createdAt","z.date","updatedAt","UnifiedVocabularyCollectionSchema","languagePair","difficultyRange","z.tuple","itemCount","statistics","byPartOfSpeech","byDifficulty","byCategory","byLevel","ResilientUnifiedVocabularyItemSchema","now","crypto","randomUUID","_createFallbackUnifiedItem","ResilientUnifiedVocabularyCollectionSchema","CACHE_KEY","loadVocabulary","process","versions","node","fs","__vitePreload","import","__VITE_PRELOAD__","fileURLToPath","dirname","__dirname","filePath","readFile","jsonData","response","fetch","base","ok","status","json","typedError","loadFromStaticEndpoint","localStorage","cachedData","getItem","cacheDate","hoursDiff","cacheExpiryHours","loadFromCache","cacheError","typedCacheError","_fetchError","_parseError","fallbackCollection","loadBundledData","bundledError","typedBundledError","loadVocabularyBySearch","query","example","category","total","limit","hasMore","loadVocabularyById","find","loadVocabularyByCategory","loadVocabularyByDifficulty","getRandomVocabulary","count","shuffled","random","DataLoader","getInstance","instance","getRandomItems","_error","getVocabularyBySearch","searchVocabulary","sortBy","sortOrder","getVocabularyById","getVocabularyByCategory","getVocabularyByDifficulty","byteToHex","getRandomValues","rnds8","Uint8Array","native","_v4","buf","rnds","rng","arr","unsafeStringify","PracticeSessionSchema","currentItemId","startTime","endTime","score","itemsPracticed","correctAnswers","incorrectAnswers","sessionType","completed","LegacyIdSchema","VocabularyCategorySchemaWithFallback","BaseVocabularyItemSchema","VocabularyItemSchema","userId","vocabularyId","learned","proficiency","lastReviewed","reviewCount","nextReviewDate","PracticeStatSchema","correct","incorrect","lastPracticed","UserProgressStorageSchema","stats","favorites","recentSearches","lastUpdated","progress","session","exportedAt","_LocalStorageManager","saveUserProgress","dataToSave","toISOString","validationResult","setItem","USER_PROGRESS_KEY","err","loadUserProgress","safeValidateUserProgressStorage","statsMap","isPracticeStat","savePracticeSession","SESSION_KEY","loadPracticeSession","parsedData","clearPracticeSession","removeItem","exportUserData","importUserData","clearAllData","LocalStorageManager","VocabularyMasterySchema","itemId","correctCount","incorrectCount","totalAttempts","masteryLevel","isMastered","LessonProgressSchema","lessonId","completionPercentage","lastAccessed","completedAt","QuizPerformanceSchema","quizId","sessionId","totalQuestions","timeTaken","QuestionPerformanceSchema","quizPerformanceId","questionId","questionType","wasCorrect","userAnswer","correctAnswer","DailyProgressSchema","xpEarned","wordsPracticed","lessonsCompleted","quizzesTaken","timeSpent","OverallProgressSchema","totalXP","totalWordsPracticed","totalLessonsCompleted","totalQuizzesTaken","totalTimeSpent","currentLevel","currentStreak","longestStreak","lastActiveDate","ProgressDataSchema","vocabularyMastery","lessonProgress","quizPerformance","questionPerformance","dailyProgress","overallProgress","calculateLevel","floor","sqrt","calculateXPForLevel","pow","LearningSession","__privateSet","_isActive","$.state","_currentStreak","_sessionXP","_dailyXP","_lastPracticeDate","_totalXP","dailyTarget","xpEventUnsubscribe","levelUpEventUnsubscribe","_nextLevelXP","$.derived","xpInLevel","currentLevelStartXP","levelSpan","nextLevelXP","dailyXP","_isDailyGoalReached","loadState","event","handleXPEarned","handleLevelUp","levelProgress","progressPercentage","isDailyGoalReached","startSession","isActive","sessionXP","checkStreak","endSession","saveState","awardXP","amount","reason","oldLevel","newLevel","getTotalXP","today","lastPracticeDate","yesterday","setDate","getDate","yesterdayStr","saved","parsed","hasSavedData","currentStreakType","dailyXPType","lastPracticeDateType","totalXPType","destroy","learningSessionInstance","setLearningSession","window","addEventListener","ProgressService","progressData","getDefaultProgressData","loadProgress","recordVocabularyPractice","_responseTime","mastery","round","calculateMasteryLevel","updateOverallProgress","XP_VALUES","VOCABULARY_PRACTICE","responseTime","VOCABULARY_MASTERED","saveProgress","getVocabularyMastery","getAllVocabularyMastery","getVocabularyNeedingPractice","recordLessonProgress","LESSON_COMPLETED","getLessonProgress","getAllLessonProgress","recordQuizPerformance","QUIZ_COMPLETED","recordQuestionPerformance","getQuizPerformance","getAllQuizPerformance","getQuizPerformanceByQuizId","performance","recordDailyProgress","getDailyProgress","getAllDailyProgress","getRecentDailyProgress","days","dateStr","updateStreak","learningSession","getOverallProgress","getLevelInfo","currentXP","currentLevelXP","_reason","savedData","exportProgress","importProgress","validatedData","resetProgress","getProgressSummary","levelInfo","dailyGoalProgress","getVocabularyMasteryStats","allItems","masteredItems","totalItems","masteryPercentage","averageMasteryLevel","sum","getLessonCompletionStats","allLessons","completedLessons","lesson","totalLessons","DAILY_GOAL","LessonGenerationError","TemplateRenderingError","DataValidationError","isLessonDifficulty","isLessonType","lessonTemplateRepository","templates","_initialized","templateCache","initialized","initialize","loadTemplates","cacheTemplates","getTemplate","cacheKey","matchingTemplates","template","isDifficultyInRange","selectedTemplate","getTemplateById","templateId","getAllTemplates","validateTemplate","isValidDifficultyRange","variables","variable","isValidDefaultValue","templateModules","_path","importFn","createFallbackTemplate","getDifficultiesInRange","range","difficultyOrder","minIndex","maxIndex","difficultyIndex","culturalGrammarService","grammarConcepts","loadGrammarData","criteria","concept","difficultyMatch","posMatch","conceptAppliesToPartOfSpeech","conceptTypeMatch","conceptType","relatedConcepts","getAllConcepts","concepts","getFallbackGrammarData","validConcepts","validateConcept","culturalContext","commonMistakes","pos","bulgarianPerspective","germanPerspective","crossLinguisticExplanation","bgToDe","deToBg","explanationBgToDe","explanationDeToBg","getSourceText","appState","languageMode","getTargetText","getSourceLanguage","getTargetLanguage","getSourceLanguageName","getTargetLanguageName","getDirectionArrow","getDirectionText","getOppositeDirectionText","getLanguageProperty","obj","sourceLang","getOppositeLanguageProperty","targetLang","formatBilingualExample","getDirectionalTemplate","templateDE","templateBG","templateRenderer","render","validateData","renderTemplate","isValidValue","templateString","previousContent","passCount","processLoops","processConditionals","processVariables","resolveValue","extendedData","variableName","blockContent","fullBlockContent","condition","elseSplit","trueBlock","falseBlock","eachRegex","fullMatch","arrayName","arrayValue","renderedItems","iterationContext","processedBlock","LessonGenerationEngine","templateRepository","grammarService","renderer","vocabularyCache","generateLesson","normalizedParams","normalizeLessonType","normalizeCategories","generateThematicLesson","generateGrammarLesson","generateContextualLesson","includePractice","includeReview","sections","allVocabularyItems","learningObjectives","vocabulary","normalizeVocabularyItem","maxItems","numericDifficulty","mapDifficultyToNumber","vocabularyItems","filteredItems","validatePartOfSpeech","normalizeVocabularyList","introTemplate","themeName","charAt","enhancedVocabularyItems","correctedPartOfSpeech","correctPartOfSpeech","grammarInfo","getFallbackGrammarInfo","introContext","sectionTitle","learningTip","introContent","title","practiceTemplate","practiceContext","instructions","practiceContent","reviewTemplate","reviewItems","reviewContext","reviewContent","_options","includeComparison","mainConcept","exampleVocabulary","searchResult","conceptTemplate","conceptContext","grammarConcept","conceptContent","conceptId","comparisonTemplate","comparisonContext","comparisonContent","normalizedCategory","renderedContent","createLessonObject","generateAdaptiveLesson","A1","A2","B1","B2","C1","allowed","word","commonMisclassifications","zdravej_001","dobro_utro_002","guten_tag","guten_abend","gute_nacht","auf_wiedersehen","bitte","entschuldigung","es_tut_mir_leid","a1_question_001","a1_question_003","a1_question_004","a1_question_005","a1_question_006","a1_question_007","a1_question_008","a1_question_009","a1_question_010","a1_question_011","a1_question_012","eins","zwei","drei","vier","funf","sechs","sieben","acht","neun","zehn","elf","zwoelf","dreizehn","zwanzig","a1_number_200","interjection","pronoun","adverb","numeral","phrase","conjunction","noun","verb","adjective","preposition","article","normalizedType","normalizedVocabulary","sectionType","section","lessonGenerationEngine","DIContainer","services","isInitialized","initializationPromise","reject","progressService","getService","serviceName","getAppDataState","registerService","getEventBus","diContainer","vocabularyDb","$.proxy","loadInitialData","dataLoader","updates","getVocabulary","getDifficultyRange","getVocabularyByPartOfSpeech","getVocabularyByCriteria","categoryMatch","partOfSpeechMatch","lowerQuery","tag","getVocabularyCount","getVocabularyStatsByDifficulty","getTag","isString","isBoolean","isObjectLike","isDefined","isBlank","hasOwn","KeyStore","_keys","_keyMap","totalWeight","createKey","weight","keyId","toJSON","src","getFn","createKeyPath","createKeyId","MISSING_KEY_PROPERTY","INVALID_KEY_WEIGHT_VALUE","Config","isCaseSensitive","ignoreDiacritics","includeScore","shouldSort","sortFn","idx","includeMatches","findAllMatches","minMatchCharLength","location","threshold","distance","useExtendedSearch","deepGet","baseToString","ignoreLocation","ignoreFieldNorm","fieldNormWeight","SPACE","FuseIndex","norm","mantissa","numTokens","parseFloat","isCreated","setIndexRecords","setSources","docs","records","setKeys","_keysMap","docIndex","_addString","_addObject","removeAt","splice","getValueForItemAtKeyId","$","keyIndex","subRecords","nestedArrIndex","subRecord","createIndex","myIndex","computeScore$1","currentLocation","expectedLocation","accuracy","proximity","abs","MAX_BITS","search","patternAlphabet","patternLen","textLen","currentThreshold","bestLocation","computeMatches","matchMask","lastBitArr","finalScore","binMax","binMin","binMid","finish","bitArr","j","charMatch","isMatch","indices","matchmask","convertMaskToIndices","createPatternAlphabet","char","stripDiacritics","BitapSearch","chunks","addChunk","alphabet","remainder","substr","searchIn","allIndices","totalScore","hasMatches","BaseMatch","isMultiMatch","getMatch","multiRegex","isSingleMatch","singleRegex","exp","matches","FuzzyMatch","_bitapSearch","IncludeMatch","searchers","searchersLen","SPACE_RE","MultiMatchSet","ExtendedSearch","queryItem","found","searcher","parseQuery","numMatches","qLen","pLen","registeredSearchers","createSearcher","searcherClass","LogicalOperator","KeyType","isExpression","convertToExplicit","LogicalOperator_AND","auto","isQueryPath","isPath","isLeaf","LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY","children","operator","transformMatches","refIndex","transformScore","Fuse","_keyStore","setCollection","_docs","_myIndex","predicate","getIndex","_searchStringList","_searchObjectList","_searchLogical","EPSILON","computeScore","transformers","transformer","expression","evaluate","_findMatches","res","child","resultMap","expResults","parseIndex","getVocabularyData","collection","safeOffset","safeLimit","learningPhaseMatch","applyFilters","fuse","applyFuzzySearch","localeCompare","applySorting","endIndex","applyPagination","clearVocabularyCache","getSearchSuggestions","suggestions","translit","getVocabularyStats","phase","commonStatus","verifiedStatus","vocabularyService","lastCorrect","streak","Transaction","operations","rollbackOperations","isCommitted","addOperation","operation","rollback","commit","executedOperations","rollbackIndex","rollbackOp","rollbackError","typedRollbackError","isComplete","_TransactionManager","startTransaction","transactionId","activeTransactions","transaction","getTransaction","commitTransaction","rollbackTransaction","TransactionManager","appDataState","_practiceStats","_lastError","_isError","toggleFavorite","fav","isFavorite","recordPracticeResult","originalStats","practiceStats","originalFavorites","originalSearches","updatedStats","newStats","statsType","favoritesType","searchesType","hasStats","hasFavorites","hasSearches","exportData","importData","jsonDataType","jsonDataLength","isError","lastError","setTimeout","clearError","appUIState","dataState","_languageMode","_searchQuery","_currentItem","_showAnswer","_practiceMode","_isLoading","_displayDirection","searchQuery","q","recommendations","toggleLanguageMode","triggerLanguageModePersistence","LocalizationService","notifyLanguageChange","toggleDirection","setSearchQuery","setCurrentItem","currentItem","showAnswer","togglePracticeMode","practiceMode","startPracticeSession","toggleShowAnswer","setError","oldSaved","isLoading","displayDirection","practiceRecommendations","getAllVocabularyItems"],"ignoreList":[0,1,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,23,24,25,26,42],"sources":["../../../../../../node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs","../../../../../../node_modules/.pnpm/tailwind-merge@3.4.0/node_modules/tailwind-merge/dist/bundle-mjs.mjs","../../../../../../src/lib/utils.ts","../../../../../../src/lib/services/errors.ts","../../../../../../src/lib/services/event-bus.ts","../../../../../../node_modules/.pnpm/zod@4.1.13/node_modules/zod/v4/core/core.js","../../../../../../node_modules/.pnpm/zod@4.1.13/node_modules/zod/v4/core/util.js","../../../../../../node_modules/.pnpm/zod@4.1.13/node_modules/zod/v4/core/errors.js","../../../../../../node_modules/.pnpm/zod@4.1.13/node_modules/zod/v4/core/parse.js","../../../../../../node_modules/.pnpm/zod@4.1.13/node_modules/zod/v4/core/regexes.js","../../../../../../node_modules/.pnpm/zod@4.1.13/node_modules/zod/v4/core/checks.js","../../../../../../node_modules/.pnpm/zod@4.1.13/node_modules/zod/v4/core/doc.js","../../../../../../node_modules/.pnpm/zod@4.1.13/node_modules/zod/v4/core/versions.js","../../../../../../node_modules/.pnpm/zod@4.1.13/node_modules/zod/v4/core/schemas.js","../../../../../../node_modules/.pnpm/zod@4.1.13/node_modules/zod/v4/core/registries.js","../../../../../../node_modules/.pnpm/zod@4.1.13/node_modules/zod/v4/core/api.js","../../../../../../node_modules/.pnpm/zod@4.1.13/node_modules/zod/v4/classic/iso.js","../../../../../../node_modules/.pnpm/zod@4.1.13/node_modules/zod/v4/classic/errors.js","../../../../../../node_modules/.pnpm/zod@4.1.13/node_modules/zod/v4/classic/parse.js","../../../../../../node_modules/.pnpm/zod@4.1.13/node_modules/zod/v4/classic/schemas.js","../../../../../../src/lib/schemas/unified-vocabulary.ts","../../../../../../src/lib/data/loader.ts","../../../../../../src/lib/data/DataLoader.svelte.ts","../../../../../../node_modules/.pnpm/uuid@13.0.0/node_modules/uuid/dist/stringify.js","../../../../../../node_modules/.pnpm/uuid@13.0.0/node_modules/uuid/dist/rng.js","../../../../../../node_modules/.pnpm/uuid@13.0.0/node_modules/uuid/dist/native.js","../../../../../../node_modules/.pnpm/uuid@13.0.0/node_modules/uuid/dist/v4.js","../../../../../../src/lib/schemas/practiceSession.ts","../../../../../../src/lib/schemas/vocabulary.js","../../../../../../src/lib/schemas/localStorage.js","../../../../../../src/lib/utils/localStorage.ts","../../../../../../src/lib/schemas/progress.js","../../../../../../src/lib/state/session.svelte.ts","../../../../../../src/lib/services/progress.js","../../../../../../src/lib/services/lesson-generation/types.ts","../../../../../../src/lib/services/lesson-generation/lesson-templates.ts","../../../../../../src/lib/services/lesson-generation/cultural-grammar.ts","../../../../../../src/lib/services/lesson-generation/template-language-adapter.ts","../../../../../../src/lib/services/lesson-generation/template-renderer.ts","../../../../../../src/lib/services/lesson-generation/lesson-generator.ts","../../../../../../src/lib/services/di-container.ts","../../../../../../src/lib/data/db.svelte.ts","../../../../../../node_modules/.pnpm/fuse.js@7.1.0/node_modules/fuse.js/dist/fuse.mjs","../../../../../../src/lib/services/search.ts","../../../../../../src/lib/data/vocabulary.ts","../../../../../../src/lib/utils/transaction.ts","../../../../../../src/lib/state/app-state.ts","../../../../../../src/lib/state/app-data.svelte.ts","../../../../../../src/lib/state/app-ui.svelte.ts"],"sourcesContent":["function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","/**\n * Concatenates two arrays faster than the array spread operator.\n */\nconst concatArrays = (array1, array2) => {\n  // Pre-allocate for better V8 optimization\n  const combinedArray = new Array(array1.length + array2.length);\n  for (let i = 0; i < array1.length; i++) {\n    combinedArray[i] = array1[i];\n  }\n  for (let i = 0; i < array2.length; i++) {\n    combinedArray[array1.length + i] = array2[i];\n  }\n  return combinedArray;\n};\n\n// Factory function ensures consistent object shapes\nconst createClassValidatorObject = (classGroupId, validator) => ({\n  classGroupId,\n  validator\n});\n// Factory ensures consistent ClassPartObject shape\nconst createClassPartObject = (nextPart = new Map(), validators = null, classGroupId) => ({\n  nextPart,\n  validators,\n  classGroupId\n});\nconst CLASS_PART_SEPARATOR = '-';\nconst EMPTY_CONFLICTS = [];\n// I use two dots here because one dot is used as prefix for class groups in plugins\nconst ARBITRARY_PROPERTY_PREFIX = 'arbitrary..';\nconst createClassGroupUtils = config => {\n  const classMap = createClassMap(config);\n  const {\n    conflictingClassGroups,\n    conflictingClassGroupModifiers\n  } = config;\n  const getClassGroupId = className => {\n    if (className.startsWith('[') && className.endsWith(']')) {\n      return getGroupIdForArbitraryProperty(className);\n    }\n    const classParts = className.split(CLASS_PART_SEPARATOR);\n    // Classes like `-inset-1` produce an empty string as first classPart. We assume that classes for negative values are used correctly and skip it.\n    const startIndex = classParts[0] === '' && classParts.length > 1 ? 1 : 0;\n    return getGroupRecursive(classParts, startIndex, classMap);\n  };\n  const getConflictingClassGroupIds = (classGroupId, hasPostfixModifier) => {\n    if (hasPostfixModifier) {\n      const modifierConflicts = conflictingClassGroupModifiers[classGroupId];\n      const baseConflicts = conflictingClassGroups[classGroupId];\n      if (modifierConflicts) {\n        if (baseConflicts) {\n          // Merge base conflicts with modifier conflicts\n          return concatArrays(baseConflicts, modifierConflicts);\n        }\n        // Only modifier conflicts\n        return modifierConflicts;\n      }\n      // Fall back to without postfix if no modifier conflicts\n      return baseConflicts || EMPTY_CONFLICTS;\n    }\n    return conflictingClassGroups[classGroupId] || EMPTY_CONFLICTS;\n  };\n  return {\n    getClassGroupId,\n    getConflictingClassGroupIds\n  };\n};\nconst getGroupRecursive = (classParts, startIndex, classPartObject) => {\n  const classPathsLength = classParts.length - startIndex;\n  if (classPathsLength === 0) {\n    return classPartObject.classGroupId;\n  }\n  const currentClassPart = classParts[startIndex];\n  const nextClassPartObject = classPartObject.nextPart.get(currentClassPart);\n  if (nextClassPartObject) {\n    const result = getGroupRecursive(classParts, startIndex + 1, nextClassPartObject);\n    if (result) return result;\n  }\n  const validators = classPartObject.validators;\n  if (validators === null) {\n    return undefined;\n  }\n  // Build classRest string efficiently by joining from startIndex onwards\n  const classRest = startIndex === 0 ? classParts.join(CLASS_PART_SEPARATOR) : classParts.slice(startIndex).join(CLASS_PART_SEPARATOR);\n  const validatorsLength = validators.length;\n  for (let i = 0; i < validatorsLength; i++) {\n    const validatorObj = validators[i];\n    if (validatorObj.validator(classRest)) {\n      return validatorObj.classGroupId;\n    }\n  }\n  return undefined;\n};\n/**\n * Get the class group ID for an arbitrary property.\n *\n * @param className - The class name to get the group ID for. Is expected to be string starting with `[` and ending with `]`.\n */\nconst getGroupIdForArbitraryProperty = className => className.slice(1, -1).indexOf(':') === -1 ? undefined : (() => {\n  const content = className.slice(1, -1);\n  const colonIndex = content.indexOf(':');\n  const property = content.slice(0, colonIndex);\n  return property ? ARBITRARY_PROPERTY_PREFIX + property : undefined;\n})();\n/**\n * Exported for testing only\n */\nconst createClassMap = config => {\n  const {\n    theme,\n    classGroups\n  } = config;\n  return processClassGroups(classGroups, theme);\n};\n// Split into separate functions to maintain monomorphic call sites\nconst processClassGroups = (classGroups, theme) => {\n  const classMap = createClassPartObject();\n  for (const classGroupId in classGroups) {\n    const group = classGroups[classGroupId];\n    processClassesRecursively(group, classMap, classGroupId, theme);\n  }\n  return classMap;\n};\nconst processClassesRecursively = (classGroup, classPartObject, classGroupId, theme) => {\n  const len = classGroup.length;\n  for (let i = 0; i < len; i++) {\n    const classDefinition = classGroup[i];\n    processClassDefinition(classDefinition, classPartObject, classGroupId, theme);\n  }\n};\n// Split into separate functions for each type to maintain monomorphic call sites\nconst processClassDefinition = (classDefinition, classPartObject, classGroupId, theme) => {\n  if (typeof classDefinition === 'string') {\n    processStringDefinition(classDefinition, classPartObject, classGroupId);\n    return;\n  }\n  if (typeof classDefinition === 'function') {\n    processFunctionDefinition(classDefinition, classPartObject, classGroupId, theme);\n    return;\n  }\n  processObjectDefinition(classDefinition, classPartObject, classGroupId, theme);\n};\nconst processStringDefinition = (classDefinition, classPartObject, classGroupId) => {\n  const classPartObjectToEdit = classDefinition === '' ? classPartObject : getPart(classPartObject, classDefinition);\n  classPartObjectToEdit.classGroupId = classGroupId;\n};\nconst processFunctionDefinition = (classDefinition, classPartObject, classGroupId, theme) => {\n  if (isThemeGetter(classDefinition)) {\n    processClassesRecursively(classDefinition(theme), classPartObject, classGroupId, theme);\n    return;\n  }\n  if (classPartObject.validators === null) {\n    classPartObject.validators = [];\n  }\n  classPartObject.validators.push(createClassValidatorObject(classGroupId, classDefinition));\n};\nconst processObjectDefinition = (classDefinition, classPartObject, classGroupId, theme) => {\n  const entries = Object.entries(classDefinition);\n  const len = entries.length;\n  for (let i = 0; i < len; i++) {\n    const [key, value] = entries[i];\n    processClassesRecursively(value, getPart(classPartObject, key), classGroupId, theme);\n  }\n};\nconst getPart = (classPartObject, path) => {\n  let current = classPartObject;\n  const parts = path.split(CLASS_PART_SEPARATOR);\n  const len = parts.length;\n  for (let i = 0; i < len; i++) {\n    const part = parts[i];\n    let next = current.nextPart.get(part);\n    if (!next) {\n      next = createClassPartObject();\n      current.nextPart.set(part, next);\n    }\n    current = next;\n  }\n  return current;\n};\n// Type guard maintains monomorphic check\nconst isThemeGetter = func => 'isThemeGetter' in func && func.isThemeGetter === true;\n\n// LRU cache implementation using plain objects for simplicity\nconst createLruCache = maxCacheSize => {\n  if (maxCacheSize < 1) {\n    return {\n      get: () => undefined,\n      set: () => {}\n    };\n  }\n  let cacheSize = 0;\n  let cache = Object.create(null);\n  let previousCache = Object.create(null);\n  const update = (key, value) => {\n    cache[key] = value;\n    cacheSize++;\n    if (cacheSize > maxCacheSize) {\n      cacheSize = 0;\n      previousCache = cache;\n      cache = Object.create(null);\n    }\n  };\n  return {\n    get(key) {\n      let value = cache[key];\n      if (value !== undefined) {\n        return value;\n      }\n      if ((value = previousCache[key]) !== undefined) {\n        update(key, value);\n        return value;\n      }\n    },\n    set(key, value) {\n      if (key in cache) {\n        cache[key] = value;\n      } else {\n        update(key, value);\n      }\n    }\n  };\n};\nconst IMPORTANT_MODIFIER = '!';\nconst MODIFIER_SEPARATOR = ':';\nconst EMPTY_MODIFIERS = [];\n// Pre-allocated result object shape for consistency\nconst createResultObject = (modifiers, hasImportantModifier, baseClassName, maybePostfixModifierPosition, isExternal) => ({\n  modifiers,\n  hasImportantModifier,\n  baseClassName,\n  maybePostfixModifierPosition,\n  isExternal\n});\nconst createParseClassName = config => {\n  const {\n    prefix,\n    experimentalParseClassName\n  } = config;\n  /**\n   * Parse class name into parts.\n   *\n   * Inspired by `splitAtTopLevelOnly` used in Tailwind CSS\n   * @see https://github.com/tailwindlabs/tailwindcss/blob/v3.2.2/src/util/splitAtTopLevelOnly.js\n   */\n  let parseClassName = className => {\n    // Use simple array with push for better performance\n    const modifiers = [];\n    let bracketDepth = 0;\n    let parenDepth = 0;\n    let modifierStart = 0;\n    let postfixModifierPosition;\n    const len = className.length;\n    for (let index = 0; index < len; index++) {\n      const currentCharacter = className[index];\n      if (bracketDepth === 0 && parenDepth === 0) {\n        if (currentCharacter === MODIFIER_SEPARATOR) {\n          modifiers.push(className.slice(modifierStart, index));\n          modifierStart = index + 1;\n          continue;\n        }\n        if (currentCharacter === '/') {\n          postfixModifierPosition = index;\n          continue;\n        }\n      }\n      if (currentCharacter === '[') bracketDepth++;else if (currentCharacter === ']') bracketDepth--;else if (currentCharacter === '(') parenDepth++;else if (currentCharacter === ')') parenDepth--;\n    }\n    const baseClassNameWithImportantModifier = modifiers.length === 0 ? className : className.slice(modifierStart);\n    // Inline important modifier check\n    let baseClassName = baseClassNameWithImportantModifier;\n    let hasImportantModifier = false;\n    if (baseClassNameWithImportantModifier.endsWith(IMPORTANT_MODIFIER)) {\n      baseClassName = baseClassNameWithImportantModifier.slice(0, -1);\n      hasImportantModifier = true;\n    } else if (\n    /**\n     * In Tailwind CSS v3 the important modifier was at the start of the base class name. This is still supported for legacy reasons.\n     * @see https://github.com/dcastil/tailwind-merge/issues/513#issuecomment-2614029864\n     */\n    baseClassNameWithImportantModifier.startsWith(IMPORTANT_MODIFIER)) {\n      baseClassName = baseClassNameWithImportantModifier.slice(1);\n      hasImportantModifier = true;\n    }\n    const maybePostfixModifierPosition = postfixModifierPosition && postfixModifierPosition > modifierStart ? postfixModifierPosition - modifierStart : undefined;\n    return createResultObject(modifiers, hasImportantModifier, baseClassName, maybePostfixModifierPosition);\n  };\n  if (prefix) {\n    const fullPrefix = prefix + MODIFIER_SEPARATOR;\n    const parseClassNameOriginal = parseClassName;\n    parseClassName = className => className.startsWith(fullPrefix) ? parseClassNameOriginal(className.slice(fullPrefix.length)) : createResultObject(EMPTY_MODIFIERS, false, className, undefined, true);\n  }\n  if (experimentalParseClassName) {\n    const parseClassNameOriginal = parseClassName;\n    parseClassName = className => experimentalParseClassName({\n      className,\n      parseClassName: parseClassNameOriginal\n    });\n  }\n  return parseClassName;\n};\n\n/**\n * Sorts modifiers according to following schema:\n * - Predefined modifiers are sorted alphabetically\n * - When an arbitrary variant appears, it must be preserved which modifiers are before and after it\n */\nconst createSortModifiers = config => {\n  // Pre-compute weights for all known modifiers for O(1) comparison\n  const modifierWeights = new Map();\n  // Assign weights to sensitive modifiers (highest priority, but preserve order)\n  config.orderSensitiveModifiers.forEach((mod, index) => {\n    modifierWeights.set(mod, 1000000 + index); // High weights for sensitive mods\n  });\n  return modifiers => {\n    const result = [];\n    let currentSegment = [];\n    // Process modifiers in one pass\n    for (let i = 0; i < modifiers.length; i++) {\n      const modifier = modifiers[i];\n      // Check if modifier is sensitive (starts with '[' or in orderSensitiveModifiers)\n      const isArbitrary = modifier[0] === '[';\n      const isOrderSensitive = modifierWeights.has(modifier);\n      if (isArbitrary || isOrderSensitive) {\n        // Sort and flush current segment alphabetically\n        if (currentSegment.length > 0) {\n          currentSegment.sort();\n          result.push(...currentSegment);\n          currentSegment = [];\n        }\n        result.push(modifier);\n      } else {\n        // Regular modifier - add to current segment for batch sorting\n        currentSegment.push(modifier);\n      }\n    }\n    // Sort and add any remaining segment items\n    if (currentSegment.length > 0) {\n      currentSegment.sort();\n      result.push(...currentSegment);\n    }\n    return result;\n  };\n};\nconst createConfigUtils = config => ({\n  cache: createLruCache(config.cacheSize),\n  parseClassName: createParseClassName(config),\n  sortModifiers: createSortModifiers(config),\n  ...createClassGroupUtils(config)\n});\nconst SPLIT_CLASSES_REGEX = /\\s+/;\nconst mergeClassList = (classList, configUtils) => {\n  const {\n    parseClassName,\n    getClassGroupId,\n    getConflictingClassGroupIds,\n    sortModifiers\n  } = configUtils;\n  /**\n   * Set of classGroupIds in following format:\n   * `{importantModifier}{variantModifiers}{classGroupId}`\n   * @example 'float'\n   * @example 'hover:focus:bg-color'\n   * @example 'md:!pr'\n   */\n  const classGroupsInConflict = [];\n  const classNames = classList.trim().split(SPLIT_CLASSES_REGEX);\n  let result = '';\n  for (let index = classNames.length - 1; index >= 0; index -= 1) {\n    const originalClassName = classNames[index];\n    const {\n      isExternal,\n      modifiers,\n      hasImportantModifier,\n      baseClassName,\n      maybePostfixModifierPosition\n    } = parseClassName(originalClassName);\n    if (isExternal) {\n      result = originalClassName + (result.length > 0 ? ' ' + result : result);\n      continue;\n    }\n    let hasPostfixModifier = !!maybePostfixModifierPosition;\n    let classGroupId = getClassGroupId(hasPostfixModifier ? baseClassName.substring(0, maybePostfixModifierPosition) : baseClassName);\n    if (!classGroupId) {\n      if (!hasPostfixModifier) {\n        // Not a Tailwind class\n        result = originalClassName + (result.length > 0 ? ' ' + result : result);\n        continue;\n      }\n      classGroupId = getClassGroupId(baseClassName);\n      if (!classGroupId) {\n        // Not a Tailwind class\n        result = originalClassName + (result.length > 0 ? ' ' + result : result);\n        continue;\n      }\n      hasPostfixModifier = false;\n    }\n    // Fast path: skip sorting for empty or single modifier\n    const variantModifier = modifiers.length === 0 ? '' : modifiers.length === 1 ? modifiers[0] : sortModifiers(modifiers).join(':');\n    const modifierId = hasImportantModifier ? variantModifier + IMPORTANT_MODIFIER : variantModifier;\n    const classId = modifierId + classGroupId;\n    if (classGroupsInConflict.indexOf(classId) > -1) {\n      // Tailwind class omitted due to conflict\n      continue;\n    }\n    classGroupsInConflict.push(classId);\n    const conflictGroups = getConflictingClassGroupIds(classGroupId, hasPostfixModifier);\n    for (let i = 0; i < conflictGroups.length; ++i) {\n      const group = conflictGroups[i];\n      classGroupsInConflict.push(modifierId + group);\n    }\n    // Tailwind class not in conflict\n    result = originalClassName + (result.length > 0 ? ' ' + result : result);\n  }\n  return result;\n};\n\n/**\n * The code in this file is copied from https://github.com/lukeed/clsx and modified to suit the needs of tailwind-merge better.\n *\n * Specifically:\n * - Runtime code from https://github.com/lukeed/clsx/blob/v1.2.1/src/index.js\n * - TypeScript types from https://github.com/lukeed/clsx/blob/v1.2.1/clsx.d.ts\n *\n * Original code has MIT license: Copyright (c) Luke Edwards <luke.edwards05@gmail.com> (lukeed.com)\n */\nconst twJoin = (...classLists) => {\n  let index = 0;\n  let argument;\n  let resolvedValue;\n  let string = '';\n  while (index < classLists.length) {\n    if (argument = classLists[index++]) {\n      if (resolvedValue = toValue(argument)) {\n        string && (string += ' ');\n        string += resolvedValue;\n      }\n    }\n  }\n  return string;\n};\nconst toValue = mix => {\n  // Fast path for strings\n  if (typeof mix === 'string') {\n    return mix;\n  }\n  let resolvedValue;\n  let string = '';\n  for (let k = 0; k < mix.length; k++) {\n    if (mix[k]) {\n      if (resolvedValue = toValue(mix[k])) {\n        string && (string += ' ');\n        string += resolvedValue;\n      }\n    }\n  }\n  return string;\n};\nconst createTailwindMerge = (createConfigFirst, ...createConfigRest) => {\n  let configUtils;\n  let cacheGet;\n  let cacheSet;\n  let functionToCall;\n  const initTailwindMerge = classList => {\n    const config = createConfigRest.reduce((previousConfig, createConfigCurrent) => createConfigCurrent(previousConfig), createConfigFirst());\n    configUtils = createConfigUtils(config);\n    cacheGet = configUtils.cache.get;\n    cacheSet = configUtils.cache.set;\n    functionToCall = tailwindMerge;\n    return tailwindMerge(classList);\n  };\n  const tailwindMerge = classList => {\n    const cachedResult = cacheGet(classList);\n    if (cachedResult) {\n      return cachedResult;\n    }\n    const result = mergeClassList(classList, configUtils);\n    cacheSet(classList, result);\n    return result;\n  };\n  functionToCall = initTailwindMerge;\n  return (...args) => functionToCall(twJoin(...args));\n};\nconst fallbackThemeArr = [];\nconst fromTheme = key => {\n  const themeGetter = theme => theme[key] || fallbackThemeArr;\n  themeGetter.isThemeGetter = true;\n  return themeGetter;\n};\nconst arbitraryValueRegex = /^\\[(?:(\\w[\\w-]*):)?(.+)\\]$/i;\nconst arbitraryVariableRegex = /^\\((?:(\\w[\\w-]*):)?(.+)\\)$/i;\nconst fractionRegex = /^\\d+\\/\\d+$/;\nconst tshirtUnitRegex = /^(\\d+(\\.\\d+)?)?(xs|sm|md|lg|xl)$/;\nconst lengthUnitRegex = /\\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\\b(calc|min|max|clamp)\\(.+\\)|^0$/;\nconst colorFunctionRegex = /^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\\(.+\\)$/;\n// Shadow always begins with x and y offset separated by underscore optionally prepended by inset\nconst shadowRegex = /^(inset_)?-?((\\d+)?\\.?(\\d+)[a-z]+|0)_-?((\\d+)?\\.?(\\d+)[a-z]+|0)/;\nconst imageRegex = /^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\\(.+\\)$/;\nconst isFraction = value => fractionRegex.test(value);\nconst isNumber = value => !!value && !Number.isNaN(Number(value));\nconst isInteger = value => !!value && Number.isInteger(Number(value));\nconst isPercent = value => value.endsWith('%') && isNumber(value.slice(0, -1));\nconst isTshirtSize = value => tshirtUnitRegex.test(value);\nconst isAny = () => true;\nconst isLengthOnly = value =>\n// `colorFunctionRegex` check is necessary because color functions can have percentages in them which which would be incorrectly classified as lengths.\n// For example, `hsl(0 0% 0%)` would be classified as a length without this check.\n// I could also use lookbehind assertion in `lengthUnitRegex` but that isn't supported widely enough.\nlengthUnitRegex.test(value) && !colorFunctionRegex.test(value);\nconst isNever = () => false;\nconst isShadow = value => shadowRegex.test(value);\nconst isImage = value => imageRegex.test(value);\nconst isAnyNonArbitrary = value => !isArbitraryValue(value) && !isArbitraryVariable(value);\nconst isArbitrarySize = value => getIsArbitraryValue(value, isLabelSize, isNever);\nconst isArbitraryValue = value => arbitraryValueRegex.test(value);\nconst isArbitraryLength = value => getIsArbitraryValue(value, isLabelLength, isLengthOnly);\nconst isArbitraryNumber = value => getIsArbitraryValue(value, isLabelNumber, isNumber);\nconst isArbitraryPosition = value => getIsArbitraryValue(value, isLabelPosition, isNever);\nconst isArbitraryImage = value => getIsArbitraryValue(value, isLabelImage, isImage);\nconst isArbitraryShadow = value => getIsArbitraryValue(value, isLabelShadow, isShadow);\nconst isArbitraryVariable = value => arbitraryVariableRegex.test(value);\nconst isArbitraryVariableLength = value => getIsArbitraryVariable(value, isLabelLength);\nconst isArbitraryVariableFamilyName = value => getIsArbitraryVariable(value, isLabelFamilyName);\nconst isArbitraryVariablePosition = value => getIsArbitraryVariable(value, isLabelPosition);\nconst isArbitraryVariableSize = value => getIsArbitraryVariable(value, isLabelSize);\nconst isArbitraryVariableImage = value => getIsArbitraryVariable(value, isLabelImage);\nconst isArbitraryVariableShadow = value => getIsArbitraryVariable(value, isLabelShadow, true);\n// Helpers\nconst getIsArbitraryValue = (value, testLabel, testValue) => {\n  const result = arbitraryValueRegex.exec(value);\n  if (result) {\n    if (result[1]) {\n      return testLabel(result[1]);\n    }\n    return testValue(result[2]);\n  }\n  return false;\n};\nconst getIsArbitraryVariable = (value, testLabel, shouldMatchNoLabel = false) => {\n  const result = arbitraryVariableRegex.exec(value);\n  if (result) {\n    if (result[1]) {\n      return testLabel(result[1]);\n    }\n    return shouldMatchNoLabel;\n  }\n  return false;\n};\n// Labels\nconst isLabelPosition = label => label === 'position' || label === 'percentage';\nconst isLabelImage = label => label === 'image' || label === 'url';\nconst isLabelSize = label => label === 'length' || label === 'size' || label === 'bg-size';\nconst isLabelLength = label => label === 'length';\nconst isLabelNumber = label => label === 'number';\nconst isLabelFamilyName = label => label === 'family-name';\nconst isLabelShadow = label => label === 'shadow';\nconst validators = /*#__PURE__*/Object.defineProperty({\n  __proto__: null,\n  isAny,\n  isAnyNonArbitrary,\n  isArbitraryImage,\n  isArbitraryLength,\n  isArbitraryNumber,\n  isArbitraryPosition,\n  isArbitraryShadow,\n  isArbitrarySize,\n  isArbitraryValue,\n  isArbitraryVariable,\n  isArbitraryVariableFamilyName,\n  isArbitraryVariableImage,\n  isArbitraryVariableLength,\n  isArbitraryVariablePosition,\n  isArbitraryVariableShadow,\n  isArbitraryVariableSize,\n  isFraction,\n  isInteger,\n  isNumber,\n  isPercent,\n  isTshirtSize\n}, Symbol.toStringTag, {\n  value: 'Module'\n});\nconst getDefaultConfig = () => {\n  /**\n   * Theme getters for theme variable namespaces\n   * @see https://tailwindcss.com/docs/theme#theme-variable-namespaces\n   */\n  /***/\n  const themeColor = fromTheme('color');\n  const themeFont = fromTheme('font');\n  const themeText = fromTheme('text');\n  const themeFontWeight = fromTheme('font-weight');\n  const themeTracking = fromTheme('tracking');\n  const themeLeading = fromTheme('leading');\n  const themeBreakpoint = fromTheme('breakpoint');\n  const themeContainer = fromTheme('container');\n  const themeSpacing = fromTheme('spacing');\n  const themeRadius = fromTheme('radius');\n  const themeShadow = fromTheme('shadow');\n  const themeInsetShadow = fromTheme('inset-shadow');\n  const themeTextShadow = fromTheme('text-shadow');\n  const themeDropShadow = fromTheme('drop-shadow');\n  const themeBlur = fromTheme('blur');\n  const themePerspective = fromTheme('perspective');\n  const themeAspect = fromTheme('aspect');\n  const themeEase = fromTheme('ease');\n  const themeAnimate = fromTheme('animate');\n  /**\n   * Helpers to avoid repeating the same scales\n   *\n   * We use functions that create a new array every time they're called instead of static arrays.\n   * This ensures that users who modify any scale by mutating the array (e.g. with `array.push(element)`) don't accidentally mutate arrays in other parts of the config.\n   */\n  /***/\n  const scaleBreak = () => ['auto', 'avoid', 'all', 'avoid-page', 'page', 'left', 'right', 'column'];\n  const scalePosition = () => ['center', 'top', 'bottom', 'left', 'right', 'top-left',\n  // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378\n  'left-top', 'top-right',\n  // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378\n  'right-top', 'bottom-right',\n  // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378\n  'right-bottom', 'bottom-left',\n  // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378\n  'left-bottom'];\n  const scalePositionWithArbitrary = () => [...scalePosition(), isArbitraryVariable, isArbitraryValue];\n  const scaleOverflow = () => ['auto', 'hidden', 'clip', 'visible', 'scroll'];\n  const scaleOverscroll = () => ['auto', 'contain', 'none'];\n  const scaleUnambiguousSpacing = () => [isArbitraryVariable, isArbitraryValue, themeSpacing];\n  const scaleInset = () => [isFraction, 'full', 'auto', ...scaleUnambiguousSpacing()];\n  const scaleGridTemplateColsRows = () => [isInteger, 'none', 'subgrid', isArbitraryVariable, isArbitraryValue];\n  const scaleGridColRowStartAndEnd = () => ['auto', {\n    span: ['full', isInteger, isArbitraryVariable, isArbitraryValue]\n  }, isInteger, isArbitraryVariable, isArbitraryValue];\n  const scaleGridColRowStartOrEnd = () => [isInteger, 'auto', isArbitraryVariable, isArbitraryValue];\n  const scaleGridAutoColsRows = () => ['auto', 'min', 'max', 'fr', isArbitraryVariable, isArbitraryValue];\n  const scaleAlignPrimaryAxis = () => ['start', 'end', 'center', 'between', 'around', 'evenly', 'stretch', 'baseline', 'center-safe', 'end-safe'];\n  const scaleAlignSecondaryAxis = () => ['start', 'end', 'center', 'stretch', 'center-safe', 'end-safe'];\n  const scaleMargin = () => ['auto', ...scaleUnambiguousSpacing()];\n  const scaleSizing = () => [isFraction, 'auto', 'full', 'dvw', 'dvh', 'lvw', 'lvh', 'svw', 'svh', 'min', 'max', 'fit', ...scaleUnambiguousSpacing()];\n  const scaleColor = () => [themeColor, isArbitraryVariable, isArbitraryValue];\n  const scaleBgPosition = () => [...scalePosition(), isArbitraryVariablePosition, isArbitraryPosition, {\n    position: [isArbitraryVariable, isArbitraryValue]\n  }];\n  const scaleBgRepeat = () => ['no-repeat', {\n    repeat: ['', 'x', 'y', 'space', 'round']\n  }];\n  const scaleBgSize = () => ['auto', 'cover', 'contain', isArbitraryVariableSize, isArbitrarySize, {\n    size: [isArbitraryVariable, isArbitraryValue]\n  }];\n  const scaleGradientStopPosition = () => [isPercent, isArbitraryVariableLength, isArbitraryLength];\n  const scaleRadius = () => [\n  // Deprecated since Tailwind CSS v4.0.0\n  '', 'none', 'full', themeRadius, isArbitraryVariable, isArbitraryValue];\n  const scaleBorderWidth = () => ['', isNumber, isArbitraryVariableLength, isArbitraryLength];\n  const scaleLineStyle = () => ['solid', 'dashed', 'dotted', 'double'];\n  const scaleBlendMode = () => ['normal', 'multiply', 'screen', 'overlay', 'darken', 'lighten', 'color-dodge', 'color-burn', 'hard-light', 'soft-light', 'difference', 'exclusion', 'hue', 'saturation', 'color', 'luminosity'];\n  const scaleMaskImagePosition = () => [isNumber, isPercent, isArbitraryVariablePosition, isArbitraryPosition];\n  const scaleBlur = () => [\n  // Deprecated since Tailwind CSS v4.0.0\n  '', 'none', themeBlur, isArbitraryVariable, isArbitraryValue];\n  const scaleRotate = () => ['none', isNumber, isArbitraryVariable, isArbitraryValue];\n  const scaleScale = () => ['none', isNumber, isArbitraryVariable, isArbitraryValue];\n  const scaleSkew = () => [isNumber, isArbitraryVariable, isArbitraryValue];\n  const scaleTranslate = () => [isFraction, 'full', ...scaleUnambiguousSpacing()];\n  return {\n    cacheSize: 500,\n    theme: {\n      animate: ['spin', 'ping', 'pulse', 'bounce'],\n      aspect: ['video'],\n      blur: [isTshirtSize],\n      breakpoint: [isTshirtSize],\n      color: [isAny],\n      container: [isTshirtSize],\n      'drop-shadow': [isTshirtSize],\n      ease: ['in', 'out', 'in-out'],\n      font: [isAnyNonArbitrary],\n      'font-weight': ['thin', 'extralight', 'light', 'normal', 'medium', 'semibold', 'bold', 'extrabold', 'black'],\n      'inset-shadow': [isTshirtSize],\n      leading: ['none', 'tight', 'snug', 'normal', 'relaxed', 'loose'],\n      perspective: ['dramatic', 'near', 'normal', 'midrange', 'distant', 'none'],\n      radius: [isTshirtSize],\n      shadow: [isTshirtSize],\n      spacing: ['px', isNumber],\n      text: [isTshirtSize],\n      'text-shadow': [isTshirtSize],\n      tracking: ['tighter', 'tight', 'normal', 'wide', 'wider', 'widest']\n    },\n    classGroups: {\n      // --------------\n      // --- Layout ---\n      // --------------\n      /**\n       * Aspect Ratio\n       * @see https://tailwindcss.com/docs/aspect-ratio\n       */\n      aspect: [{\n        aspect: ['auto', 'square', isFraction, isArbitraryValue, isArbitraryVariable, themeAspect]\n      }],\n      /**\n       * Container\n       * @see https://tailwindcss.com/docs/container\n       * @deprecated since Tailwind CSS v4.0.0\n       */\n      container: ['container'],\n      /**\n       * Columns\n       * @see https://tailwindcss.com/docs/columns\n       */\n      columns: [{\n        columns: [isNumber, isArbitraryValue, isArbitraryVariable, themeContainer]\n      }],\n      /**\n       * Break After\n       * @see https://tailwindcss.com/docs/break-after\n       */\n      'break-after': [{\n        'break-after': scaleBreak()\n      }],\n      /**\n       * Break Before\n       * @see https://tailwindcss.com/docs/break-before\n       */\n      'break-before': [{\n        'break-before': scaleBreak()\n      }],\n      /**\n       * Break Inside\n       * @see https://tailwindcss.com/docs/break-inside\n       */\n      'break-inside': [{\n        'break-inside': ['auto', 'avoid', 'avoid-page', 'avoid-column']\n      }],\n      /**\n       * Box Decoration Break\n       * @see https://tailwindcss.com/docs/box-decoration-break\n       */\n      'box-decoration': [{\n        'box-decoration': ['slice', 'clone']\n      }],\n      /**\n       * Box Sizing\n       * @see https://tailwindcss.com/docs/box-sizing\n       */\n      box: [{\n        box: ['border', 'content']\n      }],\n      /**\n       * Display\n       * @see https://tailwindcss.com/docs/display\n       */\n      display: ['block', 'inline-block', 'inline', 'flex', 'inline-flex', 'table', 'inline-table', 'table-caption', 'table-cell', 'table-column', 'table-column-group', 'table-footer-group', 'table-header-group', 'table-row-group', 'table-row', 'flow-root', 'grid', 'inline-grid', 'contents', 'list-item', 'hidden'],\n      /**\n       * Screen Reader Only\n       * @see https://tailwindcss.com/docs/display#screen-reader-only\n       */\n      sr: ['sr-only', 'not-sr-only'],\n      /**\n       * Floats\n       * @see https://tailwindcss.com/docs/float\n       */\n      float: [{\n        float: ['right', 'left', 'none', 'start', 'end']\n      }],\n      /**\n       * Clear\n       * @see https://tailwindcss.com/docs/clear\n       */\n      clear: [{\n        clear: ['left', 'right', 'both', 'none', 'start', 'end']\n      }],\n      /**\n       * Isolation\n       * @see https://tailwindcss.com/docs/isolation\n       */\n      isolation: ['isolate', 'isolation-auto'],\n      /**\n       * Object Fit\n       * @see https://tailwindcss.com/docs/object-fit\n       */\n      'object-fit': [{\n        object: ['contain', 'cover', 'fill', 'none', 'scale-down']\n      }],\n      /**\n       * Object Position\n       * @see https://tailwindcss.com/docs/object-position\n       */\n      'object-position': [{\n        object: scalePositionWithArbitrary()\n      }],\n      /**\n       * Overflow\n       * @see https://tailwindcss.com/docs/overflow\n       */\n      overflow: [{\n        overflow: scaleOverflow()\n      }],\n      /**\n       * Overflow X\n       * @see https://tailwindcss.com/docs/overflow\n       */\n      'overflow-x': [{\n        'overflow-x': scaleOverflow()\n      }],\n      /**\n       * Overflow Y\n       * @see https://tailwindcss.com/docs/overflow\n       */\n      'overflow-y': [{\n        'overflow-y': scaleOverflow()\n      }],\n      /**\n       * Overscroll Behavior\n       * @see https://tailwindcss.com/docs/overscroll-behavior\n       */\n      overscroll: [{\n        overscroll: scaleOverscroll()\n      }],\n      /**\n       * Overscroll Behavior X\n       * @see https://tailwindcss.com/docs/overscroll-behavior\n       */\n      'overscroll-x': [{\n        'overscroll-x': scaleOverscroll()\n      }],\n      /**\n       * Overscroll Behavior Y\n       * @see https://tailwindcss.com/docs/overscroll-behavior\n       */\n      'overscroll-y': [{\n        'overscroll-y': scaleOverscroll()\n      }],\n      /**\n       * Position\n       * @see https://tailwindcss.com/docs/position\n       */\n      position: ['static', 'fixed', 'absolute', 'relative', 'sticky'],\n      /**\n       * Top / Right / Bottom / Left\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      inset: [{\n        inset: scaleInset()\n      }],\n      /**\n       * Right / Left\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      'inset-x': [{\n        'inset-x': scaleInset()\n      }],\n      /**\n       * Top / Bottom\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      'inset-y': [{\n        'inset-y': scaleInset()\n      }],\n      /**\n       * Start\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      start: [{\n        start: scaleInset()\n      }],\n      /**\n       * End\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      end: [{\n        end: scaleInset()\n      }],\n      /**\n       * Top\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      top: [{\n        top: scaleInset()\n      }],\n      /**\n       * Right\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      right: [{\n        right: scaleInset()\n      }],\n      /**\n       * Bottom\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      bottom: [{\n        bottom: scaleInset()\n      }],\n      /**\n       * Left\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      left: [{\n        left: scaleInset()\n      }],\n      /**\n       * Visibility\n       * @see https://tailwindcss.com/docs/visibility\n       */\n      visibility: ['visible', 'invisible', 'collapse'],\n      /**\n       * Z-Index\n       * @see https://tailwindcss.com/docs/z-index\n       */\n      z: [{\n        z: [isInteger, 'auto', isArbitraryVariable, isArbitraryValue]\n      }],\n      // ------------------------\n      // --- Flexbox and Grid ---\n      // ------------------------\n      /**\n       * Flex Basis\n       * @see https://tailwindcss.com/docs/flex-basis\n       */\n      basis: [{\n        basis: [isFraction, 'full', 'auto', themeContainer, ...scaleUnambiguousSpacing()]\n      }],\n      /**\n       * Flex Direction\n       * @see https://tailwindcss.com/docs/flex-direction\n       */\n      'flex-direction': [{\n        flex: ['row', 'row-reverse', 'col', 'col-reverse']\n      }],\n      /**\n       * Flex Wrap\n       * @see https://tailwindcss.com/docs/flex-wrap\n       */\n      'flex-wrap': [{\n        flex: ['nowrap', 'wrap', 'wrap-reverse']\n      }],\n      /**\n       * Flex\n       * @see https://tailwindcss.com/docs/flex\n       */\n      flex: [{\n        flex: [isNumber, isFraction, 'auto', 'initial', 'none', isArbitraryValue]\n      }],\n      /**\n       * Flex Grow\n       * @see https://tailwindcss.com/docs/flex-grow\n       */\n      grow: [{\n        grow: ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Flex Shrink\n       * @see https://tailwindcss.com/docs/flex-shrink\n       */\n      shrink: [{\n        shrink: ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Order\n       * @see https://tailwindcss.com/docs/order\n       */\n      order: [{\n        order: [isInteger, 'first', 'last', 'none', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Grid Template Columns\n       * @see https://tailwindcss.com/docs/grid-template-columns\n       */\n      'grid-cols': [{\n        'grid-cols': scaleGridTemplateColsRows()\n      }],\n      /**\n       * Grid Column Start / End\n       * @see https://tailwindcss.com/docs/grid-column\n       */\n      'col-start-end': [{\n        col: scaleGridColRowStartAndEnd()\n      }],\n      /**\n       * Grid Column Start\n       * @see https://tailwindcss.com/docs/grid-column\n       */\n      'col-start': [{\n        'col-start': scaleGridColRowStartOrEnd()\n      }],\n      /**\n       * Grid Column End\n       * @see https://tailwindcss.com/docs/grid-column\n       */\n      'col-end': [{\n        'col-end': scaleGridColRowStartOrEnd()\n      }],\n      /**\n       * Grid Template Rows\n       * @see https://tailwindcss.com/docs/grid-template-rows\n       */\n      'grid-rows': [{\n        'grid-rows': scaleGridTemplateColsRows()\n      }],\n      /**\n       * Grid Row Start / End\n       * @see https://tailwindcss.com/docs/grid-row\n       */\n      'row-start-end': [{\n        row: scaleGridColRowStartAndEnd()\n      }],\n      /**\n       * Grid Row Start\n       * @see https://tailwindcss.com/docs/grid-row\n       */\n      'row-start': [{\n        'row-start': scaleGridColRowStartOrEnd()\n      }],\n      /**\n       * Grid Row End\n       * @see https://tailwindcss.com/docs/grid-row\n       */\n      'row-end': [{\n        'row-end': scaleGridColRowStartOrEnd()\n      }],\n      /**\n       * Grid Auto Flow\n       * @see https://tailwindcss.com/docs/grid-auto-flow\n       */\n      'grid-flow': [{\n        'grid-flow': ['row', 'col', 'dense', 'row-dense', 'col-dense']\n      }],\n      /**\n       * Grid Auto Columns\n       * @see https://tailwindcss.com/docs/grid-auto-columns\n       */\n      'auto-cols': [{\n        'auto-cols': scaleGridAutoColsRows()\n      }],\n      /**\n       * Grid Auto Rows\n       * @see https://tailwindcss.com/docs/grid-auto-rows\n       */\n      'auto-rows': [{\n        'auto-rows': scaleGridAutoColsRows()\n      }],\n      /**\n       * Gap\n       * @see https://tailwindcss.com/docs/gap\n       */\n      gap: [{\n        gap: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Gap X\n       * @see https://tailwindcss.com/docs/gap\n       */\n      'gap-x': [{\n        'gap-x': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Gap Y\n       * @see https://tailwindcss.com/docs/gap\n       */\n      'gap-y': [{\n        'gap-y': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Justify Content\n       * @see https://tailwindcss.com/docs/justify-content\n       */\n      'justify-content': [{\n        justify: [...scaleAlignPrimaryAxis(), 'normal']\n      }],\n      /**\n       * Justify Items\n       * @see https://tailwindcss.com/docs/justify-items\n       */\n      'justify-items': [{\n        'justify-items': [...scaleAlignSecondaryAxis(), 'normal']\n      }],\n      /**\n       * Justify Self\n       * @see https://tailwindcss.com/docs/justify-self\n       */\n      'justify-self': [{\n        'justify-self': ['auto', ...scaleAlignSecondaryAxis()]\n      }],\n      /**\n       * Align Content\n       * @see https://tailwindcss.com/docs/align-content\n       */\n      'align-content': [{\n        content: ['normal', ...scaleAlignPrimaryAxis()]\n      }],\n      /**\n       * Align Items\n       * @see https://tailwindcss.com/docs/align-items\n       */\n      'align-items': [{\n        items: [...scaleAlignSecondaryAxis(), {\n          baseline: ['', 'last']\n        }]\n      }],\n      /**\n       * Align Self\n       * @see https://tailwindcss.com/docs/align-self\n       */\n      'align-self': [{\n        self: ['auto', ...scaleAlignSecondaryAxis(), {\n          baseline: ['', 'last']\n        }]\n      }],\n      /**\n       * Place Content\n       * @see https://tailwindcss.com/docs/place-content\n       */\n      'place-content': [{\n        'place-content': scaleAlignPrimaryAxis()\n      }],\n      /**\n       * Place Items\n       * @see https://tailwindcss.com/docs/place-items\n       */\n      'place-items': [{\n        'place-items': [...scaleAlignSecondaryAxis(), 'baseline']\n      }],\n      /**\n       * Place Self\n       * @see https://tailwindcss.com/docs/place-self\n       */\n      'place-self': [{\n        'place-self': ['auto', ...scaleAlignSecondaryAxis()]\n      }],\n      // Spacing\n      /**\n       * Padding\n       * @see https://tailwindcss.com/docs/padding\n       */\n      p: [{\n        p: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding X\n       * @see https://tailwindcss.com/docs/padding\n       */\n      px: [{\n        px: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding Y\n       * @see https://tailwindcss.com/docs/padding\n       */\n      py: [{\n        py: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding Start\n       * @see https://tailwindcss.com/docs/padding\n       */\n      ps: [{\n        ps: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding End\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pe: [{\n        pe: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding Top\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pt: [{\n        pt: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding Right\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pr: [{\n        pr: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding Bottom\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pb: [{\n        pb: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding Left\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pl: [{\n        pl: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Margin\n       * @see https://tailwindcss.com/docs/margin\n       */\n      m: [{\n        m: scaleMargin()\n      }],\n      /**\n       * Margin X\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mx: [{\n        mx: scaleMargin()\n      }],\n      /**\n       * Margin Y\n       * @see https://tailwindcss.com/docs/margin\n       */\n      my: [{\n        my: scaleMargin()\n      }],\n      /**\n       * Margin Start\n       * @see https://tailwindcss.com/docs/margin\n       */\n      ms: [{\n        ms: scaleMargin()\n      }],\n      /**\n       * Margin End\n       * @see https://tailwindcss.com/docs/margin\n       */\n      me: [{\n        me: scaleMargin()\n      }],\n      /**\n       * Margin Top\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mt: [{\n        mt: scaleMargin()\n      }],\n      /**\n       * Margin Right\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mr: [{\n        mr: scaleMargin()\n      }],\n      /**\n       * Margin Bottom\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mb: [{\n        mb: scaleMargin()\n      }],\n      /**\n       * Margin Left\n       * @see https://tailwindcss.com/docs/margin\n       */\n      ml: [{\n        ml: scaleMargin()\n      }],\n      /**\n       * Space Between X\n       * @see https://tailwindcss.com/docs/margin#adding-space-between-children\n       */\n      'space-x': [{\n        'space-x': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Space Between X Reverse\n       * @see https://tailwindcss.com/docs/margin#adding-space-between-children\n       */\n      'space-x-reverse': ['space-x-reverse'],\n      /**\n       * Space Between Y\n       * @see https://tailwindcss.com/docs/margin#adding-space-between-children\n       */\n      'space-y': [{\n        'space-y': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Space Between Y Reverse\n       * @see https://tailwindcss.com/docs/margin#adding-space-between-children\n       */\n      'space-y-reverse': ['space-y-reverse'],\n      // --------------\n      // --- Sizing ---\n      // --------------\n      /**\n       * Size\n       * @see https://tailwindcss.com/docs/width#setting-both-width-and-height\n       */\n      size: [{\n        size: scaleSizing()\n      }],\n      /**\n       * Width\n       * @see https://tailwindcss.com/docs/width\n       */\n      w: [{\n        w: [themeContainer, 'screen', ...scaleSizing()]\n      }],\n      /**\n       * Min-Width\n       * @see https://tailwindcss.com/docs/min-width\n       */\n      'min-w': [{\n        'min-w': [themeContainer, 'screen', /** Deprecated. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */\n        'none', ...scaleSizing()]\n      }],\n      /**\n       * Max-Width\n       * @see https://tailwindcss.com/docs/max-width\n       */\n      'max-w': [{\n        'max-w': [themeContainer, 'screen', 'none', /** Deprecated since Tailwind CSS v4.0.0. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */\n        'prose', /** Deprecated since Tailwind CSS v4.0.0. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */\n        {\n          screen: [themeBreakpoint]\n        }, ...scaleSizing()]\n      }],\n      /**\n       * Height\n       * @see https://tailwindcss.com/docs/height\n       */\n      h: [{\n        h: ['screen', 'lh', ...scaleSizing()]\n      }],\n      /**\n       * Min-Height\n       * @see https://tailwindcss.com/docs/min-height\n       */\n      'min-h': [{\n        'min-h': ['screen', 'lh', 'none', ...scaleSizing()]\n      }],\n      /**\n       * Max-Height\n       * @see https://tailwindcss.com/docs/max-height\n       */\n      'max-h': [{\n        'max-h': ['screen', 'lh', ...scaleSizing()]\n      }],\n      // ------------------\n      // --- Typography ---\n      // ------------------\n      /**\n       * Font Size\n       * @see https://tailwindcss.com/docs/font-size\n       */\n      'font-size': [{\n        text: ['base', themeText, isArbitraryVariableLength, isArbitraryLength]\n      }],\n      /**\n       * Font Smoothing\n       * @see https://tailwindcss.com/docs/font-smoothing\n       */\n      'font-smoothing': ['antialiased', 'subpixel-antialiased'],\n      /**\n       * Font Style\n       * @see https://tailwindcss.com/docs/font-style\n       */\n      'font-style': ['italic', 'not-italic'],\n      /**\n       * Font Weight\n       * @see https://tailwindcss.com/docs/font-weight\n       */\n      'font-weight': [{\n        font: [themeFontWeight, isArbitraryVariable, isArbitraryNumber]\n      }],\n      /**\n       * Font Stretch\n       * @see https://tailwindcss.com/docs/font-stretch\n       */\n      'font-stretch': [{\n        'font-stretch': ['ultra-condensed', 'extra-condensed', 'condensed', 'semi-condensed', 'normal', 'semi-expanded', 'expanded', 'extra-expanded', 'ultra-expanded', isPercent, isArbitraryValue]\n      }],\n      /**\n       * Font Family\n       * @see https://tailwindcss.com/docs/font-family\n       */\n      'font-family': [{\n        font: [isArbitraryVariableFamilyName, isArbitraryValue, themeFont]\n      }],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-normal': ['normal-nums'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-ordinal': ['ordinal'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-slashed-zero': ['slashed-zero'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-figure': ['lining-nums', 'oldstyle-nums'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-spacing': ['proportional-nums', 'tabular-nums'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-fraction': ['diagonal-fractions', 'stacked-fractions'],\n      /**\n       * Letter Spacing\n       * @see https://tailwindcss.com/docs/letter-spacing\n       */\n      tracking: [{\n        tracking: [themeTracking, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Line Clamp\n       * @see https://tailwindcss.com/docs/line-clamp\n       */\n      'line-clamp': [{\n        'line-clamp': [isNumber, 'none', isArbitraryVariable, isArbitraryNumber]\n      }],\n      /**\n       * Line Height\n       * @see https://tailwindcss.com/docs/line-height\n       */\n      leading: [{\n        leading: [/** Deprecated since Tailwind CSS v4.0.0. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */\n        themeLeading, ...scaleUnambiguousSpacing()]\n      }],\n      /**\n       * List Style Image\n       * @see https://tailwindcss.com/docs/list-style-image\n       */\n      'list-image': [{\n        'list-image': ['none', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * List Style Position\n       * @see https://tailwindcss.com/docs/list-style-position\n       */\n      'list-style-position': [{\n        list: ['inside', 'outside']\n      }],\n      /**\n       * List Style Type\n       * @see https://tailwindcss.com/docs/list-style-type\n       */\n      'list-style-type': [{\n        list: ['disc', 'decimal', 'none', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Text Alignment\n       * @see https://tailwindcss.com/docs/text-align\n       */\n      'text-alignment': [{\n        text: ['left', 'center', 'right', 'justify', 'start', 'end']\n      }],\n      /**\n       * Placeholder Color\n       * @deprecated since Tailwind CSS v3.0.0\n       * @see https://v3.tailwindcss.com/docs/placeholder-color\n       */\n      'placeholder-color': [{\n        placeholder: scaleColor()\n      }],\n      /**\n       * Text Color\n       * @see https://tailwindcss.com/docs/text-color\n       */\n      'text-color': [{\n        text: scaleColor()\n      }],\n      /**\n       * Text Decoration\n       * @see https://tailwindcss.com/docs/text-decoration\n       */\n      'text-decoration': ['underline', 'overline', 'line-through', 'no-underline'],\n      /**\n       * Text Decoration Style\n       * @see https://tailwindcss.com/docs/text-decoration-style\n       */\n      'text-decoration-style': [{\n        decoration: [...scaleLineStyle(), 'wavy']\n      }],\n      /**\n       * Text Decoration Thickness\n       * @see https://tailwindcss.com/docs/text-decoration-thickness\n       */\n      'text-decoration-thickness': [{\n        decoration: [isNumber, 'from-font', 'auto', isArbitraryVariable, isArbitraryLength]\n      }],\n      /**\n       * Text Decoration Color\n       * @see https://tailwindcss.com/docs/text-decoration-color\n       */\n      'text-decoration-color': [{\n        decoration: scaleColor()\n      }],\n      /**\n       * Text Underline Offset\n       * @see https://tailwindcss.com/docs/text-underline-offset\n       */\n      'underline-offset': [{\n        'underline-offset': [isNumber, 'auto', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Text Transform\n       * @see https://tailwindcss.com/docs/text-transform\n       */\n      'text-transform': ['uppercase', 'lowercase', 'capitalize', 'normal-case'],\n      /**\n       * Text Overflow\n       * @see https://tailwindcss.com/docs/text-overflow\n       */\n      'text-overflow': ['truncate', 'text-ellipsis', 'text-clip'],\n      /**\n       * Text Wrap\n       * @see https://tailwindcss.com/docs/text-wrap\n       */\n      'text-wrap': [{\n        text: ['wrap', 'nowrap', 'balance', 'pretty']\n      }],\n      /**\n       * Text Indent\n       * @see https://tailwindcss.com/docs/text-indent\n       */\n      indent: [{\n        indent: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Vertical Alignment\n       * @see https://tailwindcss.com/docs/vertical-align\n       */\n      'vertical-align': [{\n        align: ['baseline', 'top', 'middle', 'bottom', 'text-top', 'text-bottom', 'sub', 'super', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Whitespace\n       * @see https://tailwindcss.com/docs/whitespace\n       */\n      whitespace: [{\n        whitespace: ['normal', 'nowrap', 'pre', 'pre-line', 'pre-wrap', 'break-spaces']\n      }],\n      /**\n       * Word Break\n       * @see https://tailwindcss.com/docs/word-break\n       */\n      break: [{\n        break: ['normal', 'words', 'all', 'keep']\n      }],\n      /**\n       * Overflow Wrap\n       * @see https://tailwindcss.com/docs/overflow-wrap\n       */\n      wrap: [{\n        wrap: ['break-word', 'anywhere', 'normal']\n      }],\n      /**\n       * Hyphens\n       * @see https://tailwindcss.com/docs/hyphens\n       */\n      hyphens: [{\n        hyphens: ['none', 'manual', 'auto']\n      }],\n      /**\n       * Content\n       * @see https://tailwindcss.com/docs/content\n       */\n      content: [{\n        content: ['none', isArbitraryVariable, isArbitraryValue]\n      }],\n      // -------------------\n      // --- Backgrounds ---\n      // -------------------\n      /**\n       * Background Attachment\n       * @see https://tailwindcss.com/docs/background-attachment\n       */\n      'bg-attachment': [{\n        bg: ['fixed', 'local', 'scroll']\n      }],\n      /**\n       * Background Clip\n       * @see https://tailwindcss.com/docs/background-clip\n       */\n      'bg-clip': [{\n        'bg-clip': ['border', 'padding', 'content', 'text']\n      }],\n      /**\n       * Background Origin\n       * @see https://tailwindcss.com/docs/background-origin\n       */\n      'bg-origin': [{\n        'bg-origin': ['border', 'padding', 'content']\n      }],\n      /**\n       * Background Position\n       * @see https://tailwindcss.com/docs/background-position\n       */\n      'bg-position': [{\n        bg: scaleBgPosition()\n      }],\n      /**\n       * Background Repeat\n       * @see https://tailwindcss.com/docs/background-repeat\n       */\n      'bg-repeat': [{\n        bg: scaleBgRepeat()\n      }],\n      /**\n       * Background Size\n       * @see https://tailwindcss.com/docs/background-size\n       */\n      'bg-size': [{\n        bg: scaleBgSize()\n      }],\n      /**\n       * Background Image\n       * @see https://tailwindcss.com/docs/background-image\n       */\n      'bg-image': [{\n        bg: ['none', {\n          linear: [{\n            to: ['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl']\n          }, isInteger, isArbitraryVariable, isArbitraryValue],\n          radial: ['', isArbitraryVariable, isArbitraryValue],\n          conic: [isInteger, isArbitraryVariable, isArbitraryValue]\n        }, isArbitraryVariableImage, isArbitraryImage]\n      }],\n      /**\n       * Background Color\n       * @see https://tailwindcss.com/docs/background-color\n       */\n      'bg-color': [{\n        bg: scaleColor()\n      }],\n      /**\n       * Gradient Color Stops From Position\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-from-pos': [{\n        from: scaleGradientStopPosition()\n      }],\n      /**\n       * Gradient Color Stops Via Position\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-via-pos': [{\n        via: scaleGradientStopPosition()\n      }],\n      /**\n       * Gradient Color Stops To Position\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-to-pos': [{\n        to: scaleGradientStopPosition()\n      }],\n      /**\n       * Gradient Color Stops From\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-from': [{\n        from: scaleColor()\n      }],\n      /**\n       * Gradient Color Stops Via\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-via': [{\n        via: scaleColor()\n      }],\n      /**\n       * Gradient Color Stops To\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-to': [{\n        to: scaleColor()\n      }],\n      // ---------------\n      // --- Borders ---\n      // ---------------\n      /**\n       * Border Radius\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      rounded: [{\n        rounded: scaleRadius()\n      }],\n      /**\n       * Border Radius Start\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-s': [{\n        'rounded-s': scaleRadius()\n      }],\n      /**\n       * Border Radius End\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-e': [{\n        'rounded-e': scaleRadius()\n      }],\n      /**\n       * Border Radius Top\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-t': [{\n        'rounded-t': scaleRadius()\n      }],\n      /**\n       * Border Radius Right\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-r': [{\n        'rounded-r': scaleRadius()\n      }],\n      /**\n       * Border Radius Bottom\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-b': [{\n        'rounded-b': scaleRadius()\n      }],\n      /**\n       * Border Radius Left\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-l': [{\n        'rounded-l': scaleRadius()\n      }],\n      /**\n       * Border Radius Start Start\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-ss': [{\n        'rounded-ss': scaleRadius()\n      }],\n      /**\n       * Border Radius Start End\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-se': [{\n        'rounded-se': scaleRadius()\n      }],\n      /**\n       * Border Radius End End\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-ee': [{\n        'rounded-ee': scaleRadius()\n      }],\n      /**\n       * Border Radius End Start\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-es': [{\n        'rounded-es': scaleRadius()\n      }],\n      /**\n       * Border Radius Top Left\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-tl': [{\n        'rounded-tl': scaleRadius()\n      }],\n      /**\n       * Border Radius Top Right\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-tr': [{\n        'rounded-tr': scaleRadius()\n      }],\n      /**\n       * Border Radius Bottom Right\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-br': [{\n        'rounded-br': scaleRadius()\n      }],\n      /**\n       * Border Radius Bottom Left\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-bl': [{\n        'rounded-bl': scaleRadius()\n      }],\n      /**\n       * Border Width\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w': [{\n        border: scaleBorderWidth()\n      }],\n      /**\n       * Border Width X\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-x': [{\n        'border-x': scaleBorderWidth()\n      }],\n      /**\n       * Border Width Y\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-y': [{\n        'border-y': scaleBorderWidth()\n      }],\n      /**\n       * Border Width Start\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-s': [{\n        'border-s': scaleBorderWidth()\n      }],\n      /**\n       * Border Width End\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-e': [{\n        'border-e': scaleBorderWidth()\n      }],\n      /**\n       * Border Width Top\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-t': [{\n        'border-t': scaleBorderWidth()\n      }],\n      /**\n       * Border Width Right\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-r': [{\n        'border-r': scaleBorderWidth()\n      }],\n      /**\n       * Border Width Bottom\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-b': [{\n        'border-b': scaleBorderWidth()\n      }],\n      /**\n       * Border Width Left\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-l': [{\n        'border-l': scaleBorderWidth()\n      }],\n      /**\n       * Divide Width X\n       * @see https://tailwindcss.com/docs/border-width#between-children\n       */\n      'divide-x': [{\n        'divide-x': scaleBorderWidth()\n      }],\n      /**\n       * Divide Width X Reverse\n       * @see https://tailwindcss.com/docs/border-width#between-children\n       */\n      'divide-x-reverse': ['divide-x-reverse'],\n      /**\n       * Divide Width Y\n       * @see https://tailwindcss.com/docs/border-width#between-children\n       */\n      'divide-y': [{\n        'divide-y': scaleBorderWidth()\n      }],\n      /**\n       * Divide Width Y Reverse\n       * @see https://tailwindcss.com/docs/border-width#between-children\n       */\n      'divide-y-reverse': ['divide-y-reverse'],\n      /**\n       * Border Style\n       * @see https://tailwindcss.com/docs/border-style\n       */\n      'border-style': [{\n        border: [...scaleLineStyle(), 'hidden', 'none']\n      }],\n      /**\n       * Divide Style\n       * @see https://tailwindcss.com/docs/border-style#setting-the-divider-style\n       */\n      'divide-style': [{\n        divide: [...scaleLineStyle(), 'hidden', 'none']\n      }],\n      /**\n       * Border Color\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color': [{\n        border: scaleColor()\n      }],\n      /**\n       * Border Color X\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-x': [{\n        'border-x': scaleColor()\n      }],\n      /**\n       * Border Color Y\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-y': [{\n        'border-y': scaleColor()\n      }],\n      /**\n       * Border Color S\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-s': [{\n        'border-s': scaleColor()\n      }],\n      /**\n       * Border Color E\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-e': [{\n        'border-e': scaleColor()\n      }],\n      /**\n       * Border Color Top\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-t': [{\n        'border-t': scaleColor()\n      }],\n      /**\n       * Border Color Right\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-r': [{\n        'border-r': scaleColor()\n      }],\n      /**\n       * Border Color Bottom\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-b': [{\n        'border-b': scaleColor()\n      }],\n      /**\n       * Border Color Left\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-l': [{\n        'border-l': scaleColor()\n      }],\n      /**\n       * Divide Color\n       * @see https://tailwindcss.com/docs/divide-color\n       */\n      'divide-color': [{\n        divide: scaleColor()\n      }],\n      /**\n       * Outline Style\n       * @see https://tailwindcss.com/docs/outline-style\n       */\n      'outline-style': [{\n        outline: [...scaleLineStyle(), 'none', 'hidden']\n      }],\n      /**\n       * Outline Offset\n       * @see https://tailwindcss.com/docs/outline-offset\n       */\n      'outline-offset': [{\n        'outline-offset': [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Outline Width\n       * @see https://tailwindcss.com/docs/outline-width\n       */\n      'outline-w': [{\n        outline: ['', isNumber, isArbitraryVariableLength, isArbitraryLength]\n      }],\n      /**\n       * Outline Color\n       * @see https://tailwindcss.com/docs/outline-color\n       */\n      'outline-color': [{\n        outline: scaleColor()\n      }],\n      // ---------------\n      // --- Effects ---\n      // ---------------\n      /**\n       * Box Shadow\n       * @see https://tailwindcss.com/docs/box-shadow\n       */\n      shadow: [{\n        shadow: [\n        // Deprecated since Tailwind CSS v4.0.0\n        '', 'none', themeShadow, isArbitraryVariableShadow, isArbitraryShadow]\n      }],\n      /**\n       * Box Shadow Color\n       * @see https://tailwindcss.com/docs/box-shadow#setting-the-shadow-color\n       */\n      'shadow-color': [{\n        shadow: scaleColor()\n      }],\n      /**\n       * Inset Box Shadow\n       * @see https://tailwindcss.com/docs/box-shadow#adding-an-inset-shadow\n       */\n      'inset-shadow': [{\n        'inset-shadow': ['none', themeInsetShadow, isArbitraryVariableShadow, isArbitraryShadow]\n      }],\n      /**\n       * Inset Box Shadow Color\n       * @see https://tailwindcss.com/docs/box-shadow#setting-the-inset-shadow-color\n       */\n      'inset-shadow-color': [{\n        'inset-shadow': scaleColor()\n      }],\n      /**\n       * Ring Width\n       * @see https://tailwindcss.com/docs/box-shadow#adding-a-ring\n       */\n      'ring-w': [{\n        ring: scaleBorderWidth()\n      }],\n      /**\n       * Ring Width Inset\n       * @see https://v3.tailwindcss.com/docs/ring-width#inset-rings\n       * @deprecated since Tailwind CSS v4.0.0\n       * @see https://github.com/tailwindlabs/tailwindcss/blob/v4.0.0/packages/tailwindcss/src/utilities.ts#L4158\n       */\n      'ring-w-inset': ['ring-inset'],\n      /**\n       * Ring Color\n       * @see https://tailwindcss.com/docs/box-shadow#setting-the-ring-color\n       */\n      'ring-color': [{\n        ring: scaleColor()\n      }],\n      /**\n       * Ring Offset Width\n       * @see https://v3.tailwindcss.com/docs/ring-offset-width\n       * @deprecated since Tailwind CSS v4.0.0\n       * @see https://github.com/tailwindlabs/tailwindcss/blob/v4.0.0/packages/tailwindcss/src/utilities.ts#L4158\n       */\n      'ring-offset-w': [{\n        'ring-offset': [isNumber, isArbitraryLength]\n      }],\n      /**\n       * Ring Offset Color\n       * @see https://v3.tailwindcss.com/docs/ring-offset-color\n       * @deprecated since Tailwind CSS v4.0.0\n       * @see https://github.com/tailwindlabs/tailwindcss/blob/v4.0.0/packages/tailwindcss/src/utilities.ts#L4158\n       */\n      'ring-offset-color': [{\n        'ring-offset': scaleColor()\n      }],\n      /**\n       * Inset Ring Width\n       * @see https://tailwindcss.com/docs/box-shadow#adding-an-inset-ring\n       */\n      'inset-ring-w': [{\n        'inset-ring': scaleBorderWidth()\n      }],\n      /**\n       * Inset Ring Color\n       * @see https://tailwindcss.com/docs/box-shadow#setting-the-inset-ring-color\n       */\n      'inset-ring-color': [{\n        'inset-ring': scaleColor()\n      }],\n      /**\n       * Text Shadow\n       * @see https://tailwindcss.com/docs/text-shadow\n       */\n      'text-shadow': [{\n        'text-shadow': ['none', themeTextShadow, isArbitraryVariableShadow, isArbitraryShadow]\n      }],\n      /**\n       * Text Shadow Color\n       * @see https://tailwindcss.com/docs/text-shadow#setting-the-shadow-color\n       */\n      'text-shadow-color': [{\n        'text-shadow': scaleColor()\n      }],\n      /**\n       * Opacity\n       * @see https://tailwindcss.com/docs/opacity\n       */\n      opacity: [{\n        opacity: [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Mix Blend Mode\n       * @see https://tailwindcss.com/docs/mix-blend-mode\n       */\n      'mix-blend': [{\n        'mix-blend': [...scaleBlendMode(), 'plus-darker', 'plus-lighter']\n      }],\n      /**\n       * Background Blend Mode\n       * @see https://tailwindcss.com/docs/background-blend-mode\n       */\n      'bg-blend': [{\n        'bg-blend': scaleBlendMode()\n      }],\n      /**\n       * Mask Clip\n       * @see https://tailwindcss.com/docs/mask-clip\n       */\n      'mask-clip': [{\n        'mask-clip': ['border', 'padding', 'content', 'fill', 'stroke', 'view']\n      }, 'mask-no-clip'],\n      /**\n       * Mask Composite\n       * @see https://tailwindcss.com/docs/mask-composite\n       */\n      'mask-composite': [{\n        mask: ['add', 'subtract', 'intersect', 'exclude']\n      }],\n      /**\n       * Mask Image\n       * @see https://tailwindcss.com/docs/mask-image\n       */\n      'mask-image-linear-pos': [{\n        'mask-linear': [isNumber]\n      }],\n      'mask-image-linear-from-pos': [{\n        'mask-linear-from': scaleMaskImagePosition()\n      }],\n      'mask-image-linear-to-pos': [{\n        'mask-linear-to': scaleMaskImagePosition()\n      }],\n      'mask-image-linear-from-color': [{\n        'mask-linear-from': scaleColor()\n      }],\n      'mask-image-linear-to-color': [{\n        'mask-linear-to': scaleColor()\n      }],\n      'mask-image-t-from-pos': [{\n        'mask-t-from': scaleMaskImagePosition()\n      }],\n      'mask-image-t-to-pos': [{\n        'mask-t-to': scaleMaskImagePosition()\n      }],\n      'mask-image-t-from-color': [{\n        'mask-t-from': scaleColor()\n      }],\n      'mask-image-t-to-color': [{\n        'mask-t-to': scaleColor()\n      }],\n      'mask-image-r-from-pos': [{\n        'mask-r-from': scaleMaskImagePosition()\n      }],\n      'mask-image-r-to-pos': [{\n        'mask-r-to': scaleMaskImagePosition()\n      }],\n      'mask-image-r-from-color': [{\n        'mask-r-from': scaleColor()\n      }],\n      'mask-image-r-to-color': [{\n        'mask-r-to': scaleColor()\n      }],\n      'mask-image-b-from-pos': [{\n        'mask-b-from': scaleMaskImagePosition()\n      }],\n      'mask-image-b-to-pos': [{\n        'mask-b-to': scaleMaskImagePosition()\n      }],\n      'mask-image-b-from-color': [{\n        'mask-b-from': scaleColor()\n      }],\n      'mask-image-b-to-color': [{\n        'mask-b-to': scaleColor()\n      }],\n      'mask-image-l-from-pos': [{\n        'mask-l-from': scaleMaskImagePosition()\n      }],\n      'mask-image-l-to-pos': [{\n        'mask-l-to': scaleMaskImagePosition()\n      }],\n      'mask-image-l-from-color': [{\n        'mask-l-from': scaleColor()\n      }],\n      'mask-image-l-to-color': [{\n        'mask-l-to': scaleColor()\n      }],\n      'mask-image-x-from-pos': [{\n        'mask-x-from': scaleMaskImagePosition()\n      }],\n      'mask-image-x-to-pos': [{\n        'mask-x-to': scaleMaskImagePosition()\n      }],\n      'mask-image-x-from-color': [{\n        'mask-x-from': scaleColor()\n      }],\n      'mask-image-x-to-color': [{\n        'mask-x-to': scaleColor()\n      }],\n      'mask-image-y-from-pos': [{\n        'mask-y-from': scaleMaskImagePosition()\n      }],\n      'mask-image-y-to-pos': [{\n        'mask-y-to': scaleMaskImagePosition()\n      }],\n      'mask-image-y-from-color': [{\n        'mask-y-from': scaleColor()\n      }],\n      'mask-image-y-to-color': [{\n        'mask-y-to': scaleColor()\n      }],\n      'mask-image-radial': [{\n        'mask-radial': [isArbitraryVariable, isArbitraryValue]\n      }],\n      'mask-image-radial-from-pos': [{\n        'mask-radial-from': scaleMaskImagePosition()\n      }],\n      'mask-image-radial-to-pos': [{\n        'mask-radial-to': scaleMaskImagePosition()\n      }],\n      'mask-image-radial-from-color': [{\n        'mask-radial-from': scaleColor()\n      }],\n      'mask-image-radial-to-color': [{\n        'mask-radial-to': scaleColor()\n      }],\n      'mask-image-radial-shape': [{\n        'mask-radial': ['circle', 'ellipse']\n      }],\n      'mask-image-radial-size': [{\n        'mask-radial': [{\n          closest: ['side', 'corner'],\n          farthest: ['side', 'corner']\n        }]\n      }],\n      'mask-image-radial-pos': [{\n        'mask-radial-at': scalePosition()\n      }],\n      'mask-image-conic-pos': [{\n        'mask-conic': [isNumber]\n      }],\n      'mask-image-conic-from-pos': [{\n        'mask-conic-from': scaleMaskImagePosition()\n      }],\n      'mask-image-conic-to-pos': [{\n        'mask-conic-to': scaleMaskImagePosition()\n      }],\n      'mask-image-conic-from-color': [{\n        'mask-conic-from': scaleColor()\n      }],\n      'mask-image-conic-to-color': [{\n        'mask-conic-to': scaleColor()\n      }],\n      /**\n       * Mask Mode\n       * @see https://tailwindcss.com/docs/mask-mode\n       */\n      'mask-mode': [{\n        mask: ['alpha', 'luminance', 'match']\n      }],\n      /**\n       * Mask Origin\n       * @see https://tailwindcss.com/docs/mask-origin\n       */\n      'mask-origin': [{\n        'mask-origin': ['border', 'padding', 'content', 'fill', 'stroke', 'view']\n      }],\n      /**\n       * Mask Position\n       * @see https://tailwindcss.com/docs/mask-position\n       */\n      'mask-position': [{\n        mask: scaleBgPosition()\n      }],\n      /**\n       * Mask Repeat\n       * @see https://tailwindcss.com/docs/mask-repeat\n       */\n      'mask-repeat': [{\n        mask: scaleBgRepeat()\n      }],\n      /**\n       * Mask Size\n       * @see https://tailwindcss.com/docs/mask-size\n       */\n      'mask-size': [{\n        mask: scaleBgSize()\n      }],\n      /**\n       * Mask Type\n       * @see https://tailwindcss.com/docs/mask-type\n       */\n      'mask-type': [{\n        'mask-type': ['alpha', 'luminance']\n      }],\n      /**\n       * Mask Image\n       * @see https://tailwindcss.com/docs/mask-image\n       */\n      'mask-image': [{\n        mask: ['none', isArbitraryVariable, isArbitraryValue]\n      }],\n      // ---------------\n      // --- Filters ---\n      // ---------------\n      /**\n       * Filter\n       * @see https://tailwindcss.com/docs/filter\n       */\n      filter: [{\n        filter: [\n        // Deprecated since Tailwind CSS v3.0.0\n        '', 'none', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Blur\n       * @see https://tailwindcss.com/docs/blur\n       */\n      blur: [{\n        blur: scaleBlur()\n      }],\n      /**\n       * Brightness\n       * @see https://tailwindcss.com/docs/brightness\n       */\n      brightness: [{\n        brightness: [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Contrast\n       * @see https://tailwindcss.com/docs/contrast\n       */\n      contrast: [{\n        contrast: [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Drop Shadow\n       * @see https://tailwindcss.com/docs/drop-shadow\n       */\n      'drop-shadow': [{\n        'drop-shadow': [\n        // Deprecated since Tailwind CSS v4.0.0\n        '', 'none', themeDropShadow, isArbitraryVariableShadow, isArbitraryShadow]\n      }],\n      /**\n       * Drop Shadow Color\n       * @see https://tailwindcss.com/docs/filter-drop-shadow#setting-the-shadow-color\n       */\n      'drop-shadow-color': [{\n        'drop-shadow': scaleColor()\n      }],\n      /**\n       * Grayscale\n       * @see https://tailwindcss.com/docs/grayscale\n       */\n      grayscale: [{\n        grayscale: ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Hue Rotate\n       * @see https://tailwindcss.com/docs/hue-rotate\n       */\n      'hue-rotate': [{\n        'hue-rotate': [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Invert\n       * @see https://tailwindcss.com/docs/invert\n       */\n      invert: [{\n        invert: ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Saturate\n       * @see https://tailwindcss.com/docs/saturate\n       */\n      saturate: [{\n        saturate: [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Sepia\n       * @see https://tailwindcss.com/docs/sepia\n       */\n      sepia: [{\n        sepia: ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Filter\n       * @see https://tailwindcss.com/docs/backdrop-filter\n       */\n      'backdrop-filter': [{\n        'backdrop-filter': [\n        // Deprecated since Tailwind CSS v3.0.0\n        '', 'none', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Blur\n       * @see https://tailwindcss.com/docs/backdrop-blur\n       */\n      'backdrop-blur': [{\n        'backdrop-blur': scaleBlur()\n      }],\n      /**\n       * Backdrop Brightness\n       * @see https://tailwindcss.com/docs/backdrop-brightness\n       */\n      'backdrop-brightness': [{\n        'backdrop-brightness': [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Contrast\n       * @see https://tailwindcss.com/docs/backdrop-contrast\n       */\n      'backdrop-contrast': [{\n        'backdrop-contrast': [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Grayscale\n       * @see https://tailwindcss.com/docs/backdrop-grayscale\n       */\n      'backdrop-grayscale': [{\n        'backdrop-grayscale': ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Hue Rotate\n       * @see https://tailwindcss.com/docs/backdrop-hue-rotate\n       */\n      'backdrop-hue-rotate': [{\n        'backdrop-hue-rotate': [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Invert\n       * @see https://tailwindcss.com/docs/backdrop-invert\n       */\n      'backdrop-invert': [{\n        'backdrop-invert': ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Opacity\n       * @see https://tailwindcss.com/docs/backdrop-opacity\n       */\n      'backdrop-opacity': [{\n        'backdrop-opacity': [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Saturate\n       * @see https://tailwindcss.com/docs/backdrop-saturate\n       */\n      'backdrop-saturate': [{\n        'backdrop-saturate': [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Sepia\n       * @see https://tailwindcss.com/docs/backdrop-sepia\n       */\n      'backdrop-sepia': [{\n        'backdrop-sepia': ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      // --------------\n      // --- Tables ---\n      // --------------\n      /**\n       * Border Collapse\n       * @see https://tailwindcss.com/docs/border-collapse\n       */\n      'border-collapse': [{\n        border: ['collapse', 'separate']\n      }],\n      /**\n       * Border Spacing\n       * @see https://tailwindcss.com/docs/border-spacing\n       */\n      'border-spacing': [{\n        'border-spacing': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Border Spacing X\n       * @see https://tailwindcss.com/docs/border-spacing\n       */\n      'border-spacing-x': [{\n        'border-spacing-x': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Border Spacing Y\n       * @see https://tailwindcss.com/docs/border-spacing\n       */\n      'border-spacing-y': [{\n        'border-spacing-y': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Table Layout\n       * @see https://tailwindcss.com/docs/table-layout\n       */\n      'table-layout': [{\n        table: ['auto', 'fixed']\n      }],\n      /**\n       * Caption Side\n       * @see https://tailwindcss.com/docs/caption-side\n       */\n      caption: [{\n        caption: ['top', 'bottom']\n      }],\n      // ---------------------------------\n      // --- Transitions and Animation ---\n      // ---------------------------------\n      /**\n       * Transition Property\n       * @see https://tailwindcss.com/docs/transition-property\n       */\n      transition: [{\n        transition: ['', 'all', 'colors', 'opacity', 'shadow', 'transform', 'none', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Transition Behavior\n       * @see https://tailwindcss.com/docs/transition-behavior\n       */\n      'transition-behavior': [{\n        transition: ['normal', 'discrete']\n      }],\n      /**\n       * Transition Duration\n       * @see https://tailwindcss.com/docs/transition-duration\n       */\n      duration: [{\n        duration: [isNumber, 'initial', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Transition Timing Function\n       * @see https://tailwindcss.com/docs/transition-timing-function\n       */\n      ease: [{\n        ease: ['linear', 'initial', themeEase, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Transition Delay\n       * @see https://tailwindcss.com/docs/transition-delay\n       */\n      delay: [{\n        delay: [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Animation\n       * @see https://tailwindcss.com/docs/animation\n       */\n      animate: [{\n        animate: ['none', themeAnimate, isArbitraryVariable, isArbitraryValue]\n      }],\n      // ------------------\n      // --- Transforms ---\n      // ------------------\n      /**\n       * Backface Visibility\n       * @see https://tailwindcss.com/docs/backface-visibility\n       */\n      backface: [{\n        backface: ['hidden', 'visible']\n      }],\n      /**\n       * Perspective\n       * @see https://tailwindcss.com/docs/perspective\n       */\n      perspective: [{\n        perspective: [themePerspective, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Perspective Origin\n       * @see https://tailwindcss.com/docs/perspective-origin\n       */\n      'perspective-origin': [{\n        'perspective-origin': scalePositionWithArbitrary()\n      }],\n      /**\n       * Rotate\n       * @see https://tailwindcss.com/docs/rotate\n       */\n      rotate: [{\n        rotate: scaleRotate()\n      }],\n      /**\n       * Rotate X\n       * @see https://tailwindcss.com/docs/rotate\n       */\n      'rotate-x': [{\n        'rotate-x': scaleRotate()\n      }],\n      /**\n       * Rotate Y\n       * @see https://tailwindcss.com/docs/rotate\n       */\n      'rotate-y': [{\n        'rotate-y': scaleRotate()\n      }],\n      /**\n       * Rotate Z\n       * @see https://tailwindcss.com/docs/rotate\n       */\n      'rotate-z': [{\n        'rotate-z': scaleRotate()\n      }],\n      /**\n       * Scale\n       * @see https://tailwindcss.com/docs/scale\n       */\n      scale: [{\n        scale: scaleScale()\n      }],\n      /**\n       * Scale X\n       * @see https://tailwindcss.com/docs/scale\n       */\n      'scale-x': [{\n        'scale-x': scaleScale()\n      }],\n      /**\n       * Scale Y\n       * @see https://tailwindcss.com/docs/scale\n       */\n      'scale-y': [{\n        'scale-y': scaleScale()\n      }],\n      /**\n       * Scale Z\n       * @see https://tailwindcss.com/docs/scale\n       */\n      'scale-z': [{\n        'scale-z': scaleScale()\n      }],\n      /**\n       * Scale 3D\n       * @see https://tailwindcss.com/docs/scale\n       */\n      'scale-3d': ['scale-3d'],\n      /**\n       * Skew\n       * @see https://tailwindcss.com/docs/skew\n       */\n      skew: [{\n        skew: scaleSkew()\n      }],\n      /**\n       * Skew X\n       * @see https://tailwindcss.com/docs/skew\n       */\n      'skew-x': [{\n        'skew-x': scaleSkew()\n      }],\n      /**\n       * Skew Y\n       * @see https://tailwindcss.com/docs/skew\n       */\n      'skew-y': [{\n        'skew-y': scaleSkew()\n      }],\n      /**\n       * Transform\n       * @see https://tailwindcss.com/docs/transform\n       */\n      transform: [{\n        transform: [isArbitraryVariable, isArbitraryValue, '', 'none', 'gpu', 'cpu']\n      }],\n      /**\n       * Transform Origin\n       * @see https://tailwindcss.com/docs/transform-origin\n       */\n      'transform-origin': [{\n        origin: scalePositionWithArbitrary()\n      }],\n      /**\n       * Transform Style\n       * @see https://tailwindcss.com/docs/transform-style\n       */\n      'transform-style': [{\n        transform: ['3d', 'flat']\n      }],\n      /**\n       * Translate\n       * @see https://tailwindcss.com/docs/translate\n       */\n      translate: [{\n        translate: scaleTranslate()\n      }],\n      /**\n       * Translate X\n       * @see https://tailwindcss.com/docs/translate\n       */\n      'translate-x': [{\n        'translate-x': scaleTranslate()\n      }],\n      /**\n       * Translate Y\n       * @see https://tailwindcss.com/docs/translate\n       */\n      'translate-y': [{\n        'translate-y': scaleTranslate()\n      }],\n      /**\n       * Translate Z\n       * @see https://tailwindcss.com/docs/translate\n       */\n      'translate-z': [{\n        'translate-z': scaleTranslate()\n      }],\n      /**\n       * Translate None\n       * @see https://tailwindcss.com/docs/translate\n       */\n      'translate-none': ['translate-none'],\n      // ---------------------\n      // --- Interactivity ---\n      // ---------------------\n      /**\n       * Accent Color\n       * @see https://tailwindcss.com/docs/accent-color\n       */\n      accent: [{\n        accent: scaleColor()\n      }],\n      /**\n       * Appearance\n       * @see https://tailwindcss.com/docs/appearance\n       */\n      appearance: [{\n        appearance: ['none', 'auto']\n      }],\n      /**\n       * Caret Color\n       * @see https://tailwindcss.com/docs/just-in-time-mode#caret-color-utilities\n       */\n      'caret-color': [{\n        caret: scaleColor()\n      }],\n      /**\n       * Color Scheme\n       * @see https://tailwindcss.com/docs/color-scheme\n       */\n      'color-scheme': [{\n        scheme: ['normal', 'dark', 'light', 'light-dark', 'only-dark', 'only-light']\n      }],\n      /**\n       * Cursor\n       * @see https://tailwindcss.com/docs/cursor\n       */\n      cursor: [{\n        cursor: ['auto', 'default', 'pointer', 'wait', 'text', 'move', 'help', 'not-allowed', 'none', 'context-menu', 'progress', 'cell', 'crosshair', 'vertical-text', 'alias', 'copy', 'no-drop', 'grab', 'grabbing', 'all-scroll', 'col-resize', 'row-resize', 'n-resize', 'e-resize', 's-resize', 'w-resize', 'ne-resize', 'nw-resize', 'se-resize', 'sw-resize', 'ew-resize', 'ns-resize', 'nesw-resize', 'nwse-resize', 'zoom-in', 'zoom-out', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Field Sizing\n       * @see https://tailwindcss.com/docs/field-sizing\n       */\n      'field-sizing': [{\n        'field-sizing': ['fixed', 'content']\n      }],\n      /**\n       * Pointer Events\n       * @see https://tailwindcss.com/docs/pointer-events\n       */\n      'pointer-events': [{\n        'pointer-events': ['auto', 'none']\n      }],\n      /**\n       * Resize\n       * @see https://tailwindcss.com/docs/resize\n       */\n      resize: [{\n        resize: ['none', '', 'y', 'x']\n      }],\n      /**\n       * Scroll Behavior\n       * @see https://tailwindcss.com/docs/scroll-behavior\n       */\n      'scroll-behavior': [{\n        scroll: ['auto', 'smooth']\n      }],\n      /**\n       * Scroll Margin\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-m': [{\n        'scroll-m': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin X\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mx': [{\n        'scroll-mx': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin Y\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-my': [{\n        'scroll-my': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin Start\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-ms': [{\n        'scroll-ms': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin End\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-me': [{\n        'scroll-me': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin Top\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mt': [{\n        'scroll-mt': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin Right\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mr': [{\n        'scroll-mr': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin Bottom\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mb': [{\n        'scroll-mb': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin Left\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-ml': [{\n        'scroll-ml': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-p': [{\n        'scroll-p': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding X\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-px': [{\n        'scroll-px': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding Y\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-py': [{\n        'scroll-py': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding Start\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-ps': [{\n        'scroll-ps': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding End\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pe': [{\n        'scroll-pe': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding Top\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pt': [{\n        'scroll-pt': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding Right\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pr': [{\n        'scroll-pr': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding Bottom\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pb': [{\n        'scroll-pb': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding Left\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pl': [{\n        'scroll-pl': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Snap Align\n       * @see https://tailwindcss.com/docs/scroll-snap-align\n       */\n      'snap-align': [{\n        snap: ['start', 'end', 'center', 'align-none']\n      }],\n      /**\n       * Scroll Snap Stop\n       * @see https://tailwindcss.com/docs/scroll-snap-stop\n       */\n      'snap-stop': [{\n        snap: ['normal', 'always']\n      }],\n      /**\n       * Scroll Snap Type\n       * @see https://tailwindcss.com/docs/scroll-snap-type\n       */\n      'snap-type': [{\n        snap: ['none', 'x', 'y', 'both']\n      }],\n      /**\n       * Scroll Snap Type Strictness\n       * @see https://tailwindcss.com/docs/scroll-snap-type\n       */\n      'snap-strictness': [{\n        snap: ['mandatory', 'proximity']\n      }],\n      /**\n       * Touch Action\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      touch: [{\n        touch: ['auto', 'none', 'manipulation']\n      }],\n      /**\n       * Touch Action X\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      'touch-x': [{\n        'touch-pan': ['x', 'left', 'right']\n      }],\n      /**\n       * Touch Action Y\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      'touch-y': [{\n        'touch-pan': ['y', 'up', 'down']\n      }],\n      /**\n       * Touch Action Pinch Zoom\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      'touch-pz': ['touch-pinch-zoom'],\n      /**\n       * User Select\n       * @see https://tailwindcss.com/docs/user-select\n       */\n      select: [{\n        select: ['none', 'text', 'all', 'auto']\n      }],\n      /**\n       * Will Change\n       * @see https://tailwindcss.com/docs/will-change\n       */\n      'will-change': [{\n        'will-change': ['auto', 'scroll', 'contents', 'transform', isArbitraryVariable, isArbitraryValue]\n      }],\n      // -----------\n      // --- SVG ---\n      // -----------\n      /**\n       * Fill\n       * @see https://tailwindcss.com/docs/fill\n       */\n      fill: [{\n        fill: ['none', ...scaleColor()]\n      }],\n      /**\n       * Stroke Width\n       * @see https://tailwindcss.com/docs/stroke-width\n       */\n      'stroke-w': [{\n        stroke: [isNumber, isArbitraryVariableLength, isArbitraryLength, isArbitraryNumber]\n      }],\n      /**\n       * Stroke\n       * @see https://tailwindcss.com/docs/stroke\n       */\n      stroke: [{\n        stroke: ['none', ...scaleColor()]\n      }],\n      // ---------------------\n      // --- Accessibility ---\n      // ---------------------\n      /**\n       * Forced Color Adjust\n       * @see https://tailwindcss.com/docs/forced-color-adjust\n       */\n      'forced-color-adjust': [{\n        'forced-color-adjust': ['auto', 'none']\n      }]\n    },\n    conflictingClassGroups: {\n      overflow: ['overflow-x', 'overflow-y'],\n      overscroll: ['overscroll-x', 'overscroll-y'],\n      inset: ['inset-x', 'inset-y', 'start', 'end', 'top', 'right', 'bottom', 'left'],\n      'inset-x': ['right', 'left'],\n      'inset-y': ['top', 'bottom'],\n      flex: ['basis', 'grow', 'shrink'],\n      gap: ['gap-x', 'gap-y'],\n      p: ['px', 'py', 'ps', 'pe', 'pt', 'pr', 'pb', 'pl'],\n      px: ['pr', 'pl'],\n      py: ['pt', 'pb'],\n      m: ['mx', 'my', 'ms', 'me', 'mt', 'mr', 'mb', 'ml'],\n      mx: ['mr', 'ml'],\n      my: ['mt', 'mb'],\n      size: ['w', 'h'],\n      'font-size': ['leading'],\n      'fvn-normal': ['fvn-ordinal', 'fvn-slashed-zero', 'fvn-figure', 'fvn-spacing', 'fvn-fraction'],\n      'fvn-ordinal': ['fvn-normal'],\n      'fvn-slashed-zero': ['fvn-normal'],\n      'fvn-figure': ['fvn-normal'],\n      'fvn-spacing': ['fvn-normal'],\n      'fvn-fraction': ['fvn-normal'],\n      'line-clamp': ['display', 'overflow'],\n      rounded: ['rounded-s', 'rounded-e', 'rounded-t', 'rounded-r', 'rounded-b', 'rounded-l', 'rounded-ss', 'rounded-se', 'rounded-ee', 'rounded-es', 'rounded-tl', 'rounded-tr', 'rounded-br', 'rounded-bl'],\n      'rounded-s': ['rounded-ss', 'rounded-es'],\n      'rounded-e': ['rounded-se', 'rounded-ee'],\n      'rounded-t': ['rounded-tl', 'rounded-tr'],\n      'rounded-r': ['rounded-tr', 'rounded-br'],\n      'rounded-b': ['rounded-br', 'rounded-bl'],\n      'rounded-l': ['rounded-tl', 'rounded-bl'],\n      'border-spacing': ['border-spacing-x', 'border-spacing-y'],\n      'border-w': ['border-w-x', 'border-w-y', 'border-w-s', 'border-w-e', 'border-w-t', 'border-w-r', 'border-w-b', 'border-w-l'],\n      'border-w-x': ['border-w-r', 'border-w-l'],\n      'border-w-y': ['border-w-t', 'border-w-b'],\n      'border-color': ['border-color-x', 'border-color-y', 'border-color-s', 'border-color-e', 'border-color-t', 'border-color-r', 'border-color-b', 'border-color-l'],\n      'border-color-x': ['border-color-r', 'border-color-l'],\n      'border-color-y': ['border-color-t', 'border-color-b'],\n      translate: ['translate-x', 'translate-y', 'translate-none'],\n      'translate-none': ['translate', 'translate-x', 'translate-y', 'translate-z'],\n      'scroll-m': ['scroll-mx', 'scroll-my', 'scroll-ms', 'scroll-me', 'scroll-mt', 'scroll-mr', 'scroll-mb', 'scroll-ml'],\n      'scroll-mx': ['scroll-mr', 'scroll-ml'],\n      'scroll-my': ['scroll-mt', 'scroll-mb'],\n      'scroll-p': ['scroll-px', 'scroll-py', 'scroll-ps', 'scroll-pe', 'scroll-pt', 'scroll-pr', 'scroll-pb', 'scroll-pl'],\n      'scroll-px': ['scroll-pr', 'scroll-pl'],\n      'scroll-py': ['scroll-pt', 'scroll-pb'],\n      touch: ['touch-x', 'touch-y', 'touch-pz'],\n      'touch-x': ['touch'],\n      'touch-y': ['touch'],\n      'touch-pz': ['touch']\n    },\n    conflictingClassGroupModifiers: {\n      'font-size': ['leading']\n    },\n    orderSensitiveModifiers: ['*', '**', 'after', 'backdrop', 'before', 'details-content', 'file', 'first-letter', 'first-line', 'marker', 'placeholder', 'selection']\n  };\n};\n\n/**\n * @param baseConfig Config where other config will be merged into. This object will be mutated.\n * @param configExtension Partial config to merge into the `baseConfig`.\n */\nconst mergeConfigs = (baseConfig, {\n  cacheSize,\n  prefix,\n  experimentalParseClassName,\n  extend = {},\n  override = {}\n}) => {\n  overrideProperty(baseConfig, 'cacheSize', cacheSize);\n  overrideProperty(baseConfig, 'prefix', prefix);\n  overrideProperty(baseConfig, 'experimentalParseClassName', experimentalParseClassName);\n  overrideConfigProperties(baseConfig.theme, override.theme);\n  overrideConfigProperties(baseConfig.classGroups, override.classGroups);\n  overrideConfigProperties(baseConfig.conflictingClassGroups, override.conflictingClassGroups);\n  overrideConfigProperties(baseConfig.conflictingClassGroupModifiers, override.conflictingClassGroupModifiers);\n  overrideProperty(baseConfig, 'orderSensitiveModifiers', override.orderSensitiveModifiers);\n  mergeConfigProperties(baseConfig.theme, extend.theme);\n  mergeConfigProperties(baseConfig.classGroups, extend.classGroups);\n  mergeConfigProperties(baseConfig.conflictingClassGroups, extend.conflictingClassGroups);\n  mergeConfigProperties(baseConfig.conflictingClassGroupModifiers, extend.conflictingClassGroupModifiers);\n  mergeArrayProperties(baseConfig, extend, 'orderSensitiveModifiers');\n  return baseConfig;\n};\nconst overrideProperty = (baseObject, overrideKey, overrideValue) => {\n  if (overrideValue !== undefined) {\n    baseObject[overrideKey] = overrideValue;\n  }\n};\nconst overrideConfigProperties = (baseObject, overrideObject) => {\n  if (overrideObject) {\n    for (const key in overrideObject) {\n      overrideProperty(baseObject, key, overrideObject[key]);\n    }\n  }\n};\nconst mergeConfigProperties = (baseObject, mergeObject) => {\n  if (mergeObject) {\n    for (const key in mergeObject) {\n      mergeArrayProperties(baseObject, mergeObject, key);\n    }\n  }\n};\nconst mergeArrayProperties = (baseObject, mergeObject, key) => {\n  const mergeValue = mergeObject[key];\n  if (mergeValue !== undefined) {\n    baseObject[key] = baseObject[key] ? baseObject[key].concat(mergeValue) : mergeValue;\n  }\n};\nconst extendTailwindMerge = (configExtension, ...createConfig) => typeof configExtension === 'function' ? createTailwindMerge(getDefaultConfig, configExtension, ...createConfig) : createTailwindMerge(() => mergeConfigs(getDefaultConfig(), configExtension), ...createConfig);\nconst twMerge = /*#__PURE__*/createTailwindMerge(getDefaultConfig);\nexport { createTailwindMerge, extendTailwindMerge, fromTheme, getDefaultConfig, mergeConfigs, twJoin, twMerge, validators };\n//# sourceMappingURL=bundle-mjs.mjs.map\n","import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n\treturn twMerge(clsx(inputs));\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type WithoutChild<T> = T extends { child?: any } ? Omit<T, \"child\"> : T;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type WithoutChildren<T> = T extends { children?: any } ? Omit<T, \"children\"> : T;\nexport type WithoutChildrenOrChild<T> = WithoutChildren<WithoutChild<T>>;\nexport type WithElementRef<T, U extends HTMLElement = HTMLElement> = T & { ref?: U | null };\n\n/**\n * Debug utility for consistent logging across the application\n */\nexport class Debug {\n    private static enabled: boolean = false;\n    private static readonly PREFIX = '[TandemDebug]';\n\n    /**\n     * Enable debug logging\n     */\n    static enable(): void {\n        Debug.enabled = true;\n        Debug.log('Debug', 'Debug logging enabled');\n    }\n\n    /**\n     * Disable debug logging\n     */\n    static disable(): void {\n        Debug.log('Debug', 'Debug logging disabled');\n        Debug.enabled = false;\n    }\n\n    /**\n     * Log a debug message if debug is enabled\n     * @param context The context of the log message\n     * @param message The message to log\n     * @param data Additional data to log\n     */\n    static log(context: string, message: string, data?: any): void {\n        if (!Debug.enabled) return;\n\n        if (data !== undefined) {\n            console.log(`${Debug.PREFIX} [${context}] ${message}`, data);\n        } else {\n            console.log(`${Debug.PREFIX} [${context}] ${message}`);\n        }\n    }\n\n    /**\n     * Log an error message\n     * @param context The context of the error\n     * @param message The error message\n     * @param error The error object\n     */\n    static error(context: string, message: string, error?: Error): void {\n        if (error) {\n            console.error(`${Debug.PREFIX} [${context}] ${message}`, error);\n        } else {\n            console.error(`${Debug.PREFIX} [${context}] ${message}`);\n        }\n    }\n\n    /**\n     * Log a warning message\n     * @param context The context of the warning\n     * @param message The warning message\n     * @param data Additional data to log\n     */\n    static warn(context: string, message: string, data?: any): void {\n        if (data !== undefined) {\n            console.warn(`${Debug.PREFIX} [${context}] ${message}`, data);\n        } else {\n            console.warn(`${Debug.PREFIX} [${context}] ${message}`);\n        }\n    }\n}","/**\n * Custom error types for the application\n *\n * This module defines custom error classes for different types of errors that can occur\n * in the application, enabling better error handling and propagation.\n */\n\nexport class AppError extends Error {\n    constructor(message: string, public context?: any) {\n        super(message);\n        this.name = 'AppError';\n    }\n}\n\nexport class ProgressError extends AppError {\n    constructor(message: string, context?: any) {\n        super(message, context);\n        this.name = 'ProgressError';\n    }\n}\n\nexport class StateError extends AppError {\n    constructor(message: string, context?: any) {\n        super(message, context);\n        this.name = 'StateError';\n    }\n}\n\nexport class ServiceError extends AppError {\n    constructor(message: string, context?: any) {\n        super(message, context);\n        this.name = 'ServiceError';\n    }\n}\n\nexport class DataError extends AppError {\n    constructor(message: string, context?: any) {\n        super(message, context);\n        this.name = 'DataError';\n    }\n}\n\nexport class ValidationError extends AppError {\n    constructor(message: string, context?: any) {\n        super(message, context);\n        this.name = 'ValidationError';\n    }\n}\n\nexport class StorageError extends AppError {\n    constructor(message: string, context?: any) {\n        super(message, context);\n        this.name = 'StorageError';\n    }\n}\n\n/**\n * Error handler utility for consistent error handling\n */\nexport class ErrorHandler {\n    /**\n     * Handle an error by logging it and emitting an error event\n     * @param error The error to handle\n     * @param context Additional context about the error\n     * @param eventBus Optional event bus for emitting error events\n     */\n    static handleError(error: Error, context?: string, eventBus?: { emit: (type: string, data: any) => Promise<void> }): void {\n        // Log the error\n        console.error(`[${error.name}] ${context || 'Error'}:`, error.message, error.stack);\n\n        // Emit error event if event bus is available\n        if (eventBus) {\n            eventBus.emit('error', {\n                error,\n                context,\n                timestamp: new Date()\n            }).catch(emitError => {\n                console.error('Failed to emit error event:', emitError);\n            });\n        }\n    }\n}\n","/**\n * Event Bus for application-wide event communication\n *\n * This provides a decoupled way for services to communicate without direct dependencies,\n * breaking circular dependencies and enabling better testability.\n */\n\nimport { Debug } from '../utils';\n\nexport type EventCallback<T = any> = (data: T) => void | Promise<void>;\n\nexport class EventBus {\n    private listeners: Map<string, Set<EventCallback>> = new Map();\n\n    /**\n     * Subscribe to an event type\n     * @param eventType The event type to subscribe to\n     * @param callback The callback to invoke when the event is emitted\n     */\n    subscribe<T = any>(eventType: string, callback: EventCallback<T>): () => void {\n        if (!this.listeners.has(eventType)) {\n            this.listeners.set(eventType, new Set());\n        }\n\n        const listeners = this.listeners.get(eventType)!;\n        listeners.add(callback);\n\n        // Return unsubscribe function\n        return () => {\n            listeners.delete(callback);\n            if (listeners.size === 0) {\n                this.listeners.delete(eventType);\n            }\n        };\n    }\n\n    /**\n     * Emit an event to all subscribers\n     * @param eventType The event type to emit\n     * @param data The data to pass to subscribers\n     */\n    async emit<T = any>(eventType: string, data: T): Promise<void> {\n        const listeners = this.listeners.get(eventType);\n        if (listeners) {\n            // Create a copy to avoid issues if listeners are modified during iteration\n            const listenersCopy = Array.from(listeners);\n            for (const listener of listenersCopy) {\n                try {\n                    await listener(data);\n                } catch (error) {\n                    console.error(`Error in event listener for ${eventType}:`, error);\n                }\n            }\n        }\n    }\n\n    /**\n     * Clear all listeners for a specific event type or all events\n     * @param eventType Optional event type to clear. If not provided, clears all listeners.\n     */\n    clear(eventType?: string): void {\n        if (eventType) {\n            Debug.log('EventBus', 'Clearing listeners for event type', { eventType });\n            this.listeners.delete(eventType);\n        } else {\n            Debug.log('EventBus', 'Clearing all event listeners');\n            this.listeners.clear();\n        }\n    }\n}\n\n// Define event types\nexport const EventTypes = {\n    XP_EARNED: 'xp_earned',\n    LEVEL_UP: 'level_up',\n    PRACTICE_RESULT: 'practice_result',\n    LESSON_COMPLETED: 'lesson_completed',\n    QUIZ_COMPLETED: 'quiz_completed',\n    STATE_CHANGED: 'state_changed',\n    ERROR: 'error'\n} as const;\n\n// Define event data types\nexport interface XPEvent {\n    amount: number;\n    reason: string;\n    timestamp: Date;\n}\n\nexport interface LevelUpEvent {\n    oldLevel: number;\n    newLevel: number;\n    totalXP: number;\n    timestamp: Date;\n}\n\nexport interface PracticeResultEvent {\n    itemId: string;\n    correct: boolean;\n    responseTime?: number;\n    timestamp: Date;\n}\n\nexport interface LessonCompletedEvent {\n    lessonId: string;\n    completionPercentage: number;\n    timestamp: Date;\n}\n\nexport interface QuizCompletedEvent {\n    quizId: string;\n    score: number;\n    totalQuestions: number;\n    correctAnswers: number;\n    timeTaken: number;\n    timestamp: Date;\n}\n\nexport interface ErrorEvent {\n    error: Error;\n    context?: string;\n    timestamp: Date;\n}","/** A special constant with type `never` */\nexport const NEVER = Object.freeze({\n    status: \"aborted\",\n});\nexport /*@__NO_SIDE_EFFECTS__*/ function $constructor(name, initializer, params) {\n    function init(inst, def) {\n        if (!inst._zod) {\n            Object.defineProperty(inst, \"_zod\", {\n                value: {\n                    def,\n                    constr: _,\n                    traits: new Set(),\n                },\n                enumerable: false,\n            });\n        }\n        if (inst._zod.traits.has(name)) {\n            return;\n        }\n        inst._zod.traits.add(name);\n        initializer(inst, def);\n        // support prototype modifications\n        const proto = _.prototype;\n        const keys = Object.keys(proto);\n        for (let i = 0; i < keys.length; i++) {\n            const k = keys[i];\n            if (!(k in inst)) {\n                inst[k] = proto[k].bind(inst);\n            }\n        }\n    }\n    // doesn't work if Parent has a constructor with arguments\n    const Parent = params?.Parent ?? Object;\n    class Definition extends Parent {\n    }\n    Object.defineProperty(Definition, \"name\", { value: name });\n    function _(def) {\n        var _a;\n        const inst = params?.Parent ? new Definition() : this;\n        init(inst, def);\n        (_a = inst._zod).deferred ?? (_a.deferred = []);\n        for (const fn of inst._zod.deferred) {\n            fn();\n        }\n        return inst;\n    }\n    Object.defineProperty(_, \"init\", { value: init });\n    Object.defineProperty(_, Symbol.hasInstance, {\n        value: (inst) => {\n            if (params?.Parent && inst instanceof params.Parent)\n                return true;\n            return inst?._zod?.traits?.has(name);\n        },\n    });\n    Object.defineProperty(_, \"name\", { value: name });\n    return _;\n}\n//////////////////////////////   UTILITIES   ///////////////////////////////////////\nexport const $brand = Symbol(\"zod_brand\");\nexport class $ZodAsyncError extends Error {\n    constructor() {\n        super(`Encountered Promise during synchronous parse. Use .parseAsync() instead.`);\n    }\n}\nexport class $ZodEncodeError extends Error {\n    constructor(name) {\n        super(`Encountered unidirectional transform during encode: ${name}`);\n        this.name = \"ZodEncodeError\";\n    }\n}\nexport const globalConfig = {};\nexport function config(newConfig) {\n    if (newConfig)\n        Object.assign(globalConfig, newConfig);\n    return globalConfig;\n}\n","// functions\nexport function assertEqual(val) {\n    return val;\n}\nexport function assertNotEqual(val) {\n    return val;\n}\nexport function assertIs(_arg) { }\nexport function assertNever(_x) {\n    throw new Error();\n}\nexport function assert(_) { }\nexport function getEnumValues(entries) {\n    const numericValues = Object.values(entries).filter((v) => typeof v === \"number\");\n    const values = Object.entries(entries)\n        .filter(([k, _]) => numericValues.indexOf(+k) === -1)\n        .map(([_, v]) => v);\n    return values;\n}\nexport function joinValues(array, separator = \"|\") {\n    return array.map((val) => stringifyPrimitive(val)).join(separator);\n}\nexport function jsonStringifyReplacer(_, value) {\n    if (typeof value === \"bigint\")\n        return value.toString();\n    return value;\n}\nexport function cached(getter) {\n    const set = false;\n    return {\n        get value() {\n            if (!set) {\n                const value = getter();\n                Object.defineProperty(this, \"value\", { value });\n                return value;\n            }\n            throw new Error(\"cached value already set\");\n        },\n    };\n}\nexport function nullish(input) {\n    return input === null || input === undefined;\n}\nexport function cleanRegex(source) {\n    const start = source.startsWith(\"^\") ? 1 : 0;\n    const end = source.endsWith(\"$\") ? source.length - 1 : source.length;\n    return source.slice(start, end);\n}\nexport function floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepString = step.toString();\n    let stepDecCount = (stepString.split(\".\")[1] || \"\").length;\n    if (stepDecCount === 0 && /\\d?e-\\d?/.test(stepString)) {\n        const match = stepString.match(/\\d?e-(\\d?)/);\n        if (match?.[1]) {\n            stepDecCount = Number.parseInt(match[1]);\n        }\n    }\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = Number.parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = Number.parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / 10 ** decCount;\n}\nconst EVALUATING = Symbol(\"evaluating\");\nexport function defineLazy(object, key, getter) {\n    let value = undefined;\n    Object.defineProperty(object, key, {\n        get() {\n            if (value === EVALUATING) {\n                // Circular reference detected, return undefined to break the cycle\n                return undefined;\n            }\n            if (value === undefined) {\n                value = EVALUATING;\n                value = getter();\n            }\n            return value;\n        },\n        set(v) {\n            Object.defineProperty(object, key, {\n                value: v,\n                // configurable: true,\n            });\n            // object[key] = v;\n        },\n        configurable: true,\n    });\n}\nexport function objectClone(obj) {\n    return Object.create(Object.getPrototypeOf(obj), Object.getOwnPropertyDescriptors(obj));\n}\nexport function assignProp(target, prop, value) {\n    Object.defineProperty(target, prop, {\n        value,\n        writable: true,\n        enumerable: true,\n        configurable: true,\n    });\n}\nexport function mergeDefs(...defs) {\n    const mergedDescriptors = {};\n    for (const def of defs) {\n        const descriptors = Object.getOwnPropertyDescriptors(def);\n        Object.assign(mergedDescriptors, descriptors);\n    }\n    return Object.defineProperties({}, mergedDescriptors);\n}\nexport function cloneDef(schema) {\n    return mergeDefs(schema._zod.def);\n}\nexport function getElementAtPath(obj, path) {\n    if (!path)\n        return obj;\n    return path.reduce((acc, key) => acc?.[key], obj);\n}\nexport function promiseAllObject(promisesObj) {\n    const keys = Object.keys(promisesObj);\n    const promises = keys.map((key) => promisesObj[key]);\n    return Promise.all(promises).then((results) => {\n        const resolvedObj = {};\n        for (let i = 0; i < keys.length; i++) {\n            resolvedObj[keys[i]] = results[i];\n        }\n        return resolvedObj;\n    });\n}\nexport function randomString(length = 10) {\n    const chars = \"abcdefghijklmnopqrstuvwxyz\";\n    let str = \"\";\n    for (let i = 0; i < length; i++) {\n        str += chars[Math.floor(Math.random() * chars.length)];\n    }\n    return str;\n}\nexport function esc(str) {\n    return JSON.stringify(str);\n}\nexport function slugify(input) {\n    return input\n        .toLowerCase()\n        .trim()\n        .replace(/[^\\w\\s-]/g, \"\")\n        .replace(/[\\s_-]+/g, \"-\")\n        .replace(/^-+|-+$/g, \"\");\n}\nexport const captureStackTrace = (\"captureStackTrace\" in Error ? Error.captureStackTrace : (..._args) => { });\nexport function isObject(data) {\n    return typeof data === \"object\" && data !== null && !Array.isArray(data);\n}\nexport const allowsEval = cached(() => {\n    // @ts-ignore\n    if (typeof navigator !== \"undefined\" && navigator?.userAgent?.includes(\"Cloudflare\")) {\n        return false;\n    }\n    try {\n        const F = Function;\n        new F(\"\");\n        return true;\n    }\n    catch (_) {\n        return false;\n    }\n});\nexport function isPlainObject(o) {\n    if (isObject(o) === false)\n        return false;\n    // modified constructor\n    const ctor = o.constructor;\n    if (ctor === undefined)\n        return true;\n    if (typeof ctor !== \"function\")\n        return true;\n    // modified prototype\n    const prot = ctor.prototype;\n    if (isObject(prot) === false)\n        return false;\n    // ctor doesn't have static `isPrototypeOf`\n    if (Object.prototype.hasOwnProperty.call(prot, \"isPrototypeOf\") === false) {\n        return false;\n    }\n    return true;\n}\nexport function shallowClone(o) {\n    if (isPlainObject(o))\n        return { ...o };\n    if (Array.isArray(o))\n        return [...o];\n    return o;\n}\nexport function numKeys(data) {\n    let keyCount = 0;\n    for (const key in data) {\n        if (Object.prototype.hasOwnProperty.call(data, key)) {\n            keyCount++;\n        }\n    }\n    return keyCount;\n}\nexport const getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return \"undefined\";\n        case \"string\":\n            return \"string\";\n        case \"number\":\n            return Number.isNaN(data) ? \"nan\" : \"number\";\n        case \"boolean\":\n            return \"boolean\";\n        case \"function\":\n            return \"function\";\n        case \"bigint\":\n            return \"bigint\";\n        case \"symbol\":\n            return \"symbol\";\n        case \"object\":\n            if (Array.isArray(data)) {\n                return \"array\";\n            }\n            if (data === null) {\n                return \"null\";\n            }\n            if (data.then && typeof data.then === \"function\" && data.catch && typeof data.catch === \"function\") {\n                return \"promise\";\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return \"map\";\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return \"set\";\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return \"date\";\n            }\n            // @ts-ignore\n            if (typeof File !== \"undefined\" && data instanceof File) {\n                return \"file\";\n            }\n            return \"object\";\n        default:\n            throw new Error(`Unknown data type: ${t}`);\n    }\n};\nexport const propertyKeyTypes = new Set([\"string\", \"number\", \"symbol\"]);\nexport const primitiveTypes = new Set([\"string\", \"number\", \"bigint\", \"boolean\", \"symbol\", \"undefined\"]);\nexport function escapeRegex(str) {\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\n// zod-specific utils\nexport function clone(inst, def, params) {\n    const cl = new inst._zod.constr(def ?? inst._zod.def);\n    if (!def || params?.parent)\n        cl._zod.parent = inst;\n    return cl;\n}\nexport function normalizeParams(_params) {\n    const params = _params;\n    if (!params)\n        return {};\n    if (typeof params === \"string\")\n        return { error: () => params };\n    if (params?.message !== undefined) {\n        if (params?.error !== undefined)\n            throw new Error(\"Cannot specify both `message` and `error` params\");\n        params.error = params.message;\n    }\n    delete params.message;\n    if (typeof params.error === \"string\")\n        return { ...params, error: () => params.error };\n    return params;\n}\nexport function createTransparentProxy(getter) {\n    let target;\n    return new Proxy({}, {\n        get(_, prop, receiver) {\n            target ?? (target = getter());\n            return Reflect.get(target, prop, receiver);\n        },\n        set(_, prop, value, receiver) {\n            target ?? (target = getter());\n            return Reflect.set(target, prop, value, receiver);\n        },\n        has(_, prop) {\n            target ?? (target = getter());\n            return Reflect.has(target, prop);\n        },\n        deleteProperty(_, prop) {\n            target ?? (target = getter());\n            return Reflect.deleteProperty(target, prop);\n        },\n        ownKeys(_) {\n            target ?? (target = getter());\n            return Reflect.ownKeys(target);\n        },\n        getOwnPropertyDescriptor(_, prop) {\n            target ?? (target = getter());\n            return Reflect.getOwnPropertyDescriptor(target, prop);\n        },\n        defineProperty(_, prop, descriptor) {\n            target ?? (target = getter());\n            return Reflect.defineProperty(target, prop, descriptor);\n        },\n    });\n}\nexport function stringifyPrimitive(value) {\n    if (typeof value === \"bigint\")\n        return value.toString() + \"n\";\n    if (typeof value === \"string\")\n        return `\"${value}\"`;\n    return `${value}`;\n}\nexport function optionalKeys(shape) {\n    return Object.keys(shape).filter((k) => {\n        return shape[k]._zod.optin === \"optional\" && shape[k]._zod.optout === \"optional\";\n    });\n}\nexport const NUMBER_FORMAT_RANGES = {\n    safeint: [Number.MIN_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\n    int32: [-2147483648, 2147483647],\n    uint32: [0, 4294967295],\n    float32: [-3.4028234663852886e38, 3.4028234663852886e38],\n    float64: [-Number.MAX_VALUE, Number.MAX_VALUE],\n};\nexport const BIGINT_FORMAT_RANGES = {\n    int64: [/* @__PURE__*/ BigInt(\"-9223372036854775808\"), /* @__PURE__*/ BigInt(\"9223372036854775807\")],\n    uint64: [/* @__PURE__*/ BigInt(0), /* @__PURE__*/ BigInt(\"18446744073709551615\")],\n};\nexport function pick(schema, mask) {\n    const currDef = schema._zod.def;\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const newShape = {};\n            for (const key in mask) {\n                if (!(key in currDef.shape)) {\n                    throw new Error(`Unrecognized key: \"${key}\"`);\n                }\n                if (!mask[key])\n                    continue;\n                newShape[key] = currDef.shape[key];\n            }\n            assignProp(this, \"shape\", newShape); // self-caching\n            return newShape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function omit(schema, mask) {\n    const currDef = schema._zod.def;\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const newShape = { ...schema._zod.def.shape };\n            for (const key in mask) {\n                if (!(key in currDef.shape)) {\n                    throw new Error(`Unrecognized key: \"${key}\"`);\n                }\n                if (!mask[key])\n                    continue;\n                delete newShape[key];\n            }\n            assignProp(this, \"shape\", newShape); // self-caching\n            return newShape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function extend(schema, shape) {\n    if (!isPlainObject(shape)) {\n        throw new Error(\"Invalid input to extend: expected a plain object\");\n    }\n    const checks = schema._zod.def.checks;\n    const hasChecks = checks && checks.length > 0;\n    if (hasChecks) {\n        throw new Error(\"Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.\");\n    }\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const _shape = { ...schema._zod.def.shape, ...shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function safeExtend(schema, shape) {\n    if (!isPlainObject(shape)) {\n        throw new Error(\"Invalid input to safeExtend: expected a plain object\");\n    }\n    const def = {\n        ...schema._zod.def,\n        get shape() {\n            const _shape = { ...schema._zod.def.shape, ...shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        checks: schema._zod.def.checks,\n    };\n    return clone(schema, def);\n}\nexport function merge(a, b) {\n    const def = mergeDefs(a._zod.def, {\n        get shape() {\n            const _shape = { ...a._zod.def.shape, ...b._zod.def.shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        get catchall() {\n            return b._zod.def.catchall;\n        },\n        checks: [], // delete existing checks\n    });\n    return clone(a, def);\n}\nexport function partial(Class, schema, mask) {\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const oldShape = schema._zod.def.shape;\n            const shape = { ...oldShape };\n            if (mask) {\n                for (const key in mask) {\n                    if (!(key in oldShape)) {\n                        throw new Error(`Unrecognized key: \"${key}\"`);\n                    }\n                    if (!mask[key])\n                        continue;\n                    // if (oldShape[key]!._zod.optin === \"optional\") continue;\n                    shape[key] = Class\n                        ? new Class({\n                            type: \"optional\",\n                            innerType: oldShape[key],\n                        })\n                        : oldShape[key];\n                }\n            }\n            else {\n                for (const key in oldShape) {\n                    // if (oldShape[key]!._zod.optin === \"optional\") continue;\n                    shape[key] = Class\n                        ? new Class({\n                            type: \"optional\",\n                            innerType: oldShape[key],\n                        })\n                        : oldShape[key];\n                }\n            }\n            assignProp(this, \"shape\", shape); // self-caching\n            return shape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function required(Class, schema, mask) {\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const oldShape = schema._zod.def.shape;\n            const shape = { ...oldShape };\n            if (mask) {\n                for (const key in mask) {\n                    if (!(key in shape)) {\n                        throw new Error(`Unrecognized key: \"${key}\"`);\n                    }\n                    if (!mask[key])\n                        continue;\n                    // overwrite with non-optional\n                    shape[key] = new Class({\n                        type: \"nonoptional\",\n                        innerType: oldShape[key],\n                    });\n                }\n            }\n            else {\n                for (const key in oldShape) {\n                    // overwrite with non-optional\n                    shape[key] = new Class({\n                        type: \"nonoptional\",\n                        innerType: oldShape[key],\n                    });\n                }\n            }\n            assignProp(this, \"shape\", shape); // self-caching\n            return shape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\n// invalid_type | too_big | too_small | invalid_format | not_multiple_of | unrecognized_keys | invalid_union | invalid_key | invalid_element | invalid_value | custom\nexport function aborted(x, startIndex = 0) {\n    if (x.aborted === true)\n        return true;\n    for (let i = startIndex; i < x.issues.length; i++) {\n        if (x.issues[i]?.continue !== true) {\n            return true;\n        }\n    }\n    return false;\n}\nexport function prefixIssues(path, issues) {\n    return issues.map((iss) => {\n        var _a;\n        (_a = iss).path ?? (_a.path = []);\n        iss.path.unshift(path);\n        return iss;\n    });\n}\nexport function unwrapMessage(message) {\n    return typeof message === \"string\" ? message : message?.message;\n}\nexport function finalizeIssue(iss, ctx, config) {\n    const full = { ...iss, path: iss.path ?? [] };\n    // for backwards compatibility\n    if (!iss.message) {\n        const message = unwrapMessage(iss.inst?._zod.def?.error?.(iss)) ??\n            unwrapMessage(ctx?.error?.(iss)) ??\n            unwrapMessage(config.customError?.(iss)) ??\n            unwrapMessage(config.localeError?.(iss)) ??\n            \"Invalid input\";\n        full.message = message;\n    }\n    // delete (full as any).def;\n    delete full.inst;\n    delete full.continue;\n    if (!ctx?.reportInput) {\n        delete full.input;\n    }\n    return full;\n}\nexport function getSizableOrigin(input) {\n    if (input instanceof Set)\n        return \"set\";\n    if (input instanceof Map)\n        return \"map\";\n    // @ts-ignore\n    if (input instanceof File)\n        return \"file\";\n    return \"unknown\";\n}\nexport function getLengthableOrigin(input) {\n    if (Array.isArray(input))\n        return \"array\";\n    if (typeof input === \"string\")\n        return \"string\";\n    return \"unknown\";\n}\nexport function issue(...args) {\n    const [iss, input, inst] = args;\n    if (typeof iss === \"string\") {\n        return {\n            message: iss,\n            code: \"custom\",\n            input,\n            inst,\n        };\n    }\n    return { ...iss };\n}\nexport function cleanEnum(obj) {\n    return Object.entries(obj)\n        .filter(([k, _]) => {\n        // return true if NaN, meaning it's not a number, thus a string key\n        return Number.isNaN(Number.parseInt(k, 10));\n    })\n        .map((el) => el[1]);\n}\n// Codec utility functions\nexport function base64ToUint8Array(base64) {\n    const binaryString = atob(base64);\n    const bytes = new Uint8Array(binaryString.length);\n    for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes;\n}\nexport function uint8ArrayToBase64(bytes) {\n    let binaryString = \"\";\n    for (let i = 0; i < bytes.length; i++) {\n        binaryString += String.fromCharCode(bytes[i]);\n    }\n    return btoa(binaryString);\n}\nexport function base64urlToUint8Array(base64url) {\n    const base64 = base64url.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    const padding = \"=\".repeat((4 - (base64.length % 4)) % 4);\n    return base64ToUint8Array(base64 + padding);\n}\nexport function uint8ArrayToBase64url(bytes) {\n    return uint8ArrayToBase64(bytes).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=/g, \"\");\n}\nexport function hexToUint8Array(hex) {\n    const cleanHex = hex.replace(/^0x/, \"\");\n    if (cleanHex.length % 2 !== 0) {\n        throw new Error(\"Invalid hex string length\");\n    }\n    const bytes = new Uint8Array(cleanHex.length / 2);\n    for (let i = 0; i < cleanHex.length; i += 2) {\n        bytes[i / 2] = Number.parseInt(cleanHex.slice(i, i + 2), 16);\n    }\n    return bytes;\n}\nexport function uint8ArrayToHex(bytes) {\n    return Array.from(bytes)\n        .map((b) => b.toString(16).padStart(2, \"0\"))\n        .join(\"\");\n}\n// instanceof\nexport class Class {\n    constructor(..._args) { }\n}\n","import { $constructor } from \"./core.js\";\nimport * as util from \"./util.js\";\nconst initializer = (inst, def) => {\n    inst.name = \"$ZodError\";\n    Object.defineProperty(inst, \"_zod\", {\n        value: inst._zod,\n        enumerable: false,\n    });\n    Object.defineProperty(inst, \"issues\", {\n        value: def,\n        enumerable: false,\n    });\n    inst.message = JSON.stringify(def, util.jsonStringifyReplacer, 2);\n    Object.defineProperty(inst, \"toString\", {\n        value: () => inst.message,\n        enumerable: false,\n    });\n};\nexport const $ZodError = $constructor(\"$ZodError\", initializer);\nexport const $ZodRealError = $constructor(\"$ZodError\", initializer, { Parent: Error });\nexport function flattenError(error, mapper = (issue) => issue.message) {\n    const fieldErrors = {};\n    const formErrors = [];\n    for (const sub of error.issues) {\n        if (sub.path.length > 0) {\n            fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];\n            fieldErrors[sub.path[0]].push(mapper(sub));\n        }\n        else {\n            formErrors.push(mapper(sub));\n        }\n    }\n    return { formErrors, fieldErrors };\n}\nexport function formatError(error, mapper = (issue) => issue.message) {\n    const fieldErrors = { _errors: [] };\n    const processError = (error) => {\n        for (const issue of error.issues) {\n            if (issue.code === \"invalid_union\" && issue.errors.length) {\n                issue.errors.map((issues) => processError({ issues }));\n            }\n            else if (issue.code === \"invalid_key\") {\n                processError({ issues: issue.issues });\n            }\n            else if (issue.code === \"invalid_element\") {\n                processError({ issues: issue.issues });\n            }\n            else if (issue.path.length === 0) {\n                fieldErrors._errors.push(mapper(issue));\n            }\n            else {\n                let curr = fieldErrors;\n                let i = 0;\n                while (i < issue.path.length) {\n                    const el = issue.path[i];\n                    const terminal = i === issue.path.length - 1;\n                    if (!terminal) {\n                        curr[el] = curr[el] || { _errors: [] };\n                    }\n                    else {\n                        curr[el] = curr[el] || { _errors: [] };\n                        curr[el]._errors.push(mapper(issue));\n                    }\n                    curr = curr[el];\n                    i++;\n                }\n            }\n        }\n    };\n    processError(error);\n    return fieldErrors;\n}\nexport function treeifyError(error, mapper = (issue) => issue.message) {\n    const result = { errors: [] };\n    const processError = (error, path = []) => {\n        var _a, _b;\n        for (const issue of error.issues) {\n            if (issue.code === \"invalid_union\" && issue.errors.length) {\n                // regular union error\n                issue.errors.map((issues) => processError({ issues }, issue.path));\n            }\n            else if (issue.code === \"invalid_key\") {\n                processError({ issues: issue.issues }, issue.path);\n            }\n            else if (issue.code === \"invalid_element\") {\n                processError({ issues: issue.issues }, issue.path);\n            }\n            else {\n                const fullpath = [...path, ...issue.path];\n                if (fullpath.length === 0) {\n                    result.errors.push(mapper(issue));\n                    continue;\n                }\n                let curr = result;\n                let i = 0;\n                while (i < fullpath.length) {\n                    const el = fullpath[i];\n                    const terminal = i === fullpath.length - 1;\n                    if (typeof el === \"string\") {\n                        curr.properties ?? (curr.properties = {});\n                        (_a = curr.properties)[el] ?? (_a[el] = { errors: [] });\n                        curr = curr.properties[el];\n                    }\n                    else {\n                        curr.items ?? (curr.items = []);\n                        (_b = curr.items)[el] ?? (_b[el] = { errors: [] });\n                        curr = curr.items[el];\n                    }\n                    if (terminal) {\n                        curr.errors.push(mapper(issue));\n                    }\n                    i++;\n                }\n            }\n        }\n    };\n    processError(error);\n    return result;\n}\n/** Format a ZodError as a human-readable string in the following form.\n *\n * From\n *\n * ```ts\n * ZodError {\n *   issues: [\n *     {\n *       expected: 'string',\n *       code: 'invalid_type',\n *       path: [ 'username' ],\n *       message: 'Invalid input: expected string'\n *     },\n *     {\n *       expected: 'number',\n *       code: 'invalid_type',\n *       path: [ 'favoriteNumbers', 1 ],\n *       message: 'Invalid input: expected number'\n *     }\n *   ];\n * }\n * ```\n *\n * to\n *\n * ```\n * username\n *    Expected number, received string at \"username\n * favoriteNumbers[0]\n *    Invalid input: expected number\n * ```\n */\nexport function toDotPath(_path) {\n    const segs = [];\n    const path = _path.map((seg) => (typeof seg === \"object\" ? seg.key : seg));\n    for (const seg of path) {\n        if (typeof seg === \"number\")\n            segs.push(`[${seg}]`);\n        else if (typeof seg === \"symbol\")\n            segs.push(`[${JSON.stringify(String(seg))}]`);\n        else if (/[^\\w$]/.test(seg))\n            segs.push(`[${JSON.stringify(seg)}]`);\n        else {\n            if (segs.length)\n                segs.push(\".\");\n            segs.push(seg);\n        }\n    }\n    return segs.join(\"\");\n}\nexport function prettifyError(error) {\n    const lines = [];\n    // sort by path length\n    const issues = [...error.issues].sort((a, b) => (a.path ?? []).length - (b.path ?? []).length);\n    // Process each issue\n    for (const issue of issues) {\n        lines.push(` ${issue.message}`);\n        if (issue.path?.length)\n            lines.push(`   at ${toDotPath(issue.path)}`);\n    }\n    // Convert Map to formatted string\n    return lines.join(\"\\n\");\n}\n","import * as core from \"./core.js\";\nimport * as errors from \"./errors.js\";\nimport * as util from \"./util.js\";\nexport const _parse = (_Err) => (schema, value, _ctx, _params) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: false }) : { async: false };\n    const result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise) {\n        throw new core.$ZodAsyncError();\n    }\n    if (result.issues.length) {\n        const e = new (_params?.Err ?? _Err)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())));\n        util.captureStackTrace(e, _params?.callee);\n        throw e;\n    }\n    return result.value;\n};\nexport const parse = /* @__PURE__*/ _parse(errors.$ZodRealError);\nexport const _parseAsync = (_Err) => async (schema, value, _ctx, params) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: true }) : { async: true };\n    let result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise)\n        result = await result;\n    if (result.issues.length) {\n        const e = new (params?.Err ?? _Err)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())));\n        util.captureStackTrace(e, params?.callee);\n        throw e;\n    }\n    return result.value;\n};\nexport const parseAsync = /* @__PURE__*/ _parseAsync(errors.$ZodRealError);\nexport const _safeParse = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? { ..._ctx, async: false } : { async: false };\n    const result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise) {\n        throw new core.$ZodAsyncError();\n    }\n    return result.issues.length\n        ? {\n            success: false,\n            error: new (_Err ?? errors.$ZodError)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n        }\n        : { success: true, data: result.value };\n};\nexport const safeParse = /* @__PURE__*/ _safeParse(errors.$ZodRealError);\nexport const _safeParseAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: true }) : { async: true };\n    let result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise)\n        result = await result;\n    return result.issues.length\n        ? {\n            success: false,\n            error: new _Err(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n        }\n        : { success: true, data: result.value };\n};\nexport const safeParseAsync = /* @__PURE__*/ _safeParseAsync(errors.$ZodRealError);\nexport const _encode = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _parse(_Err)(schema, value, ctx);\n};\nexport const encode = /* @__PURE__*/ _encode(errors.$ZodRealError);\nexport const _decode = (_Err) => (schema, value, _ctx) => {\n    return _parse(_Err)(schema, value, _ctx);\n};\nexport const decode = /* @__PURE__*/ _decode(errors.$ZodRealError);\nexport const _encodeAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _parseAsync(_Err)(schema, value, ctx);\n};\nexport const encodeAsync = /* @__PURE__*/ _encodeAsync(errors.$ZodRealError);\nexport const _decodeAsync = (_Err) => async (schema, value, _ctx) => {\n    return _parseAsync(_Err)(schema, value, _ctx);\n};\nexport const decodeAsync = /* @__PURE__*/ _decodeAsync(errors.$ZodRealError);\nexport const _safeEncode = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _safeParse(_Err)(schema, value, ctx);\n};\nexport const safeEncode = /* @__PURE__*/ _safeEncode(errors.$ZodRealError);\nexport const _safeDecode = (_Err) => (schema, value, _ctx) => {\n    return _safeParse(_Err)(schema, value, _ctx);\n};\nexport const safeDecode = /* @__PURE__*/ _safeDecode(errors.$ZodRealError);\nexport const _safeEncodeAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _safeParseAsync(_Err)(schema, value, ctx);\n};\nexport const safeEncodeAsync = /* @__PURE__*/ _safeEncodeAsync(errors.$ZodRealError);\nexport const _safeDecodeAsync = (_Err) => async (schema, value, _ctx) => {\n    return _safeParseAsync(_Err)(schema, value, _ctx);\n};\nexport const safeDecodeAsync = /* @__PURE__*/ _safeDecodeAsync(errors.$ZodRealError);\n","import * as util from \"./util.js\";\nexport const cuid = /^[cC][^\\s-]{8,}$/;\nexport const cuid2 = /^[0-9a-z]+$/;\nexport const ulid = /^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/;\nexport const xid = /^[0-9a-vA-V]{20}$/;\nexport const ksuid = /^[A-Za-z0-9]{27}$/;\nexport const nanoid = /^[a-zA-Z0-9_-]{21}$/;\n/** ISO 8601-1 duration regex. Does not support the 8601-2 extensions like negative durations or fractional/negative components. */\nexport const duration = /^P(?:(\\d+W)|(?!.*W)(?=\\d|T\\d)(\\d+Y)?(\\d+M)?(\\d+D)?(T(?=\\d)(\\d+H)?(\\d+M)?(\\d+([.,]\\d+)?S)?)?)$/;\n/** Implements ISO 8601-2 extensions like explicit +- prefixes, mixing weeks with other units, and fractional/negative components. */\nexport const extendedDuration = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n/** A regex for any UUID-like identifier: 8-4-4-4-12 hex pattern */\nexport const guid = /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/;\n/** Returns a regex for validating an RFC 9562/4122 UUID.\n *\n * @param version Optionally specify a version 1-8. If no version is specified, all versions are supported. */\nexport const uuid = (version) => {\n    if (!version)\n        return /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/;\n    return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${version}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`);\n};\nexport const uuid4 = /*@__PURE__*/ uuid(4);\nexport const uuid6 = /*@__PURE__*/ uuid(6);\nexport const uuid7 = /*@__PURE__*/ uuid(7);\n/** Practical email validation */\nexport const email = /^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$/;\n/** Equivalent to the HTML5 input[type=email] validation implemented by browsers. Source: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/email */\nexport const html5Email = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n/** The classic emailregex.com regex for RFC 5322-compliant emails */\nexport const rfc5322Email = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n/** A loose regex that allows Unicode characters, enforces length limits, and that's about it. */\nexport const unicodeEmail = /^[^\\s@\"]{1,64}@[^\\s@]{1,255}$/u;\nexport const idnEmail = unicodeEmail;\nexport const browserEmail = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emoji = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nexport function emoji() {\n    return new RegExp(_emoji, \"u\");\n}\nexport const ipv4 = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nexport const ipv6 = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/;\nexport const mac = (delimiter) => {\n    const escapedDelim = util.escapeRegex(delimiter ?? \":\");\n    return new RegExp(`^(?:[0-9A-F]{2}${escapedDelim}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${escapedDelim}){5}[0-9a-f]{2}$`);\n};\nexport const cidrv4 = /^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/([0-9]|[1-2][0-9]|3[0-2])$/;\nexport const cidrv6 = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nexport const base64 = /^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/;\nexport const base64url = /^[A-Za-z0-9_-]*$/;\n// based on https://stackoverflow.com/questions/106179/regular-expression-to-match-dns-hostname-or-ip-address\n// export const hostname: RegExp = /^([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+$/;\nexport const hostname = /^(?=.{1,253}\\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\\.?$/;\nexport const domain = /^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,}$/;\n// https://blog.stevenlevithan.com/archives/validate-phone-number#r4-3 (regex sans spaces)\nexport const e164 = /^\\+(?:[0-9]){6,14}[0-9]$/;\n// const dateSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateSource = `(?:(?:\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\\\d|30)|(?:02)-(?:0[1-9]|1\\\\d|2[0-8])))`;\nexport const date = /*@__PURE__*/ new RegExp(`^${dateSource}$`);\nfunction timeSource(args) {\n    const hhmm = `(?:[01]\\\\d|2[0-3]):[0-5]\\\\d`;\n    const regex = typeof args.precision === \"number\"\n        ? args.precision === -1\n            ? `${hhmm}`\n            : args.precision === 0\n                ? `${hhmm}:[0-5]\\\\d`\n                : `${hhmm}:[0-5]\\\\d\\\\.\\\\d{${args.precision}}`\n        : `${hhmm}(?::[0-5]\\\\d(?:\\\\.\\\\d+)?)?`;\n    return regex;\n}\nexport function time(args) {\n    return new RegExp(`^${timeSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nexport function datetime(args) {\n    const time = timeSource({ precision: args.precision });\n    const opts = [\"Z\"];\n    if (args.local)\n        opts.push(\"\");\n    // if (args.offset) opts.push(`([+-]\\\\d{2}:\\\\d{2})`);\n    if (args.offset)\n        opts.push(`([+-](?:[01]\\\\d|2[0-3]):[0-5]\\\\d)`);\n    const timeRegex = `${time}(?:${opts.join(\"|\")})`;\n    return new RegExp(`^${dateSource}T(?:${timeRegex})$`);\n}\nexport const string = (params) => {\n    const regex = params ? `[\\\\s\\\\S]{${params?.minimum ?? 0},${params?.maximum ?? \"\"}}` : `[\\\\s\\\\S]*`;\n    return new RegExp(`^${regex}$`);\n};\nexport const bigint = /^-?\\d+n?$/;\nexport const integer = /^-?\\d+$/;\nexport const number = /^-?\\d+(?:\\.\\d+)?/;\nexport const boolean = /^(?:true|false)$/i;\nconst _null = /^null$/i;\nexport { _null as null };\nconst _undefined = /^undefined$/i;\nexport { _undefined as undefined };\n// regex for string with no uppercase letters\nexport const lowercase = /^[^A-Z]*$/;\n// regex for string with no lowercase letters\nexport const uppercase = /^[^a-z]*$/;\n// regex for hexadecimal strings (any length)\nexport const hex = /^[0-9a-fA-F]*$/;\n// Hash regexes for different algorithms and encodings\n// Helper function to create base64 regex with exact length and padding\nfunction fixedBase64(bodyLength, padding) {\n    return new RegExp(`^[A-Za-z0-9+/]{${bodyLength}}${padding}$`);\n}\n// Helper function to create base64url regex with exact length (no padding)\nfunction fixedBase64url(length) {\n    return new RegExp(`^[A-Za-z0-9_-]{${length}}$`);\n}\n// MD5 (16 bytes): base64 = 24 chars total (22 + \"==\")\nexport const md5_hex = /^[0-9a-fA-F]{32}$/;\nexport const md5_base64 = /*@__PURE__*/ fixedBase64(22, \"==\");\nexport const md5_base64url = /*@__PURE__*/ fixedBase64url(22);\n// SHA1 (20 bytes): base64 = 28 chars total (27 + \"=\")\nexport const sha1_hex = /^[0-9a-fA-F]{40}$/;\nexport const sha1_base64 = /*@__PURE__*/ fixedBase64(27, \"=\");\nexport const sha1_base64url = /*@__PURE__*/ fixedBase64url(27);\n// SHA256 (32 bytes): base64 = 44 chars total (43 + \"=\")\nexport const sha256_hex = /^[0-9a-fA-F]{64}$/;\nexport const sha256_base64 = /*@__PURE__*/ fixedBase64(43, \"=\");\nexport const sha256_base64url = /*@__PURE__*/ fixedBase64url(43);\n// SHA384 (48 bytes): base64 = 64 chars total (no padding)\nexport const sha384_hex = /^[0-9a-fA-F]{96}$/;\nexport const sha384_base64 = /*@__PURE__*/ fixedBase64(64, \"\");\nexport const sha384_base64url = /*@__PURE__*/ fixedBase64url(64);\n// SHA512 (64 bytes): base64 = 88 chars total (86 + \"==\")\nexport const sha512_hex = /^[0-9a-fA-F]{128}$/;\nexport const sha512_base64 = /*@__PURE__*/ fixedBase64(86, \"==\");\nexport const sha512_base64url = /*@__PURE__*/ fixedBase64url(86);\n","// import { $ZodType } from \"./schemas.js\";\nimport * as core from \"./core.js\";\nimport * as regexes from \"./regexes.js\";\nimport * as util from \"./util.js\";\nexport const $ZodCheck = /*@__PURE__*/ core.$constructor(\"$ZodCheck\", (inst, def) => {\n    var _a;\n    inst._zod ?? (inst._zod = {});\n    inst._zod.def = def;\n    (_a = inst._zod).onattach ?? (_a.onattach = []);\n});\nconst numericOriginMap = {\n    number: \"number\",\n    bigint: \"bigint\",\n    object: \"date\",\n};\nexport const $ZodCheckLessThan = /*@__PURE__*/ core.$constructor(\"$ZodCheckLessThan\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const origin = numericOriginMap[typeof def.value];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        const curr = (def.inclusive ? bag.maximum : bag.exclusiveMaximum) ?? Number.POSITIVE_INFINITY;\n        if (def.value < curr) {\n            if (def.inclusive)\n                bag.maximum = def.value;\n            else\n                bag.exclusiveMaximum = def.value;\n        }\n    });\n    inst._zod.check = (payload) => {\n        if (def.inclusive ? payload.value <= def.value : payload.value < def.value) {\n            return;\n        }\n        payload.issues.push({\n            origin,\n            code: \"too_big\",\n            maximum: def.value,\n            input: payload.value,\n            inclusive: def.inclusive,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckGreaterThan = /*@__PURE__*/ core.$constructor(\"$ZodCheckGreaterThan\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const origin = numericOriginMap[typeof def.value];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        const curr = (def.inclusive ? bag.minimum : bag.exclusiveMinimum) ?? Number.NEGATIVE_INFINITY;\n        if (def.value > curr) {\n            if (def.inclusive)\n                bag.minimum = def.value;\n            else\n                bag.exclusiveMinimum = def.value;\n        }\n    });\n    inst._zod.check = (payload) => {\n        if (def.inclusive ? payload.value >= def.value : payload.value > def.value) {\n            return;\n        }\n        payload.issues.push({\n            origin,\n            code: \"too_small\",\n            minimum: def.value,\n            input: payload.value,\n            inclusive: def.inclusive,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMultipleOf = \n/*@__PURE__*/ core.$constructor(\"$ZodCheckMultipleOf\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        var _a;\n        (_a = inst._zod.bag).multipleOf ?? (_a.multipleOf = def.value);\n    });\n    inst._zod.check = (payload) => {\n        if (typeof payload.value !== typeof def.value)\n            throw new Error(\"Cannot mix number and bigint in multiple_of check.\");\n        const isMultiple = typeof payload.value === \"bigint\"\n            ? payload.value % def.value === BigInt(0)\n            : util.floatSafeRemainder(payload.value, def.value) === 0;\n        if (isMultiple)\n            return;\n        payload.issues.push({\n            origin: typeof payload.value,\n            code: \"not_multiple_of\",\n            divisor: def.value,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckNumberFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckNumberFormat\", (inst, def) => {\n    $ZodCheck.init(inst, def); // no format checks\n    def.format = def.format || \"float64\";\n    const isInt = def.format?.includes(\"int\");\n    const origin = isInt ? \"int\" : \"number\";\n    const [minimum, maximum] = util.NUMBER_FORMAT_RANGES[def.format];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        bag.minimum = minimum;\n        bag.maximum = maximum;\n        if (isInt)\n            bag.pattern = regexes.integer;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        if (isInt) {\n            if (!Number.isInteger(input)) {\n                // invalid_format issue\n                // payload.issues.push({\n                //   expected: def.format,\n                //   format: def.format,\n                //   code: \"invalid_format\",\n                //   input,\n                //   inst,\n                // });\n                // invalid_type issue\n                payload.issues.push({\n                    expected: origin,\n                    format: def.format,\n                    code: \"invalid_type\",\n                    continue: false,\n                    input,\n                    inst,\n                });\n                return;\n                // not_multiple_of issue\n                // payload.issues.push({\n                //   code: \"not_multiple_of\",\n                //   origin: \"number\",\n                //   input,\n                //   inst,\n                //   divisor: 1,\n                // });\n            }\n            if (!Number.isSafeInteger(input)) {\n                if (input > 0) {\n                    // too_big\n                    payload.issues.push({\n                        input,\n                        code: \"too_big\",\n                        maximum: Number.MAX_SAFE_INTEGER,\n                        note: \"Integers must be within the safe integer range.\",\n                        inst,\n                        origin,\n                        continue: !def.abort,\n                    });\n                }\n                else {\n                    // too_small\n                    payload.issues.push({\n                        input,\n                        code: \"too_small\",\n                        minimum: Number.MIN_SAFE_INTEGER,\n                        note: \"Integers must be within the safe integer range.\",\n                        inst,\n                        origin,\n                        continue: !def.abort,\n                    });\n                }\n                return;\n            }\n        }\n        if (input < minimum) {\n            payload.issues.push({\n                origin: \"number\",\n                input,\n                code: \"too_small\",\n                minimum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n        if (input > maximum) {\n            payload.issues.push({\n                origin: \"number\",\n                input,\n                code: \"too_big\",\n                maximum,\n                inst,\n            });\n        }\n    };\n});\nexport const $ZodCheckBigIntFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckBigIntFormat\", (inst, def) => {\n    $ZodCheck.init(inst, def); // no format checks\n    const [minimum, maximum] = util.BIGINT_FORMAT_RANGES[def.format];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        bag.minimum = minimum;\n        bag.maximum = maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        if (input < minimum) {\n            payload.issues.push({\n                origin: \"bigint\",\n                input,\n                code: \"too_small\",\n                minimum: minimum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n        if (input > maximum) {\n            payload.issues.push({\n                origin: \"bigint\",\n                input,\n                code: \"too_big\",\n                maximum,\n                inst,\n            });\n        }\n    };\n});\nexport const $ZodCheckMaxSize = /*@__PURE__*/ core.$constructor(\"$ZodCheckMaxSize\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.maximum ?? Number.POSITIVE_INFINITY);\n        if (def.maximum < curr)\n            inst._zod.bag.maximum = def.maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size <= def.maximum)\n            return;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            code: \"too_big\",\n            maximum: def.maximum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMinSize = /*@__PURE__*/ core.$constructor(\"$ZodCheckMinSize\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.minimum ?? Number.NEGATIVE_INFINITY);\n        if (def.minimum > curr)\n            inst._zod.bag.minimum = def.minimum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size >= def.minimum)\n            return;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            code: \"too_small\",\n            minimum: def.minimum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckSizeEquals = /*@__PURE__*/ core.$constructor(\"$ZodCheckSizeEquals\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.minimum = def.size;\n        bag.maximum = def.size;\n        bag.size = def.size;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size === def.size)\n            return;\n        const tooBig = size > def.size;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            ...(tooBig ? { code: \"too_big\", maximum: def.size } : { code: \"too_small\", minimum: def.size }),\n            inclusive: true,\n            exact: true,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMaxLength = /*@__PURE__*/ core.$constructor(\"$ZodCheckMaxLength\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.maximum ?? Number.POSITIVE_INFINITY);\n        if (def.maximum < curr)\n            inst._zod.bag.maximum = def.maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length <= def.maximum)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        payload.issues.push({\n            origin,\n            code: \"too_big\",\n            maximum: def.maximum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMinLength = /*@__PURE__*/ core.$constructor(\"$ZodCheckMinLength\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.minimum ?? Number.NEGATIVE_INFINITY);\n        if (def.minimum > curr)\n            inst._zod.bag.minimum = def.minimum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length >= def.minimum)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        payload.issues.push({\n            origin,\n            code: \"too_small\",\n            minimum: def.minimum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckLengthEquals = /*@__PURE__*/ core.$constructor(\"$ZodCheckLengthEquals\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.minimum = def.length;\n        bag.maximum = def.length;\n        bag.length = def.length;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length === def.length)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        const tooBig = length > def.length;\n        payload.issues.push({\n            origin,\n            ...(tooBig ? { code: \"too_big\", maximum: def.length } : { code: \"too_small\", minimum: def.length }),\n            inclusive: true,\n            exact: true,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckStringFormat\", (inst, def) => {\n    var _a, _b;\n    $ZodCheck.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        if (def.pattern) {\n            bag.patterns ?? (bag.patterns = new Set());\n            bag.patterns.add(def.pattern);\n        }\n    });\n    if (def.pattern)\n        (_a = inst._zod).check ?? (_a.check = (payload) => {\n            def.pattern.lastIndex = 0;\n            if (def.pattern.test(payload.value))\n                return;\n            payload.issues.push({\n                origin: \"string\",\n                code: \"invalid_format\",\n                format: def.format,\n                input: payload.value,\n                ...(def.pattern ? { pattern: def.pattern.toString() } : {}),\n                inst,\n                continue: !def.abort,\n            });\n        });\n    else\n        (_b = inst._zod).check ?? (_b.check = () => { });\n});\nexport const $ZodCheckRegex = /*@__PURE__*/ core.$constructor(\"$ZodCheckRegex\", (inst, def) => {\n    $ZodCheckStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        def.pattern.lastIndex = 0;\n        if (def.pattern.test(payload.value))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"regex\",\n            input: payload.value,\n            pattern: def.pattern.toString(),\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckLowerCase = /*@__PURE__*/ core.$constructor(\"$ZodCheckLowerCase\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.lowercase);\n    $ZodCheckStringFormat.init(inst, def);\n});\nexport const $ZodCheckUpperCase = /*@__PURE__*/ core.$constructor(\"$ZodCheckUpperCase\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.uppercase);\n    $ZodCheckStringFormat.init(inst, def);\n});\nexport const $ZodCheckIncludes = /*@__PURE__*/ core.$constructor(\"$ZodCheckIncludes\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const escapedRegex = util.escapeRegex(def.includes);\n    const pattern = new RegExp(typeof def.position === \"number\" ? `^.{${def.position}}${escapedRegex}` : escapedRegex);\n    def.pattern = pattern;\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.includes(def.includes, def.position))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"includes\",\n            includes: def.includes,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckStartsWith = /*@__PURE__*/ core.$constructor(\"$ZodCheckStartsWith\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const pattern = new RegExp(`^${util.escapeRegex(def.prefix)}.*`);\n    def.pattern ?? (def.pattern = pattern);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.startsWith(def.prefix))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"starts_with\",\n            prefix: def.prefix,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckEndsWith = /*@__PURE__*/ core.$constructor(\"$ZodCheckEndsWith\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const pattern = new RegExp(`.*${util.escapeRegex(def.suffix)}$`);\n    def.pattern ?? (def.pattern = pattern);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.endsWith(def.suffix))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"ends_with\",\n            suffix: def.suffix,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\n///////////////////////////////////\n/////    $ZodCheckProperty    /////\n///////////////////////////////////\nfunction handleCheckPropertyResult(result, payload, property) {\n    if (result.issues.length) {\n        payload.issues.push(...util.prefixIssues(property, result.issues));\n    }\n}\nexport const $ZodCheckProperty = /*@__PURE__*/ core.$constructor(\"$ZodCheckProperty\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.check = (payload) => {\n        const result = def.schema._zod.run({\n            value: payload.value[def.property],\n            issues: [],\n        }, {});\n        if (result instanceof Promise) {\n            return result.then((result) => handleCheckPropertyResult(result, payload, def.property));\n        }\n        handleCheckPropertyResult(result, payload, def.property);\n        return;\n    };\n});\nexport const $ZodCheckMimeType = /*@__PURE__*/ core.$constructor(\"$ZodCheckMimeType\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const mimeSet = new Set(def.mime);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.mime = def.mime;\n    });\n    inst._zod.check = (payload) => {\n        if (mimeSet.has(payload.value.type))\n            return;\n        payload.issues.push({\n            code: \"invalid_value\",\n            values: def.mime,\n            input: payload.value.type,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckOverwrite = /*@__PURE__*/ core.$constructor(\"$ZodCheckOverwrite\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.check = (payload) => {\n        payload.value = def.tx(payload.value);\n    };\n});\n","export class Doc {\n    constructor(args = []) {\n        this.content = [];\n        this.indent = 0;\n        if (this)\n            this.args = args;\n    }\n    indented(fn) {\n        this.indent += 1;\n        fn(this);\n        this.indent -= 1;\n    }\n    write(arg) {\n        if (typeof arg === \"function\") {\n            arg(this, { execution: \"sync\" });\n            arg(this, { execution: \"async\" });\n            return;\n        }\n        const content = arg;\n        const lines = content.split(\"\\n\").filter((x) => x);\n        const minIndent = Math.min(...lines.map((x) => x.length - x.trimStart().length));\n        const dedented = lines.map((x) => x.slice(minIndent)).map((x) => \" \".repeat(this.indent * 2) + x);\n        for (const line of dedented) {\n            this.content.push(line);\n        }\n    }\n    compile() {\n        const F = Function;\n        const args = this?.args;\n        const content = this?.content ?? [``];\n        const lines = [...content.map((x) => `  ${x}`)];\n        // console.log(lines.join(\"\\n\"));\n        return new F(...args, lines.join(\"\\n\"));\n    }\n}\n","export const version = {\n    major: 4,\n    minor: 1,\n    patch: 13,\n};\n","import * as checks from \"./checks.js\";\nimport * as core from \"./core.js\";\nimport { Doc } from \"./doc.js\";\nimport { parse, parseAsync, safeParse, safeParseAsync } from \"./parse.js\";\nimport * as regexes from \"./regexes.js\";\nimport * as util from \"./util.js\";\nimport { version } from \"./versions.js\";\nexport const $ZodType = /*@__PURE__*/ core.$constructor(\"$ZodType\", (inst, def) => {\n    var _a;\n    inst ?? (inst = {});\n    inst._zod.def = def; // set _def property\n    inst._zod.bag = inst._zod.bag || {}; // initialize _bag object\n    inst._zod.version = version;\n    const checks = [...(inst._zod.def.checks ?? [])];\n    // if inst is itself a checks.$ZodCheck, run it as a check\n    if (inst._zod.traits.has(\"$ZodCheck\")) {\n        checks.unshift(inst);\n    }\n    for (const ch of checks) {\n        for (const fn of ch._zod.onattach) {\n            fn(inst);\n        }\n    }\n    if (checks.length === 0) {\n        // deferred initializer\n        // inst._zod.parse is not yet defined\n        (_a = inst._zod).deferred ?? (_a.deferred = []);\n        inst._zod.deferred?.push(() => {\n            inst._zod.run = inst._zod.parse;\n        });\n    }\n    else {\n        const runChecks = (payload, checks, ctx) => {\n            let isAborted = util.aborted(payload);\n            let asyncResult;\n            for (const ch of checks) {\n                if (ch._zod.def.when) {\n                    const shouldRun = ch._zod.def.when(payload);\n                    if (!shouldRun)\n                        continue;\n                }\n                else if (isAborted) {\n                    continue;\n                }\n                const currLen = payload.issues.length;\n                const _ = ch._zod.check(payload);\n                if (_ instanceof Promise && ctx?.async === false) {\n                    throw new core.$ZodAsyncError();\n                }\n                if (asyncResult || _ instanceof Promise) {\n                    asyncResult = (asyncResult ?? Promise.resolve()).then(async () => {\n                        await _;\n                        const nextLen = payload.issues.length;\n                        if (nextLen === currLen)\n                            return;\n                        if (!isAborted)\n                            isAborted = util.aborted(payload, currLen);\n                    });\n                }\n                else {\n                    const nextLen = payload.issues.length;\n                    if (nextLen === currLen)\n                        continue;\n                    if (!isAborted)\n                        isAborted = util.aborted(payload, currLen);\n                }\n            }\n            if (asyncResult) {\n                return asyncResult.then(() => {\n                    return payload;\n                });\n            }\n            return payload;\n        };\n        // const handleChecksResult = (\n        //   checkResult: ParsePayload,\n        //   originalResult: ParsePayload,\n        //   ctx: ParseContextInternal\n        // ): util.MaybeAsync<ParsePayload> => {\n        //   // if the checks mutated the value && there are no issues, re-parse the result\n        //   if (checkResult.value !== originalResult.value && !checkResult.issues.length)\n        //     return inst._zod.parse(checkResult, ctx);\n        //   return originalResult;\n        // };\n        const handleCanaryResult = (canary, payload, ctx) => {\n            // abort if the canary is aborted\n            if (util.aborted(canary)) {\n                canary.aborted = true;\n                return canary;\n            }\n            // run checks first, then\n            const checkResult = runChecks(payload, checks, ctx);\n            if (checkResult instanceof Promise) {\n                if (ctx.async === false)\n                    throw new core.$ZodAsyncError();\n                return checkResult.then((checkResult) => inst._zod.parse(checkResult, ctx));\n            }\n            return inst._zod.parse(checkResult, ctx);\n        };\n        inst._zod.run = (payload, ctx) => {\n            if (ctx.skipChecks) {\n                return inst._zod.parse(payload, ctx);\n            }\n            if (ctx.direction === \"backward\") {\n                // run canary\n                // initial pass (no checks)\n                const canary = inst._zod.parse({ value: payload.value, issues: [] }, { ...ctx, skipChecks: true });\n                if (canary instanceof Promise) {\n                    return canary.then((canary) => {\n                        return handleCanaryResult(canary, payload, ctx);\n                    });\n                }\n                return handleCanaryResult(canary, payload, ctx);\n            }\n            // forward\n            const result = inst._zod.parse(payload, ctx);\n            if (result instanceof Promise) {\n                if (ctx.async === false)\n                    throw new core.$ZodAsyncError();\n                return result.then((result) => runChecks(result, checks, ctx));\n            }\n            return runChecks(result, checks, ctx);\n        };\n    }\n    inst[\"~standard\"] = {\n        validate: (value) => {\n            try {\n                const r = safeParse(inst, value);\n                return r.success ? { value: r.data } : { issues: r.error?.issues };\n            }\n            catch (_) {\n                return safeParseAsync(inst, value).then((r) => (r.success ? { value: r.data } : { issues: r.error?.issues }));\n            }\n        },\n        vendor: \"zod\",\n        version: 1,\n    };\n});\nexport { clone } from \"./util.js\";\nexport const $ZodString = /*@__PURE__*/ core.$constructor(\"$ZodString\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = [...(inst?._zod.bag?.patterns ?? [])].pop() ?? regexes.string(inst._zod.bag);\n    inst._zod.parse = (payload, _) => {\n        if (def.coerce)\n            try {\n                payload.value = String(payload.value);\n            }\n            catch (_) { }\n        if (typeof payload.value === \"string\")\n            return payload;\n        payload.issues.push({\n            expected: \"string\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodStringFormat\", (inst, def) => {\n    // check initialization must come first\n    checks.$ZodCheckStringFormat.init(inst, def);\n    $ZodString.init(inst, def);\n});\nexport const $ZodGUID = /*@__PURE__*/ core.$constructor(\"$ZodGUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.guid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodUUID = /*@__PURE__*/ core.$constructor(\"$ZodUUID\", (inst, def) => {\n    if (def.version) {\n        const versionMap = {\n            v1: 1,\n            v2: 2,\n            v3: 3,\n            v4: 4,\n            v5: 5,\n            v6: 6,\n            v7: 7,\n            v8: 8,\n        };\n        const v = versionMap[def.version];\n        if (v === undefined)\n            throw new Error(`Invalid UUID version: \"${def.version}\"`);\n        def.pattern ?? (def.pattern = regexes.uuid(v));\n    }\n    else\n        def.pattern ?? (def.pattern = regexes.uuid());\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodEmail = /*@__PURE__*/ core.$constructor(\"$ZodEmail\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.email);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodURL = /*@__PURE__*/ core.$constructor(\"$ZodURL\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        try {\n            // Trim whitespace from input\n            const trimmed = payload.value.trim();\n            // @ts-ignore\n            const url = new URL(trimmed);\n            if (def.hostname) {\n                def.hostname.lastIndex = 0;\n                if (!def.hostname.test(url.hostname)) {\n                    payload.issues.push({\n                        code: \"invalid_format\",\n                        format: \"url\",\n                        note: \"Invalid hostname\",\n                        pattern: def.hostname.source,\n                        input: payload.value,\n                        inst,\n                        continue: !def.abort,\n                    });\n                }\n            }\n            if (def.protocol) {\n                def.protocol.lastIndex = 0;\n                if (!def.protocol.test(url.protocol.endsWith(\":\") ? url.protocol.slice(0, -1) : url.protocol)) {\n                    payload.issues.push({\n                        code: \"invalid_format\",\n                        format: \"url\",\n                        note: \"Invalid protocol\",\n                        pattern: def.protocol.source,\n                        input: payload.value,\n                        inst,\n                        continue: !def.abort,\n                    });\n                }\n            }\n            // Set the output value based on normalize flag\n            if (def.normalize) {\n                // Use normalized URL\n                payload.value = url.href;\n            }\n            else {\n                // Preserve the original input (trimmed)\n                payload.value = trimmed;\n            }\n            return;\n        }\n        catch (_) {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"url\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nexport const $ZodEmoji = /*@__PURE__*/ core.$constructor(\"$ZodEmoji\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.emoji());\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodNanoID = /*@__PURE__*/ core.$constructor(\"$ZodNanoID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.nanoid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCUID = /*@__PURE__*/ core.$constructor(\"$ZodCUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cuid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCUID2 = /*@__PURE__*/ core.$constructor(\"$ZodCUID2\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cuid2);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodULID = /*@__PURE__*/ core.$constructor(\"$ZodULID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ulid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodXID = /*@__PURE__*/ core.$constructor(\"$ZodXID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.xid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodKSUID = /*@__PURE__*/ core.$constructor(\"$ZodKSUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ksuid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODateTime = /*@__PURE__*/ core.$constructor(\"$ZodISODateTime\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.datetime(def));\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODate = /*@__PURE__*/ core.$constructor(\"$ZodISODate\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.date);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISOTime = /*@__PURE__*/ core.$constructor(\"$ZodISOTime\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.time(def));\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODuration = /*@__PURE__*/ core.$constructor(\"$ZodISODuration\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.duration);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodIPv4 = /*@__PURE__*/ core.$constructor(\"$ZodIPv4\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ipv4);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.bag.format = `ipv4`;\n});\nexport const $ZodIPv6 = /*@__PURE__*/ core.$constructor(\"$ZodIPv6\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ipv6);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.bag.format = `ipv6`;\n    inst._zod.check = (payload) => {\n        try {\n            // @ts-ignore\n            new URL(`http://[${payload.value}]`);\n            // return;\n        }\n        catch {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"ipv6\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nexport const $ZodMAC = /*@__PURE__*/ core.$constructor(\"$ZodMAC\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.mac(def.delimiter));\n    $ZodStringFormat.init(inst, def);\n    inst._zod.bag.format = `mac`;\n});\nexport const $ZodCIDRv4 = /*@__PURE__*/ core.$constructor(\"$ZodCIDRv4\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cidrv4);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCIDRv6 = /*@__PURE__*/ core.$constructor(\"$ZodCIDRv6\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cidrv6); // not used for validation\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        const parts = payload.value.split(\"/\");\n        try {\n            if (parts.length !== 2)\n                throw new Error();\n            const [address, prefix] = parts;\n            if (!prefix)\n                throw new Error();\n            const prefixNum = Number(prefix);\n            if (`${prefixNum}` !== prefix)\n                throw new Error();\n            if (prefixNum < 0 || prefixNum > 128)\n                throw new Error();\n            // @ts-ignore\n            new URL(`http://[${address}]`);\n        }\n        catch {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"cidrv6\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\n//////////////////////////////   ZodBase64   //////////////////////////////\nexport function isValidBase64(data) {\n    if (data === \"\")\n        return true;\n    if (data.length % 4 !== 0)\n        return false;\n    try {\n        // @ts-ignore\n        atob(data);\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nexport const $ZodBase64 = /*@__PURE__*/ core.$constructor(\"$ZodBase64\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.base64);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.bag.contentEncoding = \"base64\";\n    inst._zod.check = (payload) => {\n        if (isValidBase64(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"base64\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\n//////////////////////////////   ZodBase64   //////////////////////////////\nexport function isValidBase64URL(data) {\n    if (!regexes.base64url.test(data))\n        return false;\n    const base64 = data.replace(/[-_]/g, (c) => (c === \"-\" ? \"+\" : \"/\"));\n    const padded = base64.padEnd(Math.ceil(base64.length / 4) * 4, \"=\");\n    return isValidBase64(padded);\n}\nexport const $ZodBase64URL = /*@__PURE__*/ core.$constructor(\"$ZodBase64URL\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.base64url);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.bag.contentEncoding = \"base64url\";\n    inst._zod.check = (payload) => {\n        if (isValidBase64URL(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"base64url\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodE164 = /*@__PURE__*/ core.$constructor(\"$ZodE164\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.e164);\n    $ZodStringFormat.init(inst, def);\n});\n//////////////////////////////   ZodJWT   //////////////////////////////\nexport function isValidJWT(token, algorithm = null) {\n    try {\n        const tokensParts = token.split(\".\");\n        if (tokensParts.length !== 3)\n            return false;\n        const [header] = tokensParts;\n        if (!header)\n            return false;\n        // @ts-ignore\n        const parsedHeader = JSON.parse(atob(header));\n        if (\"typ\" in parsedHeader && parsedHeader?.typ !== \"JWT\")\n            return false;\n        if (!parsedHeader.alg)\n            return false;\n        if (algorithm && (!(\"alg\" in parsedHeader) || parsedHeader.alg !== algorithm))\n            return false;\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nexport const $ZodJWT = /*@__PURE__*/ core.$constructor(\"$ZodJWT\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        if (isValidJWT(payload.value, def.alg))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"jwt\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCustomStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodCustomStringFormat\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        if (def.fn(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: def.format,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodNumber = /*@__PURE__*/ core.$constructor(\"$ZodNumber\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = inst._zod.bag.pattern ?? regexes.number;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = Number(payload.value);\n            }\n            catch (_) { }\n        const input = payload.value;\n        if (typeof input === \"number\" && !Number.isNaN(input) && Number.isFinite(input)) {\n            return payload;\n        }\n        const received = typeof input === \"number\"\n            ? Number.isNaN(input)\n                ? \"NaN\"\n                : !Number.isFinite(input)\n                    ? \"Infinity\"\n                    : undefined\n            : undefined;\n        payload.issues.push({\n            expected: \"number\",\n            code: \"invalid_type\",\n            input,\n            inst,\n            ...(received ? { received } : {}),\n        });\n        return payload;\n    };\n});\nexport const $ZodNumberFormat = /*@__PURE__*/ core.$constructor(\"$ZodNumberFormat\", (inst, def) => {\n    checks.$ZodCheckNumberFormat.init(inst, def);\n    $ZodNumber.init(inst, def); // no format checks\n});\nexport const $ZodBoolean = /*@__PURE__*/ core.$constructor(\"$ZodBoolean\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.boolean;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = Boolean(payload.value);\n            }\n            catch (_) { }\n        const input = payload.value;\n        if (typeof input === \"boolean\")\n            return payload;\n        payload.issues.push({\n            expected: \"boolean\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodBigInt = /*@__PURE__*/ core.$constructor(\"$ZodBigInt\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.bigint;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = BigInt(payload.value);\n            }\n            catch (_) { }\n        if (typeof payload.value === \"bigint\")\n            return payload;\n        payload.issues.push({\n            expected: \"bigint\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodBigIntFormat = /*@__PURE__*/ core.$constructor(\"$ZodBigIntFormat\", (inst, def) => {\n    checks.$ZodCheckBigIntFormat.init(inst, def);\n    $ZodBigInt.init(inst, def); // no format checks\n});\nexport const $ZodSymbol = /*@__PURE__*/ core.$constructor(\"$ZodSymbol\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"symbol\")\n            return payload;\n        payload.issues.push({\n            expected: \"symbol\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodUndefined = /*@__PURE__*/ core.$constructor(\"$ZodUndefined\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.undefined;\n    inst._zod.values = new Set([undefined]);\n    inst._zod.optin = \"optional\";\n    inst._zod.optout = \"optional\";\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"undefined\")\n            return payload;\n        payload.issues.push({\n            expected: \"undefined\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodNull = /*@__PURE__*/ core.$constructor(\"$ZodNull\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.null;\n    inst._zod.values = new Set([null]);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (input === null)\n            return payload;\n        payload.issues.push({\n            expected: \"null\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodAny = /*@__PURE__*/ core.$constructor(\"$ZodAny\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload) => payload;\n});\nexport const $ZodUnknown = /*@__PURE__*/ core.$constructor(\"$ZodUnknown\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload) => payload;\n});\nexport const $ZodNever = /*@__PURE__*/ core.$constructor(\"$ZodNever\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        payload.issues.push({\n            expected: \"never\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodVoid = /*@__PURE__*/ core.$constructor(\"$ZodVoid\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"undefined\")\n            return payload;\n        payload.issues.push({\n            expected: \"void\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodDate = /*@__PURE__*/ core.$constructor(\"$ZodDate\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce) {\n            try {\n                payload.value = new Date(payload.value);\n            }\n            catch (_err) { }\n        }\n        const input = payload.value;\n        const isDate = input instanceof Date;\n        const isValidDate = isDate && !Number.isNaN(input.getTime());\n        if (isValidDate)\n            return payload;\n        payload.issues.push({\n            expected: \"date\",\n            code: \"invalid_type\",\n            input,\n            ...(isDate ? { received: \"Invalid Date\" } : {}),\n            inst,\n        });\n        return payload;\n    };\n});\nfunction handleArrayResult(result, final, index) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(index, result.issues));\n    }\n    final.value[index] = result.value;\n}\nexport const $ZodArray = /*@__PURE__*/ core.$constructor(\"$ZodArray\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!Array.isArray(input)) {\n            payload.issues.push({\n                expected: \"array\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        payload.value = Array(input.length);\n        const proms = [];\n        for (let i = 0; i < input.length; i++) {\n            const item = input[i];\n            const result = def.element._zod.run({\n                value: item,\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleArrayResult(result, payload, i)));\n            }\n            else {\n                handleArrayResult(result, payload, i);\n            }\n        }\n        if (proms.length) {\n            return Promise.all(proms).then(() => payload);\n        }\n        return payload; //handleArrayResultsAsync(parseResults, final);\n    };\n});\nfunction handlePropertyResult(result, final, key, input) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(key, result.issues));\n    }\n    if (result.value === undefined) {\n        if (key in input) {\n            final.value[key] = undefined;\n        }\n    }\n    else {\n        final.value[key] = result.value;\n    }\n}\nfunction normalizeDef(def) {\n    const keys = Object.keys(def.shape);\n    for (const k of keys) {\n        if (!def.shape?.[k]?._zod?.traits?.has(\"$ZodType\")) {\n            throw new Error(`Invalid element at key \"${k}\": expected a Zod schema`);\n        }\n    }\n    const okeys = util.optionalKeys(def.shape);\n    return {\n        ...def,\n        keys,\n        keySet: new Set(keys),\n        numKeys: keys.length,\n        optionalKeys: new Set(okeys),\n    };\n}\nfunction handleCatchall(proms, input, payload, ctx, def, inst) {\n    const unrecognized = [];\n    // iterate over input keys\n    const keySet = def.keySet;\n    const _catchall = def.catchall._zod;\n    const t = _catchall.def.type;\n    for (const key in input) {\n        if (keySet.has(key))\n            continue;\n        if (t === \"never\") {\n            unrecognized.push(key);\n            continue;\n        }\n        const r = _catchall.run({ value: input[key], issues: [] }, ctx);\n        if (r instanceof Promise) {\n            proms.push(r.then((r) => handlePropertyResult(r, payload, key, input)));\n        }\n        else {\n            handlePropertyResult(r, payload, key, input);\n        }\n    }\n    if (unrecognized.length) {\n        payload.issues.push({\n            code: \"unrecognized_keys\",\n            keys: unrecognized,\n            input,\n            inst,\n        });\n    }\n    if (!proms.length)\n        return payload;\n    return Promise.all(proms).then(() => {\n        return payload;\n    });\n}\nexport const $ZodObject = /*@__PURE__*/ core.$constructor(\"$ZodObject\", (inst, def) => {\n    // requires cast because technically $ZodObject doesn't extend\n    $ZodType.init(inst, def);\n    // const sh = def.shape;\n    const desc = Object.getOwnPropertyDescriptor(def, \"shape\");\n    if (!desc?.get) {\n        const sh = def.shape;\n        Object.defineProperty(def, \"shape\", {\n            get: () => {\n                const newSh = { ...sh };\n                Object.defineProperty(def, \"shape\", {\n                    value: newSh,\n                });\n                return newSh;\n            },\n        });\n    }\n    const _normalized = util.cached(() => normalizeDef(def));\n    util.defineLazy(inst._zod, \"propValues\", () => {\n        const shape = def.shape;\n        const propValues = {};\n        for (const key in shape) {\n            const field = shape[key]._zod;\n            if (field.values) {\n                propValues[key] ?? (propValues[key] = new Set());\n                for (const v of field.values)\n                    propValues[key].add(v);\n            }\n        }\n        return propValues;\n    });\n    const isObject = util.isObject;\n    const catchall = def.catchall;\n    let value;\n    inst._zod.parse = (payload, ctx) => {\n        value ?? (value = _normalized.value);\n        const input = payload.value;\n        if (!isObject(input)) {\n            payload.issues.push({\n                expected: \"object\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        payload.value = {};\n        const proms = [];\n        const shape = value.shape;\n        for (const key of value.keys) {\n            const el = shape[key];\n            const r = el._zod.run({ value: input[key], issues: [] }, ctx);\n            if (r instanceof Promise) {\n                proms.push(r.then((r) => handlePropertyResult(r, payload, key, input)));\n            }\n            else {\n                handlePropertyResult(r, payload, key, input);\n            }\n        }\n        if (!catchall) {\n            return proms.length ? Promise.all(proms).then(() => payload) : payload;\n        }\n        return handleCatchall(proms, input, payload, ctx, _normalized.value, inst);\n    };\n});\nexport const $ZodObjectJIT = /*@__PURE__*/ core.$constructor(\"$ZodObjectJIT\", (inst, def) => {\n    // requires cast because technically $ZodObject doesn't extend\n    $ZodObject.init(inst, def);\n    const superParse = inst._zod.parse;\n    const _normalized = util.cached(() => normalizeDef(def));\n    const generateFastpass = (shape) => {\n        const doc = new Doc([\"shape\", \"payload\", \"ctx\"]);\n        const normalized = _normalized.value;\n        const parseStr = (key) => {\n            const k = util.esc(key);\n            return `shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`;\n        };\n        doc.write(`const input = payload.value;`);\n        const ids = Object.create(null);\n        let counter = 0;\n        for (const key of normalized.keys) {\n            ids[key] = `key_${counter++}`;\n        }\n        // A: preserve key order {\n        doc.write(`const newResult = {};`);\n        for (const key of normalized.keys) {\n            const id = ids[key];\n            const k = util.esc(key);\n            doc.write(`const ${id} = ${parseStr(key)};`);\n            doc.write(`\n        if (${id}.issues.length) {\n          payload.issues = payload.issues.concat(${id}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${k}, ...iss.path] : [${k}]\n          })));\n        }\n        \n        \n        if (${id}.value === undefined) {\n          if (${k} in input) {\n            newResult[${k}] = undefined;\n          }\n        } else {\n          newResult[${k}] = ${id}.value;\n        }\n        \n      `);\n        }\n        doc.write(`payload.value = newResult;`);\n        doc.write(`return payload;`);\n        const fn = doc.compile();\n        return (payload, ctx) => fn(shape, payload, ctx);\n    };\n    let fastpass;\n    const isObject = util.isObject;\n    const jit = !core.globalConfig.jitless;\n    const allowsEval = util.allowsEval;\n    const fastEnabled = jit && allowsEval.value; // && !def.catchall;\n    const catchall = def.catchall;\n    let value;\n    inst._zod.parse = (payload, ctx) => {\n        value ?? (value = _normalized.value);\n        const input = payload.value;\n        if (!isObject(input)) {\n            payload.issues.push({\n                expected: \"object\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        if (jit && fastEnabled && ctx?.async === false && ctx.jitless !== true) {\n            // always synchronous\n            if (!fastpass)\n                fastpass = generateFastpass(def.shape);\n            payload = fastpass(payload, ctx);\n            if (!catchall)\n                return payload;\n            return handleCatchall([], input, payload, ctx, value, inst);\n        }\n        return superParse(payload, ctx);\n    };\n});\nfunction handleUnionResults(results, final, inst, ctx) {\n    for (const result of results) {\n        if (result.issues.length === 0) {\n            final.value = result.value;\n            return final;\n        }\n    }\n    const nonaborted = results.filter((r) => !util.aborted(r));\n    if (nonaborted.length === 1) {\n        final.value = nonaborted[0].value;\n        return nonaborted[0];\n    }\n    final.issues.push({\n        code: \"invalid_union\",\n        input: final.value,\n        inst,\n        errors: results.map((result) => result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n    });\n    return final;\n}\nexport const $ZodUnion = /*@__PURE__*/ core.$constructor(\"$ZodUnion\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.options.some((o) => o._zod.optin === \"optional\") ? \"optional\" : undefined);\n    util.defineLazy(inst._zod, \"optout\", () => def.options.some((o) => o._zod.optout === \"optional\") ? \"optional\" : undefined);\n    util.defineLazy(inst._zod, \"values\", () => {\n        if (def.options.every((o) => o._zod.values)) {\n            return new Set(def.options.flatMap((option) => Array.from(option._zod.values)));\n        }\n        return undefined;\n    });\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        if (def.options.every((o) => o._zod.pattern)) {\n            const patterns = def.options.map((o) => o._zod.pattern);\n            return new RegExp(`^(${patterns.map((p) => util.cleanRegex(p.source)).join(\"|\")})$`);\n        }\n        return undefined;\n    });\n    const single = def.options.length === 1;\n    const first = def.options[0]._zod.run;\n    inst._zod.parse = (payload, ctx) => {\n        if (single) {\n            return first(payload, ctx);\n        }\n        let async = false;\n        const results = [];\n        for (const option of def.options) {\n            const result = option._zod.run({\n                value: payload.value,\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                results.push(result);\n                async = true;\n            }\n            else {\n                if (result.issues.length === 0)\n                    return result;\n                results.push(result);\n            }\n        }\n        if (!async)\n            return handleUnionResults(results, payload, inst, ctx);\n        return Promise.all(results).then((results) => {\n            return handleUnionResults(results, payload, inst, ctx);\n        });\n    };\n});\nexport const $ZodDiscriminatedUnion = \n/*@__PURE__*/\ncore.$constructor(\"$ZodDiscriminatedUnion\", (inst, def) => {\n    $ZodUnion.init(inst, def);\n    const _super = inst._zod.parse;\n    util.defineLazy(inst._zod, \"propValues\", () => {\n        const propValues = {};\n        for (const option of def.options) {\n            const pv = option._zod.propValues;\n            if (!pv || Object.keys(pv).length === 0)\n                throw new Error(`Invalid discriminated union option at index \"${def.options.indexOf(option)}\"`);\n            for (const [k, v] of Object.entries(pv)) {\n                if (!propValues[k])\n                    propValues[k] = new Set();\n                for (const val of v) {\n                    propValues[k].add(val);\n                }\n            }\n        }\n        return propValues;\n    });\n    const disc = util.cached(() => {\n        const opts = def.options;\n        const map = new Map();\n        for (const o of opts) {\n            const values = o._zod.propValues?.[def.discriminator];\n            if (!values || values.size === 0)\n                throw new Error(`Invalid discriminated union option at index \"${def.options.indexOf(o)}\"`);\n            for (const v of values) {\n                if (map.has(v)) {\n                    throw new Error(`Duplicate discriminator value \"${String(v)}\"`);\n                }\n                map.set(v, o);\n            }\n        }\n        return map;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!util.isObject(input)) {\n            payload.issues.push({\n                code: \"invalid_type\",\n                expected: \"object\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const opt = disc.value.get(input?.[def.discriminator]);\n        if (opt) {\n            return opt._zod.run(payload, ctx);\n        }\n        if (def.unionFallback) {\n            return _super(payload, ctx);\n        }\n        // no matching discriminator\n        payload.issues.push({\n            code: \"invalid_union\",\n            errors: [],\n            note: \"No matching discriminator\",\n            discriminator: def.discriminator,\n            input,\n            path: [def.discriminator],\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodIntersection = /*@__PURE__*/ core.$constructor(\"$ZodIntersection\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        const left = def.left._zod.run({ value: input, issues: [] }, ctx);\n        const right = def.right._zod.run({ value: input, issues: [] }, ctx);\n        const async = left instanceof Promise || right instanceof Promise;\n        if (async) {\n            return Promise.all([left, right]).then(([left, right]) => {\n                return handleIntersectionResults(payload, left, right);\n            });\n        }\n        return handleIntersectionResults(payload, left, right);\n    };\n});\nfunction mergeValues(a, b) {\n    // const aType = parse.t(a);\n    // const bType = parse.t(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    if (a instanceof Date && b instanceof Date && +a === +b) {\n        return { valid: true, data: a };\n    }\n    if (util.isPlainObject(a) && util.isPlainObject(b)) {\n        const bKeys = Object.keys(b);\n        const sharedKeys = Object.keys(a).filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return {\n                    valid: false,\n                    mergeErrorPath: [key, ...sharedValue.mergeErrorPath],\n                };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    if (Array.isArray(a) && Array.isArray(b)) {\n        if (a.length !== b.length) {\n            return { valid: false, mergeErrorPath: [] };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return {\n                    valid: false,\n                    mergeErrorPath: [index, ...sharedValue.mergeErrorPath],\n                };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    return { valid: false, mergeErrorPath: [] };\n}\nfunction handleIntersectionResults(result, left, right) {\n    if (left.issues.length) {\n        result.issues.push(...left.issues);\n    }\n    if (right.issues.length) {\n        result.issues.push(...right.issues);\n    }\n    if (util.aborted(result))\n        return result;\n    const merged = mergeValues(left.value, right.value);\n    if (!merged.valid) {\n        throw new Error(`Unmergable intersection. Error path: ` + `${JSON.stringify(merged.mergeErrorPath)}`);\n    }\n    result.value = merged.data;\n    return result;\n}\nexport const $ZodTuple = /*@__PURE__*/ core.$constructor(\"$ZodTuple\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const items = def.items;\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!Array.isArray(input)) {\n            payload.issues.push({\n                input,\n                inst,\n                expected: \"tuple\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        payload.value = [];\n        const proms = [];\n        const reversedIndex = [...items].reverse().findIndex((item) => item._zod.optin !== \"optional\");\n        const optStart = reversedIndex === -1 ? 0 : items.length - reversedIndex;\n        if (!def.rest) {\n            const tooBig = input.length > items.length;\n            const tooSmall = input.length < optStart - 1;\n            if (tooBig || tooSmall) {\n                payload.issues.push({\n                    ...(tooBig ? { code: \"too_big\", maximum: items.length } : { code: \"too_small\", minimum: items.length }),\n                    input,\n                    inst,\n                    origin: \"array\",\n                });\n                return payload;\n            }\n        }\n        let i = -1;\n        for (const item of items) {\n            i++;\n            if (i >= input.length)\n                if (i >= optStart)\n                    continue;\n            const result = item._zod.run({\n                value: input[i],\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleTupleResult(result, payload, i)));\n            }\n            else {\n                handleTupleResult(result, payload, i);\n            }\n        }\n        if (def.rest) {\n            const rest = input.slice(items.length);\n            for (const el of rest) {\n                i++;\n                const result = def.rest._zod.run({\n                    value: el,\n                    issues: [],\n                }, ctx);\n                if (result instanceof Promise) {\n                    proms.push(result.then((result) => handleTupleResult(result, payload, i)));\n                }\n                else {\n                    handleTupleResult(result, payload, i);\n                }\n            }\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleTupleResult(result, final, index) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(index, result.issues));\n    }\n    final.value[index] = result.value;\n}\nexport const $ZodRecord = /*@__PURE__*/ core.$constructor(\"$ZodRecord\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!util.isPlainObject(input)) {\n            payload.issues.push({\n                expected: \"record\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        const values = def.keyType._zod.values;\n        if (values) {\n            payload.value = {};\n            const recordKeys = new Set();\n            for (const key of values) {\n                if (typeof key === \"string\" || typeof key === \"number\" || typeof key === \"symbol\") {\n                    recordKeys.add(typeof key === \"number\" ? key.toString() : key);\n                    const result = def.valueType._zod.run({ value: input[key], issues: [] }, ctx);\n                    if (result instanceof Promise) {\n                        proms.push(result.then((result) => {\n                            if (result.issues.length) {\n                                payload.issues.push(...util.prefixIssues(key, result.issues));\n                            }\n                            payload.value[key] = result.value;\n                        }));\n                    }\n                    else {\n                        if (result.issues.length) {\n                            payload.issues.push(...util.prefixIssues(key, result.issues));\n                        }\n                        payload.value[key] = result.value;\n                    }\n                }\n            }\n            let unrecognized;\n            for (const key in input) {\n                if (!recordKeys.has(key)) {\n                    unrecognized = unrecognized ?? [];\n                    unrecognized.push(key);\n                }\n            }\n            if (unrecognized && unrecognized.length > 0) {\n                payload.issues.push({\n                    code: \"unrecognized_keys\",\n                    input,\n                    inst,\n                    keys: unrecognized,\n                });\n            }\n        }\n        else {\n            payload.value = {};\n            for (const key of Reflect.ownKeys(input)) {\n                if (key === \"__proto__\")\n                    continue;\n                const keyResult = def.keyType._zod.run({ value: key, issues: [] }, ctx);\n                if (keyResult instanceof Promise) {\n                    throw new Error(\"Async schemas not supported in object keys currently\");\n                }\n                if (keyResult.issues.length) {\n                    payload.issues.push({\n                        code: \"invalid_key\",\n                        origin: \"record\",\n                        issues: keyResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                        input: key,\n                        path: [key],\n                        inst,\n                    });\n                    payload.value[keyResult.value] = keyResult.value;\n                    continue;\n                }\n                const result = def.valueType._zod.run({ value: input[key], issues: [] }, ctx);\n                if (result instanceof Promise) {\n                    proms.push(result.then((result) => {\n                        if (result.issues.length) {\n                            payload.issues.push(...util.prefixIssues(key, result.issues));\n                        }\n                        payload.value[keyResult.value] = result.value;\n                    }));\n                }\n                else {\n                    if (result.issues.length) {\n                        payload.issues.push(...util.prefixIssues(key, result.issues));\n                    }\n                    payload.value[keyResult.value] = result.value;\n                }\n            }\n        }\n        if (proms.length) {\n            return Promise.all(proms).then(() => payload);\n        }\n        return payload;\n    };\n});\nexport const $ZodMap = /*@__PURE__*/ core.$constructor(\"$ZodMap\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!(input instanceof Map)) {\n            payload.issues.push({\n                expected: \"map\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        payload.value = new Map();\n        for (const [key, value] of input) {\n            const keyResult = def.keyType._zod.run({ value: key, issues: [] }, ctx);\n            const valueResult = def.valueType._zod.run({ value: value, issues: [] }, ctx);\n            if (keyResult instanceof Promise || valueResult instanceof Promise) {\n                proms.push(Promise.all([keyResult, valueResult]).then(([keyResult, valueResult]) => {\n                    handleMapResult(keyResult, valueResult, payload, key, input, inst, ctx);\n                }));\n            }\n            else {\n                handleMapResult(keyResult, valueResult, payload, key, input, inst, ctx);\n            }\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleMapResult(keyResult, valueResult, final, key, input, inst, ctx) {\n    if (keyResult.issues.length) {\n        if (util.propertyKeyTypes.has(typeof key)) {\n            final.issues.push(...util.prefixIssues(key, keyResult.issues));\n        }\n        else {\n            final.issues.push({\n                code: \"invalid_key\",\n                origin: \"map\",\n                input,\n                inst,\n                issues: keyResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n            });\n        }\n    }\n    if (valueResult.issues.length) {\n        if (util.propertyKeyTypes.has(typeof key)) {\n            final.issues.push(...util.prefixIssues(key, valueResult.issues));\n        }\n        else {\n            final.issues.push({\n                origin: \"map\",\n                code: \"invalid_element\",\n                input,\n                inst,\n                key: key,\n                issues: valueResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n            });\n        }\n    }\n    final.value.set(keyResult.value, valueResult.value);\n}\nexport const $ZodSet = /*@__PURE__*/ core.$constructor(\"$ZodSet\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!(input instanceof Set)) {\n            payload.issues.push({\n                input,\n                inst,\n                expected: \"set\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        const proms = [];\n        payload.value = new Set();\n        for (const item of input) {\n            const result = def.valueType._zod.run({ value: item, issues: [] }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleSetResult(result, payload)));\n            }\n            else\n                handleSetResult(result, payload);\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleSetResult(result, final) {\n    if (result.issues.length) {\n        final.issues.push(...result.issues);\n    }\n    final.value.add(result.value);\n}\nexport const $ZodEnum = /*@__PURE__*/ core.$constructor(\"$ZodEnum\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const values = util.getEnumValues(def.entries);\n    const valuesSet = new Set(values);\n    inst._zod.values = valuesSet;\n    inst._zod.pattern = new RegExp(`^(${values\n        .filter((k) => util.propertyKeyTypes.has(typeof k))\n        .map((o) => (typeof o === \"string\" ? util.escapeRegex(o) : o.toString()))\n        .join(\"|\")})$`);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (valuesSet.has(input)) {\n            return payload;\n        }\n        payload.issues.push({\n            code: \"invalid_value\",\n            values,\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodLiteral = /*@__PURE__*/ core.$constructor(\"$ZodLiteral\", (inst, def) => {\n    $ZodType.init(inst, def);\n    if (def.values.length === 0) {\n        throw new Error(\"Cannot create literal schema with no valid values\");\n    }\n    const values = new Set(def.values);\n    inst._zod.values = values;\n    inst._zod.pattern = new RegExp(`^(${def.values\n        .map((o) => (typeof o === \"string\" ? util.escapeRegex(o) : o ? util.escapeRegex(o.toString()) : String(o)))\n        .join(\"|\")})$`);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (values.has(input)) {\n            return payload;\n        }\n        payload.issues.push({\n            code: \"invalid_value\",\n            values: def.values,\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodFile = /*@__PURE__*/ core.$constructor(\"$ZodFile\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        // @ts-ignore\n        if (input instanceof File)\n            return payload;\n        payload.issues.push({\n            expected: \"file\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodTransform = /*@__PURE__*/ core.$constructor(\"$ZodTransform\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            throw new core.$ZodEncodeError(inst.constructor.name);\n        }\n        const _out = def.transform(payload.value, payload);\n        if (ctx.async) {\n            const output = _out instanceof Promise ? _out : Promise.resolve(_out);\n            return output.then((output) => {\n                payload.value = output;\n                return payload;\n            });\n        }\n        if (_out instanceof Promise) {\n            throw new core.$ZodAsyncError();\n        }\n        payload.value = _out;\n        return payload;\n    };\n});\nfunction handleOptionalResult(result, input) {\n    if (result.issues.length && input === undefined) {\n        return { issues: [], value: undefined };\n    }\n    return result;\n}\nexport const $ZodOptional = /*@__PURE__*/ core.$constructor(\"$ZodOptional\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    inst._zod.optout = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => {\n        return def.innerType._zod.values ? new Set([...def.innerType._zod.values, undefined]) : undefined;\n    });\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        const pattern = def.innerType._zod.pattern;\n        return pattern ? new RegExp(`^(${util.cleanRegex(pattern.source)})?$`) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        if (def.innerType._zod.optin === \"optional\") {\n            const result = def.innerType._zod.run(payload, ctx);\n            if (result instanceof Promise)\n                return result.then((r) => handleOptionalResult(r, payload.value));\n            return handleOptionalResult(result, payload.value);\n        }\n        if (payload.value === undefined) {\n            return payload;\n        }\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodNullable = /*@__PURE__*/ core.$constructor(\"$ZodNullable\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        const pattern = def.innerType._zod.pattern;\n        return pattern ? new RegExp(`^(${util.cleanRegex(pattern.source)}|null)$`) : undefined;\n    });\n    util.defineLazy(inst._zod, \"values\", () => {\n        return def.innerType._zod.values ? new Set([...def.innerType._zod.values, null]) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        // Forward direction (decode): allow null to pass through\n        if (payload.value === null)\n            return payload;\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodDefault = /*@__PURE__*/ core.$constructor(\"$ZodDefault\", (inst, def) => {\n    $ZodType.init(inst, def);\n    // inst._zod.qin = \"true\";\n    inst._zod.optin = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        // Forward direction (decode): apply defaults for undefined input\n        if (payload.value === undefined) {\n            payload.value = def.defaultValue;\n            /**\n             * $ZodDefault returns the default value immediately in forward direction.\n             * It doesn't pass the default value into the validator (\"prefault\"). There's no reason to pass the default value through validation. The validity of the default is enforced by TypeScript statically. Otherwise, it's the responsibility of the user to ensure the default is valid. In the case of pipes with divergent in/out types, you can specify the default on the `in` schema of your ZodPipe to set a \"prefault\" for the pipe.   */\n            return payload;\n        }\n        // Forward direction: continue with default handling\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => handleDefaultResult(result, def));\n        }\n        return handleDefaultResult(result, def);\n    };\n});\nfunction handleDefaultResult(payload, def) {\n    if (payload.value === undefined) {\n        payload.value = def.defaultValue;\n    }\n    return payload;\n}\nexport const $ZodPrefault = /*@__PURE__*/ core.$constructor(\"$ZodPrefault\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        // Forward direction (decode): apply prefault for undefined input\n        if (payload.value === undefined) {\n            payload.value = def.defaultValue;\n        }\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodNonOptional = /*@__PURE__*/ core.$constructor(\"$ZodNonOptional\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => {\n        const v = def.innerType._zod.values;\n        return v ? new Set([...v].filter((x) => x !== undefined)) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => handleNonOptionalResult(result, inst));\n        }\n        return handleNonOptionalResult(result, inst);\n    };\n});\nfunction handleNonOptionalResult(payload, inst) {\n    if (!payload.issues.length && payload.value === undefined) {\n        payload.issues.push({\n            code: \"invalid_type\",\n            expected: \"nonoptional\",\n            input: payload.value,\n            inst,\n        });\n    }\n    return payload;\n}\nexport const $ZodSuccess = /*@__PURE__*/ core.$constructor(\"$ZodSuccess\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            throw new core.$ZodEncodeError(\"ZodSuccess\");\n        }\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => {\n                payload.value = result.issues.length === 0;\n                return payload;\n            });\n        }\n        payload.value = result.issues.length === 0;\n        return payload;\n    };\n});\nexport const $ZodCatch = /*@__PURE__*/ core.$constructor(\"$ZodCatch\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        // Forward direction (decode): apply catch logic\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => {\n                payload.value = result.value;\n                if (result.issues.length) {\n                    payload.value = def.catchValue({\n                        ...payload,\n                        error: {\n                            issues: result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                        },\n                        input: payload.value,\n                    });\n                    payload.issues = [];\n                }\n                return payload;\n            });\n        }\n        payload.value = result.value;\n        if (result.issues.length) {\n            payload.value = def.catchValue({\n                ...payload,\n                error: {\n                    issues: result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                },\n                input: payload.value,\n            });\n            payload.issues = [];\n        }\n        return payload;\n    };\n});\nexport const $ZodNaN = /*@__PURE__*/ core.$constructor(\"$ZodNaN\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"number\" || !Number.isNaN(payload.value)) {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                expected: \"nan\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        return payload;\n    };\n});\nexport const $ZodPipe = /*@__PURE__*/ core.$constructor(\"$ZodPipe\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => def.in._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.in._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.out._zod.optout);\n    util.defineLazy(inst._zod, \"propValues\", () => def.in._zod.propValues);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            const right = def.out._zod.run(payload, ctx);\n            if (right instanceof Promise) {\n                return right.then((right) => handlePipeResult(right, def.in, ctx));\n            }\n            return handlePipeResult(right, def.in, ctx);\n        }\n        const left = def.in._zod.run(payload, ctx);\n        if (left instanceof Promise) {\n            return left.then((left) => handlePipeResult(left, def.out, ctx));\n        }\n        return handlePipeResult(left, def.out, ctx);\n    };\n});\nfunction handlePipeResult(left, next, ctx) {\n    if (left.issues.length) {\n        // prevent further checks\n        left.aborted = true;\n        return left;\n    }\n    return next._zod.run({ value: left.value, issues: left.issues }, ctx);\n}\nexport const $ZodCodec = /*@__PURE__*/ core.$constructor(\"$ZodCodec\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => def.in._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.in._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.out._zod.optout);\n    util.defineLazy(inst._zod, \"propValues\", () => def.in._zod.propValues);\n    inst._zod.parse = (payload, ctx) => {\n        const direction = ctx.direction || \"forward\";\n        if (direction === \"forward\") {\n            const left = def.in._zod.run(payload, ctx);\n            if (left instanceof Promise) {\n                return left.then((left) => handleCodecAResult(left, def, ctx));\n            }\n            return handleCodecAResult(left, def, ctx);\n        }\n        else {\n            const right = def.out._zod.run(payload, ctx);\n            if (right instanceof Promise) {\n                return right.then((right) => handleCodecAResult(right, def, ctx));\n            }\n            return handleCodecAResult(right, def, ctx);\n        }\n    };\n});\nfunction handleCodecAResult(result, def, ctx) {\n    if (result.issues.length) {\n        // prevent further checks\n        result.aborted = true;\n        return result;\n    }\n    const direction = ctx.direction || \"forward\";\n    if (direction === \"forward\") {\n        const transformed = def.transform(result.value, result);\n        if (transformed instanceof Promise) {\n            return transformed.then((value) => handleCodecTxResult(result, value, def.out, ctx));\n        }\n        return handleCodecTxResult(result, transformed, def.out, ctx);\n    }\n    else {\n        const transformed = def.reverseTransform(result.value, result);\n        if (transformed instanceof Promise) {\n            return transformed.then((value) => handleCodecTxResult(result, value, def.in, ctx));\n        }\n        return handleCodecTxResult(result, transformed, def.in, ctx);\n    }\n}\nfunction handleCodecTxResult(left, value, nextSchema, ctx) {\n    // Check if transform added any issues\n    if (left.issues.length) {\n        left.aborted = true;\n        return left;\n    }\n    return nextSchema._zod.run({ value, issues: left.issues }, ctx);\n}\nexport const $ZodReadonly = /*@__PURE__*/ core.$constructor(\"$ZodReadonly\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"propValues\", () => def.innerType._zod.propValues);\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType?._zod?.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType?._zod?.optout);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then(handleReadonlyResult);\n        }\n        return handleReadonlyResult(result);\n    };\n});\nfunction handleReadonlyResult(payload) {\n    payload.value = Object.freeze(payload.value);\n    return payload;\n}\nexport const $ZodTemplateLiteral = /*@__PURE__*/ core.$constructor(\"$ZodTemplateLiteral\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const regexParts = [];\n    for (const part of def.parts) {\n        if (typeof part === \"object\" && part !== null) {\n            // is Zod schema\n            if (!part._zod.pattern) {\n                // if (!source)\n                throw new Error(`Invalid template literal part, no pattern found: ${[...part._zod.traits].shift()}`);\n            }\n            const source = part._zod.pattern instanceof RegExp ? part._zod.pattern.source : part._zod.pattern;\n            if (!source)\n                throw new Error(`Invalid template literal part: ${part._zod.traits}`);\n            const start = source.startsWith(\"^\") ? 1 : 0;\n            const end = source.endsWith(\"$\") ? source.length - 1 : source.length;\n            regexParts.push(source.slice(start, end));\n        }\n        else if (part === null || util.primitiveTypes.has(typeof part)) {\n            regexParts.push(util.escapeRegex(`${part}`));\n        }\n        else {\n            throw new Error(`Invalid template literal part: ${part}`);\n        }\n    }\n    inst._zod.pattern = new RegExp(`^${regexParts.join(\"\")}$`);\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"string\") {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                expected: \"template_literal\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        inst._zod.pattern.lastIndex = 0;\n        if (!inst._zod.pattern.test(payload.value)) {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                code: \"invalid_format\",\n                format: def.format ?? \"template_literal\",\n                pattern: inst._zod.pattern.source,\n            });\n            return payload;\n        }\n        return payload;\n    };\n});\nexport const $ZodFunction = /*@__PURE__*/ core.$constructor(\"$ZodFunction\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._def = def;\n    inst._zod.def = def;\n    inst.implement = (func) => {\n        if (typeof func !== \"function\") {\n            throw new Error(\"implement() must be called with a function\");\n        }\n        return function (...args) {\n            const parsedArgs = inst._def.input ? parse(inst._def.input, args) : args;\n            const result = Reflect.apply(func, this, parsedArgs);\n            if (inst._def.output) {\n                return parse(inst._def.output, result);\n            }\n            return result;\n        };\n    };\n    inst.implementAsync = (func) => {\n        if (typeof func !== \"function\") {\n            throw new Error(\"implementAsync() must be called with a function\");\n        }\n        return async function (...args) {\n            const parsedArgs = inst._def.input ? await parseAsync(inst._def.input, args) : args;\n            const result = await Reflect.apply(func, this, parsedArgs);\n            if (inst._def.output) {\n                return await parseAsync(inst._def.output, result);\n            }\n            return result;\n        };\n    };\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"function\") {\n            payload.issues.push({\n                code: \"invalid_type\",\n                expected: \"function\",\n                input: payload.value,\n                inst,\n            });\n            return payload;\n        }\n        // Check if output is a promise type to determine if we should use async implementation\n        const hasPromiseOutput = inst._def.output && inst._def.output._zod.def.type === \"promise\";\n        if (hasPromiseOutput) {\n            payload.value = inst.implementAsync(payload.value);\n        }\n        else {\n            payload.value = inst.implement(payload.value);\n        }\n        return payload;\n    };\n    inst.input = (...args) => {\n        const F = inst.constructor;\n        if (Array.isArray(args[0])) {\n            return new F({\n                type: \"function\",\n                input: new $ZodTuple({\n                    type: \"tuple\",\n                    items: args[0],\n                    rest: args[1],\n                }),\n                output: inst._def.output,\n            });\n        }\n        return new F({\n            type: \"function\",\n            input: args[0],\n            output: inst._def.output,\n        });\n    };\n    inst.output = (output) => {\n        const F = inst.constructor;\n        return new F({\n            type: \"function\",\n            input: inst._def.input,\n            output,\n        });\n    };\n    return inst;\n});\nexport const $ZodPromise = /*@__PURE__*/ core.$constructor(\"$ZodPromise\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        return Promise.resolve(payload.value).then((inner) => def.innerType._zod.run({ value: inner, issues: [] }, ctx));\n    };\n});\nexport const $ZodLazy = /*@__PURE__*/ core.$constructor(\"$ZodLazy\", (inst, def) => {\n    $ZodType.init(inst, def);\n    // let _innerType!: any;\n    // util.defineLazy(def, \"getter\", () => {\n    //   if (!_innerType) {\n    //     _innerType = def.getter();\n    //   }\n    //   return () => _innerType;\n    // });\n    util.defineLazy(inst._zod, \"innerType\", () => def.getter());\n    util.defineLazy(inst._zod, \"pattern\", () => inst._zod.innerType?._zod?.pattern);\n    util.defineLazy(inst._zod, \"propValues\", () => inst._zod.innerType?._zod?.propValues);\n    util.defineLazy(inst._zod, \"optin\", () => inst._zod.innerType?._zod?.optin ?? undefined);\n    util.defineLazy(inst._zod, \"optout\", () => inst._zod.innerType?._zod?.optout ?? undefined);\n    inst._zod.parse = (payload, ctx) => {\n        const inner = inst._zod.innerType;\n        return inner._zod.run(payload, ctx);\n    };\n});\nexport const $ZodCustom = /*@__PURE__*/ core.$constructor(\"$ZodCustom\", (inst, def) => {\n    checks.$ZodCheck.init(inst, def);\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _) => {\n        return payload;\n    };\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const r = def.fn(input);\n        if (r instanceof Promise) {\n            return r.then((r) => handleRefineResult(r, payload, input, inst));\n        }\n        handleRefineResult(r, payload, input, inst);\n        return;\n    };\n});\nfunction handleRefineResult(result, payload, input, inst) {\n    if (!result) {\n        const _iss = {\n            code: \"custom\",\n            input,\n            inst, // incorporates params.error into issue reporting\n            path: [...(inst._zod.def.path ?? [])], // incorporates params.error into issue reporting\n            continue: !inst._zod.def.abort,\n            // params: inst._zod.def.params,\n        };\n        if (inst._zod.def.params)\n            _iss.params = inst._zod.def.params;\n        payload.issues.push(util.issue(_iss));\n    }\n}\n","var _a;\nexport const $output = Symbol(\"ZodOutput\");\nexport const $input = Symbol(\"ZodInput\");\nexport class $ZodRegistry {\n    constructor() {\n        this._map = new WeakMap();\n        this._idmap = new Map();\n    }\n    add(schema, ..._meta) {\n        const meta = _meta[0];\n        this._map.set(schema, meta);\n        if (meta && typeof meta === \"object\" && \"id\" in meta) {\n            if (this._idmap.has(meta.id)) {\n                throw new Error(`ID ${meta.id} already exists in the registry`);\n            }\n            this._idmap.set(meta.id, schema);\n        }\n        return this;\n    }\n    clear() {\n        this._map = new WeakMap();\n        this._idmap = new Map();\n        return this;\n    }\n    remove(schema) {\n        const meta = this._map.get(schema);\n        if (meta && typeof meta === \"object\" && \"id\" in meta) {\n            this._idmap.delete(meta.id);\n        }\n        this._map.delete(schema);\n        return this;\n    }\n    get(schema) {\n        // return this._map.get(schema) as any;\n        // inherit metadata\n        const p = schema._zod.parent;\n        if (p) {\n            const pm = { ...(this.get(p) ?? {}) };\n            delete pm.id; // do not inherit id\n            const f = { ...pm, ...this._map.get(schema) };\n            return Object.keys(f).length ? f : undefined;\n        }\n        return this._map.get(schema);\n    }\n    has(schema) {\n        return this._map.has(schema);\n    }\n}\n// registries\nexport function registry() {\n    return new $ZodRegistry();\n}\n(_a = globalThis).__zod_globalRegistry ?? (_a.__zod_globalRegistry = registry());\nexport const globalRegistry = globalThis.__zod_globalRegistry;\n","import * as checks from \"./checks.js\";\nimport * as registries from \"./registries.js\";\nimport * as schemas from \"./schemas.js\";\nimport * as util from \"./util.js\";\nexport function _string(Class, params) {\n    return new Class({\n        type: \"string\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedString(Class, params) {\n    return new Class({\n        type: \"string\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _email(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"email\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _guid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"guid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v4\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v6\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv7(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v7\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _url(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"url\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _emoji(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"emoji\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _nanoid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"nanoid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cuid2(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cuid2\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ulid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ulid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _xid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"xid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ksuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ksuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ipv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ipv4\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ipv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ipv6\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _mac(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"mac\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cidrv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cidrv4\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cidrv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cidrv6\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _base64(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"base64\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _base64url(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"base64url\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _e164(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"e164\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _jwt(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"jwt\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport const TimePrecision = {\n    Any: null,\n    Minute: -1,\n    Second: 0,\n    Millisecond: 3,\n    Microsecond: 6,\n};\nexport function _isoDateTime(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"datetime\",\n        check: \"string_format\",\n        offset: false,\n        local: false,\n        precision: null,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoDate(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"date\",\n        check: \"string_format\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoTime(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"time\",\n        check: \"string_format\",\n        precision: null,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoDuration(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"duration\",\n        check: \"string_format\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _number(Class, params) {\n    return new Class({\n        type: \"number\",\n        checks: [],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedNumber(Class, params) {\n    return new Class({\n        type: \"number\",\n        coerce: true,\n        checks: [],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"safeint\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _float32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"float32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _float64(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"float64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"int32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uint32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"uint32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _boolean(Class, params) {\n    return new Class({\n        type: \"boolean\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedBoolean(Class, params) {\n    return new Class({\n        type: \"boolean\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _bigint(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedBigint(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int64(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        check: \"bigint_format\",\n        abort: false,\n        format: \"int64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uint64(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        check: \"bigint_format\",\n        abort: false,\n        format: \"uint64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _symbol(Class, params) {\n    return new Class({\n        type: \"symbol\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _undefined(Class, params) {\n    return new Class({\n        type: \"undefined\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _null(Class, params) {\n    return new Class({\n        type: \"null\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _any(Class) {\n    return new Class({\n        type: \"any\",\n    });\n}\nexport function _unknown(Class) {\n    return new Class({\n        type: \"unknown\",\n    });\n}\nexport function _never(Class, params) {\n    return new Class({\n        type: \"never\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _void(Class, params) {\n    return new Class({\n        type: \"void\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _date(Class, params) {\n    return new Class({\n        type: \"date\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedDate(Class, params) {\n    return new Class({\n        type: \"date\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _nan(Class, params) {\n    return new Class({\n        type: \"nan\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _lt(value, params) {\n    return new checks.$ZodCheckLessThan({\n        check: \"less_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: false,\n    });\n}\nexport function _lte(value, params) {\n    return new checks.$ZodCheckLessThan({\n        check: \"less_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: true,\n    });\n}\nexport { \n/** @deprecated Use `z.lte()` instead. */\n_lte as _max, };\nexport function _gt(value, params) {\n    return new checks.$ZodCheckGreaterThan({\n        check: \"greater_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: false,\n    });\n}\nexport function _gte(value, params) {\n    return new checks.$ZodCheckGreaterThan({\n        check: \"greater_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: true,\n    });\n}\nexport { \n/** @deprecated Use `z.gte()` instead. */\n_gte as _min, };\nexport function _positive(params) {\n    return _gt(0, params);\n}\n// negative\nexport function _negative(params) {\n    return _lt(0, params);\n}\n// nonpositive\nexport function _nonpositive(params) {\n    return _lte(0, params);\n}\n// nonnegative\nexport function _nonnegative(params) {\n    return _gte(0, params);\n}\nexport function _multipleOf(value, params) {\n    return new checks.$ZodCheckMultipleOf({\n        check: \"multiple_of\",\n        ...util.normalizeParams(params),\n        value,\n    });\n}\nexport function _maxSize(maximum, params) {\n    return new checks.$ZodCheckMaxSize({\n        check: \"max_size\",\n        ...util.normalizeParams(params),\n        maximum,\n    });\n}\nexport function _minSize(minimum, params) {\n    return new checks.$ZodCheckMinSize({\n        check: \"min_size\",\n        ...util.normalizeParams(params),\n        minimum,\n    });\n}\nexport function _size(size, params) {\n    return new checks.$ZodCheckSizeEquals({\n        check: \"size_equals\",\n        ...util.normalizeParams(params),\n        size,\n    });\n}\nexport function _maxLength(maximum, params) {\n    const ch = new checks.$ZodCheckMaxLength({\n        check: \"max_length\",\n        ...util.normalizeParams(params),\n        maximum,\n    });\n    return ch;\n}\nexport function _minLength(minimum, params) {\n    return new checks.$ZodCheckMinLength({\n        check: \"min_length\",\n        ...util.normalizeParams(params),\n        minimum,\n    });\n}\nexport function _length(length, params) {\n    return new checks.$ZodCheckLengthEquals({\n        check: \"length_equals\",\n        ...util.normalizeParams(params),\n        length,\n    });\n}\nexport function _regex(pattern, params) {\n    return new checks.$ZodCheckRegex({\n        check: \"string_format\",\n        format: \"regex\",\n        ...util.normalizeParams(params),\n        pattern,\n    });\n}\nexport function _lowercase(params) {\n    return new checks.$ZodCheckLowerCase({\n        check: \"string_format\",\n        format: \"lowercase\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uppercase(params) {\n    return new checks.$ZodCheckUpperCase({\n        check: \"string_format\",\n        format: \"uppercase\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _includes(includes, params) {\n    return new checks.$ZodCheckIncludes({\n        check: \"string_format\",\n        format: \"includes\",\n        ...util.normalizeParams(params),\n        includes,\n    });\n}\nexport function _startsWith(prefix, params) {\n    return new checks.$ZodCheckStartsWith({\n        check: \"string_format\",\n        format: \"starts_with\",\n        ...util.normalizeParams(params),\n        prefix,\n    });\n}\nexport function _endsWith(suffix, params) {\n    return new checks.$ZodCheckEndsWith({\n        check: \"string_format\",\n        format: \"ends_with\",\n        ...util.normalizeParams(params),\n        suffix,\n    });\n}\nexport function _property(property, schema, params) {\n    return new checks.$ZodCheckProperty({\n        check: \"property\",\n        property,\n        schema,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _mime(types, params) {\n    return new checks.$ZodCheckMimeType({\n        check: \"mime_type\",\n        mime: types,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _overwrite(tx) {\n    return new checks.$ZodCheckOverwrite({\n        check: \"overwrite\",\n        tx,\n    });\n}\n// normalize\nexport function _normalize(form) {\n    return _overwrite((input) => input.normalize(form));\n}\n// trim\nexport function _trim() {\n    return _overwrite((input) => input.trim());\n}\n// toLowerCase\nexport function _toLowerCase() {\n    return _overwrite((input) => input.toLowerCase());\n}\n// toUpperCase\nexport function _toUpperCase() {\n    return _overwrite((input) => input.toUpperCase());\n}\n// slugify\nexport function _slugify() {\n    return _overwrite((input) => util.slugify(input));\n}\nexport function _array(Class, element, params) {\n    return new Class({\n        type: \"array\",\n        element,\n        // get element() {\n        //   return element;\n        // },\n        ...util.normalizeParams(params),\n    });\n}\nexport function _union(Class, options, params) {\n    return new Class({\n        type: \"union\",\n        options,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _discriminatedUnion(Class, discriminator, options, params) {\n    return new Class({\n        type: \"union\",\n        options,\n        discriminator,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _intersection(Class, left, right) {\n    return new Class({\n        type: \"intersection\",\n        left,\n        right,\n    });\n}\n// export function _tuple(\n//   Class: util.SchemaClass<schemas.$ZodTuple>,\n//   items: [],\n//   params?: string | $ZodTupleParams\n// ): schemas.$ZodTuple<[], null>;\nexport function _tuple(Class, items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof schemas.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new Class({\n        type: \"tuple\",\n        items,\n        rest,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _record(Class, keyType, valueType, params) {\n    return new Class({\n        type: \"record\",\n        keyType,\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _map(Class, keyType, valueType, params) {\n    return new Class({\n        type: \"map\",\n        keyType,\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _set(Class, valueType, params) {\n    return new Class({\n        type: \"set\",\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _enum(Class, values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    // if (Array.isArray(values)) {\n    //   for (const value of values) {\n    //     entries[value] = value;\n    //   }\n    // } else {\n    //   Object.assign(entries, values);\n    // }\n    // const entries: util.EnumLike = {};\n    // for (const val of values) {\n    //   entries[val] = val;\n    // }\n    return new Class({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nexport function _nativeEnum(Class, entries, params) {\n    return new Class({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _literal(Class, value, params) {\n    return new Class({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _file(Class, params) {\n    return new Class({\n        type: \"file\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _transform(Class, fn) {\n    return new Class({\n        type: \"transform\",\n        transform: fn,\n    });\n}\nexport function _optional(Class, innerType) {\n    return new Class({\n        type: \"optional\",\n        innerType,\n    });\n}\nexport function _nullable(Class, innerType) {\n    return new Class({\n        type: \"nullable\",\n        innerType,\n    });\n}\nexport function _default(Class, innerType, defaultValue) {\n    return new Class({\n        type: \"default\",\n        innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : util.shallowClone(defaultValue);\n        },\n    });\n}\nexport function _nonoptional(Class, innerType, params) {\n    return new Class({\n        type: \"nonoptional\",\n        innerType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _success(Class, innerType) {\n    return new Class({\n        type: \"success\",\n        innerType,\n    });\n}\nexport function _catch(Class, innerType, catchValue) {\n    return new Class({\n        type: \"catch\",\n        innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\nexport function _pipe(Class, in_, out) {\n    return new Class({\n        type: \"pipe\",\n        in: in_,\n        out,\n    });\n}\nexport function _readonly(Class, innerType) {\n    return new Class({\n        type: \"readonly\",\n        innerType,\n    });\n}\nexport function _templateLiteral(Class, parts, params) {\n    return new Class({\n        type: \"template_literal\",\n        parts,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _lazy(Class, getter) {\n    return new Class({\n        type: \"lazy\",\n        getter,\n    });\n}\nexport function _promise(Class, innerType) {\n    return new Class({\n        type: \"promise\",\n        innerType,\n    });\n}\nexport function _custom(Class, fn, _params) {\n    const norm = util.normalizeParams(_params);\n    norm.abort ?? (norm.abort = true); // default to abort:false\n    const schema = new Class({\n        type: \"custom\",\n        check: \"custom\",\n        fn: fn,\n        ...norm,\n    });\n    return schema;\n}\n// same as _custom but defaults to abort:false\nexport function _refine(Class, fn, _params) {\n    const schema = new Class({\n        type: \"custom\",\n        check: \"custom\",\n        fn: fn,\n        ...util.normalizeParams(_params),\n    });\n    return schema;\n}\nexport function _superRefine(fn) {\n    const ch = _check((payload) => {\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(util.issue(issue, payload.value, ch._zod.def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = ch);\n                _issue.continue ?? (_issue.continue = !ch._zod.def.abort); // abort is always undefined, so this is always true...\n                payload.issues.push(util.issue(_issue));\n            }\n        };\n        return fn(payload.value, payload);\n    });\n    return ch;\n}\nexport function _check(fn, params) {\n    const ch = new checks.$ZodCheck({\n        check: \"custom\",\n        ...util.normalizeParams(params),\n    });\n    ch._zod.check = fn;\n    return ch;\n}\nexport function describe(description) {\n    const ch = new checks.$ZodCheck({ check: \"describe\" });\n    ch._zod.onattach = [\n        (inst) => {\n            const existing = registries.globalRegistry.get(inst) ?? {};\n            registries.globalRegistry.add(inst, { ...existing, description });\n        },\n    ];\n    ch._zod.check = () => { }; // no-op check\n    return ch;\n}\nexport function meta(metadata) {\n    const ch = new checks.$ZodCheck({ check: \"meta\" });\n    ch._zod.onattach = [\n        (inst) => {\n            const existing = registries.globalRegistry.get(inst) ?? {};\n            registries.globalRegistry.add(inst, { ...existing, ...metadata });\n        },\n    ];\n    ch._zod.check = () => { }; // no-op check\n    return ch;\n}\nexport function _stringbool(Classes, _params) {\n    const params = util.normalizeParams(_params);\n    let truthyArray = params.truthy ?? [\"true\", \"1\", \"yes\", \"on\", \"y\", \"enabled\"];\n    let falsyArray = params.falsy ?? [\"false\", \"0\", \"no\", \"off\", \"n\", \"disabled\"];\n    if (params.case !== \"sensitive\") {\n        truthyArray = truthyArray.map((v) => (typeof v === \"string\" ? v.toLowerCase() : v));\n        falsyArray = falsyArray.map((v) => (typeof v === \"string\" ? v.toLowerCase() : v));\n    }\n    const truthySet = new Set(truthyArray);\n    const falsySet = new Set(falsyArray);\n    const _Codec = Classes.Codec ?? schemas.$ZodCodec;\n    const _Boolean = Classes.Boolean ?? schemas.$ZodBoolean;\n    const _String = Classes.String ?? schemas.$ZodString;\n    const stringSchema = new _String({ type: \"string\", error: params.error });\n    const booleanSchema = new _Boolean({ type: \"boolean\", error: params.error });\n    const codec = new _Codec({\n        type: \"pipe\",\n        in: stringSchema,\n        out: booleanSchema,\n        transform: ((input, payload) => {\n            let data = input;\n            if (params.case !== \"sensitive\")\n                data = data.toLowerCase();\n            if (truthySet.has(data)) {\n                return true;\n            }\n            else if (falsySet.has(data)) {\n                return false;\n            }\n            else {\n                payload.issues.push({\n                    code: \"invalid_value\",\n                    expected: \"stringbool\",\n                    values: [...truthySet, ...falsySet],\n                    input: payload.value,\n                    inst: codec,\n                    continue: false,\n                });\n                return {};\n            }\n        }),\n        reverseTransform: ((input, _payload) => {\n            if (input === true) {\n                return truthyArray[0] || \"true\";\n            }\n            else {\n                return falsyArray[0] || \"false\";\n            }\n        }),\n        error: params.error,\n    });\n    return codec;\n}\nexport function _stringFormat(Class, format, fnOrRegex, _params = {}) {\n    const params = util.normalizeParams(_params);\n    const def = {\n        ...util.normalizeParams(_params),\n        check: \"string_format\",\n        type: \"string\",\n        format,\n        fn: typeof fnOrRegex === \"function\" ? fnOrRegex : (val) => fnOrRegex.test(val),\n        ...params,\n    };\n    if (fnOrRegex instanceof RegExp) {\n        def.pattern = fnOrRegex;\n    }\n    const inst = new Class(def);\n    return inst;\n}\n","import * as core from \"../core/index.js\";\nimport * as schemas from \"./schemas.js\";\nexport const ZodISODateTime = /*@__PURE__*/ core.$constructor(\"ZodISODateTime\", (inst, def) => {\n    core.$ZodISODateTime.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function datetime(params) {\n    return core._isoDateTime(ZodISODateTime, params);\n}\nexport const ZodISODate = /*@__PURE__*/ core.$constructor(\"ZodISODate\", (inst, def) => {\n    core.$ZodISODate.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function date(params) {\n    return core._isoDate(ZodISODate, params);\n}\nexport const ZodISOTime = /*@__PURE__*/ core.$constructor(\"ZodISOTime\", (inst, def) => {\n    core.$ZodISOTime.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function time(params) {\n    return core._isoTime(ZodISOTime, params);\n}\nexport const ZodISODuration = /*@__PURE__*/ core.$constructor(\"ZodISODuration\", (inst, def) => {\n    core.$ZodISODuration.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function duration(params) {\n    return core._isoDuration(ZodISODuration, params);\n}\n","import * as core from \"../core/index.js\";\nimport { $ZodError } from \"../core/index.js\";\nimport * as util from \"../core/util.js\";\nconst initializer = (inst, issues) => {\n    $ZodError.init(inst, issues);\n    inst.name = \"ZodError\";\n    Object.defineProperties(inst, {\n        format: {\n            value: (mapper) => core.formatError(inst, mapper),\n            // enumerable: false,\n        },\n        flatten: {\n            value: (mapper) => core.flattenError(inst, mapper),\n            // enumerable: false,\n        },\n        addIssue: {\n            value: (issue) => {\n                inst.issues.push(issue);\n                inst.message = JSON.stringify(inst.issues, util.jsonStringifyReplacer, 2);\n            },\n            // enumerable: false,\n        },\n        addIssues: {\n            value: (issues) => {\n                inst.issues.push(...issues);\n                inst.message = JSON.stringify(inst.issues, util.jsonStringifyReplacer, 2);\n            },\n            // enumerable: false,\n        },\n        isEmpty: {\n            get() {\n                return inst.issues.length === 0;\n            },\n            // enumerable: false,\n        },\n    });\n    // Object.defineProperty(inst, \"isEmpty\", {\n    //   get() {\n    //     return inst.issues.length === 0;\n    //   },\n    // });\n};\nexport const ZodError = core.$constructor(\"ZodError\", initializer);\nexport const ZodRealError = core.$constructor(\"ZodError\", initializer, {\n    Parent: Error,\n});\n// /** @deprecated Use `z.core.$ZodErrorMapCtx` instead. */\n// export type ErrorMapCtx = core.$ZodErrorMapCtx;\n","import * as core from \"../core/index.js\";\nimport { ZodRealError } from \"./errors.js\";\nexport const parse = /* @__PURE__ */ core._parse(ZodRealError);\nexport const parseAsync = /* @__PURE__ */ core._parseAsync(ZodRealError);\nexport const safeParse = /* @__PURE__ */ core._safeParse(ZodRealError);\nexport const safeParseAsync = /* @__PURE__ */ core._safeParseAsync(ZodRealError);\n// Codec functions\nexport const encode = /* @__PURE__ */ core._encode(ZodRealError);\nexport const decode = /* @__PURE__ */ core._decode(ZodRealError);\nexport const encodeAsync = /* @__PURE__ */ core._encodeAsync(ZodRealError);\nexport const decodeAsync = /* @__PURE__ */ core._decodeAsync(ZodRealError);\nexport const safeEncode = /* @__PURE__ */ core._safeEncode(ZodRealError);\nexport const safeDecode = /* @__PURE__ */ core._safeDecode(ZodRealError);\nexport const safeEncodeAsync = /* @__PURE__ */ core._safeEncodeAsync(ZodRealError);\nexport const safeDecodeAsync = /* @__PURE__ */ core._safeDecodeAsync(ZodRealError);\n","import * as core from \"../core/index.js\";\nimport { util } from \"../core/index.js\";\nimport * as checks from \"./checks.js\";\nimport * as iso from \"./iso.js\";\nimport * as parse from \"./parse.js\";\nexport const ZodType = /*@__PURE__*/ core.$constructor(\"ZodType\", (inst, def) => {\n    core.$ZodType.init(inst, def);\n    inst.def = def;\n    inst.type = def.type;\n    Object.defineProperty(inst, \"_def\", { value: def });\n    // base methods\n    inst.check = (...checks) => {\n        return inst.clone(util.mergeDefs(def, {\n            checks: [\n                ...(def.checks ?? []),\n                ...checks.map((ch) => typeof ch === \"function\" ? { _zod: { check: ch, def: { check: \"custom\" }, onattach: [] } } : ch),\n            ],\n        }));\n    };\n    inst.clone = (def, params) => core.clone(inst, def, params);\n    inst.brand = () => inst;\n    inst.register = ((reg, meta) => {\n        reg.add(inst, meta);\n        return inst;\n    });\n    // parsing\n    inst.parse = (data, params) => parse.parse(inst, data, params, { callee: inst.parse });\n    inst.safeParse = (data, params) => parse.safeParse(inst, data, params);\n    inst.parseAsync = async (data, params) => parse.parseAsync(inst, data, params, { callee: inst.parseAsync });\n    inst.safeParseAsync = async (data, params) => parse.safeParseAsync(inst, data, params);\n    inst.spa = inst.safeParseAsync;\n    // encoding/decoding\n    inst.encode = (data, params) => parse.encode(inst, data, params);\n    inst.decode = (data, params) => parse.decode(inst, data, params);\n    inst.encodeAsync = async (data, params) => parse.encodeAsync(inst, data, params);\n    inst.decodeAsync = async (data, params) => parse.decodeAsync(inst, data, params);\n    inst.safeEncode = (data, params) => parse.safeEncode(inst, data, params);\n    inst.safeDecode = (data, params) => parse.safeDecode(inst, data, params);\n    inst.safeEncodeAsync = async (data, params) => parse.safeEncodeAsync(inst, data, params);\n    inst.safeDecodeAsync = async (data, params) => parse.safeDecodeAsync(inst, data, params);\n    // refinements\n    inst.refine = (check, params) => inst.check(refine(check, params));\n    inst.superRefine = (refinement) => inst.check(superRefine(refinement));\n    inst.overwrite = (fn) => inst.check(checks.overwrite(fn));\n    // wrappers\n    inst.optional = () => optional(inst);\n    inst.nullable = () => nullable(inst);\n    inst.nullish = () => optional(nullable(inst));\n    inst.nonoptional = (params) => nonoptional(inst, params);\n    inst.array = () => array(inst);\n    inst.or = (arg) => union([inst, arg]);\n    inst.and = (arg) => intersection(inst, arg);\n    inst.transform = (tx) => pipe(inst, transform(tx));\n    inst.default = (def) => _default(inst, def);\n    inst.prefault = (def) => prefault(inst, def);\n    // inst.coalesce = (def, params) => coalesce(inst, def, params);\n    inst.catch = (params) => _catch(inst, params);\n    inst.pipe = (target) => pipe(inst, target);\n    inst.readonly = () => readonly(inst);\n    // meta\n    inst.describe = (description) => {\n        const cl = inst.clone();\n        core.globalRegistry.add(cl, { description });\n        return cl;\n    };\n    Object.defineProperty(inst, \"description\", {\n        get() {\n            return core.globalRegistry.get(inst)?.description;\n        },\n        configurable: true,\n    });\n    inst.meta = (...args) => {\n        if (args.length === 0) {\n            return core.globalRegistry.get(inst);\n        }\n        const cl = inst.clone();\n        core.globalRegistry.add(cl, args[0]);\n        return cl;\n    };\n    // helpers\n    inst.isOptional = () => inst.safeParse(undefined).success;\n    inst.isNullable = () => inst.safeParse(null).success;\n    return inst;\n});\n/** @internal */\nexport const _ZodString = /*@__PURE__*/ core.$constructor(\"_ZodString\", (inst, def) => {\n    core.$ZodString.init(inst, def);\n    ZodType.init(inst, def);\n    const bag = inst._zod.bag;\n    inst.format = bag.format ?? null;\n    inst.minLength = bag.minimum ?? null;\n    inst.maxLength = bag.maximum ?? null;\n    // validations\n    inst.regex = (...args) => inst.check(checks.regex(...args));\n    inst.includes = (...args) => inst.check(checks.includes(...args));\n    inst.startsWith = (...args) => inst.check(checks.startsWith(...args));\n    inst.endsWith = (...args) => inst.check(checks.endsWith(...args));\n    inst.min = (...args) => inst.check(checks.minLength(...args));\n    inst.max = (...args) => inst.check(checks.maxLength(...args));\n    inst.length = (...args) => inst.check(checks.length(...args));\n    inst.nonempty = (...args) => inst.check(checks.minLength(1, ...args));\n    inst.lowercase = (params) => inst.check(checks.lowercase(params));\n    inst.uppercase = (params) => inst.check(checks.uppercase(params));\n    // transforms\n    inst.trim = () => inst.check(checks.trim());\n    inst.normalize = (...args) => inst.check(checks.normalize(...args));\n    inst.toLowerCase = () => inst.check(checks.toLowerCase());\n    inst.toUpperCase = () => inst.check(checks.toUpperCase());\n    inst.slugify = () => inst.check(checks.slugify());\n});\nexport const ZodString = /*@__PURE__*/ core.$constructor(\"ZodString\", (inst, def) => {\n    core.$ZodString.init(inst, def);\n    _ZodString.init(inst, def);\n    inst.email = (params) => inst.check(core._email(ZodEmail, params));\n    inst.url = (params) => inst.check(core._url(ZodURL, params));\n    inst.jwt = (params) => inst.check(core._jwt(ZodJWT, params));\n    inst.emoji = (params) => inst.check(core._emoji(ZodEmoji, params));\n    inst.guid = (params) => inst.check(core._guid(ZodGUID, params));\n    inst.uuid = (params) => inst.check(core._uuid(ZodUUID, params));\n    inst.uuidv4 = (params) => inst.check(core._uuidv4(ZodUUID, params));\n    inst.uuidv6 = (params) => inst.check(core._uuidv6(ZodUUID, params));\n    inst.uuidv7 = (params) => inst.check(core._uuidv7(ZodUUID, params));\n    inst.nanoid = (params) => inst.check(core._nanoid(ZodNanoID, params));\n    inst.guid = (params) => inst.check(core._guid(ZodGUID, params));\n    inst.cuid = (params) => inst.check(core._cuid(ZodCUID, params));\n    inst.cuid2 = (params) => inst.check(core._cuid2(ZodCUID2, params));\n    inst.ulid = (params) => inst.check(core._ulid(ZodULID, params));\n    inst.base64 = (params) => inst.check(core._base64(ZodBase64, params));\n    inst.base64url = (params) => inst.check(core._base64url(ZodBase64URL, params));\n    inst.xid = (params) => inst.check(core._xid(ZodXID, params));\n    inst.ksuid = (params) => inst.check(core._ksuid(ZodKSUID, params));\n    inst.ipv4 = (params) => inst.check(core._ipv4(ZodIPv4, params));\n    inst.ipv6 = (params) => inst.check(core._ipv6(ZodIPv6, params));\n    inst.cidrv4 = (params) => inst.check(core._cidrv4(ZodCIDRv4, params));\n    inst.cidrv6 = (params) => inst.check(core._cidrv6(ZodCIDRv6, params));\n    inst.e164 = (params) => inst.check(core._e164(ZodE164, params));\n    // iso\n    inst.datetime = (params) => inst.check(iso.datetime(params));\n    inst.date = (params) => inst.check(iso.date(params));\n    inst.time = (params) => inst.check(iso.time(params));\n    inst.duration = (params) => inst.check(iso.duration(params));\n});\nexport function string(params) {\n    return core._string(ZodString, params);\n}\nexport const ZodStringFormat = /*@__PURE__*/ core.$constructor(\"ZodStringFormat\", (inst, def) => {\n    core.$ZodStringFormat.init(inst, def);\n    _ZodString.init(inst, def);\n});\nexport const ZodEmail = /*@__PURE__*/ core.$constructor(\"ZodEmail\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodEmail.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function email(params) {\n    return core._email(ZodEmail, params);\n}\nexport const ZodGUID = /*@__PURE__*/ core.$constructor(\"ZodGUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodGUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function guid(params) {\n    return core._guid(ZodGUID, params);\n}\nexport const ZodUUID = /*@__PURE__*/ core.$constructor(\"ZodUUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodUUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function uuid(params) {\n    return core._uuid(ZodUUID, params);\n}\nexport function uuidv4(params) {\n    return core._uuidv4(ZodUUID, params);\n}\n// ZodUUIDv6\nexport function uuidv6(params) {\n    return core._uuidv6(ZodUUID, params);\n}\n// ZodUUIDv7\nexport function uuidv7(params) {\n    return core._uuidv7(ZodUUID, params);\n}\nexport const ZodURL = /*@__PURE__*/ core.$constructor(\"ZodURL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodURL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function url(params) {\n    return core._url(ZodURL, params);\n}\nexport function httpUrl(params) {\n    return core._url(ZodURL, {\n        protocol: /^https?$/,\n        hostname: core.regexes.domain,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodEmoji = /*@__PURE__*/ core.$constructor(\"ZodEmoji\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodEmoji.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function emoji(params) {\n    return core._emoji(ZodEmoji, params);\n}\nexport const ZodNanoID = /*@__PURE__*/ core.$constructor(\"ZodNanoID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodNanoID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function nanoid(params) {\n    return core._nanoid(ZodNanoID, params);\n}\nexport const ZodCUID = /*@__PURE__*/ core.$constructor(\"ZodCUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cuid(params) {\n    return core._cuid(ZodCUID, params);\n}\nexport const ZodCUID2 = /*@__PURE__*/ core.$constructor(\"ZodCUID2\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCUID2.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cuid2(params) {\n    return core._cuid2(ZodCUID2, params);\n}\nexport const ZodULID = /*@__PURE__*/ core.$constructor(\"ZodULID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodULID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ulid(params) {\n    return core._ulid(ZodULID, params);\n}\nexport const ZodXID = /*@__PURE__*/ core.$constructor(\"ZodXID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodXID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function xid(params) {\n    return core._xid(ZodXID, params);\n}\nexport const ZodKSUID = /*@__PURE__*/ core.$constructor(\"ZodKSUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodKSUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ksuid(params) {\n    return core._ksuid(ZodKSUID, params);\n}\nexport const ZodIPv4 = /*@__PURE__*/ core.$constructor(\"ZodIPv4\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodIPv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ipv4(params) {\n    return core._ipv4(ZodIPv4, params);\n}\nexport const ZodMAC = /*@__PURE__*/ core.$constructor(\"ZodMAC\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodMAC.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function mac(params) {\n    return core._mac(ZodMAC, params);\n}\nexport const ZodIPv6 = /*@__PURE__*/ core.$constructor(\"ZodIPv6\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodIPv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ipv6(params) {\n    return core._ipv6(ZodIPv6, params);\n}\nexport const ZodCIDRv4 = /*@__PURE__*/ core.$constructor(\"ZodCIDRv4\", (inst, def) => {\n    core.$ZodCIDRv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cidrv4(params) {\n    return core._cidrv4(ZodCIDRv4, params);\n}\nexport const ZodCIDRv6 = /*@__PURE__*/ core.$constructor(\"ZodCIDRv6\", (inst, def) => {\n    core.$ZodCIDRv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cidrv6(params) {\n    return core._cidrv6(ZodCIDRv6, params);\n}\nexport const ZodBase64 = /*@__PURE__*/ core.$constructor(\"ZodBase64\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodBase64.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function base64(params) {\n    return core._base64(ZodBase64, params);\n}\nexport const ZodBase64URL = /*@__PURE__*/ core.$constructor(\"ZodBase64URL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodBase64URL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function base64url(params) {\n    return core._base64url(ZodBase64URL, params);\n}\nexport const ZodE164 = /*@__PURE__*/ core.$constructor(\"ZodE164\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodE164.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function e164(params) {\n    return core._e164(ZodE164, params);\n}\nexport const ZodJWT = /*@__PURE__*/ core.$constructor(\"ZodJWT\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodJWT.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function jwt(params) {\n    return core._jwt(ZodJWT, params);\n}\nexport const ZodCustomStringFormat = /*@__PURE__*/ core.$constructor(\"ZodCustomStringFormat\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCustomStringFormat.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function stringFormat(format, fnOrRegex, _params = {}) {\n    return core._stringFormat(ZodCustomStringFormat, format, fnOrRegex, _params);\n}\nexport function hostname(_params) {\n    return core._stringFormat(ZodCustomStringFormat, \"hostname\", core.regexes.hostname, _params);\n}\nexport function hex(_params) {\n    return core._stringFormat(ZodCustomStringFormat, \"hex\", core.regexes.hex, _params);\n}\nexport function hash(alg, params) {\n    const enc = params?.enc ?? \"hex\";\n    const format = `${alg}_${enc}`;\n    const regex = core.regexes[format];\n    if (!regex)\n        throw new Error(`Unrecognized hash format: ${format}`);\n    return core._stringFormat(ZodCustomStringFormat, format, regex, params);\n}\nexport const ZodNumber = /*@__PURE__*/ core.$constructor(\"ZodNumber\", (inst, def) => {\n    core.$ZodNumber.init(inst, def);\n    ZodType.init(inst, def);\n    inst.gt = (value, params) => inst.check(checks.gt(value, params));\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.lt = (value, params) => inst.check(checks.lt(value, params));\n    inst.lte = (value, params) => inst.check(checks.lte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    inst.int = (params) => inst.check(int(params));\n    inst.safe = (params) => inst.check(int(params));\n    inst.positive = (params) => inst.check(checks.gt(0, params));\n    inst.nonnegative = (params) => inst.check(checks.gte(0, params));\n    inst.negative = (params) => inst.check(checks.lt(0, params));\n    inst.nonpositive = (params) => inst.check(checks.lte(0, params));\n    inst.multipleOf = (value, params) => inst.check(checks.multipleOf(value, params));\n    inst.step = (value, params) => inst.check(checks.multipleOf(value, params));\n    // inst.finite = (params) => inst.check(core.finite(params));\n    inst.finite = () => inst;\n    const bag = inst._zod.bag;\n    inst.minValue =\n        Math.max(bag.minimum ?? Number.NEGATIVE_INFINITY, bag.exclusiveMinimum ?? Number.NEGATIVE_INFINITY) ?? null;\n    inst.maxValue =\n        Math.min(bag.maximum ?? Number.POSITIVE_INFINITY, bag.exclusiveMaximum ?? Number.POSITIVE_INFINITY) ?? null;\n    inst.isInt = (bag.format ?? \"\").includes(\"int\") || Number.isSafeInteger(bag.multipleOf ?? 0.5);\n    inst.isFinite = true;\n    inst.format = bag.format ?? null;\n});\nexport function number(params) {\n    return core._number(ZodNumber, params);\n}\nexport const ZodNumberFormat = /*@__PURE__*/ core.$constructor(\"ZodNumberFormat\", (inst, def) => {\n    core.$ZodNumberFormat.init(inst, def);\n    ZodNumber.init(inst, def);\n});\nexport function int(params) {\n    return core._int(ZodNumberFormat, params);\n}\nexport function float32(params) {\n    return core._float32(ZodNumberFormat, params);\n}\nexport function float64(params) {\n    return core._float64(ZodNumberFormat, params);\n}\nexport function int32(params) {\n    return core._int32(ZodNumberFormat, params);\n}\nexport function uint32(params) {\n    return core._uint32(ZodNumberFormat, params);\n}\nexport const ZodBoolean = /*@__PURE__*/ core.$constructor(\"ZodBoolean\", (inst, def) => {\n    core.$ZodBoolean.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function boolean(params) {\n    return core._boolean(ZodBoolean, params);\n}\nexport const ZodBigInt = /*@__PURE__*/ core.$constructor(\"ZodBigInt\", (inst, def) => {\n    core.$ZodBigInt.init(inst, def);\n    ZodType.init(inst, def);\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.gt = (value, params) => inst.check(checks.gt(value, params));\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.lt = (value, params) => inst.check(checks.lt(value, params));\n    inst.lte = (value, params) => inst.check(checks.lte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    inst.positive = (params) => inst.check(checks.gt(BigInt(0), params));\n    inst.negative = (params) => inst.check(checks.lt(BigInt(0), params));\n    inst.nonpositive = (params) => inst.check(checks.lte(BigInt(0), params));\n    inst.nonnegative = (params) => inst.check(checks.gte(BigInt(0), params));\n    inst.multipleOf = (value, params) => inst.check(checks.multipleOf(value, params));\n    const bag = inst._zod.bag;\n    inst.minValue = bag.minimum ?? null;\n    inst.maxValue = bag.maximum ?? null;\n    inst.format = bag.format ?? null;\n});\nexport function bigint(params) {\n    return core._bigint(ZodBigInt, params);\n}\nexport const ZodBigIntFormat = /*@__PURE__*/ core.$constructor(\"ZodBigIntFormat\", (inst, def) => {\n    core.$ZodBigIntFormat.init(inst, def);\n    ZodBigInt.init(inst, def);\n});\n// int64\nexport function int64(params) {\n    return core._int64(ZodBigIntFormat, params);\n}\n// uint64\nexport function uint64(params) {\n    return core._uint64(ZodBigIntFormat, params);\n}\nexport const ZodSymbol = /*@__PURE__*/ core.$constructor(\"ZodSymbol\", (inst, def) => {\n    core.$ZodSymbol.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function symbol(params) {\n    return core._symbol(ZodSymbol, params);\n}\nexport const ZodUndefined = /*@__PURE__*/ core.$constructor(\"ZodUndefined\", (inst, def) => {\n    core.$ZodUndefined.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _undefined(params) {\n    return core._undefined(ZodUndefined, params);\n}\nexport { _undefined as undefined };\nexport const ZodNull = /*@__PURE__*/ core.$constructor(\"ZodNull\", (inst, def) => {\n    core.$ZodNull.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _null(params) {\n    return core._null(ZodNull, params);\n}\nexport { _null as null };\nexport const ZodAny = /*@__PURE__*/ core.$constructor(\"ZodAny\", (inst, def) => {\n    core.$ZodAny.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function any() {\n    return core._any(ZodAny);\n}\nexport const ZodUnknown = /*@__PURE__*/ core.$constructor(\"ZodUnknown\", (inst, def) => {\n    core.$ZodUnknown.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function unknown() {\n    return core._unknown(ZodUnknown);\n}\nexport const ZodNever = /*@__PURE__*/ core.$constructor(\"ZodNever\", (inst, def) => {\n    core.$ZodNever.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function never(params) {\n    return core._never(ZodNever, params);\n}\nexport const ZodVoid = /*@__PURE__*/ core.$constructor(\"ZodVoid\", (inst, def) => {\n    core.$ZodVoid.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _void(params) {\n    return core._void(ZodVoid, params);\n}\nexport { _void as void };\nexport const ZodDate = /*@__PURE__*/ core.$constructor(\"ZodDate\", (inst, def) => {\n    core.$ZodDate.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    const c = inst._zod.bag;\n    inst.minDate = c.minimum ? new Date(c.minimum) : null;\n    inst.maxDate = c.maximum ? new Date(c.maximum) : null;\n});\nexport function date(params) {\n    return core._date(ZodDate, params);\n}\nexport const ZodArray = /*@__PURE__*/ core.$constructor(\"ZodArray\", (inst, def) => {\n    core.$ZodArray.init(inst, def);\n    ZodType.init(inst, def);\n    inst.element = def.element;\n    inst.min = (minLength, params) => inst.check(checks.minLength(minLength, params));\n    inst.nonempty = (params) => inst.check(checks.minLength(1, params));\n    inst.max = (maxLength, params) => inst.check(checks.maxLength(maxLength, params));\n    inst.length = (len, params) => inst.check(checks.length(len, params));\n    inst.unwrap = () => inst.element;\n});\nexport function array(element, params) {\n    return core._array(ZodArray, element, params);\n}\n// .keyof\nexport function keyof(schema) {\n    const shape = schema._zod.def.shape;\n    return _enum(Object.keys(shape));\n}\nexport const ZodObject = /*@__PURE__*/ core.$constructor(\"ZodObject\", (inst, def) => {\n    core.$ZodObjectJIT.init(inst, def);\n    ZodType.init(inst, def);\n    util.defineLazy(inst, \"shape\", () => {\n        return def.shape;\n    });\n    inst.keyof = () => _enum(Object.keys(inst._zod.def.shape));\n    inst.catchall = (catchall) => inst.clone({ ...inst._zod.def, catchall: catchall });\n    inst.passthrough = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    inst.loose = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    inst.strict = () => inst.clone({ ...inst._zod.def, catchall: never() });\n    inst.strip = () => inst.clone({ ...inst._zod.def, catchall: undefined });\n    inst.extend = (incoming) => {\n        return util.extend(inst, incoming);\n    };\n    inst.safeExtend = (incoming) => {\n        return util.safeExtend(inst, incoming);\n    };\n    inst.merge = (other) => util.merge(inst, other);\n    inst.pick = (mask) => util.pick(inst, mask);\n    inst.omit = (mask) => util.omit(inst, mask);\n    inst.partial = (...args) => util.partial(ZodOptional, inst, args[0]);\n    inst.required = (...args) => util.required(ZodNonOptional, inst, args[0]);\n});\nexport function object(shape, params) {\n    const def = {\n        type: \"object\",\n        shape: shape ?? {},\n        ...util.normalizeParams(params),\n    };\n    return new ZodObject(def);\n}\n// strictObject\nexport function strictObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        shape,\n        catchall: never(),\n        ...util.normalizeParams(params),\n    });\n}\n// looseObject\nexport function looseObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        shape,\n        catchall: unknown(),\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodUnion = /*@__PURE__*/ core.$constructor(\"ZodUnion\", (inst, def) => {\n    core.$ZodUnion.init(inst, def);\n    ZodType.init(inst, def);\n    inst.options = def.options;\n});\nexport function union(options, params) {\n    return new ZodUnion({\n        type: \"union\",\n        options: options,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodDiscriminatedUnion = /*@__PURE__*/ core.$constructor(\"ZodDiscriminatedUnion\", (inst, def) => {\n    ZodUnion.init(inst, def);\n    core.$ZodDiscriminatedUnion.init(inst, def);\n});\nexport function discriminatedUnion(discriminator, options, params) {\n    // const [options, params] = args;\n    return new ZodDiscriminatedUnion({\n        type: \"union\",\n        options,\n        discriminator,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodIntersection = /*@__PURE__*/ core.$constructor(\"ZodIntersection\", (inst, def) => {\n    core.$ZodIntersection.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function intersection(left, right) {\n    return new ZodIntersection({\n        type: \"intersection\",\n        left: left,\n        right: right,\n    });\n}\nexport const ZodTuple = /*@__PURE__*/ core.$constructor(\"ZodTuple\", (inst, def) => {\n    core.$ZodTuple.init(inst, def);\n    ZodType.init(inst, def);\n    inst.rest = (rest) => inst.clone({\n        ...inst._zod.def,\n        rest: rest,\n    });\n});\nexport function tuple(items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof core.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new ZodTuple({\n        type: \"tuple\",\n        items: items,\n        rest,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodRecord = /*@__PURE__*/ core.$constructor(\"ZodRecord\", (inst, def) => {\n    core.$ZodRecord.init(inst, def);\n    ZodType.init(inst, def);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n});\nexport function record(keyType, valueType, params) {\n    return new ZodRecord({\n        type: \"record\",\n        keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\n// type alksjf = core.output<core.$ZodRecordKey>;\nexport function partialRecord(keyType, valueType, params) {\n    const k = core.clone(keyType);\n    k._zod.values = undefined;\n    return new ZodRecord({\n        type: \"record\",\n        keyType: k,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodMap = /*@__PURE__*/ core.$constructor(\"ZodMap\", (inst, def) => {\n    core.$ZodMap.init(inst, def);\n    ZodType.init(inst, def);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n});\nexport function map(keyType, valueType, params) {\n    return new ZodMap({\n        type: \"map\",\n        keyType: keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodSet = /*@__PURE__*/ core.$constructor(\"ZodSet\", (inst, def) => {\n    core.$ZodSet.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (...args) => inst.check(core._minSize(...args));\n    inst.nonempty = (params) => inst.check(core._minSize(1, params));\n    inst.max = (...args) => inst.check(core._maxSize(...args));\n    inst.size = (...args) => inst.check(core._size(...args));\n});\nexport function set(valueType, params) {\n    return new ZodSet({\n        type: \"set\",\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodEnum = /*@__PURE__*/ core.$constructor(\"ZodEnum\", (inst, def) => {\n    core.$ZodEnum.init(inst, def);\n    ZodType.init(inst, def);\n    inst.enum = def.entries;\n    inst.options = Object.values(def.entries);\n    const keys = new Set(Object.keys(def.entries));\n    inst.extract = (values, params) => {\n        const newEntries = {};\n        for (const value of values) {\n            if (keys.has(value)) {\n                newEntries[value] = def.entries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ...util.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n    inst.exclude = (values, params) => {\n        const newEntries = { ...def.entries };\n        for (const value of values) {\n            if (keys.has(value)) {\n                delete newEntries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ...util.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n});\nfunction _enum(values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport { _enum as enum };\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nexport function nativeEnum(entries, params) {\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodLiteral = /*@__PURE__*/ core.$constructor(\"ZodLiteral\", (inst, def) => {\n    core.$ZodLiteral.init(inst, def);\n    ZodType.init(inst, def);\n    inst.values = new Set(def.values);\n    Object.defineProperty(inst, \"value\", {\n        get() {\n            if (def.values.length > 1) {\n                throw new Error(\"This schema contains multiple valid literal values. Use `.values` instead.\");\n            }\n            return def.values[0];\n        },\n    });\n});\nexport function literal(value, params) {\n    return new ZodLiteral({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodFile = /*@__PURE__*/ core.$constructor(\"ZodFile\", (inst, def) => {\n    core.$ZodFile.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (size, params) => inst.check(core._minSize(size, params));\n    inst.max = (size, params) => inst.check(core._maxSize(size, params));\n    inst.mime = (types, params) => inst.check(core._mime(Array.isArray(types) ? types : [types], params));\n});\nexport function file(params) {\n    return core._file(ZodFile, params);\n}\nexport const ZodTransform = /*@__PURE__*/ core.$constructor(\"ZodTransform\", (inst, def) => {\n    core.$ZodTransform.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (_ctx.direction === \"backward\") {\n            throw new core.$ZodEncodeError(inst.constructor.name);\n        }\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(util.issue(issue, payload.value, def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = inst);\n                // _issue.continue ??= true;\n                payload.issues.push(util.issue(_issue));\n            }\n        };\n        const output = def.transform(payload.value, payload);\n        if (output instanceof Promise) {\n            return output.then((output) => {\n                payload.value = output;\n                return payload;\n            });\n        }\n        payload.value = output;\n        return payload;\n    };\n});\nexport function transform(fn) {\n    return new ZodTransform({\n        type: \"transform\",\n        transform: fn,\n    });\n}\nexport const ZodOptional = /*@__PURE__*/ core.$constructor(\"ZodOptional\", (inst, def) => {\n    core.$ZodOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function optional(innerType) {\n    return new ZodOptional({\n        type: \"optional\",\n        innerType: innerType,\n    });\n}\nexport const ZodNullable = /*@__PURE__*/ core.$constructor(\"ZodNullable\", (inst, def) => {\n    core.$ZodNullable.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function nullable(innerType) {\n    return new ZodNullable({\n        type: \"nullable\",\n        innerType: innerType,\n    });\n}\n// nullish\nexport function nullish(innerType) {\n    return optional(nullable(innerType));\n}\nexport const ZodDefault = /*@__PURE__*/ core.$constructor(\"ZodDefault\", (inst, def) => {\n    core.$ZodDefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeDefault = inst.unwrap;\n});\nexport function _default(innerType, defaultValue) {\n    return new ZodDefault({\n        type: \"default\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : util.shallowClone(defaultValue);\n        },\n    });\n}\nexport const ZodPrefault = /*@__PURE__*/ core.$constructor(\"ZodPrefault\", (inst, def) => {\n    core.$ZodPrefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function prefault(innerType, defaultValue) {\n    return new ZodPrefault({\n        type: \"prefault\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : util.shallowClone(defaultValue);\n        },\n    });\n}\nexport const ZodNonOptional = /*@__PURE__*/ core.$constructor(\"ZodNonOptional\", (inst, def) => {\n    core.$ZodNonOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function nonoptional(innerType, params) {\n    return new ZodNonOptional({\n        type: \"nonoptional\",\n        innerType: innerType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodSuccess = /*@__PURE__*/ core.$constructor(\"ZodSuccess\", (inst, def) => {\n    core.$ZodSuccess.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function success(innerType) {\n    return new ZodSuccess({\n        type: \"success\",\n        innerType: innerType,\n    });\n}\nexport const ZodCatch = /*@__PURE__*/ core.$constructor(\"ZodCatch\", (inst, def) => {\n    core.$ZodCatch.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeCatch = inst.unwrap;\n});\nfunction _catch(innerType, catchValue) {\n    return new ZodCatch({\n        type: \"catch\",\n        innerType: innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\nexport { _catch as catch };\nexport const ZodNaN = /*@__PURE__*/ core.$constructor(\"ZodNaN\", (inst, def) => {\n    core.$ZodNaN.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function nan(params) {\n    return core._nan(ZodNaN, params);\n}\nexport const ZodPipe = /*@__PURE__*/ core.$constructor(\"ZodPipe\", (inst, def) => {\n    core.$ZodPipe.init(inst, def);\n    ZodType.init(inst, def);\n    inst.in = def.in;\n    inst.out = def.out;\n});\nexport function pipe(in_, out) {\n    return new ZodPipe({\n        type: \"pipe\",\n        in: in_,\n        out: out,\n        // ...util.normalizeParams(params),\n    });\n}\nexport const ZodCodec = /*@__PURE__*/ core.$constructor(\"ZodCodec\", (inst, def) => {\n    ZodPipe.init(inst, def);\n    core.$ZodCodec.init(inst, def);\n});\nexport function codec(in_, out, params) {\n    return new ZodCodec({\n        type: \"pipe\",\n        in: in_,\n        out: out,\n        transform: params.decode,\n        reverseTransform: params.encode,\n    });\n}\nexport const ZodReadonly = /*@__PURE__*/ core.$constructor(\"ZodReadonly\", (inst, def) => {\n    core.$ZodReadonly.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function readonly(innerType) {\n    return new ZodReadonly({\n        type: \"readonly\",\n        innerType: innerType,\n    });\n}\nexport const ZodTemplateLiteral = /*@__PURE__*/ core.$constructor(\"ZodTemplateLiteral\", (inst, def) => {\n    core.$ZodTemplateLiteral.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function templateLiteral(parts, params) {\n    return new ZodTemplateLiteral({\n        type: \"template_literal\",\n        parts,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodLazy = /*@__PURE__*/ core.$constructor(\"ZodLazy\", (inst, def) => {\n    core.$ZodLazy.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.getter();\n});\nexport function lazy(getter) {\n    return new ZodLazy({\n        type: \"lazy\",\n        getter: getter,\n    });\n}\nexport const ZodPromise = /*@__PURE__*/ core.$constructor(\"ZodPromise\", (inst, def) => {\n    core.$ZodPromise.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function promise(innerType) {\n    return new ZodPromise({\n        type: \"promise\",\n        innerType: innerType,\n    });\n}\nexport const ZodFunction = /*@__PURE__*/ core.$constructor(\"ZodFunction\", (inst, def) => {\n    core.$ZodFunction.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function _function(params) {\n    return new ZodFunction({\n        type: \"function\",\n        input: Array.isArray(params?.input) ? tuple(params?.input) : (params?.input ?? array(unknown())),\n        output: params?.output ?? unknown(),\n    });\n}\nexport { _function as function };\nexport const ZodCustom = /*@__PURE__*/ core.$constructor(\"ZodCustom\", (inst, def) => {\n    core.$ZodCustom.init(inst, def);\n    ZodType.init(inst, def);\n});\n// custom checks\nexport function check(fn) {\n    const ch = new core.$ZodCheck({\n        check: \"custom\",\n        // ...util.normalizeParams(params),\n    });\n    ch._zod.check = fn;\n    return ch;\n}\nexport function custom(fn, _params) {\n    return core._custom(ZodCustom, fn ?? (() => true), _params);\n}\nexport function refine(fn, _params = {}) {\n    return core._refine(ZodCustom, fn, _params);\n}\n// superRefine\nexport function superRefine(fn) {\n    return core._superRefine(fn);\n}\n// Re-export describe and meta from core\nexport const describe = core.describe;\nexport const meta = core.meta;\nfunction _instanceof(cls, params = {\n    error: `Input not instance of ${cls.name}`,\n}) {\n    const inst = new ZodCustom({\n        type: \"custom\",\n        check: \"custom\",\n        fn: (data) => data instanceof cls,\n        abort: true,\n        ...util.normalizeParams(params),\n    });\n    inst._zod.bag.Class = cls;\n    return inst;\n}\nexport { _instanceof as instanceof };\n// stringbool\nexport const stringbool = (...args) => core._stringbool({\n    Codec: ZodCodec,\n    Boolean: ZodBoolean,\n    String: ZodString,\n}, ...args);\nexport function json(params) {\n    const jsonSchema = lazy(() => {\n        return union([string(params), number(), boolean(), _null(), array(jsonSchema), record(string(), jsonSchema)]);\n    });\n    return jsonSchema;\n}\n// preprocess\n// /** @deprecated Use `z.pipe()` and `z.transform()` instead. */\nexport function preprocess(fn, schema) {\n    return pipe(transform(fn), schema);\n}\n","/**\n * Unified Vocabulary Schema - Comprehensive schema for German-Bulgarian vocabulary\n * with support for all legacy data formats and enhanced metadata\n */\n\nimport { z } from 'zod';\n\n// ======================\n// Enumerated Types\n// ======================\n\n/**\n * Parts of speech for vocabulary items\n */\nexport const PartOfSpeechSchema = z.enum([\n  'noun',        // Noun (e.g., \"Haus\", \"\")\n  'verb',        // Verb (e.g., \"gehen\", \"\")\n  'adjective',   // Adjective (e.g., \"gro\", \"\")\n  'adverb',      // Adverb (e.g., \"schnell\", \"\")\n  'pronoun',     // Pronoun (e.g., \"ich\", \"\")\n  'preposition', // Preposition (e.g., \"in\", \"\")\n  'conjunction', // Conjunction (e.g., \"und\", \"\")\n  'interjection', // Interjection (e.g., \"ah\", \"\")\n  'article',     // Article (e.g., \"der\", \"the\")\n  'number',      // Number (e.g., \"eins\", \"\")\n  'phrase',      // Common phrase (e.g., \"Wie geht's?\", \" ?\")\n  'expression'   // Idiomatic expression\n]);\n\nexport type PartOfSpeech = z.infer<typeof PartOfSpeechSchema>;\n\n/**\n * Standardized vocabulary categories\n */\nexport const VocabularyCategorySchema = z.enum([\n  'greetings',\n  'numbers',\n  'family',\n  'food',\n  'colors',\n  'animals',\n  'body-parts',\n  'clothing',\n  'home',\n  'nature',\n  'transport',\n  'technology',\n  'time',\n  'weather',\n  'professions',\n  'places',\n  'grammar',\n  'culture',\n  'everyday-phrases'\n]);\n\nexport type VocabularyCategory = z.infer<typeof VocabularyCategorySchema>;\n\n/**\n * CEFR language levels\n */\nexport const LanguageLevelSchema = z.enum([\n  'A1',  // Beginner\n  'A2',  // Elementary\n  'B1',  // Intermediate\n  'B2',  // Upper Intermediate\n  'C1'   // Advanced\n]);\n\nexport type LanguageLevel = z.infer<typeof LanguageLevelSchema>;\n\n/**\n * Verb aspects\n */\nexport const VerbAspectSchema = z.union([\n  z.literal('perfective'),    // Completed action\n  z.literal('imperfective'),  // Ongoing or habitual action\n  z.literal(null)             // Not applicable\n]);\n\nexport type VerbAspect = z.infer<typeof VerbAspectSchema>;\n\n/**\n * Noun genders\n */\nexport const NounGenderSchema = z.enum([\n  'masculine',\n  'feminine',\n  'neuter'\n]);\n\nexport type NounGender = z.infer<typeof NounGenderSchema>;\n\n// ======================\n// Complex Types\n// ======================\n\n/**\n * Transliteration schema for pronunciation guides\n */\nexport const TransliterationSchema = z.object({\n  german: z.string().optional().describe('Latin transcription for German pronunciation'),\n  bulgarian: z.string().optional().describe('Latin transcription for Bulgarian pronunciation')\n});\n\n/**\n * Audio resources schema\n */\nexport const AudioSchema = z.object({\n  german: z.string().url().optional().describe('URL for German pronunciation audio'),\n  bulgarian: z.string().url().optional().describe('URL for Bulgarian pronunciation audio')\n});\n\n/**\n * Grammar details schema\n */\nexport const GrammarSchema = z.object({\n  gender: NounGenderSchema.optional().describe('Noun gender (masculine, feminine, neuter)'),\n  pluralForm: z.string().optional().describe('Plural form of the word'),\n  verbAspect: VerbAspectSchema.optional().describe('Verb aspect (perfective/imperfective)'),\n  verbPartnerId: z.string().optional().describe('ID of the aspectual partner verb'),\n  conjugation: z.record(z.string(), z.string()).optional().describe('Verb conjugations by person/tense')\n});\n\n/**\n * Enrichment metadata from external dictionary sources (e.g., Langenscheidt)\n */\nexport const EnrichmentSchema = z.object({\n  enriched: z.boolean().optional().describe('Indicates item has been enriched'),\n  confidence: z.number().min(0).max(1).optional().describe('Confidence score for enrichment match'),\n  sourceURL: z.string().url().optional().describe('Primary dictionary URL for the enrichment'),\n  enrichedAt: z.string().datetime().optional().describe('ISO timestamp of enrichment run'),\n  source: z.string().optional().describe('Source label for enrichment run')\n}).partial();\n\n/**\n * External dictionary definition links (deduplicated by URL)\n */\nexport const DefinitionLinkSchema = z.object({\n  source: z.string().optional().describe('Dictionary source identifier (e.g., langenscheidt, duden)'),\n  url: z.string().url().describe('Absolute URL to external definition'),\n  confidence: z.number().min(0).max(1).optional().describe('Confidence score for this link'),\n  language: z.string().optional().describe('Language pair or locale for the definition')\n});\n\n/**\n * Example schema\n */\nexport const ExampleSchema = z.object({\n  german: z.string().describe('German example sentence'),\n  bulgarian: z.string().describe('Bulgarian example sentence'),\n  context: z.string().optional().describe('Context description for the example'),\n  source: z.enum(['current', 'legacy', 'merged', 'generated']).default('merged').describe('Source of the example')\n});\n\n/**\n * Notes schema with direction-specific content\n */\nexport const NotesSchema = z.object({\n  general: z.string().optional().describe('General notes about the word/phrase'),\n  forBulgarianSpeakers: z.string().optional().describe('Notes for Bulgarian speakers learning German'),\n  forGermanSpeakers: z.string().optional().describe('Notes for German speakers learning Bulgarian'),\n  linguistic: z.string().optional().describe('Linguistic observations'),\n  linguisticForBulgarians: z.string().optional().describe('Linguistic notes for Bulgarian speakers'),\n  linguisticForGermans: z.string().optional().describe('Linguistic notes for German speakers'),\n  source: z.enum(['current', 'legacy', 'merged', 'generated']).default('merged').describe('Source of the notes')\n});\n\n/**\n * Metadata schema for additional information\n */\nexport const VocabularyMetadataSchema = z.object({\n  frequency: z.number().min(1).max(100).optional().describe('Frequency rating (1-100)'),\n  level: LanguageLevelSchema.optional().describe('CEFR language level (A1, A2, B1, B2, C1)'),\n  isCommon: z.boolean().default(false).describe('Whether the word is common'),\n  isVerified: z.boolean().default(false).describe('Whether the item has been verified'),\n  learningPhase: z.number().min(0).max(6).optional().describe('SRS learning phase (0-6)'),\n  xpValue: z.number().min(1).max(100).optional().describe('Experience points value'),\n  components: z.array(z.object({\n    part: z.string(),\n    meaning: z.string()\n  })).optional().describe('Word components for compound words'),\n  notes: z.string().optional().describe('General notes about the item'),\n  mnemonic: z.string().optional().describe('Memory aid or mnemonic device'),\n  etymology: z.string().optional().describe('Word origin and etymology'),\n  culturalNote: z.string().optional().describe('Cultural context or usage notes'),\n  sourceFiles: z.array(z.string()).optional().describe('Source files where this item appeared'),\n  mergeSources: z.array(z.string()).optional().describe('IDs of items merged into this one'),\n  createdBy: z.string().optional().describe('Creator of the item'),\n  lastUpdatedBy: z.string().optional().describe('Last person to update the item'),\n  declension: z.record(\n    z.string(), // case name (e.g., 'Nominative', 'Accusative')\n    z.object({\n      singular: z.string().optional(),\n      plural: z.string().optional()\n    })\n  ).optional().describe('Declension table for nouns: case -> {singular, plural}'),\n  links: z.array(z.object({\n    label: z.string().describe('Link label (e.g., \"DWDS\", \"Duden\")'),\n    url: z.string().url().describe('Absolute URL to external dictionary')\n  })).optional().describe('External dictionary links')\n});\n\n// ======================\n// Main Schema\n// ======================\n\n/**\n * Unified Vocabulary Item Schema\n */\nexport const UnifiedVocabularyItemSchema = z.object({\n  id: z.string().describe('Unique identifier for the vocabulary item'),\n  german: z.string().min(1).max(200).describe('German word or phrase'),\n  bulgarian: z.string().min(1).max(200).describe('Bulgarian word or phrase'),\n  partOfSpeech: PartOfSpeechSchema.describe('Part of speech classification'),\n  difficulty: z.number().min(1).max(5).describe('Difficulty level (1-5, 1=easiest)'),\n  cefrLevel: LanguageLevelSchema.optional().describe('CEFR proficiency level (A1/A2/B1/B2/C1)'),\n  categories: z.array(VocabularyCategorySchema).min(1).describe('Categories the item belongs to'),\n  transliteration: TransliterationSchema.optional().describe('Pronunciation guides in Latin script'),\n  emoji: z.string().emoji().optional().describe('Emoji representation of the word'),\n  literalBreakdown: z.array(z.object({\n    segment: z.string(),\n    literal: z.string(),\n    grammarTag: z.string()\n  })).optional().describe('Breakdown of compound words/grammar for learning'),\n  audio: AudioSchema.optional().describe('Audio resources for pronunciation'),\n  grammar: GrammarSchema.optional().describe('Grammar details and properties'),\n  examples: z.array(ExampleSchema).default([]).describe('Usage examples'),\n  notes: NotesSchema.optional().describe('Comprehensive notes about the item'),\n  etymology: z.string().optional().describe('Word origin and etymology'),\n  culturalNotes: z.array(z.string()).optional().describe('Cultural context notes'),\n  mnemonics: z.array(z.string()).optional().describe('Memory aids and techniques'),\n  synonyms: z.array(z.string()).optional().describe('Synonyms for this word/phrase'),\n  antonyms: z.array(z.string()).optional().describe('Antonyms for this word/phrase'),\n  relatedWords: z.array(z.string()).optional().describe('Related words or phrases'),\n  type: z.enum(['word', 'rule', 'phrase']).optional().default('word').describe('Type of vocabulary entry'),\n  tags: z.array(z.string()).optional().describe('Custom tags for filtering and organization'),\n  level: LanguageLevelSchema.optional().describe('CEFR language level (direct accessor, mirrors cefrLevel)'),\n  xp_value: z.number().min(1).max(100).optional().describe('Experience points value (direct accessor, mirrors metadata.xpValue)'),\n  global_stats: z.object({\n    correct_count: z.number().min(0).default(0),\n    incorrect_count: z.number().min(0).default(0),\n    success_rate: z.number().min(0).max(100).default(0)\n  }).optional().describe('Global practice statistics for this item'),\n  metadata: VocabularyMetadataSchema.optional().describe('Additional metadata'),\n  enrichment: EnrichmentSchema.optional().describe('External enrichment metadata'),\n  definitions: z.array(DefinitionLinkSchema).optional().describe('Links to external dictionary definitions'),\n  createdAt: z.union([\n    z.date(),\n    z.string().datetime().transform(str => new Date(str))\n  ]).describe('Creation timestamp'),\n  updatedAt: z.union([\n    z.date(),\n    z.string().datetime().transform(str => new Date(str))\n  ]).describe('Last update timestamp'),\n  version: z.number().default(1).describe('Schema version number')\n});\n\n/**\n * Unified Vocabulary Collection Schema\n */\nexport const UnifiedVocabularyCollectionSchema = z.object({\n  id: z.string().uuid().describe('Unique identifier for the collection'),\n  name: z.string().min(3).max(100).describe('Name of the vocabulary collection'),\n  description: z.string().min(10).max(1000).describe('Description of the collection'),\n  languagePair: z.enum(['de-bg', 'bg-de']).describe('Language direction'),\n  difficultyRange: z.tuple([z.number().min(1), z.number().max(5)]).describe('Min and max difficulty levels'),\n  categories: z.array(VocabularyCategorySchema).describe('All categories in the collection'),\n  itemCount: z.number().min(0).describe('Total number of items in the collection'),\n  createdAt: z.union([\n    z.date(),\n    z.string().datetime().transform(str => new Date(str))\n  ]).describe('Creation timestamp'),\n  updatedAt: z.union([\n    z.date(),\n    z.string().datetime().transform(str => new Date(str))\n  ]).describe('Last update timestamp'),\n  version: z.number().default(1).describe('Schema version number'),\n  items: z.array(UnifiedVocabularyItemSchema).describe('Array of vocabulary items'),\n  statistics: z.object({\n    byPartOfSpeech: z.record(z.string(), z.number()).optional().describe('Count by part of speech'),\n    byDifficulty: z.record(z.string(), z.number()).optional().describe('Count by difficulty level'),\n    byCategory: z.record(z.string(), z.number()).optional().describe('Count by category'),\n    byLevel: z.record(z.string(), z.number()).optional().describe('Count by CEFR level')\n  }).optional().describe('Collection statistics')\n});\n\n// ======================\n// Utility Functions\n// ======================\n\n/**\n * Create a fallback unified vocabulary item when validation fails\n */\nexport const _createFallbackUnifiedItem = (input: unknown): z.infer<typeof UnifiedVocabularyItemSchema> => {\n  const now = new Date();\n\n  return {\n    id: `fallback-${crypto.randomUUID()}`,\n    german: typeof input === 'object' && input && 'german' in input && typeof input.german === 'string'\n      ? input.german\n      : 'unknown',\n    bulgarian: typeof input === 'object' && input && 'bulgarian' in input && typeof input.bulgarian === 'string'\n      ? input.bulgarian\n      : 'unknown',\n    partOfSpeech: 'noun',\n    difficulty: 1,\n    categories: ['greetings'],\n    examples: [],\n    type: 'word',\n    tags: [],\n    createdAt: now,\n    updatedAt: now,\n    version: 1\n  };\n};\n\n/**\n * Resilient schema with fallback for failed validations\n */\nexport const ResilientUnifiedVocabularyItemSchema = UnifiedVocabularyItemSchema.catch((ctx) => {\n  // Validation failed for unified vocabulary item\n  return _createFallbackUnifiedItem(ctx.input);\n});\n\n/**\n * Resilient collection schema with fallback items\n */\nexport const ResilientUnifiedVocabularyCollectionSchema = UnifiedVocabularyCollectionSchema.extend({\n  items: z.array(ResilientUnifiedVocabularyItemSchema)\n});\n\n// ======================\n// Type Exports\n// ======================\n\nexport type UnifiedVocabularyItem = z.infer<typeof UnifiedVocabularyItemSchema>;\nexport type UnifiedVocabularyCollection = z.infer<typeof UnifiedVocabularyCollectionSchema>;\nexport type Transliteration = z.infer<typeof TransliterationSchema>;\nexport type Audio = z.infer<typeof AudioSchema>;\nexport type Grammar = z.infer<typeof GrammarSchema>;\nexport type Example = z.infer<typeof ExampleSchema>;\nexport type Notes = z.infer<typeof NotesSchema>;\nexport type VocabularyMetadata = z.infer<typeof VocabularyMetadataSchema>;\n\n// ======================\n// Helper Functions\n// ======================\n\n/**\n * Get difficulty label from numeric value\n */\nexport function getDifficultyLabel(difficulty: number): string {\n  const labels = {\n    1: 'Beginner (A1)',\n    2: 'Elementary (A2)',\n    3: 'Intermediate (B1)',\n    4: 'Upper Intermediate (B2)',\n    5: 'Advanced (C1/C2)'\n  };\n  return labels[difficulty as keyof typeof labels] || 'Unknown';\n}\n\n/**\n * Get part of speech label\n */\nexport function _getPartOfSpeechLabel(partOfSpeech: PartOfSpeech): string {\n  const labels: Record<PartOfSpeech, string> = {\n    noun: 'Noun',\n    verb: 'Verb',\n    adjective: 'Adjective',\n    adverb: 'Adverb',\n    pronoun: 'Pronoun',\n    preposition: 'Preposition',\n    conjunction: 'Conjunction',\n    interjection: 'Interjection',\n    article: 'Article',\n    number: 'Number',\n    phrase: 'Phrase',\n    expression: 'Expression'\n  };\n  return labels[partOfSpeech];\n}\n\n/**\n * Get category label\n */\nexport function _getCategoryLabel(category: VocabularyCategory): string {\n  const labels: Record<VocabularyCategory, string> = {\n    greetings: 'Greetings',\n    numbers: 'Numbers',\n    family: 'Family',\n    food: 'Food',\n    colors: 'Colors',\n    animals: 'Animals',\n    'body-parts': 'Body Parts',\n    clothing: 'Clothing',\n    home: 'Home',\n    nature: 'Nature',\n    transport: 'Transport',\n    technology: 'Technology',\n    time: 'Time',\n    weather: 'Weather',\n    professions: 'Professions',\n    places: 'Places',\n    grammar: 'Grammar',\n    culture: 'Culture',\n    'everyday-phrases': 'Everyday Phrases'\n  };\n  return labels[category];\n}\n\n/**\n * Convert legacy difficulty to unified scale\n */\nexport function convertLegacyDifficulty(legacyDifficulty: number | string): number {\n  if (typeof legacyDifficulty === 'number') {\n    // Legacy 1-5 scale (1=easiest)\n    return Math.min(Math.max(legacyDifficulty, 1), 5);\n  }\n\n  // Legacy string scale (A1, A2, etc.)\n  const levelMap: Record<string, number> = {\n    'A1': 1,\n    'A2': 2,\n    'B1': 3,\n    'B2': 4,\n    'C1': 5\n  };\n\n  return levelMap[legacyDifficulty.toUpperCase()] || 1;\n}\n\n/**\n * Convert legacy category to standardized category\n */\nexport function convertLegacyCategory(legacyCategory: string): VocabularyCategory {\n  const categoryMap: Record<string, VocabularyCategory> = {\n    // English categories\n    'Food': 'food',\n    'Household': 'home',\n    'Verbs': 'grammar',\n    'Adjectives': 'grammar',\n    'Greetings': 'greetings',\n    'Body': 'body-parts',\n\n    // German categories\n    'Zahlen': 'numbers',\n    'Familie': 'family',\n    'Farben': 'colors',\n    'Begrung': 'greetings',\n    'Ausdruck': 'everyday-phrases',\n    'Lebensmittel': 'food',\n    'Transport': 'transport',\n    'Gesundheit': 'body-parts',\n    'Natur': 'nature',\n    'Einkauf': 'places',\n    'Tag': 'time',\n    'Zeit': 'time',\n\n    // Bulgarian categories\n    '': 'food',\n    '': 'home',\n    '': 'grammar',\n    '': 'grammar',\n    '': 'greetings'\n  };\n\n  return categoryMap[legacyCategory] || 'greetings';\n}\n\n/**\n * Type guards for different example formats\n */\nfunction isLegacyExampleFormat1(example: object): example is { sentence: unknown, translation: unknown, context?: unknown } {\n  return 'sentence' in example && 'translation' in example;\n}\n\nfunction isLegacyExampleFormat2(example: object): example is { bg: unknown, de: unknown, context?: unknown } {\n  return 'bg' in example && 'de' in example;\n}\n\nfunction isCurrentExampleFormat(example: object): example is { german: unknown, bulgarian: unknown, context?: unknown } {\n  return 'german' in example && 'bulgarian' in example;\n}\n\n/**\n * Normalize example format from legacy to unified\n */\nexport function normalizeExample(example: unknown): Example {\n  if (typeof example === 'object' && example) {\n    // Legacy format 1: { sentence: string, translation: string, context?: string }\n    if (isLegacyExampleFormat1(example)) {\n      return {\n        german: typeof example.translation === 'string' ? example.translation : 'Beispiel',\n        bulgarian: typeof example.sentence === 'string' ? example.sentence : '',\n        context: typeof example.context === 'string' ? example.context : undefined,\n        source: 'legacy'\n      };\n    }\n    // Legacy format 2: { bg: string, de: string, context?: string }\n    else if (isLegacyExampleFormat2(example)) {\n      return {\n        german: typeof example.de === 'string' ? example.de : 'Beispiel',\n        bulgarian: typeof example.bg === 'string' ? example.bg : '',\n        context: typeof example.context === 'string' ? example.context : undefined,\n        source: 'legacy'\n      };\n    }\n    // Current format: { german: string, bulgarian: string, context?: string }\n    else if (isCurrentExampleFormat(example)) {\n      return {\n        german: typeof example.german === 'string' ? example.german : 'Beispiel',\n        bulgarian: typeof example.bulgarian === 'string' ? example.bulgarian : '',\n        context: typeof example.context === 'string' ? example.context : undefined,\n        source: 'current'\n      };\n    }\n  }\n\n  // Fallback for invalid examples\n  return {\n    german: 'Beispiel',\n    bulgarian: '',\n    source: 'generated'\n  };\n}\n\n/**\n * Merge multiple examples arrays\n */\nexport function mergeExamples(exampleArrays: Example[][]): Example[] {\n  const merged = exampleArrays.flat();\n\n  // Deduplicate examples\n  const uniqueExamples = new Map<string, Example>();\n  merged.forEach(example => {\n    const key = `${example.german}|${example.bulgarian}|${example.context || ''}`;\n    if (!uniqueExamples.has(key)) {\n      uniqueExamples.set(key, example);\n    }\n  });\n\n  return Array.from(uniqueExamples.values());\n}\n\n/**\n * Create a merged ID from multiple source IDs\n */\nexport function createMergedId(ids: string[]): string {\n  if (ids.length === 0) return `fallback-${crypto.randomUUID()}`;\n  if (ids.length === 1) return ids[0] ?? `fallback-${crypto.randomUUID()}`;\n\n  // For multiple IDs, create a composite ID\n  return `merged-${ids.join('-')}`;\n}\n","/**\n * Vocabulary Data Loader\n *\n * Handles loading, caching, and validation of vocabulary data\n * Supports both server-side and client-side loading patterns\n */\n\nimport { base } from '$app/paths';\nimport { Debug } from '../utils';\nimport { DataError, ErrorHandler } from '../services/errors';\nimport { EventBus } from '../services/event-bus';\n\n// DataLoader is unused\n\nimport { UnifiedVocabularyItemSchema, UnifiedVocabularyCollectionSchema, ResilientUnifiedVocabularyCollectionSchema, VocabularyCategorySchema } from '../schemas/unified-vocabulary';\nimport { z } from 'zod';\n\n/**\n * Vocabulary search parameters\n */\nexport interface VocabularySearchParams {\n  query?: string;\n  partOfSpeech?: string;\n  difficulty?: number;\n  categories?: string[];\n  limit?: number;\n  offset?: number;\n}\n\n/**\n * Update practice statistics for a vocabulary item\n * @param itemId The ID of the vocabulary item\n * @param correct Whether the answer was correct\n * @param responseTime Response time in seconds (optional)\n * @param eventBus Optional event bus for error handling\n */\nexport async function updateStats(itemId: string, correct: boolean, responseTime?: number, eventBus?: EventBus): Promise<void> {\n  try {\n    Debug.log('loader', 'Updating stats for vocabulary item', { itemId, correct, responseTime });\n\n    // In a real implementation, this would update server-side statistics\n    // For now, we'll just log it and update the local cache if available\n\n    // Check if we have the item in memory (client-side only)\n    if (typeof window !== 'undefined') {\n      const collection = await loadVocabulary();\n      const itemIndex = collection.items.findIndex(item => item.id === itemId);\n\n      if (itemIndex !== -1) {\n        // Update the cache with the modified item\n        cacheVocabulary(collection);\n        Debug.log('loader', 'Updated stats for vocabulary item in cache', { itemId });\n      }\n    }\n\n  } catch (error: unknown) {\n    const typedError = error instanceof Error ? error : new Error(String(error));\n    ErrorHandler.handleError(typedError, 'Failed to update vocabulary item statistics', eventBus);\n    throw new DataError('Failed to update vocabulary item statistics', { itemId, error: typedError });\n  }\n}\n\n// Cache configuration\nconst CACHE_KEY = 'vocabulary-cache';\nconst CACHE_EXPIRY_HOURS = 24;\n\n/**\n * Load vocabulary data from various sources with fallback mechanism\n * @param eventBus Optional event bus for error handling\n * @throws DataError if all loading methods fail\n */\nexport async function loadVocabulary(eventBus?: EventBus): Promise<z.infer<typeof UnifiedVocabularyCollectionSchema>> {\n  try {\n    // Try to load from static endpoint first (fastest)\n    return await loadFromStaticEndpoint(eventBus);\n  } catch (error: unknown) {\n    const typedError = error instanceof Error ? error : new Error(String(error));\n    ErrorHandler.handleError(typedError, 'Failed to load vocabulary from static endpoint', eventBus);\n    // Failed to load from static endpoint, trying cache\n    try {\n      // Fallback to cache\n      return await loadFromCache(eventBus);\n    } catch (cacheError: unknown) {\n      const typedCacheError = cacheError instanceof Error ? cacheError : new Error(String(cacheError));\n      ErrorHandler.handleError(typedCacheError, 'Failed to load vocabulary from cache', eventBus);\n      // Failed to load from cache, trying bundled data\n      try {\n        // Final fallback to bundled data\n        return await loadBundledData(eventBus);\n      } catch (bundledError: unknown) {\n        const typedBundledError = bundledError instanceof Error ? bundledError : new Error(String(bundledError));\n        ErrorHandler.handleError(typedBundledError, 'Failed to load vocabulary from bundled data', eventBus);\n        // All loading methods failed\n        throw new DataError('Failed to load vocabulary data from all sources', {\n          error: error as Error,\n          cacheError: cacheError as Error,\n          bundledError: bundledError as Error\n        });\n      }\n    }\n  }\n}\n\n/**\n * Load vocabulary from static endpoint\n * @param eventBus Optional event bus for error handling\n * @throws DataError if loading fails\n */\nasync function loadFromStaticEndpoint(eventBus?: EventBus): Promise<z.infer<typeof UnifiedVocabularyCollectionSchema>> {\n  try {\n    // In Node.js environment (tests, scripts), load directly from the source file\n    // In browser environment, fetch from static endpoint\n    if (typeof process !== 'undefined' && process.versions && process.versions.node) {\n      // Node.js environment - read file directly\n      const fs = await import('fs/promises');\n      const path = await import('path');\n      const { fileURLToPath } = await import('url');\n      const { dirname } = await import('path');\n\n      const __filename = fileURLToPath(import.meta.url);\n      const __dirname = dirname(__filename);\n      const filePath = path.join(__dirname, 'unified-vocabulary.json');\n\n      const data = await fs.readFile(filePath, 'utf-8');\n      const jsonData = JSON.parse(data);\n      return ResilientUnifiedVocabularyCollectionSchema.parse(jsonData);\n    } else {\n      // Browser environment - fetch from static endpoint\n      const response = await fetch(`${base}/data/unified-vocabulary.json`);\n\n      if (!response.ok) {\n        throw new DataError(`HTTP error! status: ${response.status}`, { status: response.status });\n      }\n\n      const data = await response.json();\n      return ResilientUnifiedVocabularyCollectionSchema.parse(data);\n    }\n  } catch (error: unknown) {\n    const typedError = error instanceof Error ? error : new Error(String(error));\n    ErrorHandler.handleError(typedError, 'Failed to load vocabulary from static endpoint', eventBus);\n    throw new DataError('Failed to load vocabulary from static endpoint', { error: typedError });\n  }\n}\n\n/**\n * Load vocabulary from localStorage cache\n * @param eventBus Optional event bus for error handling\n * @throws DataError if loading fails\n */\nasync function loadFromCache(eventBus?: EventBus): Promise<z.infer<typeof UnifiedVocabularyCollectionSchema>> {\n  try {\n    // In Node.js environment, skip cache\n    if (typeof process !== 'undefined' && process.versions && process.versions.node) {\n      throw new Error('Cache not available in Node.js environment');\n    }\n\n    if (typeof localStorage === 'undefined') {\n      throw new DataError('localStorage not available');\n    }\n\n    const cachedData = localStorage.getItem(CACHE_KEY);\n    if (!cachedData) {\n      throw new DataError('No cached vocabulary data found');\n    }\n\n    const { data, timestamp } = JSON.parse(cachedData);\n\n    // Check if cache is expired\n    const now = new Date();\n    const cacheDate = new Date(timestamp);\n    const hoursDiff = (now.getTime() - cacheDate.getTime()) / (1000 * 60 * 60);\n\n    if (hoursDiff > CACHE_EXPIRY_HOURS) {\n      throw new DataError('Cache expired', { hoursDiff, cacheExpiryHours: CACHE_EXPIRY_HOURS });\n    }\n\n    return ResilientUnifiedVocabularyCollectionSchema.parse(data);\n  } catch (error: unknown) {\n    const typedError = error instanceof Error ? error : new Error(String(error));\n    ErrorHandler.handleError(typedError, 'Failed to load vocabulary from cache', eventBus);\n    throw new DataError('Failed to load vocabulary from cache', { error: typedError });\n  }\n}\n\n/**\n * Load bundled vocabulary data (fallback)\n * Handles both browser and Node.js environments\n * @param eventBus Optional event bus for error handling\n * @throws DataError if loading fails\n */\nasync function loadBundledData(eventBus?: EventBus): Promise<z.infer<typeof UnifiedVocabularyCollectionSchema>> {\n  try {\n    // In Node.js environment, load directly from the source file\n    if (typeof process !== 'undefined' && process.versions && process.versions.node) {\n      const fs = await import('fs/promises');\n      const path = await import('path');\n      const { fileURLToPath } = await import('url');\n      const { dirname } = await import('path');\n\n      const __filename = fileURLToPath(import.meta.url);\n      const __dirname = dirname(__filename);\n      const filePath = path.join(__dirname, 'unified-vocabulary.json');\n\n      const data = await fs.readFile(filePath, 'utf-8');\n      const jsonData = JSON.parse(data);\n      return ResilientUnifiedVocabularyCollectionSchema.parse(jsonData);\n    }\n\n    // Browser environment - use fetch API\n    let jsonData: unknown = null;\n    try {\n      const response = await fetch(`${base}/data/unified-vocabulary.json`);\n      if (!response.ok) {\n        throw new DataError(`HTTP error! status: ${response.status}`, { status: response.status });\n      }\n      jsonData = await response.json();\n    } catch (_fetchError) {\n      jsonData = null;\n    }\n\n    if (jsonData) {\n      try {\n        return ResilientUnifiedVocabularyCollectionSchema.parse(jsonData);\n      } catch (_parseError) {\n        // Continue to fallback collection below\n      }\n    }\n\n    // Final fallback to an empty but well-formed collection\n    const fallbackCollection = {\n      id: crypto.randomUUID(),\n      name: 'German-Bulgarian Vocabulary Collection (Fallback)',\n      description: 'Fallback vocabulary collection when bundled data is unavailable',\n      items: [],\n      languagePair: 'de-bg' as const,\n      difficultyRange: [1, 5] as [number, number],\n      categories: [],\n      itemCount: 0,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      version: 1\n    };\n\n    return ResilientUnifiedVocabularyCollectionSchema.parse(fallbackCollection);\n  } catch (error: unknown) {\n    const typedError = error instanceof Error ? error : new Error(String(error));\n    ErrorHandler.handleError(typedError, 'Failed to load bundled vocabulary data', eventBus);\n    throw new DataError('Failed to load bundled vocabulary data', { error: typedError });\n  }\n}\n\n/**\n * Cache vocabulary data in localStorage\n */\nexport function cacheVocabulary(data: z.infer<typeof UnifiedVocabularyCollectionSchema>): void {\n  if (typeof localStorage === 'undefined') {\n    return;\n  }\n\n  const cacheData = {\n    data,\n    timestamp: new Date().toISOString()\n  };\n\n  localStorage.setItem(CACHE_KEY, JSON.stringify(cacheData));\n}\n\n/**\n * Load vocabulary by search parameters\n * @param params Search parameters\n * @param eventBus Optional event bus for error handling\n */\nexport async function loadVocabularyBySearch(\n  params: VocabularySearchParams,\n  eventBus?: EventBus\n): Promise<{ items: z.infer<typeof UnifiedVocabularyItemSchema>[]; total: number; hasMore: boolean }> {\n  try {\n    const collection = await loadVocabulary(eventBus);\n    let items = [...collection.items];\n\n    // Apply filters\n    if (params.query) {\n      const query = params.query.toLowerCase();\n      items = items.filter(item =>\n        item.german.toLowerCase().includes(query) ||\n        item.bulgarian.toLowerCase().includes(query) ||\n        ((item.examples && item.examples.some((example: { german?: string; bulgarian?: string }) =>\n          (example.german && example.german.toLowerCase().includes(query)) ||\n          (example.bulgarian && example.bulgarian.toLowerCase().includes(query)))) ?? false)\n      );\n    }\n\n    if (params.partOfSpeech) {\n      items = items.filter(item => item.partOfSpeech === params.partOfSpeech);\n    }\n\n    if (params.difficulty) {\n      items = items.filter(item => item.difficulty === params.difficulty);\n    }\n\n    if (params.categories && params.categories.length > 0) {\n      items = items.filter(item =>\n        item.categories.some(category => params.categories?.includes(category))\n      );\n    }\n\n    // Get total count before pagination\n    const total = items.length;\n\n    // Apply pagination\n    const limit = params.limit || 20;\n    const offset = params.offset || 0;\n\n    items = items.slice(offset, offset + limit);\n\n    return {\n      items,\n      total,\n      hasMore: offset + limit < total\n    };\n  } catch (error: unknown) {\n    const typedError = error instanceof Error ? error : new Error(String(error));\n    ErrorHandler.handleError(typedError, 'Failed to search vocabulary', eventBus);\n    throw new DataError('Failed to search vocabulary', { params, error: typedError });\n  }\n}\n\n/**\n * Load vocabulary by ID\n * @param id The ID of the vocabulary item\n * @param eventBus Optional event bus for error handling\n * @throws DataError if loading fails\n */\nexport async function loadVocabularyById(id: string, eventBus?: EventBus): Promise<z.infer<typeof UnifiedVocabularyItemSchema> | null> {\n  try {\n    const collection = await loadVocabulary(eventBus);\n    return collection.items.find(item => item.id === id) || null;\n  } catch (error: unknown) {\n    const typedError = error instanceof Error ? error : new Error(String(error));\n    ErrorHandler.handleError(typedError, 'Failed to load vocabulary by ID', eventBus);\n    throw new DataError('Failed to load vocabulary by ID', { id, error: typedError });\n  }\n}\n\n/**\n * Load vocabulary by category\n * @param category The category to filter by\n * @param options Filtering options\n * @param eventBus Optional event bus for error handling\n * @throws DataError if loading fails\n */\nexport async function loadVocabularyByCategory(\n  category: z.infer<typeof VocabularyCategorySchema>,\n  options: { limit?: number; difficulty?: number } = {},\n  eventBus?: EventBus\n): Promise<z.infer<typeof UnifiedVocabularyItemSchema>[]> {\n  try {\n    const collection = await loadVocabulary(eventBus);\n\n    let items = collection.items.filter(item =>\n      item.categories.includes(category)\n    );\n\n    if (options.difficulty) {\n      items = items.filter(item => item.difficulty === options.difficulty);\n    }\n\n    if (options.limit) {\n      items = items.slice(0, options.limit);\n    }\n\n    return items;\n  } catch (error: unknown) {\n    const typedError = error instanceof Error ? error : new Error(String(error));\n    ErrorHandler.handleError(typedError, 'Failed to load vocabulary by category', eventBus);\n    throw new DataError('Failed to load vocabulary by category', { category, options, error: typedError });\n  }\n}\n\n/**\n * Load vocabulary by difficulty level\n * @param difficulty The difficulty level to filter by\n * @param options Filtering options\n * @param eventBus Optional event bus for error handling\n * @throws DataError if loading fails\n */\nexport async function loadVocabularyByDifficulty(\n  difficulty: number,\n  options: { limit?: number; category?: string } = {},\n  eventBus?: EventBus\n): Promise<z.infer<typeof UnifiedVocabularyItemSchema>[]> {\n  try {\n    const collection = await loadVocabulary(eventBus);\n\n    let items = collection.items.filter(item =>\n      item.difficulty === difficulty\n    );\n\n    if (options.category) {\n      const category = options.category as z.infer<typeof VocabularyCategorySchema>;\n      items = items.filter(item => item.categories.includes(category));\n    }\n\n    if (options.limit) {\n      items = items.slice(0, options.limit);\n    }\n\n    return items;\n  } catch (error: unknown) {\n    const typedError = error instanceof Error ? error : new Error(String(error));\n    ErrorHandler.handleError(typedError, 'Failed to load vocabulary by difficulty', eventBus);\n    throw new DataError('Failed to load vocabulary by difficulty', { difficulty, options, error: typedError });\n  }\n}\n\n/**\n * Get random vocabulary items\n * @param count Number of items to return\n * @param options Filtering options\n * @param eventBus Optional event bus for error handling\n * @throws DataError if loading fails\n */\nexport async function getRandomVocabulary(\n  count: number = 5,\n  options: { difficulty?: number; category?: string } = {},\n  eventBus?: EventBus\n): Promise<z.infer<typeof UnifiedVocabularyItemSchema>[]> {\n  try {\n    const collection = await loadVocabulary(eventBus);\n\n    let items = [...collection.items];\n\n    if (options.difficulty) {\n      items = items.filter((item: z.infer<typeof UnifiedVocabularyItemSchema>) => item.difficulty === options.difficulty);\n    }\n\n    if (options.category) {\n      const category = options.category as z.infer<typeof VocabularyCategorySchema>;\n      items = items.filter((item: z.infer<typeof UnifiedVocabularyItemSchema>) => item.categories.includes(category));\n    }\n\n    // Shuffle and select random items\n    const shuffled = items.sort(() => 0.5 - Math.random());\n    return shuffled.slice(0, Math.min(count, shuffled.length));\n  } catch (error: unknown) {\n    const typedError = error instanceof Error ? error : new Error(String(error));\n    ErrorHandler.handleError(typedError, 'Failed to get random vocabulary items', eventBus);\n    throw new DataError('Failed to get random vocabulary items', { count, options, error: typedError });\n  }\n}\n\n/**\n * Initialize vocabulary data (should be called during app startup)\n * @param eventBus Optional event bus for error handling\n * @throws DataError if initialization fails\n */\nexport async function initializeVocabulary(eventBus?: EventBus): Promise<void> {\n  try {\n    // Load and cache vocabulary data\n    const vocabulary = await loadVocabulary(eventBus);\n    cacheVocabulary(vocabulary);\n  } catch (error: unknown) {\n    const typedError = error instanceof Error ? error : new Error(String(error));\n    ErrorHandler.handleError(typedError, 'Failed to initialize vocabulary data', eventBus);\n    throw new DataError('Failed to initialize vocabulary data', { error: typedError });\n  }\n}","/**\n * DataLoader Class - Singleton wrapper for the function-based vocabulary loader\n *\n * This class provides a singleton interface for the vocabulary data loading system,\n * maintaining backward compatibility with existing code while using the new function-based loader.\n */\nimport { getRandomVocabulary } from './loader';\nimport { Debug } from '../utils';\nimport type { UnifiedVocabularyItem, VocabularyCategory } from '../schemas/unified-vocabulary';\n\nexport class DataLoader {\n    private static instance: DataLoader;\n\n    private constructor() {\n        // Private constructor to enforce singleton pattern\n    }\n\n    /**\n     * Get the singleton instance of DataLoader\n     */\n    public static getInstance(): DataLoader {\n        if (!DataLoader.instance) {\n            DataLoader.instance = new DataLoader();\n        }\n        return DataLoader.instance;\n    }\n\n    /**\n     * Get random vocabulary items\n     * @param count Number of items to return\n     * @returns Array of random vocabulary items\n     */\n    public async getRandomItems(count: number = 5): Promise<UnifiedVocabularyItem[]> {\n        try {\n            // Use the getRandomVocabulary function from loader\n            const items = await getRandomVocabulary(count);\n            return items;\n        } catch (_error) {\n            // Failed to get random vocabulary items\n            return [];\n        }\n    }\n\n    /**\n     * Get vocabulary by search parameters\n     * @param params Search parameters\n     * @returns Search results\n     */\n    public async getVocabularyBySearch(params: {\n        query?: string;\n        partOfSpeech?: string;\n        difficulty?: number;\n        categories?: string[];\n        limit?: number;\n        offset?: number;\n    }): Promise<{\n        items: UnifiedVocabularyItem[];\n        total: number;\n        hasMore: boolean;\n    }> {\n        // Use the new search service\n        const { searchVocabulary } = await import('../services/search');\n        \n        // Cast parameters to correct types (schema validation is done by searchVocabulary)\n        return searchVocabulary({\n            query: params.query,\n            partOfSpeech: params.partOfSpeech as any,\n            difficulty: params.difficulty,\n            categories: params.categories as any,\n            limit: params.limit || 20,\n            offset: params.offset || 0,\n            sortBy: 'german',\n            sortOrder: 'asc'\n        });\n    }\n\n    /**\n     * Get vocabulary by ID\n     * @param id Vocabulary item ID\n     * @returns Vocabulary item or null if not found\n     */\n    public async getVocabularyById(id: string): Promise<UnifiedVocabularyItem | null> {\n        // Import the function here to avoid circular dependencies\n        const { loadVocabularyById } = await import('./loader');\n        return loadVocabularyById(id);\n    }\n\n    /**\n     * Get vocabulary by category\n     * @param category Category name\n     * @param options Options\n     * @returns Array of vocabulary items\n     */\n    public async getVocabularyByCategory(category: string, options: { limit?: number; difficulty?: number } = {}): Promise<UnifiedVocabularyItem[]> {\n        // Import the function here to avoid circular dependencies\n        const { loadVocabularyByCategory } = await import('./loader');\n        return loadVocabularyByCategory(category as VocabularyCategory, options);\n    }\n\n    /**\n     * Get vocabulary by difficulty level\n     * @param difficulty Difficulty level\n     * @param options Options\n     * @returns Array of vocabulary items\n     */\n    public async getVocabularyByDifficulty(difficulty: number, options: { limit?: number; category?: string } = {}): Promise<UnifiedVocabularyItem[]> {\n        try {\n            Debug.log('DataLoader', 'Getting vocabulary by difficulty', { difficulty, options });\n            // Import the function here to avoid circular dependencies\n            const { loadVocabularyByDifficulty } = await import('./loader');\n            const items = await loadVocabularyByDifficulty(difficulty, options);\n            Debug.log('DataLoader', 'Retrieved vocabulary by difficulty', { difficulty, count: items.length });\n            return items;\n        } catch (error) {\n            Debug.error('DataLoader', 'Failed to get vocabulary by difficulty', error as Error);\n            return [];\n        }\n    }\n}","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction _v4(options, buf, offset) {\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    return _v4(options, buf, offset);\n}\nexport default v4;\n","/**\n * Practice Session Schema - Defines the structure and validation rules for practice sessions\n * Separated to avoid circular dependencies between vocabulary and localStorage schemas\n */\n\nimport { z } from 'zod';\n\n// Schema for practice sessions\nexport const PracticeSessionSchema = z.object({\n  id: z.string().uuid(),\n  currentItemId: z.string().uuid(),\n  startTime: z.string().datetime(),\n  endTime: z.string().datetime().optional(),\n  score: z.number().min(0).max(100).default(0),\n  itemsPracticed: z.number().min(0).default(0),\n  correctAnswers: z.number().min(0).default(0),\n  incorrectAnswers: z.number().min(0).default(0),\n  sessionType: z.enum(['vocabulary', 'grammar', 'listening', 'speaking']),\n  completed: z.boolean().default(false)\n});\n\n// TypeScript type derived from Zod schema\nexport type PracticeSession = z.infer<typeof PracticeSessionSchema>;","/**\n * Vocabulary Schema - Defines the structure and validation rules for vocabulary items\n * Used for runtime validation, type safety, and data integrity\n */\nimport { z } from 'zod';\n// Base schema for vocabulary parts of speech\nexport const PartOfSpeechSchema = z.enum([\n    'noun', // Noun (e.g., \"Haus\", \"\")\n    'verb', // Verb (e.g., \"gehen\", \"\")\n    'adjective', // Adjective (e.g., \"gro\", \"\")\n    'adverb', // Adverb (e.g., \"schnell\", \"\")\n    'pronoun', // Pronoun (e.g., \"ich\", \"\")\n    'preposition', // Preposition (e.g., \"in\", \"\")\n    'conjunction', // Conjunction (e.g., \"und\", \"\")\n    'interjection', // Interjection (e.g., \"ah\", \"\")\n    'article', // Article (e.g., \"der\", \"the\")\n    'number', // Number (e.g., \"eins\", \"\")\n    'phrase' // Common phrase (e.g., \"Wie geht's?\", \" ?\")\n]);\n// Schema for vocabulary categories (used for grouping)\nexport const VocabularyCategorySchema = z.enum([\n    'greetings',\n    'numbers',\n    'family',\n    'food',\n    'colors',\n    'animals',\n    'body',\n    'clothing',\n    'house',\n    'nature',\n    'transport',\n    'technology',\n    'time',\n    'weather',\n    'professions',\n    'places',\n    'grammar',\n    'culture',\n    'common_phrases',\n    'uncategorized' // Fallback for migration\n]);\n// Schema for vocabulary difficulty levels\nexport const DifficultyLevelSchema = z.enum([\n    'beginner', // A1 level\n    'elementary', // A2 level\n    'intermediate', // B1 level\n    'upper_intermediate', // B2 level\n    'advanced' // C1/C2 level\n]);\n// Schema for vocabulary metadata\nexport const VocabularyMetadataSchema = z.object({\n    gender: z.enum(['masculine', 'feminine', 'neuter']).optional(), // For nouns\n    pluralForm: z.string().optional(), // Plural form for nouns\n    conjugation: z.record(z.string(), z.string()).optional(), // Verb conjugations\n    examples: z.array(z.object({\n        german: z.string(),\n        bulgarian: z.string(),\n        context: z.string().optional()\n    })).optional(),\n    synonyms: z.array(z.string()).optional(),\n    antonyms: z.array(z.string()).optional(),\n    relatedWords: z.array(z.string()).optional(),\n    notes: z.string().optional(),\n    mnemonic: z.string().optional(),\n    culturalNote: z.string().optional(),\n    etymology: z.string().optional()\n});\n/**\n * Schema for legacy ID formats (numeric, string, UUID)\n * Supports: UUIDs, numeric IDs, string IDs, and auto-generation\n */\nexport const LegacyIdSchema = z.union([\n    z.string().uuid(),\n    z.string().min(1).max(100),\n    z.number().positive()\n]).transform((val) => {\n    if (typeof val === 'number')\n        return `legacy-${val}`;\n    return val;\n});\n// Fallback category for migration\nexport const VocabularyCategorySchemaWithFallback = VocabularyCategorySchema.or(z.literal('uncategorized'));\n// Main Vocabulary Item Schema with resilient validation\nconst BaseVocabularyItemSchema = z.object({\n    id: LegacyIdSchema,\n    german: z.string().min(1).max(100),\n    bulgarian: z.string().min(1).max(100),\n    partOfSpeech: PartOfSpeechSchema.default('noun'),\n    difficulty: z.number().min(1).max(5).default(1).describe('1-5 scale where 1 is easiest'),\n    categories: z.array(VocabularyCategorySchemaWithFallback).min(1).default(['uncategorized']),\n    transliteration: z.string().optional(), // Latin characters for pronunciation\n    emoji: z.string().optional(), // Visual representation\n    literalBreakdown: z.array(z.object({\n        segment: z.string(),\n        literal: z.string(),\n        grammarTag: z.string()\n    })).optional(),\n    metadata: VocabularyMetadataSchema.optional(),\n    createdAt: z.union([\n        z.date(),\n        z.string().datetime().transform(str => new Date(str))\n    ]).default(new Date()).transform(val => val instanceof Date ? val : new Date(val)),\n    updatedAt: z.union([\n        z.date(),\n        z.string().datetime().transform(str => new Date(str))\n    ]).default(new Date()).transform(val => val instanceof Date ? val : new Date(val)),\n    isCommon: z.boolean().default(false),\n    isVerified: z.boolean().default(false),\n    learningPhase: z.number().min(0).max(6).optional().default(0) // 0: Not Started, 1-6: SRS Phases\n});\n/**\n * Fallback vocabulary item for failed validations\n * Creates a valid item with fallback values when validation fails\n */\nexport const createFallbackItem = (input) => {\n    return {\n        id: `fallback-${crypto.randomUUID()}`,\n        german: typeof input === 'object' && input && 'german' in input && typeof input.german === 'string' ? input.german : 'unknown',\n        bulgarian: typeof input === 'object' && input && 'bulgarian' in input && typeof input.bulgarian === 'string' ? input.bulgarian : 'unknown',\n        partOfSpeech: 'noun',\n        difficulty: 1,\n        categories: ['uncategorized'],\n        metadata: {},\n        createdAt: new Date(),\n        updatedAt: new Date(),\n        isCommon: false,\n        isVerified: false,\n        learningPhase: 0\n    };\n};\nexport const VocabularyItemSchema = BaseVocabularyItemSchema.catch((ctx) => {\n    // Safe error logging without circular reference issues\n    const _safeInput = typeof ctx.input === 'object' && ctx.input\n        ? { ...ctx.input, metadata: ctx.input.metadata ? '[metadata]' : undefined }\n        : ctx.input;\n    // Validation failed for item\n    return createFallbackItem(ctx.input);\n});\n// Schema for vocabulary collections\nexport const VocabularyCollectionSchema = z.object({\n    id: z.string().uuid(),\n    name: z.string().min(3).max(100),\n    description: z.string().min(10).max(500),\n    items: z.array(VocabularyItemSchema),\n    languagePair: z.enum(['de-bg', 'bg-de']),\n    difficultyRange: z.tuple([z.number().min(1), z.number().max(5)]),\n    categories: z.array(VocabularyCategorySchema),\n    createdAt: z.union([\n        z.date(),\n        z.string().datetime().transform(str => new Date(str))\n    ]).default(new Date()).transform(val => val instanceof Date ? val : new Date(val)),\n    updatedAt: z.union([\n        z.date(),\n        z.string().datetime().transform(str => new Date(str))\n    ]).default(new Date()).transform(val => val instanceof Date ? val : new Date(val))\n});\n// Schema for vocabulary search parameters\nexport const VocabularySearchParamsSchema = z.object({\n    query: z.string().optional(),\n    partOfSpeech: PartOfSpeechSchema.optional(),\n    difficulty: z.number().min(1).max(5).optional(),\n    categories: z.array(VocabularyCategorySchema).optional(),\n    learningPhase: z.number().min(0).max(6).optional(),\n    limit: z.number().min(1).max(100).default(20),\n    offset: z.number().min(0).default(0),\n    sortBy: z.enum(['german', 'bulgarian', 'difficulty', 'createdAt']).default('german'),\n    sortOrder: z.enum(['asc', 'desc']).default('asc')\n});\n// Schema for vocabulary progress tracking\nexport const VocabularyProgressSchema = z.object({\n    userId: z.string().uuid(),\n    vocabularyId: z.string().uuid(),\n    learned: z.boolean().default(false),\n    proficiency: z.number().min(0).max(100).default(0),\n    lastReviewed: z.date().optional(),\n    reviewCount: z.number().min(0).default(0),\n    nextReviewDate: z.date().optional()\n});\n// Schema for practice sessions\nexport const PracticeSessionSchema = z.object({\n    id: z.string().uuid(),\n    currentItemId: z.string().uuid(),\n    startTime: z.string().datetime(),\n    endTime: z.string().datetime().optional(),\n    score: z.number().min(0).max(100).default(0),\n    itemsPracticed: z.number().min(0).default(0),\n    correctAnswers: z.number().min(0).default(0),\n    incorrectAnswers: z.number().min(0).default(0),\n    sessionType: z.enum(['vocabulary', 'grammar', 'listening', 'speaking']),\n    completed: z.boolean().default(false)\n});\n// Utility functions\nexport function getDifficultyLabel(difficulty) {\n    const labels = {\n        1: 'Beginner (A1)',\n        2: 'Elementary (A2)',\n        3: 'Intermediate (B1)',\n        4: 'Upper Intermediate (B2)',\n        5: 'Advanced (C1/C2)'\n    };\n    return labels[difficulty] || 'Unknown';\n}\nexport function getPartOfSpeechLabel(partOfSpeech) {\n    const labels = {\n        noun: 'Noun',\n        verb: 'Verb',\n        adjective: 'Adjective',\n        adverb: 'Adverb',\n        pronoun: 'Pronoun',\n        preposition: 'Preposition',\n        conjunction: 'Conjunction',\n        interjection: 'Interjection',\n        article: 'Article',\n        number: 'Number',\n        phrase: 'Phrase'\n    };\n    return labels[partOfSpeech];\n}\n//# sourceMappingURL=vocabulary.js.map","import { z } from 'zod';\nimport { PracticeSessionSchema } from './vocabulary';\n/**\n * Schema for individual practice stat entry\n */\nexport const PracticeStatSchema = z.object({\n    id: z.string(),\n    correct: z.number().int().nonnegative(),\n    incorrect: z.number().int().nonnegative(),\n    lastPracticed: z.string().datetime()\n});\n/**\n * Schema for user progress storage\n */\nexport const UserProgressStorageSchema = z.object({\n    stats: z.array(PracticeStatSchema),\n    favorites: z.array(z.string()),\n    recentSearches: z.array(z.string()),\n    lastUpdated: z.string().datetime()\n});\n/**\n * Schema for exported user data\n */\nexport const ExportedUserDataSchema = z.object({\n    progress: UserProgressStorageSchema.optional(),\n    session: PracticeSessionSchema.optional(),\n    exportedAt: z.string().datetime()\n});\n/**\n * Validation functions\n */\nexport function validatePracticeStat(data) {\n    return PracticeStatSchema.parse(data);\n}\nexport function validateUserProgressStorage(data) {\n    return UserProgressStorageSchema.parse(data);\n}\nexport function safeValidateUserProgressStorage(data) {\n    const result = UserProgressStorageSchema.safeParse(data);\n    return result.success\n        ? { success: true, data: result.data }\n        : { success: false, error: result.error };\n}\nexport function validateExportedUserData(data) {\n    return ExportedUserDataSchema.parse(data);\n}\nexport function safeValidateExportedUserData(data) {\n    const result = ExportedUserDataSchema.safeParse(data);\n    return result.success\n        ? { success: true, data: result.data }\n        : { success: false, error: result.error };\n}\n/**\n * Type guard for PracticeStat\n */\nexport function isPracticeStat(data) {\n    return PracticeStatSchema.safeParse(data).success;\n}\n/**\n * Type guard for UserProgressStorage\n */\nexport function isUserProgressStorage(data) {\n    return UserProgressStorageSchema.safeParse(data).success;\n}\n//# sourceMappingURL=localStorage.js.map","// LocalStorage utilities for the Bulgarian-German Learning App\nimport type { PracticeSession } from '$lib/types/vocabulary';\nimport { PracticeSessionSchema } from '$lib/schemas/practiceSession.js';\nimport {\n  UserProgressStorageSchema,\n  safeValidateUserProgressStorage,\n  isPracticeStat\n} from '$lib/schemas/localStorage.js';\nimport { StorageError, ErrorHandler } from '../services/errors';\nimport { EventBus } from '../services/event-bus';\n\n/**\n * LocalStorage utility class for managing user progress\n */\nexport class LocalStorageManager {\n  private static readonly PREFIX = 'tandem_';\n  private static readonly USER_PROGRESS_KEY = `${LocalStorageManager.PREFIX}user_progress`;\n  private static readonly SESSION_KEY = `${LocalStorageManager.PREFIX}active_session`;\n\n  /**\n   * Save user progress to localStorage\n   * @param progress Object containing user progress data\n   * @param eventBus Optional event bus for error handling\n   * @throws StorageError if saving fails\n   */\n  public static saveUserProgress(progress: {\n    stats: Map<string, { correct: number; incorrect: number; lastPracticed: string }>;\n    favorites: string[];\n    recentSearches: string[];\n  }, eventBus?: EventBus): void {\n    try {\n        const serializedStats = Array.from(progress.stats.entries()).map(([id, data]) => ({\n            id,\n            correct: data.correct,\n            incorrect: data.incorrect,\n            lastPracticed: data.lastPracticed\n        }));\n\n        const dataToSave = {\n            stats: serializedStats,\n            favorites: progress.favorites,\n            recentSearches: progress.recentSearches,\n            lastUpdated: new Date().toISOString()\n        };\n\n        // Validate before saving\n        const validationResult = UserProgressStorageSchema.safeParse(dataToSave);\n        if (!validationResult.success) {\n            throw new StorageError('Invalid user progress data', { validationResult });\n        }\n\n        localStorage.setItem(\n            LocalStorageManager.USER_PROGRESS_KEY,\n            JSON.stringify(dataToSave)\n        );\n    } catch (error) {\n        const err = error instanceof Error ? error : new Error(String(error));\n        ErrorHandler.handleError(err, 'Failed to save user progress', eventBus);\n        throw new StorageError('Failed to save user progress', { error: err });\n    }\n  }\n\n  /**\n   * Load user progress from localStorage\n   * @param eventBus Optional event bus for error handling\n   * @returns Object containing user progress data or null if not found\n   * @throws StorageError if loading fails\n   */\n  public static loadUserProgress(eventBus?: EventBus): {\n    stats: Map<string, { correct: number; incorrect: number; lastPracticed: string }>;\n    favorites: string[];\n    recentSearches: string[];\n    lastUpdated: string;\n  } | null {\n    try {\n        const data = localStorage.getItem(LocalStorageManager.USER_PROGRESS_KEY);\n        if (!data) return null;\n\n        const parsedData = JSON.parse(data);\n\n        // Validate parsed data with Zod\n        const validationResult = safeValidateUserProgressStorage(parsedData);\n        if (!validationResult.success) {\n            throw new StorageError('Invalid user progress data format', { validationResult });\n        }\n\n        // Convert stats array back to Map with type safety\n        const statsMap = new Map<string, { correct: number; incorrect: number; lastPracticed: string }>();\n        validationResult.data.stats.forEach((item) => {\n            if (isPracticeStat(item)) {\n                statsMap.set(item.id, {\n                    correct: item.correct,\n                    incorrect: item.incorrect,\n                    lastPracticed: item.lastPracticed\n                });\n            }\n        });\n\n        return {\n            stats: statsMap,\n            favorites: validationResult.data.favorites || [],\n            recentSearches: validationResult.data.recentSearches || [],\n            lastUpdated: validationResult.data.lastUpdated\n        };\n    } catch (error) {\n        const err = error instanceof Error ? error : new Error(String(error));\n        ErrorHandler.handleError(err, 'Failed to load user progress', eventBus);\n        throw new StorageError('Failed to load user progress', { error: err });\n    }\n  }\n\n  /**\n   * Save active practice session to localStorage\n   * @param session Practice session data to save\n   * @param eventBus Optional event bus for error handling\n   * @throws StorageError if saving fails\n   */\n  public static savePracticeSession(session: PracticeSession, eventBus?: EventBus): void {\n    try {\n        // Validate practice session before saving\n        const result = PracticeSessionSchema.safeParse(session);\n        if (!result.success) {\n            throw new StorageError('Invalid practice session data', { result });\n        }\n\n        localStorage.setItem(\n            LocalStorageManager.SESSION_KEY,\n            JSON.stringify(session)\n        );\n    } catch (error) {\n        const err = error instanceof Error ? error : new Error(String(error));\n        ErrorHandler.handleError(err, 'Failed to save practice session', eventBus);\n        throw new StorageError('Failed to save practice session', { error: err });\n    }\n  }\n\n  /**\n   * Load active practice session from localStorage\n   * @param eventBus Optional event bus for error handling\n   * @returns Practice session data or null if not found\n   * @throws StorageError if loading fails\n   */\n  public static loadPracticeSession(eventBus?: EventBus): PracticeSession | null {\n    try {\n        const data = localStorage.getItem(LocalStorageManager.SESSION_KEY);\n        if (!data) return null;\n\n        const parsedData = JSON.parse(data);\n        const result = PracticeSessionSchema.safeParse(parsedData);\n        if (!result.success) {\n            throw new StorageError('Invalid practice session data format', { result });\n        }\n\n        return result.data;\n    } catch (error) {\n        const err = error instanceof Error ? error : new Error(String(error));\n        ErrorHandler.handleError(err, 'Failed to load practice session', eventBus);\n        throw new StorageError('Failed to load practice session', { error: err });\n    }\n  }\n\n  /**\n   * Clear active practice session from localStorage\n   * @param eventBus Optional event bus for error handling\n   * @throws StorageError if clearing fails\n   */\n  public static clearPracticeSession(eventBus?: EventBus): void {\n    try {\n        localStorage.removeItem(LocalStorageManager.SESSION_KEY);\n    } catch (error) {\n        const err = error instanceof Error ? error : new Error(String(error));\n        ErrorHandler.handleError(err, 'Failed to clear practice session', eventBus);\n        throw new StorageError('Failed to clear practice session', { error: err });\n    }\n  }\n\n  /**\n   * Export user data as JSON string\n   * @param eventBus Optional event bus for error handling\n   * @returns JSON string containing all user data\n   * @throws StorageError if exporting fails\n   */\n  public static exportUserData(eventBus?: EventBus): string {\n    try {\n        const progress = this.loadUserProgress(eventBus);\n        const session = this.loadPracticeSession(eventBus);\n\n        return JSON.stringify({\n            progress,\n            session,\n            exportedAt: new Date().toISOString()\n        }, null, 2);\n    } catch (error) {\n        const err = error instanceof Error ? error : new Error(String(error));\n        ErrorHandler.handleError(err, 'Failed to export user data', eventBus);\n        throw new StorageError('Failed to export user data', { error: err });\n    }\n  }\n\n  /**\n   * Import user data from JSON string\n   * @param jsonData JSON string containing user data\n   * @param eventBus Optional event bus for error handling\n   * @throws StorageError if importing fails\n   */\n  public static importUserData(jsonData: string, eventBus?: EventBus): void {\n    try {\n        const data = JSON.parse(jsonData);\n\n        if (data.progress) {\n            this.saveUserProgress({\n                stats: data.progress.stats,\n                favorites: data.progress.favorites,\n                recentSearches: data.progress.recentSearches\n            }, eventBus);\n        }\n\n        if (data.session) {\n            this.savePracticeSession(data.session, eventBus);\n        }\n    } catch (error) {\n        const err = error instanceof Error ? error : new Error(String(error));\n        ErrorHandler.handleError(err, 'Failed to import user data', eventBus);\n        throw new StorageError('Failed to import user data', { error: err });\n    }\n  }\n\n  /**\n   * Clear all tandem-related data from localStorage\n   * @param eventBus Optional event bus for error handling\n   * @throws StorageError if clearing fails\n   */\n  public static clearAllData(eventBus?: EventBus): void {\n    try {\n        Object.keys(localStorage)\n            .filter(key => key.startsWith(LocalStorageManager.PREFIX))\n            .forEach(key => localStorage.removeItem(key));\n    } catch (error) {\n        const err = error instanceof Error ? error : new Error(String(error));\n        ErrorHandler.handleError(err, 'Failed to clear all user data', eventBus);\n        throw new StorageError('Failed to clear all user data', { error: err });\n    }\n  }\n}\n\n// Export singleton instance\nexport const localStorageManager = new LocalStorageManager();","/**\n * Progress Tracking Schema\n *\n * This module defines the Zod schemas for tracking user progress in the language learning application.\n * It includes schemas for vocabulary mastery, lesson completion, quiz performance, and overall progress.\n */\nimport { z } from 'zod';\n// Vocabulary Mastery Schema\nexport const VocabularyMasterySchema = z.object({\n    id: z.string().uuid(),\n    itemId: z.string().uuid(),\n    correctCount: z.number().int().min(0).default(0),\n    incorrectCount: z.number().int().min(0).default(0),\n    totalAttempts: z.number().int().min(0).default(0),\n    lastPracticed: z.string().datetime().nullable().default(null),\n    masteryLevel: z.number().min(0).max(100).default(0),\n    isMastered: z.boolean().default(false),\n    createdAt: z.string().datetime().default(new Date().toISOString()),\n    updatedAt: z.string().datetime().default(new Date().toISOString())\n});\n// Lesson Progress Schema\nexport const LessonProgressSchema = z.object({\n    id: z.string().uuid(),\n    lessonId: z.string().uuid(),\n    userId: z.string().uuid().optional(), // For future multi-user support\n    status: z.enum(['not_started', 'in_progress', 'completed', 'mastered']).default('not_started'),\n    completionPercentage: z.number().min(0).max(100).default(0),\n    lastAccessed: z.string().datetime().nullable().default(null),\n    completedAt: z.string().datetime().nullable().default(null),\n    createdAt: z.string().datetime().default(new Date().toISOString()),\n    updatedAt: z.string().datetime().default(new Date().toISOString())\n});\n// Quiz Performance Schema\nexport const QuizPerformanceSchema = z.object({\n    id: z.string().uuid(),\n    quizId: z.string().uuid(),\n    sessionId: z.string().uuid(),\n    score: z.number().min(0).max(100).default(0),\n    totalQuestions: z.number().int().min(1).default(1),\n    correctAnswers: z.number().int().min(0).default(0),\n    incorrectAnswers: z.number().int().min(0).default(0),\n    timeTaken: z.number().int().min(0).default(0), // in seconds\n    completedAt: z.string().datetime().default(new Date().toISOString()),\n    createdAt: z.string().datetime().default(new Date().toISOString())\n});\n// Question Performance Schema\nexport const QuestionPerformanceSchema = z.object({\n    id: z.string().uuid(),\n    quizPerformanceId: z.string().uuid(),\n    questionId: z.string().uuid(),\n    questionType: z.string().min(1),\n    wasCorrect: z.boolean().default(false),\n    userAnswer: z.string().nullable().default(null),\n    correctAnswer: z.string().min(1),\n    timeTaken: z.number().int().min(0).default(0), // in seconds\n    createdAt: z.string().datetime().default(new Date().toISOString())\n});\n// Daily Progress Schema\nexport const DailyProgressSchema = z.object({\n    id: z.string().uuid(),\n    date: z.string().datetime().default(new Date().toISOString()),\n    xpEarned: z.number().int().min(0).default(0),\n    wordsPracticed: z.number().int().min(0).default(0),\n    lessonsCompleted: z.number().int().min(0).default(0),\n    quizzesTaken: z.number().int().min(0).default(0),\n    timeSpent: z.number().int().min(0).default(0), // in seconds\n    createdAt: z.string().datetime().default(new Date().toISOString()),\n    updatedAt: z.string().datetime().default(new Date().toISOString())\n});\n// Overall Progress Schema\nexport const OverallProgressSchema = z.object({\n    id: z.string().uuid(),\n    userId: z.string().uuid().optional(), // For future multi-user support\n    totalXP: z.number().int().min(0).default(0),\n    totalWordsPracticed: z.number().int().min(0).default(0),\n    totalLessonsCompleted: z.number().int().min(0).default(0),\n    totalQuizzesTaken: z.number().int().min(0).default(0),\n    totalTimeSpent: z.number().int().min(0).default(0), // in seconds\n    currentLevel: z.number().int().min(1).default(1),\n    currentStreak: z.number().int().min(0).default(0),\n    longestStreak: z.number().int().min(0).default(0),\n    lastActiveDate: z.string().datetime().nullable().default(null),\n    createdAt: z.string().datetime().default(new Date().toISOString()),\n    updatedAt: z.string().datetime().default(new Date().toISOString())\n});\n// Progress Data Schema (for localStorage)\nexport const ProgressDataSchema = z.object({\n    vocabularyMastery: z.record(z.string().uuid(), VocabularyMasterySchema),\n    lessonProgress: z.record(z.string().uuid(), LessonProgressSchema),\n    quizPerformance: z.record(z.string().uuid(), QuizPerformanceSchema),\n    questionPerformance: z.record(z.string().uuid(), QuestionPerformanceSchema),\n    dailyProgress: z.record(z.string(), DailyProgressSchema), // date as key\n    overallProgress: OverallProgressSchema\n});\n// Utility functions for progress calculation\nexport const calculateMasteryLevel = (correct, incorrect) => {\n    const total = correct + incorrect;\n    if (total === 0)\n        return 0;\n    // Simple mastery calculation: 80% correct = mastered\n    const mastery = (correct / total) * 100;\n    return Math.min(100, Math.max(0, Math.round(mastery)));\n};\nexport const isItemMastered = (masteryLevel) => {\n    return masteryLevel >= 80;\n};\nexport const calculateLevel = (totalXP) => {\n    // Level 1: 0-200 XP\n    // Level 2: 201-500 XP\n    // Level 3: 501-900 XP\n    // Level 4: 901-1400 XP\n    // Level 5: 1401-2000 XP\n    // And so on...\n    if (totalXP < 200)\n        return 1;\n    if (totalXP < 500)\n        return 2;\n    if (totalXP < 900)\n        return 3;\n    if (totalXP < 1400)\n        return 4;\n    if (totalXP < 2000)\n        return 5;\n    // For higher levels, use a formula\n    const level = Math.floor(Math.sqrt(totalXP / 100)) + 1;\n    return Math.max(1, level);\n};\nexport const calculateXPForLevel = (level) => {\n    if (level === 1)\n        return 0;\n    if (level === 2)\n        return 200;\n    if (level === 3)\n        return 500;\n    if (level === 4)\n        return 900;\n    if (level === 5)\n        return 1400;\n    // For higher levels, use the inverse of the level calculation\n    return Math.pow(level - 1, 2) * 100;\n};\n//# sourceMappingURL=progress.js.map","import { browser } from '$app/environment';\nimport { Debug } from '$lib/utils';\nimport { EventBus, EventTypes, type XPEvent, type LevelUpEvent } from '../services/event-bus';\nimport { StateError, StorageError, ErrorHandler } from '../services/errors';\nimport { calculateLevel, calculateXPForLevel } from '../schemas/progress';\n\nconst DAILY_XP_TARGET = 50;\nconst XP_PER_WORD = 10;\n\nexport class LearningSession {\n    // Session State with proper typing\n    isActive = $state<boolean>(false);\n    currentStreak = $state<number>(0);\n    sessionXP = $state<number>(0);\n    dailyXP = $state<number>(0);\n    lastPracticeDate = $state<string | null>(null);\n    totalXP = $state<number>(0); // Track total XP from events\n\n    // Gamification\n    dailyTarget = DAILY_XP_TARGET;\n\n    // Event handling\n    private eventBus: EventBus;\n    private xpEventUnsubscribe: (() => void) | null = null;\n    private levelUpEventUnsubscribe: (() => void) | null = null;\n\n    // Level System (Derived) with memoization\n    level = $derived.by(() => calculateLevel(this.totalXP));\n    nextLevelXP = $derived.by(() => calculateXPForLevel(this.level + 1));\n    currentLevelStartXP = $derived.by(() => calculateXPForLevel(this.level));\n\n    levelProgress = $derived.by(() => {\n        const xpInLevel = this.totalXP - this.currentLevelStartXP;\n        const levelSpan = this.nextLevelXP - this.currentLevelStartXP;\n\n        // Ensure we don't divide by zero and return a valid percentage\n        if (levelSpan <= 0) return 0;\n        return Math.min(100, Math.max(0, (xpInLevel / levelSpan) * 100));\n    });\n\n    progressPercentage = $derived.by(() => {\n        // Ensure we don't divide by zero\n        if (this.dailyTarget <= 0) return 0;\n        return Math.min(100, (this.dailyXP / this.dailyTarget) * 100);\n    });\n    isDailyGoalReached = $derived(this.dailyXP >= this.dailyTarget);\n\n    constructor(eventBus: EventBus) {\n        this.eventBus = eventBus;\n\n        if (browser) {\n            this.loadState();\n        }\n\n        // Subscribe to XP events with proper typing\n        this.xpEventUnsubscribe = eventBus.subscribe(EventTypes.XP_EARNED, (event: XPEvent) => {\n            this.handleXPEarned(event);\n        });\n\n        // Subscribe to level up events\n        this.levelUpEventUnsubscribe = eventBus.subscribe(EventTypes.LEVEL_UP, (event: LevelUpEvent) => {\n            this.handleLevelUp(event);\n        });\n\n        // Initialize derived values - no effect needed for derived values\n        // Derived values are automatically calculated when accessed\n        this.level;\n        this.nextLevelXP;\n        this.currentLevelStartXP;\n        this.levelProgress;\n        this.progressPercentage;\n        this.isDailyGoalReached;\n    }\n\n    startSession() {\n        this.isActive = true;\n        this.sessionXP = 0;\n        this.checkStreak();\n    }\n\n    endSession() {\n        this.isActive = false;\n        this.saveState();\n    }\n\n    /**\n     * Award XP for the current session\n     * @param amount Amount of XP to award (default: XP_PER_WORD)\n     * @returns boolean indicating if a level up occurred\n     * @throws StateError if the amount is invalid\n     */\n    awardXP(amount: number = XP_PER_WORD): boolean {\n        // Validate input\n        if (typeof amount !== 'number' || amount <= 0 || !Number.isFinite(amount)) {\n            throw new StateError('Invalid XP amount', { amount });\n        }\n\n        this.sessionXP += amount;\n        this.dailyXP += amount;\n\n        // Emit XP earned event\n        this.eventBus.emit(EventTypes.XP_EARNED, {\n            amount,\n            reason: 'Session activity',\n            timestamp: new Date()\n        } as XPEvent);\n\n        this.saveState();\n        return false;\n    }\n\n    /**\n     * Handle XP earned event from ProgressService\n     * @param event XP event containing amount and metadata\n     */\n    private handleXPEarned(event: XPEvent) {\n        // Update our total XP tracking\n        this.totalXP += event.amount;\n\n        // Reset daily XP if it's a new day\n        this.checkStreak();\n\n        this.saveState();\n    }\n\n    /**\n     * Handle level up event from ProgressService\n     * @param event Level up event containing level information\n     */\n    private handleLevelUp(event: LevelUpEvent) {\n        // Level up is handled by ProgressService, we just need to update our state\n        this.totalXP = event.totalXP;\n        Debug.log('LearningSession', `Level up detected: ${event.oldLevel} -> ${event.newLevel}`);\n    }\n\n    /**\n     * Get the current total XP\n     * @returns Total XP\n     */\n    getTotalXP(): number {\n        return this.totalXP;\n    }\n\n    /**\n     * Check and update streak information\n     * @throws StateError if date operations fail\n     */\n    private checkStreak(): void {\n        try {\n            const today = new Date().toISOString().split('T')[0];\n\n            if (!today) {\n                throw new Error('Failed to get current date');\n            }\n\n            if (this.lastPracticeDate === today) return; // Already practiced today\n\n            const yesterday = new Date();\n            yesterday.setDate(yesterday.getDate() - 1);\n            const yesterdayStr = yesterday.toISOString().split('T')[0];\n\n            if (!yesterdayStr) {\n                throw new Error('Failed to get yesterday date');\n            }\n\n            if (this.lastPracticeDate === yesterdayStr) {\n                // Continued streak\n                this.currentStreak++;\n            } else if (this.lastPracticeDate && this.lastPracticeDate < yesterdayStr) {\n                // Streak broken\n                this.currentStreak = 1;\n            } else {\n                // First time or fresh start\n                if (this.currentStreak === 0) this.currentStreak = 1;\n            }\n\n            // Reset daily XP if it's a new day\n            if (this.lastPracticeDate !== today) {\n                this.dailyXP = 0;\n            }\n\n            this.lastPracticeDate = today;\n            this.saveState();\n        } catch (error) {\n            ErrorHandler.handleError(error, 'Failed to check streak');\n            throw new StateError('Failed to check streak', { error });\n        }\n    }\n\n    // Persistence\n    /**\n     * Load the session state from localStorage\n     * @throws StorageError if loading fails\n     */\n    private loadState(): void {\n        if (!browser) return;\n\n        try {\n            const saved = localStorage.getItem('learning-session');\n            if (saved) {\n                const parsed = JSON.parse(saved);\n\n                // Validate and set state with proper typing\n                this.currentStreak = typeof parsed.currentStreak === 'number' ? parsed.currentStreak : 0;\n                this.lastPracticeDate = typeof parsed.lastPracticeDate === 'string' ? parsed.lastPracticeDate : null;\n                this.dailyXP = typeof parsed.dailyXP === 'number' ? parsed.dailyXP : 0;\n                this.totalXP = typeof parsed.totalXP === 'number' ? parsed.totalXP : 0;\n\n                // Reset daily XP if it's a new day\n                const today = new Date().toISOString().split('T')[0];\n                if (parsed.lastPracticeDate !== today) {\n                    this.dailyXP = 0;\n                }\n            }\n        } catch (error) {\n            ErrorHandler.handleError(error, 'Failed to load learning session state');\n            // Re-throw to allow application to handle initialization failure\n            throw new StorageError('Failed to load learning session state', {\n                error,\n                hasSavedData: saved !== null\n            });\n        }\n    }\n\n    /**\n     * Save the current session state to localStorage\n     * @throws StorageError if saving fails\n     */\n    private saveState(): void {\n        if (!browser) return;\n        try {\n            // Validate state before saving\n            if (typeof this.currentStreak !== 'number' || typeof this.dailyXP !== 'number' || typeof this.totalXP !== 'number') {\n                throw new Error('Invalid session state: numbers expected');\n            }\n\n            localStorage.setItem('learning-session', JSON.stringify({\n                currentStreak: this.currentStreak,\n                dailyXP: this.dailyXP,\n                lastPracticeDate: this.lastPracticeDate,\n                totalXP: this.totalXP\n            }));\n        } catch (error) {\n            ErrorHandler.handleError(error, 'Failed to save learning session state');\n            throw new StorageError('Failed to save learning session state', {\n                error,\n                currentStreakType: typeof this.currentStreak,\n                dailyXPType: typeof this.dailyXP,\n                lastPracticeDateType: typeof this.lastPracticeDate,\n                totalXPType: typeof this.totalXP\n            });\n        }\n    }\n\n    destroy(): void {\n        Debug.log('LearningSession', 'Destroying LearningSession, cleaning up resources');\n        if (this.xpEventUnsubscribe) {\n            this.xpEventUnsubscribe();\n            this.xpEventUnsubscribe = null;\n        }\n        if (this.levelUpEventUnsubscribe) {\n            this.levelUpEventUnsubscribe();\n            this.levelUpEventUnsubscribe = null;\n        }\n    }\n}\n// Create singleton instance - will be initialized by DI container\nlet learningSessionInstance: LearningSession | null = null;\n\n// Export a getter and setter to avoid direct import reassignment issues\nexport function getLearningSession(): LearningSession | null {\n    return learningSessionInstance;\n}\n\nexport function setLearningSession(session: LearningSession): void {\n    learningSessionInstance = session;\n}\n\nexport { learningSessionInstance as learningSession };\n\n// Add cleanup for application shutdown\nexport function setupSessionCleanup() {\n    if (browser) {\n        window.addEventListener('beforeunload', () => {\n            const session = getLearningSession();\n            if (session) {\n                session.destroy();\n            }\n        });\n    }\n}\n\n// Initialize cleanup\nsetupSessionCleanup();","/**\n * Progress Tracking Service\n *\n * This service provides comprehensive progress tracking functionality for the language learning application.\n * It handles vocabulary mastery, lesson completion, quiz performance, and overall user progress.\n */\nimport { browser } from '$app/environment';\nimport { v4 as uuidv4 } from 'uuid';\nimport { LocalStorageManager } from '$lib/utils/localStorage';\nimport { VocabularyMasterySchema, LessonProgressSchema, QuizPerformanceSchema, QuestionPerformanceSchema, DailyProgressSchema, ProgressDataSchema, calculateMasteryLevel, isItemMastered, calculateLevel, calculateXPForLevel } from '$lib/schemas/progress';\nimport { learningSession } from '$lib/state/session.svelte';\nexport class ProgressService {\n    constructor() {\n        this.progressData = this.getDefaultProgressData();\n        if (browser) {\n            this.loadProgress();\n        }\n    }\n    static getInstance() {\n        if (!ProgressService.instance) {\n            ProgressService.instance = new ProgressService();\n        }\n        return ProgressService.instance;\n    }\n    getDefaultProgressData() {\n        return {\n            vocabularyMastery: {},\n            lessonProgress: {},\n            quizPerformance: {},\n            questionPerformance: {},\n            dailyProgress: {},\n            overallProgress: {\n                id: uuidv4(),\n                totalXP: 0,\n                totalWordsPracticed: 0,\n                totalLessonsCompleted: 0,\n                totalQuizzesTaken: 0,\n                totalTimeSpent: 0,\n                currentLevel: 1,\n                currentStreak: 0,\n                longestStreak: 0,\n                lastActiveDate: null,\n                createdAt: new Date().toISOString(),\n                updatedAt: new Date().toISOString()\n            }\n        };\n    }\n    //#region Vocabulary Mastery Tracking\n    /**\n     * Record a vocabulary practice result\n     * @param itemId The ID of the vocabulary item\n     * @param correct Whether the answer was correct\n     * @param responseTime Response time in seconds (optional)\n     */\n    recordVocabularyPractice(itemId, correct, _responseTime) {\n        const now = new Date().toISOString();\n        // Get or create mastery record\n        let mastery = this.progressData.vocabularyMastery[itemId] || {\n            id: uuidv4(),\n            itemId,\n            correctCount: 0,\n            incorrectCount: 0,\n            totalAttempts: 0,\n            lastPracticed: null,\n            masteryLevel: 0,\n            isMastered: false,\n            createdAt: now,\n            updatedAt: now\n        };\n        // Update mastery stats\n        if (correct) {\n            mastery.correctCount++;\n        }\n        else {\n            mastery.incorrectCount++;\n        }\n        mastery.totalAttempts++;\n        mastery.lastPracticed = now;\n        mastery.updatedAt = now;\n        // Calculate mastery level\n        mastery.masteryLevel = calculateMasteryLevel(mastery.correctCount, mastery.incorrectCount);\n        mastery.isMastered = isItemMastered(mastery.masteryLevel);\n        // Update the record\n        this.progressData.vocabularyMastery[itemId] = VocabularyMasterySchema.parse(mastery);\n        // Update overall progress\n        this.updateOverallProgress({\n            xpEarned: ProgressService.XP_VALUES.VOCABULARY_PRACTICE,\n            wordsPracticed: 1,\n            timeSpent: responseTime || 0\n        });\n        // Award bonus XP for mastering an item\n        if (mastery.isMastered && mastery.totalAttempts === 1) {\n            this.awardXP(ProgressService.XP_VALUES.VOCABULARY_MASTERED, 'Vocabulary mastered');\n        }\n        this.saveProgress();\n    }\n    /**\n     * Get mastery data for a specific vocabulary item\n     * @param itemId The ID of the vocabulary item\n     * @returns VocabularyMastery or null if not found\n     */\n    getVocabularyMastery(itemId) {\n        return this.progressData.vocabularyMastery[itemId] || null;\n    }\n    /**\n     * Get all vocabulary mastery data\n     * @returns Record of vocabulary mastery data\n     */\n    getAllVocabularyMastery() {\n        return this.progressData.vocabularyMastery;\n    }\n    /**\n     * Get vocabulary items that need practice\n     * @param limit Maximum number of items to return\n     * @returns Array of vocabulary items that need practice\n     */\n    getVocabularyNeedingPractice(limit = 10) {\n        return Object.values(this.progressData.vocabularyMastery)\n            .filter(item => {\n            // Items that haven't been mastered yet\n            if (item.isMastered)\n                return false;\n            // Items with low mastery level or few attempts\n            const totalAttempts = item.correctCount + item.incorrectCount;\n            const successRate = totalAttempts > 0 ? item.correctCount / totalAttempts : 0;\n            return successRate < 0.8 || totalAttempts < 3;\n        })\n            .sort((a, b) => {\n            // Sort by mastery level (lowest first) and then by last practiced (oldest first)\n            if (a.masteryLevel !== b.masteryLevel) {\n                return a.masteryLevel - b.masteryLevel;\n            }\n            return new Date(a.lastPracticed || 0).getTime() - new Date(b.lastPracticed || 0).getTime();\n        })\n            .slice(0, limit);\n    }\n    //#endregion\n    //#region Lesson Progress Tracking\n    /**\n     * Record lesson progress\n     * @param lessonId The ID of the lesson\n     * @param completionPercentage The percentage of completion (0-100)\n     */\n    recordLessonProgress(lessonId, completionPercentage) {\n        const now = new Date().toISOString();\n        const _today = now.split('T')[0];\n        // Get or create lesson progress record\n        let lessonProgress = this.progressData.lessonProgress[lessonId] || {\n            id: uuidv4(),\n            lessonId,\n            status: 'not_started',\n            completionPercentage: 0,\n            lastAccessed: null,\n            completedAt: null,\n            createdAt: now,\n            updatedAt: now\n        };\n        // Update lesson progress\n        lessonProgress.completionPercentage = Math.min(100, Math.max(0, completionPercentage));\n        lessonProgress.lastAccessed = now;\n        lessonProgress.updatedAt = now;\n        // Update status based on completion percentage\n        if (lessonProgress.completionPercentage >= 100) {\n            lessonProgress.status = 'completed';\n            lessonProgress.completedAt = now;\n        }\n        else if (lessonProgress.completionPercentage > 0) {\n            lessonProgress.status = 'in_progress';\n        }\n        // Update the record\n        this.progressData.lessonProgress[lessonId] = LessonProgressSchema.parse(lessonProgress);\n        // If lesson is completed, update overall progress\n        if (lessonProgress.status === 'completed' && lessonProgress.completionPercentage === 100) {\n            this.updateOverallProgress({\n                xpEarned: ProgressService.XP_VALUES.LESSON_COMPLETED,\n                lessonsCompleted: 1,\n                timeSpent: 0 // Time spent on lessons is tracked separately\n            });\n        }\n        this.saveProgress();\n    }\n    /**\n     * Get progress for a specific lesson\n     * @param lessonId The ID of the lesson\n     * @returns LessonProgress or null if not found\n     */\n    getLessonProgress(lessonId) {\n        return this.progressData.lessonProgress[lessonId] || null;\n    }\n    /**\n     * Get all lesson progress data\n     * @returns Record of lesson progress data\n     */\n    getAllLessonProgress() {\n        return this.progressData.lessonProgress;\n    }\n    //#endregion\n    //#region Quiz Performance Tracking\n    /**\n     * Record quiz performance\n     * @param quizId The ID of the quiz\n     * @param score The score achieved (0-100)\n     * @param totalQuestions Total number of questions\n     * @param correctAnswers Number of correct answers\n     * @param timeTaken Time taken in seconds\n     * @param sessionId The session ID for this quiz attempt\n     */\n    recordQuizPerformance(quizId, score, totalQuestions, correctAnswers, timeTaken, sessionId) {\n        const now = new Date().toISOString();\n        // Create quiz performance record\n        const quizPerformance = {\n            id: uuidv4(),\n            quizId,\n            sessionId,\n            score: Math.min(100, Math.max(0, score)),\n            totalQuestions,\n            correctAnswers,\n            incorrectAnswers: totalQuestions - correctAnswers,\n            timeTaken,\n            completedAt: now,\n            createdAt: now\n        };\n        // Add to progress data\n        this.progressData.quizPerformance[quizPerformance.id] = QuizPerformanceSchema.parse(quizPerformance);\n        // Update overall progress\n        this.updateOverallProgress({\n            xpEarned: ProgressService.XP_VALUES.QUIZ_COMPLETED,\n            quizzesTaken: 1,\n            timeSpent: timeTaken\n        });\n        this.saveProgress();\n    }\n    /**\n     * Record question performance\n     * @param quizPerformanceId The ID of the quiz performance record\n     * @param questionId The ID of the question\n     * @param questionType The type of the question\n     * @param wasCorrect Whether the answer was correct\n     * @param userAnswer The user's answer\n     * @param correctAnswer The correct answer\n     * @param timeTaken Time taken in seconds\n     */\n    recordQuestionPerformance(quizPerformanceId, questionId, questionType, wasCorrect, userAnswer, correctAnswer, timeTaken) {\n        const now = new Date().toISOString();\n        // Create question performance record\n        const questionPerformance = {\n            id: uuidv4(),\n            quizPerformanceId,\n            questionId,\n            questionType,\n            wasCorrect,\n            userAnswer,\n            correctAnswer,\n            timeTaken,\n            createdAt: now\n        };\n        // Add to progress data\n        this.progressData.questionPerformance[questionPerformance.id] =\n            QuestionPerformanceSchema.parse(questionPerformance);\n        // If the question was part of vocabulary practice, update vocabulary mastery\n        if (questionType.includes('vocabulary') && questionId) {\n            this.recordVocabularyPractice(questionId, wasCorrect, timeTaken);\n        }\n        this.saveProgress();\n    }\n    /**\n     * Get quiz performance by ID\n     * @param quizPerformanceId The ID of the quiz performance record\n     * @returns QuizPerformance or null if not found\n     */\n    getQuizPerformance(quizPerformanceId) {\n        return this.progressData.quizPerformance[quizPerformanceId] || null;\n    }\n    /**\n     * Get all quiz performance records\n     * @returns Record of quiz performance data\n     */\n    getAllQuizPerformance() {\n        return this.progressData.quizPerformance;\n    }\n    /**\n     * Get quiz performance records for a specific quiz\n     * @param quizId The ID of the quiz\n     * @returns Array of quiz performance records\n     */\n    getQuizPerformanceByQuizId(quizId) {\n        return Object.values(this.progressData.quizPerformance)\n            .filter(performance => performance.quizId === quizId)\n            .sort((a, b) => new Date(b.completedAt).getTime() - new Date(a.completedAt).getTime());\n    }\n    //#endregion\n    //#region Daily Progress Tracking\n    /**\n     * Record daily progress\n     * @param date The date in YYYY-MM-DD format\n     * @param xpEarned XP earned on this date\n     * @param wordsPracticed Number of words practiced\n     * @param lessonsCompleted Number of lessons completed\n     * @param quizzesTaken Number of quizzes taken\n     * @param timeSpent Time spent in seconds\n     */\n    recordDailyProgress(date, xpEarned, wordsPracticed, lessonsCompleted, quizzesTaken, timeSpent) {\n        const now = new Date().toISOString();\n        // Get or create daily progress record\n        let dailyProgress = this.progressData.dailyProgress[date] || {\n            id: uuidv4(),\n            date: new Date(date).toISOString(),\n            xpEarned: 0,\n            wordsPracticed: 0,\n            lessonsCompleted: 0,\n            quizzesTaken: 0,\n            timeSpent: 0,\n            createdAt: now,\n            updatedAt: now\n        };\n        // Update daily progress\n        dailyProgress.xpEarned += xpEarned;\n        dailyProgress.wordsPracticed += wordsPracticed;\n        dailyProgress.lessonsCompleted += lessonsCompleted;\n        dailyProgress.quizzesTaken += quizzesTaken;\n        dailyProgress.timeSpent += timeSpent;\n        dailyProgress.updatedAt = now;\n        // Update the record\n        this.progressData.dailyProgress[date] = DailyProgressSchema.parse(dailyProgress);\n        this.saveProgress();\n    }\n    /**\n     * Get daily progress for a specific date\n     * @param date The date in YYYY-MM-DD format\n     * @returns DailyProgress or null if not found\n     */\n    getDailyProgress(date) {\n        return this.progressData.dailyProgress[date] || null;\n    }\n    /**\n     * Get all daily progress records\n     * @returns Record of daily progress data\n     */\n    getAllDailyProgress() {\n        return this.progressData.dailyProgress;\n    }\n    /**\n     * Get daily progress for the last N days\n     * @param days Number of days to retrieve\n     * @returns Array of daily progress records\n     */\n    getRecentDailyProgress(days = 7) {\n        const today = new Date();\n        const result = [];\n        for (let i = 0; i < days; i++) {\n            const date = new Date(today);\n            date.setDate(today.getDate() - i);\n            const dateStr = date.toISOString().split('T')[0];\n            const progress = this.progressData.dailyProgress[dateStr];\n            if (progress) {\n                result.push(progress);\n            }\n        }\n        return result.sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());\n    }\n    //#endregion\n    //#region Overall Progress Tracking\n    /**\n     * Update overall progress with new activity\n     * @param params Object containing progress updates\n     */\n    updateOverallProgress(params) {\n        const now = new Date().toISOString();\n        const today = now.split('T')[0];\n        // Update overall progress\n        this.progressData.overallProgress.totalXP += params.xpEarned;\n        this.progressData.overallProgress.totalWordsPracticed += params.wordsPracticed || 0;\n        this.progressData.overallProgress.totalLessonsCompleted += params.lessonsCompleted || 0;\n        this.progressData.overallProgress.totalQuizzesTaken += params.quizzesTaken || 0;\n        this.progressData.overallProgress.totalTimeSpent += params.timeSpent;\n        this.progressData.overallProgress.lastActiveDate = now;\n        this.progressData.overallProgress.updatedAt = now;\n        // Update level based on total XP\n        const newLevel = calculateLevel(this.progressData.overallProgress.totalXP);\n        if (newLevel > this.progressData.overallProgress.currentLevel) {\n            this.progressData.overallProgress.currentLevel = newLevel;\n            // Level up event is handled by the UI\n        }\n        // Update streak information\n        this.updateStreak(today);\n        // Record daily progress\n        this.recordDailyProgress(today, params.xpEarned, params.wordsPracticed || 0, params.lessonsCompleted || 0, params.quizzesTaken || 0, params.timeSpent);\n        // Update learning session\n        learningSession.awardXP(params.xpEarned);\n        this.saveProgress();\n    }\n    /**\n     * Update streak information\n     * @param today Today's date in YYYY-MM-DD format\n     */\n    updateStreak(today) {\n        const yesterday = new Date();\n        yesterday.setDate(yesterday.getDate() - 1);\n        const yesterdayStr = yesterday.toISOString().split('T')[0];\n        // If this is the first activity, initialize streak\n        if (!this.progressData.overallProgress.lastActiveDate) {\n            this.progressData.overallProgress.currentStreak = 1;\n            this.progressData.overallProgress.longestStreak = 1;\n            return;\n        }\n        // Check if the last activity was yesterday\n        if (this.progressData.overallProgress.lastActiveDate === yesterdayStr) {\n            // Continue the streak\n            this.progressData.overallProgress.currentStreak++;\n        }\n        else if (this.progressData.overallProgress.lastActiveDate !== today) {\n            // Streak is broken\n            this.progressData.overallProgress.currentStreak = 1;\n        }\n        // Update longest streak if needed\n        if (this.progressData.overallProgress.currentStreak > this.progressData.overallProgress.longestStreak) {\n            this.progressData.overallProgress.longestStreak = this.progressData.overallProgress.currentStreak;\n        }\n    }\n    /**\n     * Get overall progress\n     * @returns OverallProgress\n     */\n    getOverallProgress() {\n        return this.progressData.overallProgress;\n    }\n    /**\n     * Get current level information\n     * @returns Object containing level information\n     */\n    getLevelInfo() {\n        const level = this.progressData.overallProgress.currentLevel;\n        const currentXP = this.progressData.overallProgress.totalXP;\n        const nextLevelXP = calculateXPForLevel(level + 1);\n        const currentLevelXP = calculateXPForLevel(level);\n        const xpInLevel = currentXP - currentLevelXP;\n        const levelSpan = nextLevelXP - currentLevelXP;\n        const progressPercentage = Math.min(100, Math.max(0, (xpInLevel / levelSpan) * 100));\n        return {\n            level,\n            currentXP,\n            nextLevelXP,\n            progressPercentage\n        };\n    }\n    /**\n     * Award XP for an achievement\n     * @param amount Amount of XP to award\n     * @param reason Reason for awarding XP\n     */\n    awardXP(amount, _reason) {\n        this.updateOverallProgress({\n            xpEarned: amount,\n            timeSpent: 0\n        });\n    }\n    //#endregion\n    //#region Progress Data Management\n    /**\n     * Load progress data from localStorage\n     */\n    loadProgress() {\n        try {\n            const savedData = LocalStorageManager.loadUserProgress();\n            if (savedData) {\n                // Validate and parse the saved data\n                const parsedData = ProgressDataSchema.safeParse(savedData);\n                if (parsedData.success) {\n                    this.progressData = parsedData.data;\n                }\n                else {\n                    // Invalid progress data, using default\n                    this.progressData = this.getDefaultProgressData();\n                }\n            }\n        }\n        catch (_error) {\n            // Error loading progress data\n            this.progressData = this.getDefaultProgressData();\n        }\n    }\n    /**\n     * Save progress data to localStorage\n     */\n    saveProgress() {\n        if (!browser)\n            return;\n        try {\n            LocalStorageManager.saveUserProgress(this.progressData);\n        }\n        catch (_error) {\n            // Error saving progress data\n        }\n    }\n    /**\n     * Export progress data as JSON\n     * @returns JSON string of progress data\n     */\n    exportProgress() {\n        return JSON.stringify(this.progressData, null, 2);\n    }\n    /**\n     * Import progress data from JSON\n     * @param jsonData JSON string of progress data\n     * @throws Error if import fails\n     */\n    importProgress(jsonData) {\n        try {\n            const parsedData = JSON.parse(jsonData);\n            const validatedData = ProgressDataSchema.parse(parsedData);\n            this.progressData = validatedData;\n            this.saveProgress();\n        }\n        catch (_error) {\n            // Error importing progress data\n            throw new Error('Failed to import progress data');\n        }\n    }\n    /**\n     * Reset all progress data\n     */\n    resetProgress() {\n        this.progressData = this.getDefaultProgressData();\n        this.saveProgress();\n    }\n    //#endregion\n    //#region Utility Methods\n    /**\n     * Get progress summary for dashboard display\n     * @returns Object containing key progress metrics\n     */\n    getProgressSummary() {\n        const levelInfo = this.getLevelInfo();\n        const overallProgress = this.getOverallProgress();\n        const today = new Date().toISOString().split('T')[0];\n        const dailyProgress = this.getDailyProgress(today) || { xpEarned: 0 };\n        return {\n            totalXP: overallProgress.totalXP,\n            currentLevel: levelInfo.level,\n            levelProgress: levelInfo.progressPercentage,\n            wordsPracticed: overallProgress.totalWordsPracticed,\n            lessonsCompleted: overallProgress.totalLessonsCompleted,\n            quizzesTaken: overallProgress.totalQuizzesTaken,\n            currentStreak: overallProgress.currentStreak,\n            longestStreak: overallProgress.longestStreak,\n            dailyGoalProgress: Math.min(100, (dailyProgress.xpEarned / learningSession.dailyTarget) * 100)\n        };\n    }\n    /**\n     * Get vocabulary mastery statistics\n     * @returns Object containing vocabulary mastery statistics\n     */\n    getVocabularyMasteryStats() {\n        const allItems = Object.values(this.progressData.vocabularyMastery);\n        const masteredItems = allItems.filter(item => item.isMastered).length;\n        const totalItems = allItems.length;\n        const averageMasteryLevel = totalItems > 0\n            ? allItems.reduce((sum, item) => sum + item.masteryLevel, 0) / totalItems\n            : 0;\n        const masteryPercentage = totalItems > 0\n            ? (masteredItems / totalItems) * 100\n            : 0;\n        return {\n            totalItems,\n            masteredItems,\n            masteryPercentage,\n            averageMasteryLevel\n        };\n    }\n    /**\n     * Get lesson completion statistics\n     * @returns Object containing lesson completion statistics\n     */\n    getLessonCompletionStats() {\n        const allLessons = Object.values(this.progressData.lessonProgress);\n        const completedLessons = allLessons.filter(lesson => lesson.status === 'completed').length;\n        const totalLessons = allLessons.length;\n        const completionPercentage = totalLessons > 0\n            ? (completedLessons / totalLessons) * 100\n            : 0;\n        return {\n            totalLessons,\n            completedLessons,\n            completionPercentage\n        };\n    }\n}\n// XP values for different actions\nProgressService.XP_VALUES = {\n    VOCABULARY_PRACTICE: 10,\n    VOCABULARY_MASTERED: 50,\n    LESSON_COMPLETED: 100,\n    QUIZ_COMPLETED: 150,\n    DAILY_GOAL: 200\n};\nexport const progressService = ProgressService.getInstance();\n//# sourceMappingURL=progress.js.map","/**\n * Type definitions for the Dynamic Lesson Generation system\n *\n * This file contains all TypeScript interfaces and types used in the lesson generation\n * system, ensuring type safety and clear contracts between components.\n */\n\nimport type { VocabularyItem, PartOfSpeech, VocabularyCategory } from '$lib/types/vocabulary';\nimport type { Lesson as _Lesson, LessonDifficulty as _LessonDifficulty, LessonType as _LessonType } from '$lib/schemas/lesson';\n\n/**\n * Lesson difficulty levels\n */\nexport type LessonDifficulty = 'A1' | 'A2' | 'B1' | 'B2' | 'C1';\n\n/**\n * Lesson types\n */\nexport type LessonType = 'vocabulary' | 'grammar' | 'mixed' | 'culture' | 'contextual';\n\n/**\n * Template variable types\n */\nexport type TemplateVariableType = 'string' | 'number' | 'boolean' | 'array' | 'object';\n\n/**\n * Template variable definition\n */\nexport interface TemplateVariable {\n  name: string;\n  type: TemplateVariableType;\n  description: string;\n  required: boolean;\n  defaultValue?: string | number | boolean | object | unknown[];\n}\n\n/**\n * Lesson template structure\n */\nexport interface LessonTemplate {\n  id: string;\n  name: string;\n  description: string;\n  type: LessonType;\n  difficultyRange: [LessonDifficulty, LessonDifficulty];\n  template: string;\n  variables: TemplateVariable[];\n  exampleData?: Record<string, string | number | boolean | object | unknown[]>;\n}\n\n/**\n * Grammar query criteria\n */\nexport interface GrammarQueryCriteria {\n  difficulty?: LessonDifficulty;\n  partOfSpeech?: PartOfSpeech;\n  limit?: number;\n  conceptType?: string;\n}\n\n/**\n * Cultural grammar concept structure\n */\nexport interface CulturalGrammarConcept {\n  id: string;\n  name: {\n    bulgarian: string;\n    german: string;\n  };\n  description: {\n    bulgarian: string;\n    german: string;\n  };\n  difficulty: LessonDifficulty;\n  partOfSpeech: PartOfSpeech[];\n  culturalContext: {\n    bulgarianPerspective: string;\n    germanPerspective: string;\n    crossLinguisticExplanation: {\n      bgToDe: string;\n      deToBg: string;\n    };\n  };\n  examples: Array<{\n    bulgarian: string;\n    german: string;\n    explanationBgToDe: string;\n    explanationDeToBg: string;\n  }>;\n  commonMistakes: {\n    bgToDe: string[];\n    deToBg: string[];\n  };\n  relatedConcepts: string[];\n  metadata: Record<string, string | number | boolean | object | unknown[]>;\n}\n\n/**\n * Lesson generation parameters\n */\nexport interface LessonGenerationParams {\n  type: LessonType;\n  difficulty: LessonDifficulty;\n  criteria: {\n    categories?: VocabularyCategory[];\n    partOfSpeech?: PartOfSpeech;\n    difficulty?: LessonDifficulty;\n    limit?: number;\n    conceptType?: string;\n  };\n  userId: string;\n  metadata?: Record<string, string | number | boolean | object | unknown[]>;\n}\n\n/**\n * Generated lesson content section\n */\nexport interface GeneratedLessonSection {\n  id: string;\n  title: string;\n  content: string;\n  type: 'introduction' | 'vocabulary' | 'grammar' | 'exercise' | 'summary' | 'cultural';\n  metadata?: Record<string, string | number | boolean | object | unknown[]>;\n}\n\n/**\n * Generated lesson structure\n */\nexport interface GeneratedLesson {\n  id: string;\n  type: LessonType;\n  difficulty: LessonDifficulty;\n  title: string;\n  sections: GeneratedLessonSection[];\n  vocabulary: VocabularyItem[];\n  grammarConcepts: CulturalGrammarConcept[];\n  learningObjectives: string[];\n  metadata: Record<string, string | number | boolean | object | unknown[]>;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\n/**\n * User learning profile for adaptive learning\n */\nexport interface UserLearningProfile {\n  userId: string;\n  proficiency: Record<LessonDifficulty, number>;\n  learningHistory: Record<string, {\n    lastReviewed: Date | null;\n    reviewCount: number;\n    proficiency: number;\n    learningPhase: number;\n  }>;\n  preferences: {\n    lessonTypes: LessonType[];\n    difficultyPreferences: Record<LessonType, LessonDifficulty>;\n    learningGoals: string[];\n  };\n  metadata: Record<string, string | number | boolean | object | unknown[]>;\n}\n\n/**\n * Template rendering context\n */\nexport interface TemplateRenderingContext {\n  [key: string]: string | number | boolean | object | unknown[] | undefined;\n  sectionTitle?: string;\n  count?: number;\n  theme?: string;\n  difficulty?: LessonDifficulty;\n  vocabulary?: VocabularyItem[];\n  grammarConcept?: CulturalGrammarConcept;\n  learningTip?: string;\n  learningObjectives?: string[];\n}\n\n/**\n * Lesson generation algorithm options\n */\nexport interface LessonGenerationOptions {\n  useSpacedRepetition?: boolean;\n  difficultyAdjustment?: boolean;\n  culturalContext?: boolean;\n  personalizationLevel?: 'low' | 'medium' | 'high';\n  maxItems?: number;\n}\n\n/**\n * Enhanced lesson criteria (extends legacy format)\n */\nexport interface EnhancedLessonCriteria {\n  userId?: string;\n  type?: LessonType;\n  difficulty?: LessonDifficulty;\n  categories?: VocabularyCategory[];\n  partOfSpeech?: PartOfSpeech;\n  limit?: number;\n  conceptType?: string;\n  metadata?: Record<string, string | number | boolean | object | unknown[]>;\n}\n\n/**\n * Template repository interface\n */\nexport interface ILessonTemplateRepository {\n  getTemplate(type: LessonType, difficulty: LessonDifficulty): Promise<LessonTemplate>;\n  getTemplateById(templateId: string): Promise<LessonTemplate | undefined>;\n  getAllTemplates(): Promise<LessonTemplate[]>;\n  validateTemplate(template: LessonTemplate): boolean;\n}\n\n/**\n * Cultural grammar service interface\n */\nexport interface ICulturalGrammarService {\n  query(criteria: GrammarQueryCriteria): Promise<CulturalGrammarConcept[]>;\n  getAllConcepts(): Promise<CulturalGrammarConcept[]>;\n  conceptAppliesToPartOfSpeech(concept: CulturalGrammarConcept, partOfSpeech: PartOfSpeech): boolean;\n}\n\n/**\n * Template renderer interface\n */\nexport interface ITemplateRenderer {\n  render(template: LessonTemplate, data: TemplateRenderingContext): string;\n  validateTemplate(template: LessonTemplate): boolean;\n  validateData(template: LessonTemplate, data: TemplateRenderingContext): boolean;\n}\n\n/**\n * Lesson generation engine interface\n */\nexport interface ILessonGenerationEngine {\n  generateLesson(params: LessonGenerationParams, options?: LessonGenerationOptions): Promise<GeneratedLesson>;\n  generateThematicLesson(params: LessonGenerationParams, options?: LessonGenerationOptions): Promise<GeneratedLesson>;\n  generateGrammarLesson(params: LessonGenerationParams, options?: LessonGenerationOptions): Promise<GeneratedLesson>;\n  generateContextualLesson(params: LessonGenerationParams, options?: LessonGenerationOptions): Promise<GeneratedLesson>;\n  generateAdaptiveLesson(params: LessonGenerationParams, options?: LessonGenerationOptions): Promise<GeneratedLesson>;\n}\n\n/**\n * Utility type for template variable validation\n */\nexport type TemplateVariableValidator = (value: string | number | boolean | object | unknown[], variable: TemplateVariable) => boolean;\n\n/**\n * Error types for lesson generation\n */\nexport class LessonGenerationError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'LessonGenerationError';\n  }\n}\n\nexport class TemplateRenderingError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'TemplateRenderingError';\n  }\n}\n\nexport class DataValidationError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'DataValidationError';\n  }\n}\n\n/**\n * Utility functions for type validation\n */\nexport const isLessonDifficulty = (value: string): value is LessonDifficulty => {\n  return ['A1', 'A2', 'B1', 'B2', 'C1'].includes(value);\n};\n\nexport const isLessonType = (value: string): value is LessonType => {\n  return ['vocabulary', 'grammar', 'mixed', 'cultural', 'contextual'].includes(value);\n};\n\nexport const isPartOfSpeech = (value: string): value is PartOfSpeech => {\n  return ['noun', 'verb', 'adjective', 'adverb', 'preposition', 'conjunction', 'pronoun', 'interjection', 'article', 'numeral'].includes(value);\n};\n\nexport const isVocabularyCategory = (value: string): value is VocabularyCategory => {\n  return [\n    'home', 'family', 'food', 'travel', 'work', 'education', 'nature', 'animals',\n    'body', 'health', 'clothing', 'colors', 'numbers', 'time', 'weather', 'emotions',\n    'sports', 'hobbies', 'technology', 'transportation', 'culture', 'society',\n    'business', 'science', 'art', 'literature', 'history', 'geography', 'uncategorized'\n  ].includes(value);\n};","/**\n * LessonTemplateRepository - Service for managing and retrieving lesson templates\n *\n * This service handles the loading, validation, and selection of lesson templates\n * for dynamic lesson generation.\n */\n\nimport type {\n  LessonTemplate,\n  LessonType,\n  LessonDifficulty,\n  ILessonTemplateRepository\n} from './types';\nimport { LessonGenerationError, DataValidationError } from './types';\n\n/**\n * LessonTemplateRepository class\n *\n * Implements the ILessonTemplateRepository interface to provide template management\n * functionality for the dynamic lesson generation system.\n */\nexport class LessonTemplateRepository implements ILessonTemplateRepository {\n  private templates: LessonTemplate[] = [];\n  private _initialized = false;\n  private templateCache: Map<string, LessonTemplate> = new Map();\n\n  /**\n   * Get the initialization status\n   */\n  get initialized(): boolean {\n    return this._initialized;\n  }\n\n  /**\n   * Initialize the template repository by loading templates\n   */\n  async initialize(): Promise<void> {\n    if (this._initialized) return;\n\n    try {\n      this.templates = await this.loadTemplates();\n      this._initialized = true;\n      this.cacheTemplates();\n    } catch (_error) {\n      throw new LessonGenerationError('Failed to initialize template repository');\n    }\n  }\n\n  /**\n   * Get a template by type and difficulty\n   * @param type - Lesson type\n   * @param difficulty - Lesson difficulty\n   * @returns Promise resolving to a lesson template\n   */\n  async getTemplate(type: LessonType, difficulty: LessonDifficulty): Promise<LessonTemplate> {\n    if (!this._initialized) {\n      await this.initialize();\n    }\n\n    // Check cache first\n    const cacheKey = `${type}-${difficulty}`;\n    if (this.templateCache.has(cacheKey)) {\n      return this.templateCache.get(cacheKey)!;\n    }\n\n    const matchingTemplates = this.templates.filter(template =>\n      template.type === type &&\n      this.isDifficultyInRange(difficulty, template.difficultyRange)\n    );\n\n    if (matchingTemplates.length === 0) {\n      throw new LessonGenerationError(\n        `No template found for type ${type} and difficulty ${difficulty}`\n      );\n    }\n\n    // Return random template from matching ones for variety\n    const selectedTemplate = matchingTemplates[\n      Math.floor(Math.random() * matchingTemplates.length)\n    ];\n\n    // Cache the selected template\n    this.templateCache.set(cacheKey, selectedTemplate);\n\n    return selectedTemplate;\n  }\n\n  /**\n   * Get a template by specific ID\n   * @param templateId - The unique identifier of the template\n   * @returns Promise resolving to the requested lesson template\n   */\n  async getTemplateById(templateId: string): Promise<LessonTemplate | undefined> {\n    if (!this._initialized) {\n      await this.initialize();\n    }\n\n    return this.templates.find(t => t.id === templateId);\n  }\n\n  /**\n   * Get all templates\n   * @returns Promise resolving to all lesson templates\n   */\n  async getAllTemplates(): Promise<LessonTemplate[]> {\n    if (!this.initialized) {\n      await this.initialize();\n    }\n    return [...this.templates];\n  }\n\n  /**\n   * Validate a template structure\n   * @param template - Template to validate\n   * @returns True if template is valid\n   * @throws DataValidationError if template is invalid\n   */\n  validateTemplate(template: LessonTemplate): boolean {\n    // Check required fields\n    if (!template.id || typeof template.id !== 'string') {\n      throw new DataValidationError('Template id is required and must be a string');\n    }\n\n    if (!template.name || typeof template.name !== 'string') {\n      throw new DataValidationError('Template name is required and must be a string');\n    }\n\n    if (!template.description || typeof template.description !== 'string') {\n      throw new DataValidationError('Template description is required and must be a string');\n    }\n\n    if (!template.type || !['vocabulary', 'grammar', 'mixed', 'cultural', 'contextual'].includes(template.type)) {\n      throw new DataValidationError('Template type is required and must be a valid LessonType');\n    }\n\n    if (!template.difficultyRange || !Array.isArray(template.difficultyRange) ||\n        template.difficultyRange.length !== 2) {\n      throw new DataValidationError('Template difficultyRange is required and must be an array of two elements');\n    }\n\n    if (!this.isValidDifficultyRange(template.difficultyRange)) {\n      throw new DataValidationError('Template difficultyRange must contain valid difficulty levels in ascending order');\n    }\n\n    if (!template.template || typeof template.template !== 'string') {\n      throw new DataValidationError('Template content is required and must be a string');\n    }\n\n    if (!template.variables || !Array.isArray(template.variables)) {\n      throw new DataValidationError('Template variables is required and must be an array');\n    }\n\n    // Validate variables\n    for (const variable of template.variables) {\n      if (!variable.name || typeof variable.name !== 'string') {\n        throw new DataValidationError(`Variable name is required and must be a string: ${JSON.stringify(variable)}`);\n      }\n\n      if (!variable.type || !['string', 'number', 'boolean', 'array', 'object'].includes(variable.type)) {\n        throw new DataValidationError(`Variable type is required and must be a valid TemplateVariableType: ${variable.name}`);\n      }\n\n      if (typeof variable.required !== 'boolean') {\n        throw new DataValidationError(`Variable required must be a boolean: ${variable.name}`);\n      }\n\n      if (variable.defaultValue !== undefined && !this.isValidDefaultValue(variable.defaultValue, variable.type)) {\n        throw new DataValidationError(`Variable defaultValue must match the specified type: ${variable.name}`);\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Load templates from the file system\n   * @returns Promise resolving to an array of lesson templates\n   */\n  private async loadTemplates(): Promise<LessonTemplate[]> {\n    try {\n      // In test environment, we might not have access to import.meta.glob\n      // so we'll use a fallback approach\n      if (import.meta.env?.MODE === 'test') {\n        // For testing, we'll check if we have any mock templates\n        if ((this as LessonTemplateRepository)._testTemplates) {\n          return (this as LessonTemplateRepository)._testTemplates as LessonTemplate[];\n        }\n        return [this.createFallbackTemplate()];\n      }\n\n      // Import all template files dynamically\n      const templateModules = import.meta.glob('$lib/data/templates/**/*.json');\n\n      const templates: LessonTemplate[] = [];\n\n      for (const [_path, importFn] of Object.entries(templateModules)) {\n        try {\n          const module = await importFn();\n          const template = module.default;\n\n          if (this.validateTemplate(template)) {\n            templates.push(template);\n          } else {\n            // Skipping invalid template from ${path}\n          }\n        } catch (_error) {\n        }\n      }\n\n      if (templates.length === 0) {\n        // No valid templates found. Using fallback template.\n        return [this.createFallbackTemplate()];\n      }\n\n      return templates;\n    } catch (_error) {\n      return [this.createFallbackTemplate()];\n    }\n  }\n\n  /**\n   * Cache templates for faster access\n   */\n  private cacheTemplates(): void {\n    this.templateCache.clear();\n\n    for (const template of this.templates) {\n      // Cache by type-difficulty combinations\n      for (const difficulty of this.getDifficultiesInRange(template.difficultyRange)) {\n        const cacheKey = `${template.type}-${difficulty}`;\n        this.templateCache.set(cacheKey, template);\n      }\n    }\n  }\n\n  /**\n   * Check if a difficulty is within a range\n   * @param difficulty - Difficulty to check\n   * @param range - Difficulty range\n   * @returns True if difficulty is in range\n   */\n  private isDifficultyInRange(difficulty: LessonDifficulty, range: [LessonDifficulty, LessonDifficulty]): boolean {\n    const difficultyOrder: LessonDifficulty[] = ['A1', 'A2', 'B1', 'B2', 'C1'];\n    const minIndex = difficultyOrder.indexOf(range[0]);\n    const maxIndex = difficultyOrder.indexOf(range[1]);\n    const difficultyIndex = difficultyOrder.indexOf(difficulty);\n\n    return difficultyIndex >= minIndex && difficultyIndex <= maxIndex;\n  }\n\n  /**\n   * Get all difficulties in a range\n   * @param range - Difficulty range\n   * @returns Array of difficulties in range\n   */\n  private getDifficultiesInRange(range: [LessonDifficulty, LessonDifficulty]): LessonDifficulty[] {\n    const difficultyOrder: LessonDifficulty[] = ['A1', 'A2', 'B1', 'B2', 'C1'];\n    const minIndex = difficultyOrder.indexOf(range[0]);\n    const maxIndex = difficultyOrder.indexOf(range[1]);\n\n    return difficultyOrder.slice(minIndex, maxIndex + 1);\n  }\n\n  /**\n   * Check if a default value matches the variable type\n   * @param value - Value to check\n   * @param type - Expected type\n   * @returns True if value matches type\n   */\n  private isValidDefaultValue(value: string | number | boolean | object | unknown[], type: string): boolean {\n    switch (type) {\n      case 'string':\n        return typeof value === 'string';\n      case 'number':\n        return typeof value === 'number';\n      case 'boolean':\n        return typeof value === 'boolean';\n      case 'array':\n        return Array.isArray(value);\n      case 'object':\n        return typeof value === 'object' && value !== null && !Array.isArray(value);\n      default:\n        return false;\n    }\n  }\n\n  /**\n   * Check if a difficulty range is valid\n   * @param range - Difficulty range to validate\n   * @returns True if range is valid\n   */\n  private isValidDifficultyRange(range: [LessonDifficulty, LessonDifficulty]): boolean {\n    const difficultyOrder: LessonDifficulty[] = ['A1', 'A2', 'B1', 'B2', 'C1'];\n\n    const minIndex = difficultyOrder.indexOf(range[0]);\n    const maxIndex = difficultyOrder.indexOf(range[1]);\n\n    return minIndex !== -1 && maxIndex !== -1 && minIndex <= maxIndex;\n  }\n\n  /**\n   * Create a fallback template for error recovery\n   * @returns Fallback lesson template\n   */\n  private createFallbackTemplate(): LessonTemplate {\n    return {\n      id: 'fallback_template',\n      name: 'Fallback Template',\n      description: 'Fallback template used when no other templates are available',\n      type: 'vocabulary',\n      difficultyRange: ['A1', 'C1'],\n      template: '# {{sectionTitle}}\\n\\nThis lesson contains {{count}} vocabulary items.\\n\\n{{#each vocabulary}}\\n- {{german}} / {{bulgarian}}\\n{{/each}}',\n      variables: [\n        { name: 'sectionTitle', type: 'string', required: true, description: 'Title for the section' },\n        { name: 'count', type: 'number', required: true, description: 'Number of vocabulary items' },\n        { name: 'vocabulary', type: 'array', required: true, description: 'Array of vocabulary items' }\n      ]\n    };\n  }\n}\n\n/**\n * Singleton instance of LessonTemplateRepository\n */\nexport const lessonTemplateRepository = new LessonTemplateRepository();","/**\n * CulturalGrammarService - Service for managing and querying cultural grammar concepts\n *\n * This service provides access to grammar concepts that include cultural context and\n * cross-linguistic explanations between Bulgarian and German.\n */\n\nimport type {\n  CulturalGrammarConcept,\n  GrammarQueryCriteria,\n  // LessonDifficulty is unused\n  PartOfSpeech,\n  ICulturalGrammarService\n} from './types';\nimport { LessonGenerationError, DataValidationError } from './types';\n\n/**\n * CulturalGrammarService class\n *\n * Implements the ICulturalGrammarService interface to provide grammar concept\n * management functionality for the dynamic lesson generation system.\n */\nexport class CulturalGrammarService implements ICulturalGrammarService {\n  private grammarConcepts: CulturalGrammarConcept[] = [];\n  private _initialized = false;\n\n  /**\n   * Get the initialization status\n   */\n  get initialized(): boolean {\n    return this._initialized;\n  }\n\n  /**\n   * Initialize the service by loading grammar concepts\n   */\n  async initialize(): Promise<void> {\n    if (this._initialized) return;\n\n    try {\n      this.grammarConcepts = await this.loadGrammarData();\n      this._initialized = true;\n    } catch (_error) {\n      // Failed to initialize CulturalGrammarService\n      throw new LessonGenerationError('Failed to initialize grammar service');\n    }\n  }\n\n  /**\n   * Query grammar concepts based on criteria\n   * @param criteria - Query criteria\n   * @returns Promise resolving to an array of grammar concepts\n   */\n  async query(criteria: GrammarQueryCriteria): Promise<CulturalGrammarConcept[]> {\n    if (!this._initialized) {\n      await this.initialize();\n    }\n\n    return this.grammarConcepts.filter(concept => {\n      const difficultyMatch = criteria.difficulty ?\n        concept.difficulty === criteria.difficulty : true;\n\n      const posMatch = criteria.partOfSpeech ?\n        this.conceptAppliesToPartOfSpeech(concept, criteria.partOfSpeech) : true;\n\n      const conceptTypeMatch = criteria.conceptType ?\n        concept.id.includes(criteria.conceptType) || concept.relatedConcepts.includes(criteria.conceptType) : true;\n\n      return difficultyMatch && posMatch && conceptTypeMatch;\n    }).slice(0, criteria.limit || 1);\n  }\n\n  /**\n   * Get all grammar concepts\n   * @returns Promise resolving to all grammar concepts\n   */\n  async getAllConcepts(): Promise<CulturalGrammarConcept[]> {\n    if (!this._initialized) {\n      await this.initialize();\n    }\n    return [...this.grammarConcepts];\n  }\n\n  /**\n   * Check if a grammar concept applies to a specific part of speech\n   * @param concept - Grammar concept to check\n   * @param partOfSpeech - Part of speech to check\n   * @returns True if the concept applies to the part of speech\n   */\n  conceptAppliesToPartOfSpeech(concept: CulturalGrammarConcept, partOfSpeech: PartOfSpeech): boolean {\n    return concept.partOfSpeech.includes(partOfSpeech);\n  }\n\n  /**\n   * Load grammar data from the file system\n   * @returns Promise resolving to an array of grammar concepts\n   */\n  private async loadGrammarData(): Promise<CulturalGrammarConcept[]> {\n    try {\n      // In test environment, use fallback data\n      if (import.meta.env?.MODE === 'test') {\n        return this.getFallbackGrammarData();\n      }\n\n      // Load grammar data from JSON file\n      const data = await import('$lib/data/cultural-grammar.json');\n      const concepts = data.default.concepts || data.default;\n\n      if (!Array.isArray(concepts)) {\n        // Grammar data is not an array. Using fallback data.\n        return this.getFallbackGrammarData();\n      }\n\n      // Validate all concepts\n      const validConcepts = concepts.filter(concept => this.validateConcept(concept));\n\n      if (validConcepts.length === 0) {\n        // No valid grammar concepts found. Using fallback data.\n        return this.getFallbackGrammarData();\n      }\n\n      return validConcepts;\n    } catch (_error) {\n      // Error loading grammar data\n      return this.getFallbackGrammarData();\n    }\n  }\n\n  /**\n   * Validate a grammar concept structure\n   * @param concept - Concept to validate\n   * @returns True if concept is valid\n   * @throws DataValidationError if concept is invalid\n   */\n  private validateConcept(concept: CulturalGrammarConcept): boolean {\n    // Check required fields\n    if (!concept.id || typeof concept.id !== 'string') {\n      throw new DataValidationError('Concept id is required and must be a string');\n    }\n\n    if (!concept.name || typeof concept.name !== 'object' ||\n        !concept.name.bulgarian || !concept.name.german) {\n      throw new DataValidationError('Concept name is required and must have bulgarian and german properties');\n    }\n\n    if (!concept.description || typeof concept.description !== 'object' ||\n        !concept.description.bulgarian || !concept.description.german) {\n      throw new DataValidationError('Concept description is required and must have bulgarian and german properties');\n    }\n\n    if (!concept.difficulty || !['A1', 'A2', 'B1', 'B2', 'C1'].includes(concept.difficulty)) {\n      throw new DataValidationError('Concept difficulty is required and must be a valid LessonDifficulty');\n    }\n\n    if (!concept.partOfSpeech || !Array.isArray(concept.partOfSpeech) ||\n        concept.partOfSpeech.length === 0) {\n      throw new DataValidationError('Concept partOfSpeech is required and must be a non-empty array');\n    }\n\n    if (!concept.culturalContext || typeof concept.culturalContext !== 'object') {\n      throw new DataValidationError('Concept culturalContext is required and must be an object');\n    }\n\n    if (!concept.examples || !Array.isArray(concept.examples) ||\n        concept.examples.length === 0) {\n      throw new DataValidationError('Concept examples is required and must be a non-empty array');\n    }\n\n    if (!concept.commonMistakes || typeof concept.commonMistakes !== 'object') {\n      throw new DataValidationError('Concept commonMistakes is required and must be an object');\n    }\n\n    if (!concept.relatedConcepts || !Array.isArray(concept.relatedConcepts)) {\n      throw new DataValidationError('Concept relatedConcepts is required and must be an array');\n    }\n\n    // Validate part of speech values\n    for (const pos of concept.partOfSpeech) {\n      if (!['noun', 'verb', 'adjective', 'adverb', 'preposition', 'conjunction', 'pronoun', 'interjection', 'article', 'numeral'].includes(pos)) {\n        throw new DataValidationError(`Invalid part of speech: ${pos}`);\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Get fallback grammar data for error recovery\n   * @returns Array of fallback grammar concepts\n   */\n  private getFallbackGrammarData(): CulturalGrammarConcept[] {\n    return [\n      {\n        id: 'fallback-article-usage',\n        name: {\n          bulgarian: '  ',\n          german: 'Artikelgebrauch'\n        },\n        description: {\n          bulgarian: '      ',\n          german: 'Grundlegender Artikelgebrauch im Deutschen'\n        },\n        difficulty: 'A1',\n        partOfSpeech: ['noun'],\n        culturalContext: {\n          bulgarianPerspective: '   ,       .',\n          germanPerspective: 'Im Deutschen sind Artikel obligatorisch, was fr bulgarische Lernende ungewohnt ist.',\n          crossLinguisticExplanation: {\n            bgToDe: '   .      der, die, das  .',\n            deToBg: 'Im Bulgarischen gibt es keine Artikel. Substantive werden ohne Artikel verwendet.'\n          }\n        },\n        examples: [\n          {\n            bulgarian: '   .',\n            german: 'Das Buch ist auf dem Tisch.',\n            explanationBgToDe: '   .     der/die/das.',\n            explanationDeToBg: 'Im Deutschen gibt es Artikel (das, dem), im Bulgarischen nicht.'\n          }\n        ],\n        commonMistakes: {\n          bgToDe: ['  ', ' '],\n          deToBg: ['   ']\n        },\n        relatedConcepts: ['noun-gender'],\n        metadata: {}\n      }\n    ];\n  }\n}\n\n/**\n * Singleton instance of CulturalGrammarService\n */\nexport const culturalGrammarService = new CulturalGrammarService();","/**\n * Template Language Adapter\n *\n * This utility provides language-specific rendering for lesson templates,\n * allowing content to adapt based on the current language direction.\n */\n\nimport { appState } from '../../state/app-state';\n\n/**\n * Get the source language text based on current direction\n * @param item The vocabulary item\n * @returns The text in the source language\n */\nexport function getSourceText(item: { german: string; bulgarian: string }): string {\n    return appState.languageMode === 'DE_BG' ? item.german : item.bulgarian;\n}\n\n/**\n * Get the target language text based on current direction\n * @param item The vocabulary item\n * @returns The text in the target language\n */\nexport function getTargetText(item: { german: string; bulgarian: string }): string {\n    return appState.languageMode === 'DE_BG' ? item.bulgarian : item.german;\n}\n\n/**\n * Get the source language code based on current direction\n * @returns The source language code ('de' or 'bg')\n */\nexport function getSourceLanguage(): string {\n    return appState.languageMode === 'DE_BG' ? 'de' : 'bg';\n}\n\n/**\n * Get the target language code based on current direction\n * @returns The target language code ('de' or 'bg')\n */\nexport function getTargetLanguage(): string {\n    return appState.languageMode === 'DE_BG' ? 'bg' : 'de';\n}\n\n/**\n * Get the source language name based on current direction\n * @returns The source language name ('German' or 'Bulgarian')\n */\nexport function getSourceLanguageName(): string {\n    return appState.languageMode === 'DE_BG' ? 'German' : 'Bulgarian';\n}\n\n/**\n * Get the target language name based on current direction\n * @returns The target language name ('German' or 'Bulgarian')\n */\nexport function getTargetLanguageName(): string {\n    return appState.languageMode === 'DE_BG' ? 'Bulgarian' : 'German';\n}\n\n/**\n * Get the direction arrow based on current direction\n * @returns The direction arrow ('' or '')\n */\nexport function getDirectionArrow(): string {\n    return appState.languageMode === 'DE_BG' ? '' : '';\n}\n\n/**\n * Get the direction text based on current direction\n * @returns The direction text ('DEBG' or 'BGDE')\n */\nexport function getDirectionText(): string {\n    return appState.languageMode === 'DE_BG' ? 'DEBG' : 'BGDE';\n}\n\n/**\n * Get the opposite direction text\n * @returns The opposite direction text ('DEBG' or 'BGDE')\n */\nexport function getOppositeDirectionText(): string {\n    return appState.languageMode === 'DE_BG' ? 'BGDE' : 'DEBG';\n}\n\n/**\n * Get the language-specific property from an object\n * @param obj The object with language properties\n * @param property The base property name\n * @returns The value for the current source language\n */\nexport function getLanguageProperty(obj: any, property: string): string {\n    if (!obj) return '';\n\n    const sourceLang = getSourceLanguage();\n    const targetLang = getTargetLanguage();\n\n    // Try direct property first (e.g., description.de)\n    if (obj[`${property}.${sourceLang}`]) {\n        return obj[`${property}.${sourceLang}`];\n    }\n\n    // Try nested property (e.g., description.german)\n    if (obj[property] && obj[property][sourceLang]) {\n        return obj[property][sourceLang];\n    }\n\n    // Try simple property (e.g., description)\n    if (obj[property]) {\n        return obj[property];\n    }\n\n    return '';\n}\n\n/**\n * Get the opposite language property from an object\n * @param obj The object with language properties\n * @param property The base property name\n * @returns The value for the current target language\n */\nexport function getOppositeLanguageProperty(obj: any, property: string): string {\n    if (!obj) return '';\n\n    const targetLang = getTargetLanguage();\n\n    // Try direct property first (e.g., description.bg)\n    if (obj[`${property}.${targetLang}`]) {\n        return obj[`${property}.${targetLang}`];\n    }\n\n    // Try nested property (e.g., description.bulgarian)\n    if (obj[property] && obj[property][targetLang]) {\n        return obj[property][targetLang];\n    }\n\n    return '';\n}\n\n/**\n * Format a bilingual example\n * @param example The example object with sentence and translation\n * @returns Formatted example string\n */\nexport function formatBilingualExample(example: { sentence: string; translation: string }): string {\n    if (!example) return '';\n\n    const sourceText = getSourceText(example);\n    const targetText = getTargetText(example);\n\n    return `- ${sourceText}\\n- ${targetText}`;\n}\n\n/**\n * Get the appropriate template for the current language direction\n * @param templateDE The German template\n * @param templateBG The Bulgarian template\n * @returns The appropriate template based on current direction\n */\nexport function getDirectionalTemplate(templateDE: string, templateBG: string): string {\n    return appState.languageMode === 'DE_BG' ? templateDE : templateBG;\n}","/**\n * TemplateRenderer - Service for rendering lesson templates with data\n *\n * This service provides template rendering functionality with support for variables,\n * conditionals, loops, and language-specific rendering for dynamic lesson generation.\n */\n\nimport type {\n  LessonTemplate,\n  TemplateRenderingContext,\n  ITemplateRenderer\n} from './types';\nimport { TemplateRenderingError, DataValidationError } from './types';\nimport {\n  getSourceText,\n  getTargetText,\n  getSourceLanguage,\n  getTargetLanguage,\n  getSourceLanguageName,\n  getTargetLanguageName,\n  getDirectionArrow,\n  getDirectionText,\n  getOppositeDirectionText,\n  getLanguageProperty,\n  getOppositeLanguageProperty,\n  formatBilingualExample,\n  getDirectionalTemplate\n} from './template-language-adapter';\n\n/**\n * TemplateRenderer class\n *\n * Implements the ITemplateRenderer interface to provide template rendering\n * functionality for the dynamic lesson generation system.\n */\nexport class TemplateRenderer implements ITemplateRenderer {\n  /**\n   * Render a template with the provided data\n   * @param template - Lesson template to render\n   * @param data - Data to render into the template\n   * @returns Rendered content as a string\n   */\n  render(template: LessonTemplate, data: TemplateRenderingContext): string {\n    this.validateData(template, data);\n\n    try {\n      return this.renderTemplate(template.template, data);\n    } catch (error) {\n      if (error instanceof TemplateRenderingError) {\n        throw error;\n      }\n      throw new TemplateRenderingError(`Template rendering failed: ${error instanceof Error ? error.message : String(error)}`);\n    }\n  }\n\n  /**\n   * Validate template data against template variables\n   * @param template - Lesson template\n   * @param data - Data to validate\n   * @returns True if data is valid\n   * @throws DataValidationError if data is invalid\n   */\n  validateData(template: LessonTemplate, data: TemplateRenderingContext): boolean {\n    for (const variable of template.variables) {\n      if (variable.required && data[variable.name] === undefined) {\n        throw new DataValidationError(`Required variable '${variable.name}' is missing`);\n      }\n\n      if (data[variable.name] !== undefined && !this.isValidValue(data[variable.name], variable.type)) {\n        throw new DataValidationError(`Variable '${variable.name}' must be of type ${variable.type}`);\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Validate a template structure\n   * @param template - Template to validate\n   * @returns True if template is valid\n   */\n  validateTemplate(template: LessonTemplate): boolean {\n    if (!template.template || typeof template.template !== 'string') {\n      throw new DataValidationError('Template content is required and must be a string');\n    }\n\n    if (!template.variables || !Array.isArray(template.variables)) {\n      throw new DataValidationError('Template variables is required and must be an array');\n    }\n\n    return true;\n  }\n\n  /**\n   * Render a template string with the given data\n   * @param templateString - Template string to render\n   * @param data - Data for rendering\n   * @returns Rendered content\n   */\n  private renderTemplate(templateString: string, data: TemplateRenderingContext): string {\n    let content = templateString;\n    let previousContent: string;\n    let passCount = 0;\n    const maxPasses = 20; // Increased to support deeper nesting\n\n    do {\n      previousContent = content;\n\n      // Process loops (they may contain conditionals and variables)\n      content = this.processLoops(content, data);\n\n      // Process conditionals (they may contain variables)\n      content = this.processConditionals(content, data);\n\n      // Process variables\n      content = this.processVariables(content, data);\n\n      passCount++;\n\n      // Stop if we've done too many passes\n      if (passCount >= maxPasses) {\n        // Maximum template processing passes reached - this is expected for complex templates\n        break;\n      }\n\n    } while (content !== previousContent);\n\n    return content;\n  }\n\n  /**\n   * Resolve a variable value from data, supporting dotted notation\n   * @param path - Variable path (e.g. \"user.name\")\n   * @param data - Data context\n   * @returns The resolved value or undefined\n   */\n  private resolveValue(path: string, data: TemplateRenderingContext): string | number | boolean | object | unknown[] | undefined {\n    if (data[path] !== undefined) return data[path];\n\n    if (!path.includes('.')) return undefined;\n\n    return path.split('.').reduce((obj, key) => {\n      return (obj && typeof obj === 'object') ? obj[key] : undefined;\n    }, data);\n  }\n\n  /**\n   * Process variables in template content\n   * @param content - Template content\n   * @param data - Data for rendering\n   * @returns Content with variables replaced\n   */\n  private processVariables(content: string, data: TemplateRenderingContext): string {\n    // Add language adapter functions to the data context\n    const extendedData = {\n      ...data,\n      getSourceText,\n      getTargetText,\n      getSourceLanguage,\n      getTargetLanguage,\n      getSourceLanguageName,\n      getTargetLanguageName,\n      getDirectionArrow,\n      getDirectionText,\n      getOppositeDirectionText,\n      getLanguageProperty,\n      getOppositeLanguageProperty,\n      formatBilingualExample,\n      getDirectionalTemplate\n    };\n\n    // Updated regex to support dotted paths\n    return content.replace(/\\{\\{\\s*([a-zA-Z_][a-zA-Z0-9_.]*)\\s*\\}\\}/g, (match, variableName) => {\n      // Skip special template variables\n      if (variableName.startsWith('@') || variableName === 'this' || variableName === 'else') {\n        return match;\n      }\n\n      const value = this.resolveValue(variableName, extendedData);\n\n      if (value === undefined) {\n        // If it's a dotted path that failed, it might be optional, but strict mode says throw.\n        // However, for single level variables, we must throw.\n        // Let's stick to the requirement: throw if undefined.\n        throw new TemplateRenderingError(`Variable '${variableName}' is not defined`);\n      }\n\n      if (typeof value === 'object' && value !== null && typeof value !== 'function') {\n        throw new TemplateRenderingError(`Variable '${variableName}' is an object and cannot be rendered directly`);\n      }\n\n      // Handle function calls\n      if (typeof value === 'function') {\n        try {\n          return String(value());\n        } catch (error) {\n          throw new TemplateRenderingError(`Function '${variableName}' failed: ${error instanceof Error ? error.message : String(error)}`);\n        }\n      }\n\n      return String(value);\n    });\n  }\n\n  /**\n   * Process conditional blocks in template content\n   * @param content - Template content\n   * @param data - Data for rendering\n   * @returns Content with conditionals processed\n   */\n  private processConditionals(content: string, data: TemplateRenderingContext): string {\n    // Process {{#unless variable}}...{{/unless}} blocks\n    // Updated regex to support dotted paths ([@a-zA-Z_][a-zA-Z0-9_.]*)\n    content = content.replace(/\\{\\{\\s*#unless\\s+([@a-zA-Z_][a-zA-Z0-9_.]*)\\s*\\}\\}((?:(?!\\{\\{\\s*#unless)[\\s\\S])*?)\\{\\{\\s*\\/unless\\s*\\}\\}/g, (match, variableName, blockContent) => {\n      const value = this.resolveValue(variableName, data);\n      const condition = Boolean(value) && value !== 'false' && value !== '0';\n      return condition ? '' : this.renderTemplate(blockContent, data);\n    });\n\n    // Process {{#if variable}}...{{/if}} blocks (handling optional {{else}})\n    // Updated regex to support dotted paths\n    content = content.replace(/\\{\\{\\s*#if\\s+([@a-zA-Z_][a-zA-Z0-9_.]*)\\s*\\}\\}((?:(?!\\{\\{\\s*#if)[\\s\\S])*?)\\{\\{\\s*\\/if\\s*\\}\\}/g, (match, variableName, fullBlockContent) => {\n      const value = this.resolveValue(variableName, data);\n      const condition = Boolean(value) && value !== 'false' && value !== '0';\n\n      // Check for {{else}} block\n      const elseSplit = fullBlockContent.split(/\\{\\{\\s*else\\s*\\}\\}/);\n\n      if (elseSplit.length > 1) {\n        const trueBlock = elseSplit[0];\n        const falseBlock = elseSplit.slice(1).join('{{else}}'); // Rejoin if multiple elses (though invalid)\n        return condition ? this.renderTemplate(trueBlock, data) : this.renderTemplate(falseBlock, data);\n      }\n\n      return condition ? this.renderTemplate(fullBlockContent, data) : '';\n    });\n\n    return content;\n  }\n\n  /**\n   * Process loop blocks in template content\n   * @param content - Template content\n   * @param data - Data for rendering\n   * @returns Content with loops processed\n   */\n  private processLoops(content: string, data: TemplateRenderingContext): string {\n    // Use a regex that targets innermost loops first to handle nesting\n    // Matches {{#each var}} content {{/each}} where content doesn't contain another {{#each}}\n    const eachRegex = /\\{\\{\\s*#each\\s+([a-zA-Z_][a-zA-Z0-9_]*)\\s*\\}\\}((?:(?!\\{\\{\\s*#each)[\\s\\S])*?)\\{\\{\\s*\\/each\\s*\\}\\}/g;\n    let result = content;\n    let match;\n\n    while ((match = eachRegex.exec(result)) !== null) {\n      const [fullMatch, arrayName, blockContent] = match;\n      const arrayValue = data[arrayName];\n\n      // Skip processing if the variable is not defined\n      if (arrayValue === undefined) {\n        eachRegex.lastIndex = 0;\n        result = result.replace(fullMatch, '');\n        continue;\n      }\n\n      if (!Array.isArray(arrayValue)) {\n        // If we are here, it means validation passed but data is inconsistent or we are testing processLoops directly\n        // Throw error to satisfy \"should throw error for non-array\" test case when invoked directly\n        throw new TemplateRenderingError(`Variable '${arrayName}' must be an array for #each loop`);\n      }\n\n      if (arrayValue.length === 0) {\n        result = result.replace(fullMatch, '');\n        eachRegex.lastIndex = 0;\n        continue;\n      }\n\n      const renderedItems = arrayValue.map((item, index) => {\n        // Create a new context for each iteration\n        const iterationContext = {\n          ...data,\n          // If item is object, spread it. If primitive, put in 'this'\n          // BUT: also need to support 'this' for objects if template uses {{this.prop}}\n          // The robust way: 'this': item, and spread properties if object\n          'this': item,\n          '@index': index,\n          '@first': index === 0,\n          '@last': index === arrayValue.length - 1\n        };\n\n        if (typeof item === 'object' && item !== null) {\n            Object.assign(iterationContext, item);\n        }\n\n        // We need to manually process {{this}} and @ variables BEFORE recursion\n        // because renderTemplate might not handle them if they are not in \"variables\" definition of template schema\n        // or simply to ensure they are bound to THIS iteration context immediately.\n        let processedBlock = blockContent;\n        \n        // Replace special variables eagerly in this block\n        // This is crucial because renderTemplate() recursion might treat them as standard variables\n        processedBlock = processedBlock.replace(/\\{\\{\\s*this\\s*\\}\\}/g, String(item));\n        processedBlock = processedBlock.replace(/\\{\\{\\s*@index\\s*\\}\\}/g, String(index));\n        processedBlock = processedBlock.replace(/\\{\\{\\s*@first\\s*\\}\\}/g, String(index === 0));\n        processedBlock = processedBlock.replace(/\\{\\{\\s*@last\\s*\\}\\}/g, String(index === arrayValue.length - 1));\n\n        // Now recursively render the rest (conditionals, other variables)\n        return this.renderTemplate(processedBlock, iterationContext);\n      }).join('');\n\n      result = result.replace(fullMatch, renderedItems);\n      eachRegex.lastIndex = 0; // Reset regex index after replacement\n    }\n\n    return result;\n  }\n\n  /**\n   * Check if a value is valid for the specified type\n   * @param value - Value to check\n   * @param type - Expected type\n   * @returns True if value is valid for the type\n   */\n  private isValidValue(value: string | number | boolean | object | unknown[], type: string): boolean {\n    switch (type) {\n      case 'string':\n        return typeof value === 'string';\n      case 'number':\n        return typeof value === 'number' && !isNaN(value);\n      case 'boolean':\n        return typeof value === 'boolean';\n      case 'array':\n        return Array.isArray(value);\n      case 'object':\n        return typeof value === 'object' && value !== null && !Array.isArray(value);\n      default:\n        return false;\n    }\n  }\n}\n\n/**\n * Singleton instance of TemplateRenderer\n */\nexport const templateRenderer = new TemplateRenderer();","/**\n * LessonGenerationEngine - Core service for generating dynamic lessons\n *\n * This service coordinates the lesson generation process by using:\n * 1. LessonTemplateRepository to select appropriate templates\n * 2. VocabularyService to fetch vocabulary items\n * 3. CulturalGrammarService to fetch grammar concepts\n * 4. TemplateRenderer to generate the final lesson content\n */\n\nimport { v4 as uuidv4 } from 'uuid';\nimport type {\n  ILessonGenerationEngine,\n  LessonGenerationParams,\n  LessonGenerationOptions,\n  GeneratedLesson,\n  GeneratedLessonSection,\n  TemplateRenderingContext,\n  CulturalGrammarConcept,\n  ILessonTemplateRepository,\n  ICulturalGrammarService,\n  ITemplateRenderer\n} from './types';\nimport { lessonTemplateRepository } from './lesson-templates';\nimport { culturalGrammarService } from './cultural-grammar';\nimport { templateRenderer } from './template-renderer';\nimport {\n  loadVocabulary,\n  loadVocabularyByCategory,\n  loadVocabularyBySearch,\n  getRandomVocabulary\n} from '../../data/loader';\nimport type { VocabularyItem, PartOfSpeech as _PartOfSpeech } from '$lib/types/vocabulary';\nimport type { VocabularyCategory } from '$lib/schemas/vocabulary';\n\n/**\n * LessonGenerationEngine class\n *\n * Implements the ILessonGenerationEngine interface to provide core lesson generation logic.\n */\nexport class LessonGenerationEngine implements ILessonGenerationEngine {\n  private templateRepository: ILessonTemplateRepository;\n  private grammarService: ICulturalGrammarService;\n  private renderer: ITemplateRenderer;\n  private vocabularyCache: VocabularyItem[] | null = null;\n\n  /**\n   * Initialize with dependencies\n   *\n   * @param templateRepository - Repository for lesson templates\n   * @param grammarService - Service for grammar concepts\n   * @param renderer - Service for template rendering\n   * @param vocabularyServicePromise - Promise resolving to VocabularyService instance\n   */\n  constructor(\n    templateRepository: ILessonTemplateRepository = lessonTemplateRepository,\n    grammarService: ICulturalGrammarService = culturalGrammarService,\n    renderer: ITemplateRenderer = templateRenderer\n  ) {\n    this.templateRepository = templateRepository;\n    this.grammarService = grammarService;\n    this.renderer = renderer;\n  }\n\n  /**\n   * Generate a lesson based on parameters and options\n   *\n   * @param params - Parameters for lesson generation\n   * @param options - Options for generation algorithm\n   * @returns Generated lesson\n   */\n  async generateLesson(\n    params: LessonGenerationParams,\n    options: LessonGenerationOptions = {}\n  ): Promise<GeneratedLesson> {\n    try {\n      const normalizedParams: LessonGenerationParams = {\n        ...params,\n        type: this.normalizeLessonType(params.type),\n        criteria: {\n          ...params.criteria,\n          categories: this.normalizeCategories(params.criteria.categories)\n        }\n      };\n\n      // Dispatch to specific generation method based on lesson type\n      switch (normalizedParams.type) {\n        case 'vocabulary':\n          return this.generateThematicLesson(normalizedParams, options);\n        case 'grammar':\n          return this.generateGrammarLesson(normalizedParams, options);\n        case 'culture':\n          return this.generateContextualLesson(normalizedParams, options);\n        case 'mixed':\n          return this.generateContextualLesson(normalizedParams, options);\n        default:\n          // Default to thematic/vocabulary if type is unknown or general\n          return this.generateThematicLesson(normalizedParams, options);\n      }\n    } catch (_error) {\n      // Error handling is done by throwing a new error with the original message\n      const error = _error as Error;\n      throw new Error(`Failed to generate lesson: ${error.message}`);\n    }\n  }\n\n  /**\n   * Generate a thematic vocabulary lesson\n   *\n   * @param params - Parameters for lesson generation\n   * @param options - Options for generation algorithm\n   * @returns Generated lesson\n   */\n  async generateThematicLesson(\n    params: LessonGenerationParams,\n    options: LessonGenerationOptions = {}\n  ): Promise<GeneratedLesson> {\n    // 1. Determine Lesson Structure based on metadata or defaults\n    // A standard thematic lesson has an Introduction and a Practice section\n    const includePractice = params.metadata?.['includePractice'] !== false;\n    const includeReview = params.metadata?.['includeReview'] === true;\n\n    const sections: GeneratedLessonSection[] = [];\n    const allVocabularyItems: VocabularyItem[] = [];\n    let learningObjectives: string[] = [];\n\n    // 2. Fetch Vocabulary\n    // Load vocabulary data if not already cached\n    if (!this.vocabularyCache) {\n      const vocabulary = await loadVocabulary();\n      this.vocabularyCache = vocabulary.items.map(item => this.normalizeVocabularyItem(item));\n    }\n    const limit = params.criteria.limit || options.maxItems || 10;\n    const numericDifficulty = this.mapDifficultyToNumber(params.difficulty);\n    \n    let vocabularyItems: VocabularyItem[] = [];\n    \n    // Smart Selection:\n    // - If categories provided, prioritize them\n    // - If partOfSpeech provided, filter by it\n    // - Ensure difficulty match\n    \n    if (params.criteria.categories && params.criteria.categories.length > 0) {\n      // Fetch for each category and combine\n      for (const category of params.criteria.categories) {\n        // We'll use searchVocabulary for more granular control if needed,\n        // but getVocabularyByCategory is optimized for this\n        const items = await loadVocabularyByCategory(category, {\n          difficulty: numericDifficulty,\n          limit: Math.ceil(limit / params.criteria.categories.length)\n        });\n        \n        // Filter by POS if requested, using validation method\n        const filteredItems = params.criteria.partOfSpeech\n          ? items.filter(i => this.validatePartOfSpeech(i.partOfSpeech, i.id) === params.criteria.partOfSpeech)\n          : items;\n          \n        vocabularyItems = [...vocabularyItems, ...filteredItems];\n      }\n    } else {\n      // Fallback: Random but respect POS, using validation method\n      if (params.criteria.partOfSpeech) {\n        const result = await loadVocabularyBySearch({\n           difficulty: numericDifficulty,\n           partOfSpeech: params.criteria.partOfSpeech ?? undefined,\n           limit: limit\n         });\n        // Apply validation to ensure correct POS filtering\n        vocabularyItems = result.items.filter(i =>\n          this.validatePartOfSpeech(i.partOfSpeech, i.id) === params.criteria.partOfSpeech\n        );\n      } else {\n        vocabularyItems = await getRandomVocabulary(limit, {\n          difficulty: numericDifficulty\n        });\n      }\n    }\n    \n    // Ensure we respect the limit\n    vocabularyItems = this.normalizeVocabularyList(vocabularyItems.slice(0, limit));\n    allVocabularyItems.push(...vocabularyItems);\n\n    // 3. Generate Introduction Section\n    try {\n      // We explicitly look for the 'vocabulary-intro' template we created\n      const introTemplate = await this.templateRepository.getTemplateById('vocabulary-intro')\n        || await this.templateRepository.getTemplate('vocabulary', params.difficulty);\n      \n      const themeName = params.criteria.categories?.map(c => c.charAt(0).toUpperCase() + c.slice(1)).join(', ') || 'General';\n      \n      // Enhance vocabulary items with corrected part-of-speech and grammar info\n      const enhancedVocabularyItems = vocabularyItems.map(item => ({\n        ...item,\n        correctedPartOfSpeech: this.correctPartOfSpeech(this.validatePartOfSpeech(item.partOfSpeech, item.id)),\n        grammarInfo: this.getFallbackGrammarInfo(this.validatePartOfSpeech(item.partOfSpeech, item.id))\n      }));\n\n      const introContext: TemplateRenderingContext = {\n        sectionTitle: `Vocabulary: ${themeName}`,\n        count: vocabularyItems.length,\n        theme: themeName,\n        difficulty: params.difficulty,\n        vocabulary: enhancedVocabularyItems,\n        learningTip: 'Focus on the gender of nouns (der, die, das) as you learn them.',\n        learningObjectives: [\n          `Learn ${vocabularyItems.length} new words related to ${themeName}`,\n          'Practice pronunciation and usage'\n        ]\n      };\n      \n      learningObjectives = [...introContext.learningObjectives || []];\n\n      const introContent = this.renderer.render(introTemplate, introContext);\n      \n      sections.push({\n        id: uuidv4(),\n        title: introContext.sectionTitle || 'Introduction',\n        content: introContent,\n        type: 'introduction',\n        metadata: { templateId: introTemplate.id }\n      });\n    } catch (_error) {\n      // Intro section generation failed, but we continue with other sections\n      // Continue or throw depending on severity. Here we log and continue if possible.\n    }\n\n    // 4. Generate Practice Section (if requested)\n    if (includePractice && vocabularyItems.length > 0) {\n      try {\n        const practiceTemplate = await this.templateRepository.getTemplateById('vocabulary-practice')\n          || await this.templateRepository.getTemplate('vocabulary', params.difficulty);\n\n        // Enhance vocabulary items with corrected part-of-speech and grammar info\n        const enhancedVocabularyItems = vocabularyItems.map(item => ({\n          ...item,\n          correctedPartOfSpeech: this.correctPartOfSpeech(this.validatePartOfSpeech(item.partOfSpeech, item.id)),\n          grammarInfo: this.getFallbackGrammarInfo(this.validatePartOfSpeech(item.partOfSpeech, item.id))\n        }));\n\n        const practiceContext: TemplateRenderingContext = {\n          sectionTitle: 'Practice Exercises',\n          instructions: 'Test your knowledge of the new words.',\n          vocabulary: enhancedVocabularyItems\n        };\n\n        const practiceContent = this.renderer.render(practiceTemplate, practiceContext);\n\n        sections.push({\n          id: uuidv4(),\n          title: 'Practice',\n          content: practiceContent,\n          type: 'exercise',\n          metadata: { templateId: practiceTemplate.id }\n        });\n      } catch (_error) {\n        // Practice section generation failed, but we continue with other sections\n      }\n    }\n\n    // 5. Generate Review Section (if requested)\n    if (includeReview) {\n      try {\n        const reviewTemplate = await this.templateRepository.getTemplateById('vocabulary-review')\n          || await this.templateRepository.getTemplate('vocabulary', params.difficulty);\n\n        // Fetch some older vocabulary for review (mocking this logic for now)\n        // In a real app, this would come from the user's learning history (UserLearningProfile)\n        // For now, we'll just grab some random words different from the main vocabulary\n        const reviewItems = this.normalizeVocabularyList(await getRandomVocabulary(5, {\n          difficulty: numericDifficulty\n        }));\n\n        // Enhance review items with corrected part-of-speech and grammar info\n        const enhancedReviewItems = reviewItems.map(item => ({\n          ...item,\n          correctedPartOfSpeech: this.correctPartOfSpeech(this.validatePartOfSpeech(item.partOfSpeech, item.id)),\n          grammarInfo: this.getFallbackGrammarInfo(this.validatePartOfSpeech(item.partOfSpeech, item.id))\n        }));\n\n        const reviewContext: TemplateRenderingContext = {\n          sectionTitle: 'Review',\n          context: 'Previous Lessons',\n          vocabulary: enhancedReviewItems\n        };\n\n        const reviewContent = this.renderer.render(reviewTemplate, reviewContext);\n\n        sections.push({\n          id: uuidv4(),\n          title: 'Review',\n          content: reviewContent,\n          type: 'summary', // using summary type for review for now\n          metadata: { templateId: reviewTemplate.id }\n        });\n      } catch (_error) {\n        // Review section generation failed, but we continue with other sections\n      }\n    }\n\n    // 6. Construct Final Lesson Object\n    return {\n      id: uuidv4(),\n      type: params.type,\n      difficulty: params.difficulty,\n      title: `Thematic Lesson: ${params.criteria.categories?.join(', ') || 'General'}`,\n      sections: sections,\n      vocabulary: allVocabularyItems,\n      grammarConcepts: [],\n      learningObjectives: learningObjectives,\n      metadata: params.metadata || {},\n      createdAt: new Date(),\n      updatedAt: new Date()\n    };\n  }\n\n  /**\n   * Generate a grammar-focused lesson\n   *\n   * @param params - Parameters for lesson generation\n   * @param options - Options for generation algorithm\n   * @returns Generated lesson\n   */\n  async generateGrammarLesson(\n    params: LessonGenerationParams,\n    _options: LessonGenerationOptions = {}\n  ): Promise<GeneratedLesson> {\n    const includePractice = params.metadata?.['includePractice'] !== false;\n    const includeComparison = params.metadata?.['includeComparison'] !== false;\n\n    const sections: GeneratedLessonSection[] = [];\n    \n    // 1. Fetch Grammar Concepts\n    // We try to find a concept matching specific criteria, or get a suitable one for the level\n    const grammarConcepts = await this.grammarService.query({\n      difficulty: params.difficulty,\n      partOfSpeech: params.criteria.partOfSpeech ?? undefined,\n      conceptType: params.criteria.conceptType ?? undefined\n    });\n\n    if (grammarConcepts.length === 0) {\n      // No grammar concepts found, using fallback logic\n      // In production, might throw or fallback more gracefully\n    }\n\n    const mainConcept = grammarConcepts[0]; // Primary focus\n    \n    // 2. Fetch Supporting Vocabulary\n    // Load vocabulary data if not already cached\n    if (!this.vocabularyCache) {\n      const vocabulary = await loadVocabulary();\n      this.vocabularyCache = vocabulary.items.map(item => this.normalizeVocabularyItem(item));\n    }\n    const numericDifficulty = this.mapDifficultyToNumber(params.difficulty);\n    let exampleVocabulary: VocabularyItem[] = [];\n\n    // Find vocabulary relevant to the grammar concept (e.g. nouns for gender rules)\n    if (mainConcept && mainConcept.partOfSpeech && mainConcept.partOfSpeech.length > 0) {\n      const searchResult = await loadVocabularyBySearch({\n        difficulty: numericDifficulty,\n        partOfSpeech: mainConcept.partOfSpeech[0] ?? undefined, // Prioritize primary POS\n        limit: 8\n      });\n      exampleVocabulary = this.normalizeVocabularyList(searchResult.items);\n    } else {\n      exampleVocabulary = this.normalizeVocabularyList(await getRandomVocabulary(8, { difficulty: numericDifficulty }));\n    }\n\n    // 3. Generate Concept Explanation Section\n    try {\n      const conceptTemplate = await this.templateRepository.getTemplateById('grammar-concept')\n        || await this.templateRepository.getTemplate('grammar', params.difficulty);\n\n      const conceptContext: TemplateRenderingContext = {\n        sectionTitle: `Grammar: ${mainConcept ? mainConcept.name.german : 'Grammar Rule'}`,\n        grammarConcept: mainConcept,\n        vocabulary: exampleVocabulary,\n        learningTip: 'Focus on understanding the underlying logic rather than just memorizing rules.',\n        learningObjectives: [\n          `Understand the concept of ${mainConcept ? mainConcept.name.german : 'this grammar rule'}`,\n          `Compare ${mainConcept ? mainConcept.name.german : 'it'} with Bulgarian usage`\n        ]\n      };\n\n      const conceptContent = this.renderer.render(conceptTemplate, conceptContext);\n\n      sections.push({\n        id: uuidv4(),\n        title: 'Explanation',\n        content: conceptContent,\n        type: 'grammar',\n        metadata: { templateId: conceptTemplate.id, conceptId: mainConcept?.id }\n      });\n    } catch (_error) {\n      // Grammar explanation generation failed, but we continue with other sections\n    }\n\n    // 4. Generate Practice Section (if requested)\n    if (includePractice && mainConcept) {\n      try {\n        const practiceTemplate = await this.templateRepository.getTemplateById('grammar-practice')\n          || await this.templateRepository.getTemplate('grammar', params.difficulty);\n\n        const practiceContext: TemplateRenderingContext = {\n          sectionTitle: 'Grammar Practice',\n          grammarConcept: mainConcept,\n          vocabulary: exampleVocabulary.slice(0, 5) // Use a subset for practice\n        };\n\n        const practiceContent = this.renderer.render(practiceTemplate, practiceContext);\n\n        sections.push({\n          id: uuidv4(),\n          title: 'Practice',\n          content: practiceContent,\n          type: 'exercise',\n          metadata: { templateId: practiceTemplate.id }\n        });\n      } catch (_error) {\n        // Grammar practice generation failed, but we continue with other sections\n      }\n    }\n\n    // 5. Generate Comparison Section (if requested and relevant)\n    if (includeComparison && mainConcept && mainConcept.culturalContext) {\n      try {\n        const comparisonTemplate = await this.templateRepository.getTemplateById('grammar-comparison');\n        \n        // Only generate if we have a specific comparison template\n        if (comparisonTemplate) {\n          const comparisonContext: TemplateRenderingContext = {\n            sectionTitle: 'Cultural Comparison',\n            grammarConcept: mainConcept\n          };\n\n          const comparisonContent = this.renderer.render(comparisonTemplate, comparisonContext);\n\n          sections.push({\n            id: uuidv4(),\n            title: 'Comparison',\n            content: comparisonContent,\n            type: 'cultural',\n            metadata: { templateId: comparisonTemplate.id }\n          });\n        }\n      } catch (_error) {\n        // Comparison section generation failed, but we continue with other sections\n      }\n    }\n\n    // 6. Construct Final Lesson Object\n    return {\n      id: uuidv4(),\n      type: params.type,\n      difficulty: params.difficulty,\n      title: mainConcept ? `Grammar: ${mainConcept.name.german}` : 'Grammar Lesson',\n      sections: sections,\n      vocabulary: exampleVocabulary,\n      grammarConcepts: mainConcept ? [mainConcept] : [],\n      learningObjectives: [\n        `Understand ${mainConcept ? mainConcept.name.german : 'the grammar rule'}`,\n        'Apply the rule in context',\n        'Compare with Bulgarian usage'\n      ],\n      metadata: params.metadata || {},\n      createdAt: new Date(),\n      updatedAt: new Date()\n    };\n  }\n\n  /**\n   * Generate a contextual or mixed lesson\n   *\n   * @param params - Parameters for lesson generation\n   * @param options - Options for generation algorithm\n   * @returns Generated lesson\n   */\n  async generateContextualLesson(\n    params: LessonGenerationParams,\n    options: LessonGenerationOptions = {}\n  ): Promise<GeneratedLesson> {\n    // For now, treat as mixed vocabulary + grammar\n    // 1. Select Template (mixed or contextual)\n    const template = await this.templateRepository.getTemplateById('mixed-lesson')\n      || await this.templateRepository.getTemplate('mixed', params.difficulty);\n\n    // 2. Fetch Grammar & Vocabulary\n    // Get one grammar concept\n    const grammarConcepts = await this.grammarService.query({\n      difficulty: params.difficulty,\n      limit: 1\n    });\n    const mainConcept = grammarConcepts[0];\n\n    // Get vocabulary related to a theme\n    // Remove unused variable\n    const numericDifficulty = this.mapDifficultyToNumber(params.difficulty);\n    const limit = options.maxItems || 8;\n    \n    // Pick a category if none provided\n    const category = params.criteria.categories?.[0] || 'culture';\n    const normalizedCategory = this.normalizeCategories([category])[0];\n\n    // Get vocabulary items and enhance them with corrected part-of-speech info\n    const vocabularyItems = this.normalizeVocabularyList(await loadVocabularyByCategory(normalizedCategory, {\n      difficulty: numericDifficulty,\n      limit: limit\n    }));\n\n    // Enhance vocabulary items with corrected part-of-speech and grammar info\n    const enhancedVocabularyItems = vocabularyItems.map(item => ({\n      ...item,\n      correctedPartOfSpeech: this.correctPartOfSpeech(this.validatePartOfSpeech(item.partOfSpeech, item.id)),\n      grammarInfo: this.getFallbackGrammarInfo(this.validatePartOfSpeech(item.partOfSpeech, item.id))\n    }));\n\n    // 3. Prepare Context\n    const context: TemplateRenderingContext = {\n      sectionTitle: `Contextual Lesson: ${normalizedCategory.charAt(0).toUpperCase() + normalizedCategory.slice(1)}`,\n      theme: normalizedCategory,\n      difficulty: params.difficulty,\n      grammarConcept: mainConcept,\n      vocabulary: enhancedVocabularyItems,\n      learningTip: 'Try to narrate a short story using these words.',\n      learningObjectives: [\n        `Master vocabulary related to ${category}`,\n        mainConcept ? `Apply ${mainConcept.name.german} in context` : 'Practice sentence construction',\n        'Build reading comprehension'\n      ]\n    };\n\n    // 4. Render\n    const renderedContent = this.renderer.render(template, context);\n\n    // 5. Construct\n    return this.createLessonObject(\n      params,\n      context.sectionTitle || 'Contextual Lesson',\n      renderedContent,\n      vocabularyItems,\n      mainConcept ? [mainConcept] : [],\n      context.learningObjectives || []\n    );\n  }\n\n  /**\n   * Generate an adaptive lesson based on user profile\n   * (Placeholder for future implementation)\n   */\n  async generateAdaptiveLesson(\n    params: LessonGenerationParams,\n    _options: LessonGenerationOptions = {}\n  ): Promise<GeneratedLesson> {\n    // Logic would involve analyzing user profile and picking weak spots\n    // For now, delegate to thematic\n    return this.generateThematicLesson(params, _options);\n  }\n\n  /**\n   * Helper to map CEFR difficulty (A1-C1) to numeric (1-5)\n   */\n  private mapDifficultyToNumber(difficulty: LessonDifficulty): number {\n    const map: Record<LessonDifficulty, number> = {\n      'A1': 1,\n      'A2': 2,\n      'B1': 3,\n      'B2': 4,\n      'C1': 5\n    };\n    return map[difficulty] || 1;\n  }\n\n  /**\n   * Normalize lesson types to the subset compatible with the schema\n   */\n  private normalizeLessonType(type: LessonGenerationParams['type']): LessonGenerationParams['type'] {\n    const allowed: LessonGenerationParams['type'][] = ['vocabulary', 'grammar', 'mixed', 'culture'];\n    if (allowed.includes(type)) {\n      return type;\n    }\n    if (type === 'contextual' || type === 'composition') {\n      return 'mixed';\n    }\n    if (type === 'cultural') {\n      return 'culture';\n    }\n    return 'vocabulary';\n  }\n\n  /**\n   * Ensure categories conform to the vocabulary category union\n   */\n  private normalizeCategories(categories?: Array<VocabularyCategory | string>): VocabularyCategory[] {\n    const allowed: VocabularyCategory[] = [\n      'greetings',\n      'numbers',\n      'family',\n      'food',\n      'colors',\n      'animals',\n      'body-parts',\n      'clothing',\n      'home',\n      'nature',\n      'transport',\n      'technology',\n      'time',\n      'weather',\n      'professions',\n      'places',\n      'grammar',\n      'culture',\n      'everyday-phrases',\n      'uncategorized'\n    ];\n\n    if (!categories || categories.length === 0) {\n      return ['uncategorized'];\n    }\n\n    const normalized = categories\n      .map(category => (allowed.includes(category as VocabularyCategory) ? (category as VocabularyCategory) : 'uncategorized'))\n      .filter(Boolean) as VocabularyCategory[];\n\n    return normalized.length > 0 ? normalized : ['uncategorized'];\n  }\n\n  /**\n   * Align vocabulary items with lesson expectations (metadata, categories)\n   */\n  private normalizeVocabularyItem(item: VocabularyItem): VocabularyItem {\n    return {\n      ...item,\n      categories: this.normalizeCategories(item.categories as Array<VocabularyCategory | string>),\n      isCommon: item.isCommon ?? item.metadata?.isCommon ?? false,\n      isVerified: item.isVerified ?? item.metadata?.isVerified ?? false,\n      learningPhase: (item as { learningPhase?: number }).learningPhase ?? item.metadata?.learningPhase ?? 0,\n      metadata: item.metadata ?? {},\n      createdAt: item.createdAt ?? new Date(),\n      updatedAt: item.updatedAt ?? new Date()\n    };\n  }\n\n  private normalizeVocabularyList(items: VocabularyItem[]): VocabularyItem[] {\n    return items.map(item => this.normalizeVocabularyItem(item));\n  }\n\n  /**\n   * Validate and correct part-of-speech classifications\n   *\n   * This method handles common misclassifications in the vocabulary data\n   * and provides fallback logic to ensure correct part-of-speech usage.\n   *\n   * @param pos - The original part-of-speech classification\n   * @param word - The vocabulary word or ID for context-specific corrections\n   * @returns The corrected part-of-speech classification\n   */\n  private validatePartOfSpeech(pos: string, word: string): string {\n    // Common misclassifications based on validation report\n    const commonMisclassifications: Record<string, string> = {\n      // Greetings and common phrases\n      'zdravej_001': 'interjection', // Hallo\n      'dobro_utro_002': 'phrase',    // Guten Morgen\n      'guten_tag': 'phrase',         // Guten Tag\n      'guten_abend': 'phrase',       // Guten Abend\n      'gute_nacht': 'phrase',        // Gute Nacht\n      'auf_wiedersehen': 'phrase',    // Auf Wiedersehen\n      'bitte': 'interjection',       // Bitte\n      'entschuldigung': 'interjection', // Entschuldigung\n      'es_tut_mir_leid': 'phrase',   // Es tut mir leid\n\n      // Question words\n      'a1_question_001': 'pronoun',  // wer\n      'a1_question_003': 'adverb',   // wann\n      'a1_question_004': 'adverb',   // wo\n      'a1_question_005': 'adverb',   // warum\n      'a1_question_006': 'adverb',   // wie\n      'a1_question_007': 'adverb',   // wie viel, wie viele\n      'a1_question_008': 'pronoun',  // wessen\n      'a1_question_009': 'pronoun',  // was fr ein, welcher Art\n      'a1_question_010': 'adverb',   // woher\n      'a1_question_011': 'adverb',   // wohin\n      'a1_question_012': 'conjunction', // ob\n\n      // Numbers\n      'eins': 'numeral',\n      'zwei': 'numeral',\n      'drei': 'numeral',\n      'vier': 'numeral',\n      'funf': 'numeral',\n      'sechs': 'numeral',\n      'sieben': 'numeral',\n      'acht': 'numeral',\n      'neun': 'numeral',\n      'zehn': 'numeral',\n      'elf': 'numeral',\n      'zwoelf': 'numeral',\n      'dreizehn': 'numeral',\n      'zwanzig': 'numeral',\n      'a1_number_200': 'numeral'\n    };\n\n    // Check for specific word misclassifications\n    if (commonMisclassifications[word]) {\n      return commonMisclassifications[word];\n    }\n\n    // Default fallback: return the original POS if no correction is needed\n    return pos;\n  }\n\n  /**\n   * Get fallback grammar information for a part-of-speech\n   *\n   * This method provides appropriate grammar information based on\n   * the corrected part-of-speech classification.\n   *\n   * @param pos - The part-of-speech classification\n   * @returns Grammar information string\n   */\n  private getFallbackGrammarInfo(pos: string): string {\n    const grammarInfoMap: Record<string, string> = {\n      'interjection': 'Interjections are words or phrases used to express emotion or greeting. They are often used at the beginning of sentences.',\n      'pronoun': 'Pronouns replace nouns to avoid repetition. They must agree with the noun they replace in gender, number, and case.',\n      'adverb': 'Adverbs describe verbs, adjectives, or other adverbs. They often answer questions like \"how?\", \"when?\", \"where?\", or \"to what extent?\".',\n      'numeral': 'Numerals represent numbers and can be cardinal (one, two) or ordinal (first, second). They are used for counting and ordering.',\n      'phrase': 'Phrases are groups of words that function as a single unit in the syntax of a sentence. They often express greetings, farewells, or common expressions.',\n      'conjunction': 'Conjunctions connect words, phrases, or clauses. They can be coordinating (and, but, or) or subordinating (because, although, if).'\n    };\n\n    return grammarInfoMap[pos] || 'No additional grammar information available.';\n  }\n\n  /**\n   * Correct part-of-speech label for display\n   *\n   * This utility function standardizes part-of-speech labels for\n   * consistent display in the UI.\n   *\n   * @param pos - The part-of-speech classification\n   * @returns Display-friendly part-of-speech label\n   */\n  correctPartOfSpeech(pos: string): string {\n    const displayNames: Record<string, string> = {\n      'noun': 'Noun',\n      'verb': 'Verb',\n      'adjective': 'Adjective',\n      'adverb': 'Adverb',\n      'pronoun': 'Pronoun',\n      'preposition': 'Preposition',\n      'conjunction': 'Conjunction',\n      'interjection': 'Interjection',\n      'numeral': 'Numeral',\n      'article': 'Article',\n      'phrase': 'Phrase'\n    };\n\n    return displayNames[pos] || pos;\n  }\n\n  /**\n   * Helper to create the standard GeneratedLesson object\n   */\n  private createLessonObject(\n    params: LessonGenerationParams,\n    title: string,\n    content: string,\n    vocabulary: VocabularyItem[],\n    grammarConcepts: CulturalGrammarConcept[],\n    learningObjectives: string[]\n  ): GeneratedLesson {\n    const normalizedType = this.normalizeLessonType(params.type);\n    const normalizedVocabulary = this.normalizeVocabularyList(vocabulary);\n    const sectionType: GeneratedLessonSection['type'] = normalizedType === 'grammar'\n      ? 'grammar'\n      : normalizedType === 'culture'\n        ? 'cultural'\n        : 'vocabulary';\n\n    const section: GeneratedLessonSection = {\n      id: uuidv4(),\n      title: 'Main Content', // Could be dynamic\n      content: content,\n      type: sectionType,\n      metadata: {}\n    };\n\n    return {\n      id: uuidv4(),\n      type: normalizedType,\n      difficulty: params.difficulty,\n      title: title,\n      sections: [section],\n      vocabulary: normalizedVocabulary,\n      grammarConcepts: grammarConcepts,\n      learningObjectives: learningObjectives,\n      metadata: params.metadata || {},\n      createdAt: new Date(),\n      updatedAt: new Date()\n    };\n  }\n}\n\n/**\n * Singleton instance of LessonGenerationEngine\n */\nexport const lessonGenerationEngine = new LessonGenerationEngine();","/**\n * Dependency Injection Container\n *\n * This module provides a centralized container for managing service dependencies\n * across the application, enabling better testability and loose coupling.\n */\n\nimport { ProgressService } from './progress';\nimport { loadVocabulary, initializeVocabulary } from '../data/loader';\nimport { LessonGenerationEngine } from './lesson-generation/lesson-generator';\nimport { lessonTemplateRepository } from './lesson-generation/lesson-templates';\nimport { culturalGrammarService } from './lesson-generation/cultural-grammar';\nimport { templateRenderer } from './lesson-generation/template-renderer';\nimport { EventBus } from './event-bus';\nimport { LearningSession } from '../state/session.svelte';\n\n// Define service types\n// Import VocabularyService type for type checking (but not for instantiation)\nimport type { _VocabularyService } from '../data/vocabulary';\n\ntype ServiceTypes = {\n    progressService: ProgressService;\n    lessonGenerationEngine: LessonGenerationEngine;\n    eventBus: EventBus;\n    learningSession: LearningSession;\n};\n\n// Singleton DI container\nclass DIContainer {\n    private static instance: DIContainer;\n    private services: Partial<ServiceTypes> = {};\n    private eventBus: EventBus;\n    private isInitialized = false;\n    private initializationPromise: Promise<void> | null = null;\n\n    private constructor() {\n        // Initialize event bus\n        this.eventBus = new EventBus();\n        this.services.eventBus = this.eventBus;\n    }\n\n    public static getInstance(): DIContainer {\n        if (!DIContainer.instance) {\n            DIContainer.instance = new DIContainer();\n        }\n        return DIContainer.instance;\n    }\n\n    /**\n     * Initialize all services\n     */\n    public async initialize(): Promise<void> {\n        if (this.initializationPromise) {\n            return this.initializationPromise;\n        }\n\n        this.initializationPromise = new Promise<void>(async (resolve, reject) => {\n            try {\n                // Initialize event bus first\n                this.services.eventBus = this.eventBus;\n\n                // Initialize ProgressService - it's independent\n                this.services.progressService = new ProgressService(this.eventBus);\n\n                // Initialize LearningSession - now independent of ProgressService\n                this.services.learningSession = new LearningSession(this.eventBus);\n\n                // Note: AppDataState is now initialized separately to avoid circular dependencies\n\n                // VocabularyService has been removed - vocabulary data is loaded directly\n\n                // Initialize LessonGenerationEngine with dependencies\n                this.services.lessonGenerationEngine = new LessonGenerationEngine(\n                    lessonTemplateRepository,\n                    culturalGrammarService,\n                    templateRenderer\n                );\n\n                this.isInitialized = true;\n                resolve();\n            } catch (error) {\n                console.error('DI Container initialization failed:', error);\n                reject(error);\n            }\n        });\n\n        return this.initializationPromise;\n    }\n\n    /**\n     * Get a service by type\n     * @param serviceName The name of the service to get\n     */\n    public getService<T extends keyof ServiceTypes>(serviceName: T): ServiceTypes[T] {\n        // Ensure initialization is complete before accessing services\n        if (!this.isInitialized) {\n            throw new Error(`Service ${serviceName} cannot be accessed: DI container not initialized. ` +\n                          `Make sure to await diContainer.initialize() before accessing services.`);\n        }\n\n        if (!this.services[serviceName]) {\n            throw new Error(`Service ${serviceName} not initialized. ` +\n                          `Make sure diContainer.initialize() has been called successfully.`);\n        }\n\n        return this.services[serviceName];\n    }\n\n    /**\n     * Get the AppDataState instance (initialized separately to avoid circular dependencies)\n     */\n    public getAppDataState(): any {\n        // This will be replaced with proper AppDataState import after initialization\n        throw new Error('AppDataState should be accessed through app-state.ts to avoid circular dependencies');\n    }\n\n    /**\n     * Register a service instance\n     * @param serviceName The name of the service\n     * @param instance The service instance\n     */\n    public registerService<T extends keyof ServiceTypes>(serviceName: T, instance: ServiceTypes[T]): void {\n        this.services[serviceName] = instance;\n    }\n\n    /**\n     * Get the event bus\n     */\n    public getEventBus(): EventBus {\n        return this.eventBus;\n    }\n}\n\n// Create and initialize the DI container\nexport const diContainer = DIContainer.getInstance();\n\n// Initialize services\ndiContainer.initialize().catch(error => {\n    console.error('Failed to initialize DI container:', error);\n});\n\n// Export event bus immediately since it doesn't require initialization\nexport const eventBus = diContainer.getEventBus();\n\n// Export a function to get services after initialization\nexport function getProgressService(): ProgressService {\n    return diContainer.getService('progressService');\n}\n\n// VocabularyService has been removed - vocabulary data is loaded directly via loader functions\n\n/**\n * Get vocabulary data\n */\nexport async function getVocabularyData() {\n    return await loadVocabulary();\n}\n\n// Export vocabulary initialization function\nexport async function initializeVocabularyData() {\n    return await initializeVocabulary();\n}\n\nexport function getLessonGenerationEngine(): LessonGenerationEngine {\n    return diContainer.getService('lessonGenerationEngine');\n}\n\n// Note: AppDataState is initialized separately in app-state.ts to avoid circular dependencies","import { browser } from '$app/environment';\nimport { Debug } from '$lib/utils';\nimport { DataLoader } from '$lib/data/DataLoader.svelte';\nimport { diContainer } from '$lib/services/di-container';\nimport { EventTypes } from '$lib/services/event-bus';\nimport type { VocabularyItem } from '$lib/types/vocabulary';\nimport type { LessonDifficulty } from '$lib/schemas/lesson';\nimport type { VocabularyCategory, PartOfSpeech } from '$lib/schemas/vocabulary';\n\nclass VocabularyDB {\n    // Reactive state using Svelte 5 Runes\n    /** @type {VocabularyItem[]} */\n    items = $state<VocabularyItem[]>([]);\n    /** @type {boolean} */\n    initialized = $state<boolean>(false);\n\n    constructor() {\n        // Don't load data in constructor to prevent SSR fetch calls\n        // Data loading will be triggered explicitly when needed\n    }\n\n    async initialize() {\n        if (browser && !this.initialized) {\n            await this.loadInitialData();\n        }\n    }\n\n    async loadInitialData() {\n        try {\n            Debug.log('VocabularyDB', 'Loading initial vocabulary data');\n            // Use the DataLoader which now includes Zod validation\n            const dataLoader = DataLoader.getInstance();\n            const result = await dataLoader.getVocabularyBySearch({\n                limit: Number.MAX_SAFE_INTEGER,\n                offset: 0\n            });\n\n            // Convert UnifiedVocabularyItem to VocabularyItem format\n            // Ensure all required fields are present with defaults\n            this.items = result.items.map(item => ({\n                ...item,\n                category: item.categories[0] || 'greetings',\n                categories: item.categories || ['greetings'],\n                tags: (item.tags ?? []),\n                // Ensure required fields from metadata or use defaults\n                isCommon: item.metadata?.isCommon ?? false,\n                isVerified: item.metadata?.isVerified ?? false,\n                learningPhase: item.metadata?.learningPhase ?? 0,\n                xp_value: item.xp_value ?? item.metadata?.xpValue ?? 10\n            }));\n\n            this.initialized = true;\n            Debug.log('VocabularyDB', 'Vocabulary data loaded successfully', {\n                itemCount: this.items.length,\n                initialized: this.initialized\n            });\n        } catch (error) {\n            Debug.error('VocabularyDB', 'Failed to load initial vocabulary data', error as Error);\n            // Store the error for user feedback\n            this.items = [];\n            this.initialized = true;\n\n            // Emit error event for global error handling\n            const eventBus = diContainer.getService('eventBus');\n            eventBus.emit(EventTypes.ERROR, {\n                error: new Error('Failed to load vocabulary data'),\n                context: 'VocabularyDB.loadInitialData',\n                timestamp: new Date()\n            });\n        }\n    }\n\n    // Remove the unused import workaround since we're using DataLoader instead\n\n    /** @param {VocabularyItem} item */\n    add(item) {\n        this.items.push(item);\n    }\n\n    /** @param {string} id @param {Partial<VocabularyItem>} updates */\n    update(id, updates) {\n        const index = this.items.findIndex((i) => i.id === id);\n        if (index !== -1) {\n            const current = this.items[index];\n            this.items[index] = { ...current, ...updates };\n        }\n    }\n\n    /** @param {string} id @returns {VocabularyItem | undefined} */\n    get(id) {\n        return this.items.find((i) => i.id === id);\n    }\n\n    /**\n     * Get all vocabulary items\n     */\n    getVocabulary(): VocabularyItem[] {\n        return this.items;\n    }\n\n    /**\n     * Get vocabulary items by difficulty level\n     * @param difficulty CEFR difficulty level\n     * @returns Array of vocabulary items matching the difficulty\n     */\n    getVocabularyByDifficulty(difficulty: LessonDifficulty): VocabularyItem[] {\n        const difficultyRange = this.getDifficultyRange(difficulty);\n        return this.items.filter(item =>\n            item.difficulty >= difficultyRange.min && item.difficulty <= difficultyRange.max\n        );\n    }\n\n    /**\n     * Get vocabulary items by category\n     * @param category Vocabulary category\n     * @returns Array of vocabulary items in the specified category\n     */\n    getVocabularyByCategory(category: VocabularyCategory): VocabularyItem[] {\n        return this.items.filter(item => item.categories.includes(category));\n    }\n\n    /**\n     * Get vocabulary items by part of speech\n     * @param partOfSpeech Part of speech\n     * @returns Array of vocabulary items with the specified part of speech\n     */\n    getVocabularyByPartOfSpeech(partOfSpeech: PartOfSpeech): VocabularyItem[] {\n        return this.items.filter(item => item.partOfSpeech === partOfSpeech);\n    }\n\n    /**\n     * Get vocabulary items by multiple criteria\n     * @param criteria Search criteria\n     * @returns Array of vocabulary items matching all criteria\n     */\n    getVocabularyByCriteria(criteria: {\n        difficulty?: LessonDifficulty;\n        categories?: VocabularyCategory[];\n        partOfSpeech?: PartOfSpeech;\n        limit?: number;\n    }): VocabularyItem[] {\n        // Convert difficulty level to numeric range if provided\n        const difficultyRange = criteria.difficulty\n            ? this.getDifficultyRange(criteria.difficulty)\n            : null;\n\n        const filteredItems = this.items.filter(item => {\n            // Filter by difficulty\n            const difficultyMatch = difficultyRange\n                ? item.difficulty >= difficultyRange.min && item.difficulty <= difficultyRange.max\n                : true;\n\n            // Filter by categories\n            const categoryMatch = criteria.categories && criteria.categories.length > 0\n                ? item.categories.some(category => criteria.categories?.includes(category))\n                : true;\n\n            // Filter by part of speech\n            const partOfSpeechMatch = criteria.partOfSpeech\n                ? item.partOfSpeech === criteria.partOfSpeech\n                : true;\n\n            return difficultyMatch && categoryMatch && partOfSpeechMatch;\n        });\n\n        // Apply limit if specified\n        return criteria.limit\n            ? filteredItems.slice(0, criteria.limit)\n            : filteredItems;\n    }\n\n    /**\n     * Get random vocabulary items\n     * @param count Number of items to return\n     * @returns Array of random vocabulary items\n     */\n    getRandomVocabulary(count: number = 5): VocabularyItem[] {\n        if (this.items.length === 0) return [];\n\n        // Shuffle array and take first N items\n        const shuffled = [...this.items].sort(() => 0.5 - Math.random());\n        return shuffled.slice(0, Math.min(count, this.items.length));\n    }\n\n    /**\n     * Get vocabulary items by search query\n     * @param query Search term\n     * @returns Array of vocabulary items matching the search term\n     */\n    searchVocabulary(query: string): VocabularyItem[] {\n        Debug.log('VocabularyDB', 'Searching vocabulary', { query });\n        if (!query) {\n            Debug.log('VocabularyDB', 'Empty search query, returning empty results');\n            return [];\n        }\n\n        const lowerQuery = query.toLowerCase();\n        const results = this.items.filter(item =>\n            item.german.toLowerCase().includes(lowerQuery) ||\n            item.bulgarian.toLowerCase().includes(lowerQuery) ||\n            (item.tags ?? []).some(tag => tag.toLowerCase().includes(lowerQuery))\n        );\n\n        Debug.log('VocabularyDB', 'Vocabulary search completed', { query, results: results.length });\n        return results;\n    }\n\n    /**\n     * Get numeric difficulty range for a CEFR level\n     * @param difficulty CEFR difficulty level\n     * @returns Object with min and max difficulty values\n     */\n    private getDifficultyRange(difficulty: LessonDifficulty): { min: number; max: number } {\n        const ranges: Record<LessonDifficulty, { min: number; max: number }> = {\n            'A1': { min: 1, max: 1.5 },\n            'A2': { min: 1.5, max: 2.5 },\n            'B1': { min: 2.5, max: 3.5 },\n            'B2': { min: 3.5, max: 4.5 },\n            'C1': { min: 4.5, max: 5 }\n        };\n        return ranges[difficulty];\n    }\n\n    /**\n     * Get the count of vocabulary items\n     * @returns Total number of vocabulary items\n     */\n    getVocabularyCount(): number {\n        return this.items.length;\n    }\n\n    /**\n     * Get vocabulary statistics by difficulty level\n     * @returns Object with count of items per difficulty level\n     */\n    getVocabularyStatsByDifficulty(): Record<LessonDifficulty, number> {\n        const stats: Record<LessonDifficulty, number> = {\n            'A1': 0,\n            'A2': 0,\n            'B1': 0,\n            'B2': 0,\n            'C1': 0\n        };\n\n        this.items.forEach(item => {\n            if (item.difficulty <= 1.5) stats.A1++;\n            else if (item.difficulty <= 2.5) stats.A2++;\n            else if (item.difficulty <= 3.5) stats.B1++;\n            else if (item.difficulty <= 4.5) stats.B2++;\n            else stats.C1++;\n        });\n\n        return stats;\n    }\n}\n\n// Initialize the database instance\nconst vocabularyDb = new VocabularyDB();\n\n// Automatic initialization is now handled by the DataLoader\n// No automatic initialization here to avoid SSR issues\n\n/**\n * Singleton instance of VocabularyDB for global state management\n */\nexport { vocabularyDb };","/**\n * Fuse.js v7.1.0 - Lightweight fuzzy-search (http://fusejs.io)\n *\n * Copyright (c) 2025 Kiro Risk (http://kiro.me)\n * All Rights Reserved. Apache Software License 2.0\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction isArray(value) {\n  return !Array.isArray\n    ? getTag(value) === '[object Array]'\n    : Array.isArray(value)\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/baseToString.js\nconst INFINITY = 1 / 0;\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value\n  }\n  let result = value + '';\n  return result == '0' && 1 / value == -INFINITY ? '-0' : result\n}\n\nfunction toString(value) {\n  return value == null ? '' : baseToString(value)\n}\n\nfunction isString(value) {\n  return typeof value === 'string'\n}\n\nfunction isNumber(value) {\n  return typeof value === 'number'\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/isBoolean.js\nfunction isBoolean(value) {\n  return (\n    value === true ||\n    value === false ||\n    (isObjectLike(value) && getTag(value) == '[object Boolean]')\n  )\n}\n\nfunction isObject(value) {\n  return typeof value === 'object'\n}\n\n// Checks if `value` is object-like.\nfunction isObjectLike(value) {\n  return isObject(value) && value !== null\n}\n\nfunction isDefined(value) {\n  return value !== undefined && value !== null\n}\n\nfunction isBlank(value) {\n  return !value.trim().length\n}\n\n// Gets the `toStringTag` of `value`.\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/getTag.js\nfunction getTag(value) {\n  return value == null\n    ? value === undefined\n      ? '[object Undefined]'\n      : '[object Null]'\n    : Object.prototype.toString.call(value)\n}\n\nconst EXTENDED_SEARCH_UNAVAILABLE = 'Extended search is not available';\n\nconst INCORRECT_INDEX_TYPE = \"Incorrect 'index' type\";\n\nconst LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY = (key) =>\n  `Invalid value for key ${key}`;\n\nconst PATTERN_LENGTH_TOO_LARGE = (max) =>\n  `Pattern length exceeds max of ${max}.`;\n\nconst MISSING_KEY_PROPERTY = (name) => `Missing ${name} property in key`;\n\nconst INVALID_KEY_WEIGHT_VALUE = (key) =>\n  `Property 'weight' in key '${key}' must be a positive integer`;\n\nconst hasOwn = Object.prototype.hasOwnProperty;\n\nclass KeyStore {\n  constructor(keys) {\n    this._keys = [];\n    this._keyMap = {};\n\n    let totalWeight = 0;\n\n    keys.forEach((key) => {\n      let obj = createKey(key);\n\n      this._keys.push(obj);\n      this._keyMap[obj.id] = obj;\n\n      totalWeight += obj.weight;\n    });\n\n    // Normalize weights so that their sum is equal to 1\n    this._keys.forEach((key) => {\n      key.weight /= totalWeight;\n    });\n  }\n  get(keyId) {\n    return this._keyMap[keyId]\n  }\n  keys() {\n    return this._keys\n  }\n  toJSON() {\n    return JSON.stringify(this._keys)\n  }\n}\n\nfunction createKey(key) {\n  let path = null;\n  let id = null;\n  let src = null;\n  let weight = 1;\n  let getFn = null;\n\n  if (isString(key) || isArray(key)) {\n    src = key;\n    path = createKeyPath(key);\n    id = createKeyId(key);\n  } else {\n    if (!hasOwn.call(key, 'name')) {\n      throw new Error(MISSING_KEY_PROPERTY('name'))\n    }\n\n    const name = key.name;\n    src = name;\n\n    if (hasOwn.call(key, 'weight')) {\n      weight = key.weight;\n\n      if (weight <= 0) {\n        throw new Error(INVALID_KEY_WEIGHT_VALUE(name))\n      }\n    }\n\n    path = createKeyPath(name);\n    id = createKeyId(name);\n    getFn = key.getFn;\n  }\n\n  return { path, id, weight, src, getFn }\n}\n\nfunction createKeyPath(key) {\n  return isArray(key) ? key : key.split('.')\n}\n\nfunction createKeyId(key) {\n  return isArray(key) ? key.join('.') : key\n}\n\nfunction get(obj, path) {\n  let list = [];\n  let arr = false;\n\n  const deepGet = (obj, path, index) => {\n    if (!isDefined(obj)) {\n      return\n    }\n    if (!path[index]) {\n      // If there's no path left, we've arrived at the object we care about.\n      list.push(obj);\n    } else {\n      let key = path[index];\n\n      const value = obj[key];\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      // If we're at the last value in the path, and if it's a string/number/bool,\n      // add it to the list\n      if (\n        index === path.length - 1 &&\n        (isString(value) || isNumber(value) || isBoolean(value))\n      ) {\n        list.push(toString(value));\n      } else if (isArray(value)) {\n        arr = true;\n        // Search each item in the array.\n        for (let i = 0, len = value.length; i < len; i += 1) {\n          deepGet(value[i], path, index + 1);\n        }\n      } else if (path.length) {\n        // An object. Recurse further.\n        deepGet(value, path, index + 1);\n      }\n    }\n  };\n\n  // Backwards compatibility (since path used to be a string)\n  deepGet(obj, isString(path) ? path.split('.') : path, 0);\n\n  return arr ? list : list[0]\n}\n\nconst MatchOptions = {\n  // Whether the matches should be included in the result set. When `true`, each record in the result\n  // set will include the indices of the matched characters.\n  // These can consequently be used for highlighting purposes.\n  includeMatches: false,\n  // When `true`, the matching function will continue to the end of a search pattern even if\n  // a perfect match has already been located in the string.\n  findAllMatches: false,\n  // Minimum number of characters that must be matched before a result is considered a match\n  minMatchCharLength: 1\n};\n\nconst BasicOptions = {\n  // When `true`, the algorithm continues searching to the end of the input even if a perfect\n  // match is found before the end of the same input.\n  isCaseSensitive: false,\n  // When `true`, the algorithm will ignore diacritics (accents) in comparisons\n  ignoreDiacritics: false,\n  // When true, the matching function will continue to the end of a search pattern even if\n  includeScore: false,\n  // List of properties that will be searched. This also supports nested properties.\n  keys: [],\n  // Whether to sort the result list, by score\n  shouldSort: true,\n  // Default sort function: sort by ascending score, ascending index\n  sortFn: (a, b) =>\n    a.score === b.score ? (a.idx < b.idx ? -1 : 1) : a.score < b.score ? -1 : 1\n};\n\nconst FuzzyOptions = {\n  // Approximately where in the text is the pattern expected to be found?\n  location: 0,\n  // At what point does the match algorithm give up. A threshold of '0.0' requires a perfect match\n  // (of both letters and location), a threshold of '1.0' would match anything.\n  threshold: 0.6,\n  // Determines how close the match must be to the fuzzy location (specified above).\n  // An exact letter match which is 'distance' characters away from the fuzzy location\n  // would score as a complete mismatch. A distance of '0' requires the match be at\n  // the exact location specified, a threshold of '1000' would require a perfect match\n  // to be within 800 characters of the fuzzy location to be found using a 0.8 threshold.\n  distance: 100\n};\n\nconst AdvancedOptions = {\n  // When `true`, it enables the use of unix-like search commands\n  useExtendedSearch: false,\n  // The get function to use when fetching an object's properties.\n  // The default will search nested paths *ie foo.bar.baz*\n  getFn: get,\n  // When `true`, search will ignore `location` and `distance`, so it won't matter\n  // where in the string the pattern appears.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#fuzziness-score\n  ignoreLocation: false,\n  // When `true`, the calculation for the relevance score (used for sorting) will\n  // ignore the field-length norm.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#field-length-norm\n  ignoreFieldNorm: false,\n  // The weight to determine how much field length norm effects scoring.\n  fieldNormWeight: 1\n};\n\nvar Config = {\n  ...BasicOptions,\n  ...MatchOptions,\n  ...FuzzyOptions,\n  ...AdvancedOptions\n};\n\nconst SPACE = /[^ ]+/g;\n\n// Field-length norm: the shorter the field, the higher the weight.\n// Set to 3 decimals to reduce index size.\nfunction norm(weight = 1, mantissa = 3) {\n  const cache = new Map();\n  const m = Math.pow(10, mantissa);\n\n  return {\n    get(value) {\n      const numTokens = value.match(SPACE).length;\n\n      if (cache.has(numTokens)) {\n        return cache.get(numTokens)\n      }\n\n      // Default function is 1/sqrt(x), weight makes that variable\n      const norm = 1 / Math.pow(numTokens, 0.5 * weight);\n\n      // In place of `toFixed(mantissa)`, for faster computation\n      const n = parseFloat(Math.round(norm * m) / m);\n\n      cache.set(numTokens, n);\n\n      return n\n    },\n    clear() {\n      cache.clear();\n    }\n  }\n}\n\nclass FuseIndex {\n  constructor({\n    getFn = Config.getFn,\n    fieldNormWeight = Config.fieldNormWeight\n  } = {}) {\n    this.norm = norm(fieldNormWeight, 3);\n    this.getFn = getFn;\n    this.isCreated = false;\n\n    this.setIndexRecords();\n  }\n  setSources(docs = []) {\n    this.docs = docs;\n  }\n  setIndexRecords(records = []) {\n    this.records = records;\n  }\n  setKeys(keys = []) {\n    this.keys = keys;\n    this._keysMap = {};\n    keys.forEach((key, idx) => {\n      this._keysMap[key.id] = idx;\n    });\n  }\n  create() {\n    if (this.isCreated || !this.docs.length) {\n      return\n    }\n\n    this.isCreated = true;\n\n    // List is Array<String>\n    if (isString(this.docs[0])) {\n      this.docs.forEach((doc, docIndex) => {\n        this._addString(doc, docIndex);\n      });\n    } else {\n      // List is Array<Object>\n      this.docs.forEach((doc, docIndex) => {\n        this._addObject(doc, docIndex);\n      });\n    }\n\n    this.norm.clear();\n  }\n  // Adds a doc to the end of the index\n  add(doc) {\n    const idx = this.size();\n\n    if (isString(doc)) {\n      this._addString(doc, idx);\n    } else {\n      this._addObject(doc, idx);\n    }\n  }\n  // Removes the doc at the specified index of the index\n  removeAt(idx) {\n    this.records.splice(idx, 1);\n\n    // Change ref index of every subsquent doc\n    for (let i = idx, len = this.size(); i < len; i += 1) {\n      this.records[i].i -= 1;\n    }\n  }\n  getValueForItemAtKeyId(item, keyId) {\n    return item[this._keysMap[keyId]]\n  }\n  size() {\n    return this.records.length\n  }\n  _addString(doc, docIndex) {\n    if (!isDefined(doc) || isBlank(doc)) {\n      return\n    }\n\n    let record = {\n      v: doc,\n      i: docIndex,\n      n: this.norm.get(doc)\n    };\n\n    this.records.push(record);\n  }\n  _addObject(doc, docIndex) {\n    let record = { i: docIndex, $: {} };\n\n    // Iterate over every key (i.e, path), and fetch the value at that key\n    this.keys.forEach((key, keyIndex) => {\n      let value = key.getFn ? key.getFn(doc) : this.getFn(doc, key.path);\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      if (isArray(value)) {\n        let subRecords = [];\n        const stack = [{ nestedArrIndex: -1, value }];\n\n        while (stack.length) {\n          const { nestedArrIndex, value } = stack.pop();\n\n          if (!isDefined(value)) {\n            continue\n          }\n\n          if (isString(value) && !isBlank(value)) {\n            let subRecord = {\n              v: value,\n              i: nestedArrIndex,\n              n: this.norm.get(value)\n            };\n\n            subRecords.push(subRecord);\n          } else if (isArray(value)) {\n            value.forEach((item, k) => {\n              stack.push({\n                nestedArrIndex: k,\n                value: item\n              });\n            });\n          } else ;\n        }\n        record.$[keyIndex] = subRecords;\n      } else if (isString(value) && !isBlank(value)) {\n        let subRecord = {\n          v: value,\n          n: this.norm.get(value)\n        };\n\n        record.$[keyIndex] = subRecord;\n      }\n    });\n\n    this.records.push(record);\n  }\n  toJSON() {\n    return {\n      keys: this.keys,\n      records: this.records\n    }\n  }\n}\n\nfunction createIndex(\n  keys,\n  docs,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys.map(createKey));\n  myIndex.setSources(docs);\n  myIndex.create();\n  return myIndex\n}\n\nfunction parseIndex(\n  data,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const { keys, records } = data;\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys);\n  myIndex.setIndexRecords(records);\n  return myIndex\n}\n\nfunction computeScore$1(\n  pattern,\n  {\n    errors = 0,\n    currentLocation = 0,\n    expectedLocation = 0,\n    distance = Config.distance,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  const accuracy = errors / pattern.length;\n\n  if (ignoreLocation) {\n    return accuracy\n  }\n\n  const proximity = Math.abs(expectedLocation - currentLocation);\n\n  if (!distance) {\n    // Dodge divide by zero error.\n    return proximity ? 1.0 : accuracy\n  }\n\n  return accuracy + proximity / distance\n}\n\nfunction convertMaskToIndices(\n  matchmask = [],\n  minMatchCharLength = Config.minMatchCharLength\n) {\n  let indices = [];\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (let len = matchmask.length; i < len; i += 1) {\n    let match = matchmask[i];\n    if (match && start === -1) {\n      start = i;\n    } else if (!match && start !== -1) {\n      end = i - 1;\n      if (end - start + 1 >= minMatchCharLength) {\n        indices.push([start, end]);\n      }\n      start = -1;\n    }\n  }\n\n  // (i-1 - start) + 1 => i - start\n  if (matchmask[i - 1] && i - start >= minMatchCharLength) {\n    indices.push([start, i - 1]);\n  }\n\n  return indices\n}\n\n// Machine word size\nconst MAX_BITS = 32;\n\nfunction search(\n  text,\n  pattern,\n  patternAlphabet,\n  {\n    location = Config.location,\n    distance = Config.distance,\n    threshold = Config.threshold,\n    findAllMatches = Config.findAllMatches,\n    minMatchCharLength = Config.minMatchCharLength,\n    includeMatches = Config.includeMatches,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  if (pattern.length > MAX_BITS) {\n    throw new Error(PATTERN_LENGTH_TOO_LARGE(MAX_BITS))\n  }\n\n  const patternLen = pattern.length;\n  // Set starting location at beginning text and initialize the alphabet.\n  const textLen = text.length;\n  // Handle the case when location > text.length\n  const expectedLocation = Math.max(0, Math.min(location, textLen));\n  // Highest score beyond which we give up.\n  let currentThreshold = threshold;\n  // Is there a nearby exact match? (speedup)\n  let bestLocation = expectedLocation;\n\n  // Performance: only computer matches when the minMatchCharLength > 1\n  // OR if `includeMatches` is true.\n  const computeMatches = minMatchCharLength > 1 || includeMatches;\n  // A mask of the matches, used for building the indices\n  const matchMask = computeMatches ? Array(textLen) : [];\n\n  let index;\n\n  // Get all exact matches, here for speed up\n  while ((index = text.indexOf(pattern, bestLocation)) > -1) {\n    let score = computeScore$1(pattern, {\n      currentLocation: index,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    currentThreshold = Math.min(score, currentThreshold);\n    bestLocation = index + patternLen;\n\n    if (computeMatches) {\n      let i = 0;\n      while (i < patternLen) {\n        matchMask[index + i] = 1;\n        i += 1;\n      }\n    }\n  }\n\n  // Reset the best location\n  bestLocation = -1;\n\n  let lastBitArr = [];\n  let finalScore = 1;\n  let binMax = patternLen + textLen;\n\n  const mask = 1 << (patternLen - 1);\n\n  for (let i = 0; i < patternLen; i += 1) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from the match location we can stray\n    // at this error level.\n    let binMin = 0;\n    let binMid = binMax;\n\n    while (binMin < binMid) {\n      const score = computeScore$1(pattern, {\n        errors: i,\n        currentLocation: expectedLocation + binMid,\n        expectedLocation,\n        distance,\n        ignoreLocation\n      });\n\n      if (score <= currentThreshold) {\n        binMin = binMid;\n      } else {\n        binMax = binMid;\n      }\n\n      binMid = Math.floor((binMax - binMin) / 2 + binMin);\n    }\n\n    // Use the result from this iteration as the maximum for the next.\n    binMax = binMid;\n\n    let start = Math.max(1, expectedLocation - binMid + 1);\n    let finish = findAllMatches\n      ? textLen\n      : Math.min(expectedLocation + binMid, textLen) + patternLen;\n\n    // Initialize the bit array\n    let bitArr = Array(finish + 2);\n\n    bitArr[finish + 1] = (1 << i) - 1;\n\n    for (let j = finish; j >= start; j -= 1) {\n      let currentLocation = j - 1;\n      let charMatch = patternAlphabet[text.charAt(currentLocation)];\n\n      if (computeMatches) {\n        // Speed up: quick bool to int conversion (i.e, `charMatch ? 1 : 0`)\n        matchMask[currentLocation] = +!!charMatch;\n      }\n\n      // First pass: exact match\n      bitArr[j] = ((bitArr[j + 1] << 1) | 1) & charMatch;\n\n      // Subsequent passes: fuzzy match\n      if (i) {\n        bitArr[j] |=\n          ((lastBitArr[j + 1] | lastBitArr[j]) << 1) | 1 | lastBitArr[j + 1];\n      }\n\n      if (bitArr[j] & mask) {\n        finalScore = computeScore$1(pattern, {\n          errors: i,\n          currentLocation,\n          expectedLocation,\n          distance,\n          ignoreLocation\n        });\n\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (finalScore <= currentThreshold) {\n          // Indeed it is\n          currentThreshold = finalScore;\n          bestLocation = currentLocation;\n\n          // Already passed `loc`, downhill from here on in.\n          if (bestLocation <= expectedLocation) {\n            break\n          }\n\n          // When passing `bestLocation`, don't exceed our current distance from `expectedLocation`.\n          start = Math.max(1, 2 * expectedLocation - bestLocation);\n        }\n      }\n    }\n\n    // No hope for a (better) match at greater error levels.\n    const score = computeScore$1(pattern, {\n      errors: i + 1,\n      currentLocation: expectedLocation,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    if (score > currentThreshold) {\n      break\n    }\n\n    lastBitArr = bitArr;\n  }\n\n  const result = {\n    isMatch: bestLocation >= 0,\n    // Count exact matches (those with a score of 0) to be \"almost\" exact\n    score: Math.max(0.001, finalScore)\n  };\n\n  if (computeMatches) {\n    const indices = convertMaskToIndices(matchMask, minMatchCharLength);\n    if (!indices.length) {\n      result.isMatch = false;\n    } else if (includeMatches) {\n      result.indices = indices;\n    }\n  }\n\n  return result\n}\n\nfunction createPatternAlphabet(pattern) {\n  let mask = {};\n\n  for (let i = 0, len = pattern.length; i < len; i += 1) {\n    const char = pattern.charAt(i);\n    mask[char] = (mask[char] || 0) | (1 << (len - i - 1));\n  }\n\n  return mask\n}\n\nconst stripDiacritics = String.prototype.normalize\n    ? ((str) => str.normalize('NFD').replace(/[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u07FD\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08D3-\\u08E1\\u08E3-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u09FE\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0AFA-\\u0AFF\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C04\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D00-\\u0D03\\u0D3B\\u0D3C\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u1885\\u1886\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF7-\\u1CF9\\u1DC0-\\u1DF9\\u1DFB-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C5\\uA8E0-\\uA8F1\\uA8FF\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9E5\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F]/g, ''))\n    : ((str) => str);\n\nclass BitapSearch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreDiacritics = Config.ignoreDiacritics,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    this.options = {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreDiacritics,\n      ignoreLocation\n    };\n\n    pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n    pattern = ignoreDiacritics ? stripDiacritics(pattern) : pattern;\n    this.pattern = pattern;\n\n    this.chunks = [];\n\n    if (!this.pattern.length) {\n      return\n    }\n\n    const addChunk = (pattern, startIndex) => {\n      this.chunks.push({\n        pattern,\n        alphabet: createPatternAlphabet(pattern),\n        startIndex\n      });\n    };\n\n    const len = this.pattern.length;\n\n    if (len > MAX_BITS) {\n      let i = 0;\n      const remainder = len % MAX_BITS;\n      const end = len - remainder;\n\n      while (i < end) {\n        addChunk(this.pattern.substr(i, MAX_BITS), i);\n        i += MAX_BITS;\n      }\n\n      if (remainder) {\n        const startIndex = len - MAX_BITS;\n        addChunk(this.pattern.substr(startIndex), startIndex);\n      }\n    } else {\n      addChunk(this.pattern, 0);\n    }\n  }\n\n  searchIn(text) {\n    const { isCaseSensitive, ignoreDiacritics, includeMatches } = this.options;\n\n    text = isCaseSensitive ? text : text.toLowerCase();\n    text = ignoreDiacritics ? stripDiacritics(text) : text;\n\n    // Exact match\n    if (this.pattern === text) {\n      let result = {\n        isMatch: true,\n        score: 0\n      };\n\n      if (includeMatches) {\n        result.indices = [[0, text.length - 1]];\n      }\n\n      return result\n    }\n\n    // Otherwise, use Bitap algorithm\n    const {\n      location,\n      distance,\n      threshold,\n      findAllMatches,\n      minMatchCharLength,\n      ignoreLocation\n    } = this.options;\n\n    let allIndices = [];\n    let totalScore = 0;\n    let hasMatches = false;\n\n    this.chunks.forEach(({ pattern, alphabet, startIndex }) => {\n      const { isMatch, score, indices } = search(text, pattern, alphabet, {\n        location: location + startIndex,\n        distance,\n        threshold,\n        findAllMatches,\n        minMatchCharLength,\n        includeMatches,\n        ignoreLocation\n      });\n\n      if (isMatch) {\n        hasMatches = true;\n      }\n\n      totalScore += score;\n\n      if (isMatch && indices) {\n        allIndices = [...allIndices, ...indices];\n      }\n    });\n\n    let result = {\n      isMatch: hasMatches,\n      score: hasMatches ? totalScore / this.chunks.length : 1\n    };\n\n    if (hasMatches && includeMatches) {\n      result.indices = allIndices;\n    }\n\n    return result\n  }\n}\n\nclass BaseMatch {\n  constructor(pattern) {\n    this.pattern = pattern;\n  }\n  static isMultiMatch(pattern) {\n    return getMatch(pattern, this.multiRegex)\n  }\n  static isSingleMatch(pattern) {\n    return getMatch(pattern, this.singleRegex)\n  }\n  search(/*text*/) {}\n}\n\nfunction getMatch(pattern, exp) {\n  const matches = pattern.match(exp);\n  return matches ? matches[1] : null\n}\n\n// Token: 'file\n\nclass ExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'exact'\n  }\n  static get multiRegex() {\n    return /^=\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^=(.*)$/\n  }\n  search(text) {\n    const isMatch = text === this.pattern;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !fire\n\nclass InverseExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!(.*)$/\n  }\n  search(text) {\n    const index = text.indexOf(this.pattern);\n    const isMatch = index === -1;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: ^file\n\nclass PrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'prefix-exact'\n  }\n  static get multiRegex() {\n    return /^\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !^fire\n\nclass InversePrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-prefix-exact'\n  }\n  static get multiRegex() {\n    return /^!\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = !text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: .file$\n\nclass SuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'suffix-exact'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = text.endsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [text.length - this.pattern.length, text.length - 1]\n    }\n  }\n}\n\n// Token: !.file$\n\nclass InverseSuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-suffix-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^!(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = !text.endsWith(this.pattern);\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\nclass FuzzyMatch extends BaseMatch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreDiacritics = Config.ignoreDiacritics,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    super(pattern);\n    this._bitapSearch = new BitapSearch(pattern, {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreDiacritics,\n      ignoreLocation\n    });\n  }\n  static get type() {\n    return 'fuzzy'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^(.*)$/\n  }\n  search(text) {\n    return this._bitapSearch.searchIn(text)\n  }\n}\n\n// Token: 'file\n\nclass IncludeMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'include'\n  }\n  static get multiRegex() {\n    return /^'\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^'(.*)$/\n  }\n  search(text) {\n    let location = 0;\n    let index;\n\n    const indices = [];\n    const patternLen = this.pattern.length;\n\n    // Get all exact matches\n    while ((index = text.indexOf(this.pattern, location)) > -1) {\n      location = index + patternLen;\n      indices.push([index, location - 1]);\n    }\n\n    const isMatch = !!indices.length;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices\n    }\n  }\n}\n\n// Order is important. DO NOT CHANGE.\nconst searchers = [\n  ExactMatch,\n  IncludeMatch,\n  PrefixExactMatch,\n  InversePrefixExactMatch,\n  InverseSuffixExactMatch,\n  SuffixExactMatch,\n  InverseExactMatch,\n  FuzzyMatch\n];\n\nconst searchersLen = searchers.length;\n\n// Regex to split by spaces, but keep anything in quotes together\nconst SPACE_RE = / +(?=(?:[^\\\"]*\\\"[^\\\"]*\\\")*[^\\\"]*$)/;\nconst OR_TOKEN = '|';\n\n// Return a 2D array representation of the query, for simpler parsing.\n// Example:\n// \"^core go$ | rb$ | py$ xy$\" => [[\"^core\", \"go$\"], [\"rb$\"], [\"py$\", \"xy$\"]]\nfunction parseQuery(pattern, options = {}) {\n  return pattern.split(OR_TOKEN).map((item) => {\n    let query = item\n      .trim()\n      .split(SPACE_RE)\n      .filter((item) => item && !!item.trim());\n\n    let results = [];\n    for (let i = 0, len = query.length; i < len; i += 1) {\n      const queryItem = query[i];\n\n      // 1. Handle multiple query match (i.e, once that are quoted, like `\"hello world\"`)\n      let found = false;\n      let idx = -1;\n      while (!found && ++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isMultiMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          found = true;\n        }\n      }\n\n      if (found) {\n        continue\n      }\n\n      // 2. Handle single query matches (i.e, once that are *not* quoted)\n      idx = -1;\n      while (++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isSingleMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          break\n        }\n      }\n    }\n\n    return results\n  })\n}\n\n// These extended matchers can return an array of matches, as opposed\n// to a singl match\nconst MultiMatchSet = new Set([FuzzyMatch.type, IncludeMatch.type]);\n\n/**\n * Command-like searching\n * ======================\n *\n * Given multiple search terms delimited by spaces.e.g. `^jscript .python$ ruby !java`,\n * search in a given text.\n *\n * Search syntax:\n *\n * | Token       | Match type                 | Description                            |\n * | ----------- | -------------------------- | -------------------------------------- |\n * | `jscript`   | fuzzy-match                | Items that fuzzy match `jscript`       |\n * | `=scheme`   | exact-match                | Items that are `scheme`                |\n * | `'python`   | include-match              | Items that include `python`            |\n * | `!ruby`     | inverse-exact-match        | Items that do not include `ruby`       |\n * | `^java`     | prefix-exact-match         | Items that start with `java`           |\n * | `!^earlang` | inverse-prefix-exact-match | Items that do not start with `earlang` |\n * | `.js$`      | suffix-exact-match         | Items that end with `.js`              |\n * | `!.go$`     | inverse-suffix-exact-match | Items that do not end with `.go`       |\n *\n * A single pipe character acts as an OR operator. For example, the following\n * query matches entries that start with `core` and end with either`go`, `rb`,\n * or`py`.\n *\n * ```\n * ^core go$ | rb$ | py$\n * ```\n */\nclass ExtendedSearch {\n  constructor(\n    pattern,\n    {\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreDiacritics = Config.ignoreDiacritics,\n      includeMatches = Config.includeMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      ignoreLocation = Config.ignoreLocation,\n      findAllMatches = Config.findAllMatches,\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance\n    } = {}\n  ) {\n    this.query = null;\n    this.options = {\n      isCaseSensitive,\n      ignoreDiacritics,\n      includeMatches,\n      minMatchCharLength,\n      findAllMatches,\n      ignoreLocation,\n      location,\n      threshold,\n      distance\n    };\n\n    pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n    pattern = ignoreDiacritics ? stripDiacritics(pattern) : pattern;\n    this.pattern = pattern;\n    this.query = parseQuery(this.pattern, this.options);\n  }\n\n  static condition(_, options) {\n    return options.useExtendedSearch\n  }\n\n  searchIn(text) {\n    const query = this.query;\n\n    if (!query) {\n      return {\n        isMatch: false,\n        score: 1\n      }\n    }\n\n    const { includeMatches, isCaseSensitive, ignoreDiacritics } = this.options;\n\n    text = isCaseSensitive ? text : text.toLowerCase();\n    text = ignoreDiacritics ? stripDiacritics(text) : text;\n\n    let numMatches = 0;\n    let allIndices = [];\n    let totalScore = 0;\n\n    // ORs\n    for (let i = 0, qLen = query.length; i < qLen; i += 1) {\n      const searchers = query[i];\n\n      // Reset indices\n      allIndices.length = 0;\n      numMatches = 0;\n\n      // ANDs\n      for (let j = 0, pLen = searchers.length; j < pLen; j += 1) {\n        const searcher = searchers[j];\n        const { isMatch, indices, score } = searcher.search(text);\n\n        if (isMatch) {\n          numMatches += 1;\n          totalScore += score;\n          if (includeMatches) {\n            const type = searcher.constructor.type;\n            if (MultiMatchSet.has(type)) {\n              allIndices = [...allIndices, ...indices];\n            } else {\n              allIndices.push(indices);\n            }\n          }\n        } else {\n          totalScore = 0;\n          numMatches = 0;\n          allIndices.length = 0;\n          break\n        }\n      }\n\n      // OR condition, so if TRUE, return\n      if (numMatches) {\n        let result = {\n          isMatch: true,\n          score: totalScore / numMatches\n        };\n\n        if (includeMatches) {\n          result.indices = allIndices;\n        }\n\n        return result\n      }\n    }\n\n    // Nothing was matched\n    return {\n      isMatch: false,\n      score: 1\n    }\n  }\n}\n\nconst registeredSearchers = [];\n\nfunction register(...args) {\n  registeredSearchers.push(...args);\n}\n\nfunction createSearcher(pattern, options) {\n  for (let i = 0, len = registeredSearchers.length; i < len; i += 1) {\n    let searcherClass = registeredSearchers[i];\n    if (searcherClass.condition(pattern, options)) {\n      return new searcherClass(pattern, options)\n    }\n  }\n\n  return new BitapSearch(pattern, options)\n}\n\nconst LogicalOperator = {\n  AND: '$and',\n  OR: '$or'\n};\n\nconst KeyType = {\n  PATH: '$path',\n  PATTERN: '$val'\n};\n\nconst isExpression = (query) =>\n  !!(query[LogicalOperator.AND] || query[LogicalOperator.OR]);\n\nconst isPath = (query) => !!query[KeyType.PATH];\n\nconst isLeaf = (query) =>\n  !isArray(query) && isObject(query) && !isExpression(query);\n\nconst convertToExplicit = (query) => ({\n  [LogicalOperator.AND]: Object.keys(query).map((key) => ({\n    [key]: query[key]\n  }))\n});\n\n// When `auto` is `true`, the parse function will infer and initialize and add\n// the appropriate `Searcher` instance\nfunction parse(query, options, { auto = true } = {}) {\n  const next = (query) => {\n    let keys = Object.keys(query);\n\n    const isQueryPath = isPath(query);\n\n    if (!isQueryPath && keys.length > 1 && !isExpression(query)) {\n      return next(convertToExplicit(query))\n    }\n\n    if (isLeaf(query)) {\n      const key = isQueryPath ? query[KeyType.PATH] : keys[0];\n\n      const pattern = isQueryPath ? query[KeyType.PATTERN] : query[key];\n\n      if (!isString(pattern)) {\n        throw new Error(LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY(key))\n      }\n\n      const obj = {\n        keyId: createKeyId(key),\n        pattern\n      };\n\n      if (auto) {\n        obj.searcher = createSearcher(pattern, options);\n      }\n\n      return obj\n    }\n\n    let node = {\n      children: [],\n      operator: keys[0]\n    };\n\n    keys.forEach((key) => {\n      const value = query[key];\n\n      if (isArray(value)) {\n        value.forEach((item) => {\n          node.children.push(next(item));\n        });\n      }\n    });\n\n    return node\n  };\n\n  if (!isExpression(query)) {\n    query = convertToExplicit(query);\n  }\n\n  return next(query)\n}\n\n// Practical scoring function\nfunction computeScore(\n  results,\n  { ignoreFieldNorm = Config.ignoreFieldNorm }\n) {\n  results.forEach((result) => {\n    let totalScore = 1;\n\n    result.matches.forEach(({ key, norm, score }) => {\n      const weight = key ? key.weight : null;\n\n      totalScore *= Math.pow(\n        score === 0 && weight ? Number.EPSILON : score,\n        (weight || 1) * (ignoreFieldNorm ? 1 : norm)\n      );\n    });\n\n    result.score = totalScore;\n  });\n}\n\nfunction transformMatches(result, data) {\n  const matches = result.matches;\n  data.matches = [];\n\n  if (!isDefined(matches)) {\n    return\n  }\n\n  matches.forEach((match) => {\n    if (!isDefined(match.indices) || !match.indices.length) {\n      return\n    }\n\n    const { indices, value } = match;\n\n    let obj = {\n      indices,\n      value\n    };\n\n    if (match.key) {\n      obj.key = match.key.src;\n    }\n\n    if (match.idx > -1) {\n      obj.refIndex = match.idx;\n    }\n\n    data.matches.push(obj);\n  });\n}\n\nfunction transformScore(result, data) {\n  data.score = result.score;\n}\n\nfunction format(\n  results,\n  docs,\n  {\n    includeMatches = Config.includeMatches,\n    includeScore = Config.includeScore\n  } = {}\n) {\n  const transformers = [];\n\n  if (includeMatches) transformers.push(transformMatches);\n  if (includeScore) transformers.push(transformScore);\n\n  return results.map((result) => {\n    const { idx } = result;\n\n    const data = {\n      item: docs[idx],\n      refIndex: idx\n    };\n\n    if (transformers.length) {\n      transformers.forEach((transformer) => {\n        transformer(result, data);\n      });\n    }\n\n    return data\n  })\n}\n\nclass Fuse {\n  constructor(docs, options = {}, index) {\n    this.options = { ...Config, ...options };\n\n    if (\n      this.options.useExtendedSearch &&\n      !true\n    ) {\n      throw new Error(EXTENDED_SEARCH_UNAVAILABLE)\n    }\n\n    this._keyStore = new KeyStore(this.options.keys);\n\n    this.setCollection(docs, index);\n  }\n\n  setCollection(docs, index) {\n    this._docs = docs;\n\n    if (index && !(index instanceof FuseIndex)) {\n      throw new Error(INCORRECT_INDEX_TYPE)\n    }\n\n    this._myIndex =\n      index ||\n      createIndex(this.options.keys, this._docs, {\n        getFn: this.options.getFn,\n        fieldNormWeight: this.options.fieldNormWeight\n      });\n  }\n\n  add(doc) {\n    if (!isDefined(doc)) {\n      return\n    }\n\n    this._docs.push(doc);\n    this._myIndex.add(doc);\n  }\n\n  remove(predicate = (/* doc, idx */) => false) {\n    const results = [];\n\n    for (let i = 0, len = this._docs.length; i < len; i += 1) {\n      const doc = this._docs[i];\n      if (predicate(doc, i)) {\n        this.removeAt(i);\n        i -= 1;\n        len -= 1;\n\n        results.push(doc);\n      }\n    }\n\n    return results\n  }\n\n  removeAt(idx) {\n    this._docs.splice(idx, 1);\n    this._myIndex.removeAt(idx);\n  }\n\n  getIndex() {\n    return this._myIndex\n  }\n\n  search(query, { limit = -1 } = {}) {\n    const {\n      includeMatches,\n      includeScore,\n      shouldSort,\n      sortFn,\n      ignoreFieldNorm\n    } = this.options;\n\n    let results = isString(query)\n      ? isString(this._docs[0])\n        ? this._searchStringList(query)\n        : this._searchObjectList(query)\n      : this._searchLogical(query);\n\n    computeScore(results, { ignoreFieldNorm });\n\n    if (shouldSort) {\n      results.sort(sortFn);\n    }\n\n    if (isNumber(limit) && limit > -1) {\n      results = results.slice(0, limit);\n    }\n\n    return format(results, this._docs, {\n      includeMatches,\n      includeScore\n    })\n  }\n\n  _searchStringList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { records } = this._myIndex;\n    const results = [];\n\n    // Iterate over every string in the index\n    records.forEach(({ v: text, i: idx, n: norm }) => {\n      if (!isDefined(text)) {\n        return\n      }\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        results.push({\n          item: text,\n          idx,\n          matches: [{ score, value: text, norm, indices }]\n        });\n      }\n    });\n\n    return results\n  }\n\n  _searchLogical(query) {\n\n    const expression = parse(query, this.options);\n\n    const evaluate = (node, item, idx) => {\n      if (!node.children) {\n        const { keyId, searcher } = node;\n\n        const matches = this._findMatches({\n          key: this._keyStore.get(keyId),\n          value: this._myIndex.getValueForItemAtKeyId(item, keyId),\n          searcher\n        });\n\n        if (matches && matches.length) {\n          return [\n            {\n              idx,\n              item,\n              matches\n            }\n          ]\n        }\n\n        return []\n      }\n\n      const res = [];\n      for (let i = 0, len = node.children.length; i < len; i += 1) {\n        const child = node.children[i];\n        const result = evaluate(child, item, idx);\n        if (result.length) {\n          res.push(...result);\n        } else if (node.operator === LogicalOperator.AND) {\n          return []\n        }\n      }\n      return res\n    };\n\n    const records = this._myIndex.records;\n    const resultMap = {};\n    const results = [];\n\n    records.forEach(({ $: item, i: idx }) => {\n      if (isDefined(item)) {\n        let expResults = evaluate(expression, item, idx);\n\n        if (expResults.length) {\n          // Dedupe when adding\n          if (!resultMap[idx]) {\n            resultMap[idx] = { idx, item, matches: [] };\n            results.push(resultMap[idx]);\n          }\n          expResults.forEach(({ matches }) => {\n            resultMap[idx].matches.push(...matches);\n          });\n        }\n      }\n    });\n\n    return results\n  }\n\n  _searchObjectList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { keys, records } = this._myIndex;\n    const results = [];\n\n    // List is Array<Object>\n    records.forEach(({ $: item, i: idx }) => {\n      if (!isDefined(item)) {\n        return\n      }\n\n      let matches = [];\n\n      // Iterate over every key (i.e, path), and fetch the value at that key\n      keys.forEach((key, keyIndex) => {\n        matches.push(\n          ...this._findMatches({\n            key,\n            value: item[keyIndex],\n            searcher\n          })\n        );\n      });\n\n      if (matches.length) {\n        results.push({\n          idx,\n          item,\n          matches\n        });\n      }\n    });\n\n    return results\n  }\n  _findMatches({ key, value, searcher }) {\n    if (!isDefined(value)) {\n      return []\n    }\n\n    let matches = [];\n\n    if (isArray(value)) {\n      value.forEach(({ v: text, i: idx, n: norm }) => {\n        if (!isDefined(text)) {\n          return\n        }\n\n        const { isMatch, score, indices } = searcher.searchIn(text);\n\n        if (isMatch) {\n          matches.push({\n            score,\n            key,\n            value: text,\n            idx,\n            norm,\n            indices\n          });\n        }\n      });\n    } else {\n      const { v: text, n: norm } = value;\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        matches.push({ score, key, value: text, norm, indices });\n      }\n    }\n\n    return matches\n  }\n}\n\nFuse.version = '7.1.0';\nFuse.createIndex = createIndex;\nFuse.parseIndex = parseIndex;\nFuse.config = Config;\n\n{\n  Fuse.parseQuery = parse;\n}\n\n{\n  register(ExtendedSearch);\n}\n\nexport { Fuse as default };\n","/**\n * Search Service - Enhanced Vocabulary Search Functionality\n *\n * Provides advanced search capabilities for vocabulary items including:\n * - Fuzzy search with relevance scoring\n * - Comprehensive filtering by metadata\n * - Pagination support\n * - Weighted relevance ranking\n *\n * Uses Fuse.js for fuzzy matching and implements custom filtering logic.\n */\n\nimport { type VocabularySearchParams } from '$lib/schemas/vocabulary';\nimport type { UnifiedVocabularyItem, VocabularyCategory, VocabularyMetadata } from '$lib/schemas/unified-vocabulary';\nimport { UnifiedVocabularyItemSchema } from '$lib/schemas/unified-vocabulary';\nimport { loadVocabulary } from '$lib/data/loader';\nimport { z } from 'zod';\nimport Fuse from 'fuse.js';\n\n// Cache for vocabulary data to avoid repeated loading\nlet vocabularyCache: UnifiedVocabularyItem[] | null = null;\n\n/**\n * Load vocabulary data with caching\n */\nasync function getVocabularyData(): Promise<UnifiedVocabularyItem[]> {\n  if (vocabularyCache) {\n    return vocabularyCache;\n  }\n\n  try {\n    const collection = await loadVocabulary();\n    // Ensure all items have required properties\n    vocabularyCache = collection.items.map(item => {\n      const metadata = item.metadata || {};\n      return {\n        ...item,\n        metadata: {\n          ...metadata,\n          isCommon: (metadata as VocabularyMetadata).isCommon ?? false,\n          isVerified: (metadata as VocabularyMetadata).isVerified ?? false,\n          learningPhase: (metadata as VocabularyMetadata).learningPhase ?? 0\n        }\n      };\n    });\n    return vocabularyCache;\n  } catch (_error) {\n    // Failed to load vocabulary data\n    return [];\n  }\n}\n\n/**\n * Search vocabulary with advanced filtering and fuzzy matching\n *\n * @param params Search parameters including query, filters, and pagination\n * @returns Search results with pagination metadata\n */\nexport async function searchVocabulary(params: VocabularySearchParams): Promise<{\n  items: UnifiedVocabularyItem[];\n  total: number;\n  hasMore: boolean;\n}> {\n  // Load vocabulary data\n  const vocabularyItems = await getVocabularyData();\n\n  const safeOffset = Number.isFinite(params.offset) ? Number(params.offset) : 0;\n  const safeLimit = Number.isFinite(params.limit) && params.limit && params.limit > 0\n    ? Number(params.limit)\n    : 20;\n\n  // Apply filters first to reduce the dataset for fuzzy search\n  let filteredItems: z.infer<typeof UnifiedVocabularyItemSchema>[] = applyFilters(vocabularyItems, params);\n\n  // Apply fuzzy search if query is provided\n  if (params.query) {\n    filteredItems = applyFuzzySearch(filteredItems, params.query) as z.infer<typeof UnifiedVocabularyItemSchema>[];\n  }\n\n  // Apply sorting\n  filteredItems = applySorting(filteredItems, params);\n\n  // Get total count before pagination\n  const total = filteredItems.length;\n\n  // Apply pagination\n  const paginatedItems = applyPagination(filteredItems, safeOffset, safeLimit) as z.infer<typeof UnifiedVocabularyItemSchema>[];\n\n  return {\n    items: paginatedItems,\n    total,\n    hasMore: safeOffset + safeLimit < total\n  };\n}\n\n/**\n * Apply filters to vocabulary items based on search parameters\n */\nfunction applyFilters(items: UnifiedVocabularyItem[], params: VocabularySearchParams): UnifiedVocabularyItem[] {\n  return items.filter(item => {\n    // Filter by part of speech\n    const partOfSpeechMatch = params.partOfSpeech\n      ? item.partOfSpeech === params.partOfSpeech\n      : true;\n\n    // Filter by difficulty\n    const difficultyMatch = params.difficulty\n      ? item.difficulty === params.difficulty\n      : true;\n\n    // Filter by categories\n    const categoryMatch = params.categories && params.categories.length > 0\n      ? item.categories.some((category: VocabularyCategory) => params.categories?.includes(category))\n      : true;\n\n    // Filter by learning phase\n    const learningPhaseMatch = params.learningPhase !== undefined\n      ? (item.metadata?.learningPhase ?? 0) === params.learningPhase\n      : true;\n\n    return partOfSpeechMatch && difficultyMatch && categoryMatch && learningPhaseMatch;\n  });\n}\n\n/**\n * Apply fuzzy search using Fuse.js for relevance scoring\n */\nfunction applyFuzzySearch(items: UnifiedVocabularyItem[], query: string): UnifiedVocabularyItem[] {\n  // Configure Fuse.js for optimal search results\n  const fuse = new Fuse(items, {\n    keys: [\n      { name: 'german', weight: 0.4 },\n      { name: 'bulgarian', weight: 0.4 },\n      { name: 'transliteration', weight: 0.3 },\n      { name: 'categories', weight: 0.2 },\n      { name: 'metadata.examples.german', weight: 0.1 },\n      { name: 'metadata.examples.bulgarian', weight: 0.1 },\n      { name: 'metadata.notes', weight: 0.1 },\n      { name: 'metadata.mnemonic', weight: 0.1 }\n    ],\n    includeScore: true,\n    threshold: 0.4, // Adjust for more/less fuzzy matching\n    minMatchCharLength: 2,\n    shouldSort: true,\n    ignoreLocation: true\n  });\n\n  // Perform the search\n  const results = fuse.search(query);\n\n  // Return items sorted by relevance score\n  return results.map(result => result.item);\n}\n\n/**\n * Apply sorting to the filtered items\n */\nfunction applySorting(items: UnifiedVocabularyItem[], params: VocabularySearchParams): UnifiedVocabularyItem[] {\n  return [...items].sort((a, b) => {\n    // Handle different sort fields\n    switch (params.sortBy) {\n      case 'german':\n        return params.sortOrder === 'asc'\n          ? a.german.localeCompare(b.german)\n          : b.german.localeCompare(a.german);\n      case 'bulgarian':\n        return params.sortOrder === 'asc'\n          ? a.bulgarian.localeCompare(b.bulgarian)\n          : b.bulgarian.localeCompare(a.bulgarian);\n      case 'difficulty':\n        return params.sortOrder === 'asc'\n          ? a.difficulty - b.difficulty\n          : b.difficulty - a.difficulty;\n      case 'createdAt':\n        return params.sortOrder === 'asc'\n          ? new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()\n          : new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\n      default:\n        return 0; // No sorting\n    }\n  });\n}\n\n/**\n * Apply pagination to the filtered and sorted items\n */\nfunction applyPagination(items: UnifiedVocabularyItem[], offset: number, limit: number): UnifiedVocabularyItem[] {\n  const startIndex = offset;\n  const endIndex = offset + limit;\n  return items.slice(startIndex, endIndex);\n}\n\n/**\n * Clear the vocabulary cache (useful when data is updated)\n */\nexport function clearVocabularyCache(): void {\n  vocabularyCache = null;\n}\n\n/**\n * Get search suggestions for autocomplete functionality\n */\nexport async function getSearchSuggestions(query: string, limit: number = 5): Promise<string[]> {\n  if (!query) return [];\n\n  const vocabularyItems = await getVocabularyData();\n\n  // Simple prefix matching for suggestions\n  const lowerQuery = query.toLowerCase();\n  const suggestions = new Set<string>();\n\n  vocabularyItems.forEach(item => {\n    if (item.german.toLowerCase().startsWith(lowerQuery)) {\n      suggestions.add(item.german);\n    }\n    if (item.bulgarian.toLowerCase().startsWith(lowerQuery)) {\n      suggestions.add(item.bulgarian);\n    }\n    if (item.transliteration && typeof item.transliteration === 'string') {\n      if (item.transliteration.toLowerCase().startsWith(lowerQuery)) {\n        suggestions.add(item.transliteration);\n      }\n    } else if (item.transliteration && typeof item.transliteration === 'object' && item.transliteration !== null) {\n      const translit = item.transliteration as { german?: string; bulgarian?: string };\n      if (translit.german && typeof translit.german === 'string' && translit.german.toLowerCase().startsWith(lowerQuery)) {\n        suggestions.add(translit.german);\n      }\n      if (translit.bulgarian && typeof translit.bulgarian === 'string' && translit.bulgarian.toLowerCase().startsWith(lowerQuery)) {\n        suggestions.add(translit.bulgarian);\n      }\n    }\n  });\n\n  // Convert to array and limit results\n  return Array.from(suggestions).slice(0, limit);\n}\n\n/**\n * Get vocabulary statistics for search filters\n */\nexport async function getVocabularyStats(): Promise<{\n  partOfSpeech: Record<string, number>;\n  difficulty: Record<string, number>;\n  categories: Record<string, number>;\n  learningPhase: Record<string, number>;\n  isCommon: Record<string, number>;\n  isVerified: Record<string, number>;\n}> {\n  const vocabularyItems = await getVocabularyData();\n\n  const partOfSpeech: Record<string, number> = {};\n  const difficulty: Record<string, number> = {};\n  const categories: Record<string, number> = {};\n  const learningPhase: Record<string, number> = {};\n  const isCommon: Record<string, number> = {};\n  const isVerified: Record<string, number> = {};\n\n  vocabularyItems.forEach(item => {\n    // Count by part of speech\n    partOfSpeech[item.partOfSpeech] = (partOfSpeech[item.partOfSpeech] || 0) + 1;\n\n    // Count by difficulty\n    difficulty[item.difficulty] = (difficulty[item.difficulty] || 0) + 1;\n\n    // Count by category\n    item.categories.forEach(category => {\n      categories[category] = (categories[category] || 0) + 1;\n    });\n\n    // Count by learning phase\n    const phase = item.metadata?.learningPhase ?? 0;\n    learningPhase[phase] = (learningPhase[phase] || 0) + 1;\n\n    // Count by common status\n    const commonStatus = String(item.metadata?.isCommon ?? false);\n    isCommon[commonStatus] = (isCommon[commonStatus] || 0) + 1;\n\n    // Count by verified status\n    const verifiedStatus = String(item.metadata?.isVerified ?? false);\n    isVerified[verifiedStatus] = (isVerified[verifiedStatus] || 0) + 1;\n  });\n\n  return {\n    partOfSpeech,\n    difficulty,\n    categories,\n    learningPhase,\n    isCommon,\n    isVerified\n  };\n}","/**\n * Vocabulary Service\n *\n * Provides a unified interface for accessing vocabulary data throughout the application.\n * This service acts as a facade that abstracts the underlying data loading and search functionality.\n */\n\nimport { searchVocabulary, getVocabularyStats, getSearchSuggestions, clearVocabularyCache } from '../services/search';\nimport { loadVocabularyById, loadVocabularyByCategory, loadVocabularyByDifficulty, getRandomVocabulary } from './loader';\nimport { vocabularyDb } from './db.svelte';\nimport { type VocabularyItem, type VocabularyCategory } from '../schemas/vocabulary';\nimport { Debug } from '../utils';\n\n/**\n * Vocabulary Service Interface\n *\n * Provides comprehensive access to vocabulary data with search, filtering, and retrieval capabilities.\n */\nconst vocabularyService = {\n    /**\n     * Search vocabulary with advanced filtering and pagination\n     * @param params Search parameters including query, filters, and pagination\n     * @returns Promise resolving to search results with pagination metadata\n     */\n    searchVocabulary: async (params: {\n        query?: string;\n        partOfSpeech?: string;\n        difficulty?: number;\n        categories?: string[];\n        learningPhase?: number;\n        limit?: number;\n        offset?: number;\n    }) => {\n        try {\n            Debug.log('vocabularyService', 'Searching vocabulary with params', params);\n            const result = await searchVocabulary({\n                query: params.query,\n                partOfSpeech: params.partOfSpeech,\n                difficulty: params.difficulty,\n                categories: params.categories,\n                learningPhase: params.learningPhase,\n                limit: params.limit || 20,\n                offset: params.offset || 0,\n                sortBy: 'german',\n                sortOrder: 'asc'\n            });\n            Debug.log('vocabularyService', 'Search completed', { count: result.items.length });\n            return result;\n        } catch (error) {\n            Debug.error('vocabularyService', 'Failed to search vocabulary', error as Error);\n            return { items: [], total: 0, hasMore: false };\n        }\n    },\n\n    /**\n     * Get vocabulary item by ID\n     * @param id The ID of the vocabulary item\n     * @returns Promise resolving to the vocabulary item or null if not found\n     */\n    getVocabularyById: async (id: string): Promise<VocabularyItem | null> => {\n        try {\n            Debug.log('vocabularyService', 'Getting vocabulary by ID', { id });\n            return await loadVocabularyById(id);\n        } catch (error) {\n            Debug.error('vocabularyService', 'Failed to get vocabulary by ID', error as Error);\n            return null;\n        }\n    },\n\n    /**\n     * Get vocabulary items by category\n     * @param category The category to filter by\n     * @param options Additional filtering options\n     * @returns Promise resolving to an array of vocabulary items\n     */\n    getVocabularyByCategory: async (category: VocabularyCategory, options: { limit?: number; difficulty?: number } = {}) => {\n        try {\n            Debug.log('vocabularyService', 'Getting vocabulary by category', { category, options });\n            return await loadVocabularyByCategory(category, options);\n        } catch (error) {\n            Debug.error('vocabularyService', 'Failed to get vocabulary by category', error as Error);\n            return [];\n        }\n    },\n\n    /**\n     * Get vocabulary items by difficulty level\n     * @param difficulty The difficulty level to filter by\n     * @param options Additional filtering options\n     * @returns Promise resolving to an array of vocabulary items\n     */\n    getVocabularyByDifficulty: async (difficulty: number, options: { limit?: number; category?: string } = {}) => {\n        try {\n            Debug.log('vocabularyService', 'Getting vocabulary by difficulty', { difficulty, options });\n            return await loadVocabularyByDifficulty(difficulty, options);\n        } catch (error) {\n            Debug.error('vocabularyService', 'Failed to get vocabulary by difficulty', error as Error);\n            return [];\n        }\n    },\n\n    /**\n     * Get random vocabulary items for practice\n     * @param count Number of items to return\n     * @param options Filtering options\n     * @returns Promise resolving to an array of random vocabulary items\n     */\n    getRandomVocabulary: async (count: number = 5, options: { difficulty?: number; category?: string } = {}) => {\n        try {\n            Debug.log('vocabularyService', 'Getting random vocabulary', { count, options });\n            return await getRandomVocabulary(count, options);\n        } catch (error) {\n            Debug.error('vocabularyService', 'Failed to get random vocabulary', error as Error);\n            return [];\n        }\n    },\n\n    /**\n     * Get vocabulary statistics for filters\n     * @returns Promise resolving to statistics for part of speech, difficulty, categories, and learning phases\n     */\n    getVocabularyStats: async () => {\n        try {\n            Debug.log('vocabularyService', 'Getting vocabulary statistics');\n            return await getVocabularyStats();\n        } catch (error) {\n            Debug.error('vocabularyService', 'Failed to get vocabulary statistics', error as Error);\n            return {\n                partOfSpeech: {},\n                difficulty: {},\n                categories: {},\n                learningPhase: {}\n            };\n        }\n    },\n\n    /**\n     * Get search suggestions for autocomplete\n     * @param query The search query\n     * @param limit Maximum number of suggestions to return\n     * @returns Promise resolving to an array of search suggestions\n     */\n    getSearchSuggestions: async (query: string, limit: number = 5) => {\n        try {\n            Debug.log('vocabularyService', 'Getting search suggestions', { query, limit });\n            return await getSearchSuggestions(query, limit);\n        } catch (error) {\n            Debug.error('vocabularyService', 'Failed to get search suggestions', error as Error);\n            return [];\n        }\n    },\n\n    /**\n     * Update practice statistics for a vocabulary item\n     * @param itemId The ID of the vocabulary item\n     * @param correct Whether the answer was correct\n     * @param responseTime Response time in seconds (optional)\n     * @returns Promise that resolves when the update is complete\n     */\n    updateStats: async (itemId: string, correct: boolean, responseTime?: number) => {\n        try {\n            Debug.log('vocabularyService', 'Updating stats', { itemId, correct, responseTime });\n\n            // Get the current item from the database\n            const item = vocabularyDb.get(itemId);\n            if (!item) {\n                throw new Error(`Item with ID ${itemId} not found`);\n            }\n\n            // Update the item's practice statistics\n            const now = new Date();\n            const stats = item.stats || {\n                correctCount: 0,\n                incorrectCount: 0,\n                lastPracticed: null,\n                lastCorrect: null,\n                streak: 0\n            };\n\n            if (correct) {\n                stats.correctCount++;\n                stats.lastCorrect = now;\n                stats.streak++;\n            } else {\n                stats.incorrectCount++;\n                stats.streak = 0;\n            }\n\n            stats.lastPracticed = now;\n\n            // Update the item in the database\n            vocabularyDb.update(itemId, {\n                stats,\n                updatedAt: now\n            });\n\n            // Clear cache to ensure fresh data\n            clearVocabularyCache();\n        } catch (error) {\n            Debug.error('vocabularyService', 'Failed to update stats', error as Error);\n        }\n    },\n\n    /**\n     * Clear the vocabulary cache to force fresh data loading\n     */\n    clearCache: () => {\n        Debug.log('vocabularyService', 'Clearing vocabulary cache');\n        clearVocabularyCache();\n    }\n};\n\n// Export the service directly\nexport { vocabularyService };","/**\n * Transaction Utility for Atomic State Updates\n *\n * This module provides a transaction mechanism to ensure that related state updates\n * succeed or fail together, maintaining data consistency across the application.\n */\n\nimport { Debug } from '$lib/utils';\nimport { ErrorHandler } from '$lib/services/errors';\n\n/**\n * Transaction class for managing atomic operations\n */\nexport class Transaction {\n    private operations: Array<() => Promise<void>> = [];\n    private rollbackOperations: Array<() => Promise<void>> = [];\n    private isCommitted = false;\n\n    /**\n     * Add an operation to the transaction\n     * @param operation The operation to execute\n     * @param rollback The rollback operation if the transaction fails\n     */\n    addOperation(operation: () => Promise<void>, rollback: () => Promise<void>): void {\n        this.operations.push(operation);\n        this.rollbackOperations.push(rollback);\n    }\n\n    /**\n     * Execute all operations in the transaction\n     * @throws Error if any operation fails\n     */\n    async commit(): Promise<void> {\n        if (this.isCommitted) {\n            throw new Error('Transaction already committed');\n        }\n\n        const executedOperations: Array<() => Promise<void>> = [];\n\n        try {\n            // Execute all operations in sequence\n            for (const operation of this.operations) {\n                await operation();\n                executedOperations.push(operation);\n            }\n\n            this.isCommitted = true;\n        } catch (error: unknown) {\n            Debug.error('Transaction', 'Transaction failed, rolling back', error as Error);\n\n            const errors: Error[] = [];\n\n            // Rollback in reverse order\n            for (let i = executedOperations.length - 1; i >= 0; i--) {\n                try {\n                    const rollbackIndex = this.operations.indexOf(executedOperations[i]);\n                    const rollbackOp = this.rollbackOperations[rollbackIndex];\n                    if (rollbackIndex !== -1 && rollbackOp) {\n                        await rollbackOp();\n                    } else {\n                        Debug.error('Transaction', 'No rollback operation found for operation', executedOperations[i]);\n                        errors.push(new Error(`No rollback operation found for operation: ${executedOperations[i]}`));\n                    }\n                } catch (rollbackError: unknown) {\n                    const typedRollbackError = rollbackError instanceof Error ? rollbackError : new Error(String(rollbackError));\n                    Debug.error('Transaction', 'Rollback failed for operation', typedRollbackError);\n                    errors.push(typedRollbackError);\n                    // Continue with other rollbacks even if one fails\n                }\n            }\n\n            ErrorHandler.handleError(error as Error, 'Transaction failed and rolled back');\n            throw error;\n        }\n    }\n\n    /**\n     * Check if the transaction has been committed\n     */\n    isComplete(): boolean {\n        return this.isCommitted;\n    }\n}\n\n/**\n * Transaction Manager for coordinating multiple transactions\n */\nexport class TransactionManager {\n    private static activeTransactions: Map<string, Transaction> = new Map();\n\n    /**\n     * Start a new transaction\n     * @param transactionId Unique identifier for the transaction\n     */\n    static startTransaction(transactionId: string): Transaction {\n        if (this.activeTransactions.has(transactionId)) {\n            throw new Error(`Transaction with ID ${transactionId} already exists`);\n        }\n\n        const transaction = new Transaction();\n        this.activeTransactions.set(transactionId, transaction);\n        return transaction;\n    }\n\n    /**\n     * Get an existing transaction\n     * @param transactionId Unique identifier for the transaction\n     */\n    static getTransaction(transactionId: string): Transaction | null {\n        return this.activeTransactions.get(transactionId) || null;\n    }\n\n    /**\n     * Commit a transaction\n     * @param transactionId Unique identifier for the transaction\n     */\n    static async commitTransaction(transactionId: string): Promise<void> {\n        const transaction = this.activeTransactions.get(transactionId);\n        if (!transaction) {\n            throw new Error(`Transaction with ID ${transactionId} not found`);\n        }\n\n        await transaction.commit();\n        this.activeTransactions.delete(transactionId);\n    }\n\n    /**\n     * Rollback a transaction\n     * @param transactionId Unique identifier for the transaction\n     */\n    static async rollbackTransaction(transactionId: string): Promise<void> {\n        const transaction = this.activeTransactions.get(transactionId);\n        if (!transaction) {\n            throw new Error(`Transaction with ID ${transactionId} not found`);\n        }\n\n        // Rollback is handled automatically in the commit method when an error occurs\n        this.activeTransactions.delete(transactionId);\n    }\n}","import { AppUIState } from './app-ui.svelte';\nimport { AppDataState } from './app-data.svelte';\n\n// Export initialization function instead of direct instances\n// Initialize and export the state instances directly\nexport const appDataState = new AppDataState();\nexport const appUIState = new AppUIState(appDataState);\n\n// Export async initialization function\nexport async function initializeAppState() {\n    try {\n        // Initialize the state instances\n        await appDataState.init();\n        await appUIState.init();\n\n        return {\n            appDataState,\n            appUIState\n        };\n    } catch (error) {\n        console.error('Failed to initialize app state:', error);\n        throw error;\n    }\n}\n\n// Export a combined interface for backward compatibility\nimport type { VocabularyItem } from '$lib/types/vocabulary';\n\nexport class AppState {\n    // UI State accessors with proper typing\n    get languageMode(): 'DE_BG' | 'BG_DE' { return appUIState.languageMode; }\n    get searchQuery(): string { return appUIState.searchQuery; }\n    get currentItem(): VocabularyItem | null { return appUIState.currentItem; }\n    get showAnswer(): boolean { return appUIState.showAnswer; }\n    get practiceMode(): 'practice' | 'search' { return appUIState.practiceMode; }\n    get isLoading(): boolean { return appUIState.isLoading; }\n    get error(): string | null { return appUIState.error; }\n    get filteredItems(): VocabularyItem[] { return appUIState.filteredItems; }\n    get displayDirection(): 'DE->BG' | 'BG->DE' { return appUIState.displayDirection; }\n    get practiceRecommendations(): VocabularyItem[] { return appUIState.practiceRecommendations; }\n\n    // Data State accessors with proper typing\n    get practiceStats(): Map<string, { correct: number; incorrect: number; lastPracticed: string }> {\n        return appDataState.practiceStats;\n    }\n    get recentSearches(): string[] { return appDataState.recentSearches; }\n    get favorites(): string[] { return appDataState.favorites; }\n\n    // Method accessors with proper typing\n    toggleLanguageMode(): void { return appUIState.toggleLanguageMode(); }\n    toggleDirection(): void { return appUIState.toggleDirection(); }\n    setSearchQuery(query: string): void { return appUIState.setSearchQuery(query); }\n    setCurrentItem(item: VocabularyItem | null): void { return appUIState.setCurrentItem(item); }\n    togglePracticeMode(): void { return appUIState.togglePracticeMode(); }\n    startPracticeSession(item: VocabularyItem): void { return appUIState.startPracticeSession(item); }\n    toggleShowAnswer(): void { return appUIState.toggleShowAnswer(); }\n    setError(error: string | null): void { return appUIState.setError(error); }\n\n    /**\n     * Return all vocabulary items currently loaded\n     */\n    getAllVocabularyItems(): VocabularyItem[] { return appDataState.allItems; }\n\n    /**\n     * Record a practice result with proper typing\n     * @param itemId The ID of the vocabulary item\n     * @param correct Whether the answer was correct\n     * @param responseTime Response time in milliseconds (optional)\n     */\n    async recordPracticeResult(itemId: string, correct: boolean, responseTime?: number): Promise<void> {\n        return appDataState.recordPracticeResult(itemId, correct, responseTime);\n    }\n\n    /**\n     * Toggle favorite status for a vocabulary item\n     * @param itemId The ID of the vocabulary item\n     */\n    toggleFavorite(itemId: string): void { return appDataState.toggleFavorite(itemId); }\n\n    /**\n     * Check if an item is favorited\n     * @param itemId The ID of the vocabulary item\n     * @returns boolean indicating if the item is favorited\n     */\n    isFavorite(itemId: string): boolean { return appDataState.isFavorite(itemId); }\n\n    /**\n     * Clear all user data\n     */\n    async clearAllData(): Promise<void> { return appDataState.clearAllData(); }\n\n    /**\n     * Export user data as JSON\n     * @returns JSON string of user data\n     */\n    exportData(): string { return appDataState.exportData(); }\n\n    /**\n     * Import user data from JSON\n     * @param jsonData JSON string of user data\n     */\n    importData(jsonData: string): void { return appDataState.importData(jsonData); }\n}\n\n// Export the singleton instance for backward compatibility\n// Note: This should be used after calling initializeAppState()\nexport const appState = new AppState();","import { browser } from '$app/environment';\nimport { vocabularyDb } from '$lib/data/db.svelte';\nimport { vocabularyService } from '$lib/data/vocabulary';\nimport { LocalStorageManager } from '$lib/utils/localStorage';\nimport { Debug } from '$lib/utils';\nimport { TransactionManager } from '$lib/utils/transaction';\nimport type { VocabularyItem } from '$lib/types/vocabulary';\nimport { StateError, StorageError, ErrorHandler } from '../services/errors';\nimport { EventBus } from '../services/event-bus';\n\nexport class AppDataState {\n    // Data-related state with proper typing\n    practiceStats = $state<Map<string, { correct: number; incorrect: number; lastPracticed: string }>>(new Map());\n    recentSearches = $state<string[]>([]);\n    favorites = $state<string[]>([]);\n\n    // Error state for user feedback\n    lastError = $state<string | null>(null);\n    isError = $state<boolean>(false);\n\n    // Get all vocabulary items from the database\n    get allItems(): VocabularyItem[] {\n        return vocabularyDb.items;\n    }\n\n    /**\n     * Toggle favorite status for a vocabulary item\n     * @param itemId The ID of the vocabulary item\n     * @throws StateError if the item ID is invalid\n     */\n    toggleFavorite(itemId: string): void {\n        Debug.log('AppDataState', 'Toggling favorite', { itemId });\n        try {\n            // Validate input with type guard\n            if (typeof itemId !== 'string' || !itemId.trim()) {\n                throw new Error('Invalid item ID: must be a non-empty string');\n            }\n\n            const index = this.favorites.indexOf(itemId);\n            if (index > -1) {\n                this.favorites = this.favorites.filter(fav => fav !== itemId);\n            } else {\n                this.favorites = [...this.favorites, itemId];\n            }\n            this.saveProgress();\n        } catch (error) {\n            this.handleError(error, 'Failed to toggle favorite');\n            throw new StateError('Failed to toggle favorite', { itemId, error });\n        }\n    }\n\n    isFavorite(itemId: string): boolean {\n        return this.favorites.includes(itemId);\n    }\n\n    // Enhanced progress tracking\n    /**\n     * Record a practice result for a vocabulary item\n     * @param itemId The ID of the vocabulary item\n     * @param correct Whether the answer was correct\n     * @param responseTime Response time in seconds (optional)\n     * @throws StateError if recording fails\n     */\n    /**\n     * Record a practice result for a vocabulary item using atomic transaction\n     * @param itemId The ID of the vocabulary item\n     * @param correct Whether the answer was correct\n     * @param responseTime Response time in seconds (optional)\n     * @param eventBus Optional event bus for error handling\n     * @throws StateError if recording fails\n     */\n    /**\n     * Record a practice result for a vocabulary item using atomic transaction\n     * @param itemId The ID of the vocabulary item\n     * @param correct Whether the answer was correct\n     * @param responseTime Response time in seconds (optional)\n     * @param eventBus Optional event bus for error handling\n     * @throws StateError if recording fails\n     */\n    async recordPracticeResult(itemId: string, correct: boolean, responseTime?: number, eventBus?: EventBus): Promise<void> {\n        // Validate input parameters with type guards\n        if (typeof itemId !== 'string' || !itemId.trim()) {\n            const error = new Error('Invalid item ID: must be a non-empty string');\n            this.handleError(error, 'Failed to record practice result');\n            throw new StateError('Invalid item ID', { itemId });\n        }\n        if (typeof correct !== 'boolean') {\n            const error = new Error('Invalid correct flag: must be a boolean');\n            this.handleError(error, 'Failed to record practice result');\n            throw new StateError('Invalid correct flag', { correct });\n        }\n        if (responseTime !== undefined && (typeof responseTime !== 'number' || responseTime < 0 || !Number.isFinite(responseTime))) {\n            const error = new Error('Invalid response time: must be a non-negative number');\n            this.handleError(error, 'Failed to record practice result');\n            throw new StateError('Invalid response time', { responseTime });\n        }\n        // Create a transaction to ensure atomic updates\n        const transactionId = `practice-result-${itemId}-${Date.now()}`;\n        const transaction = TransactionManager.startTransaction(transactionId);\n\n        try {\n            // Store current state for rollback\n            const originalStats = new Map(this.practiceStats);\n            const originalFavorites = [...this.favorites];\n            const originalSearches = [...this.recentSearches];\n\n            // Add data loader update operation\n            transaction.addOperation(\n                async () => {\n                    await vocabularyService.updateStats(itemId, correct, responseTime);\n                },\n                async () => {\n                    Debug.log('AppDataState', 'Rolling back data loader update', { itemId });\n                    // No rollback needed for data loader as it's read-only\n                }\n            );\n\n            // Add local stats update operation\n            transaction.addOperation(\n                async () => {\n                    // Update local stats\n                    const current = this.practiceStats.get(itemId) || { correct: 0, incorrect: 0, lastPracticed: '' };\n\n                    // Update practice stats with proper typing\n                    const updatedStats = {\n                        correct: correct ? current.correct + 1 : current.correct,\n                        incorrect: !correct ? current.incorrect + 1 : current.incorrect,\n                        lastPracticed: new Date().toISOString()\n                    };\n\n                    // Create a new Map to trigger reactivity with Svelte 5 Runes\n                    const newStats = new Map(this.practiceStats);\n                    newStats.set(itemId, updatedStats);\n                    this.practiceStats = newStats;\n                },\n                async () => {\n                    Debug.log('AppDataState', 'Rolling back local stats update', { itemId });\n                    this.practiceStats = originalStats;\n                }\n            );\n\n            // Add save progress operation\n            transaction.addOperation(\n                async () => {\n                    await this.saveProgress(eventBus);\n                },\n                async () => {\n                    Debug.log('AppDataState', 'Rolling back save progress', { itemId });\n                    this.favorites = originalFavorites;\n                    this.recentSearches = originalSearches;\n                }\n            );\n\n            // Commit the transaction\n            await TransactionManager.commitTransaction(transactionId);\n\n        } catch (error) {\n            // Attempt to rollback the transaction if it wasn't committed\n            try {\n                await TransactionManager.rollbackTransaction(transactionId);\n            } catch (rollbackError) {\n                Debug.error('AppDataState', 'Failed to rollback transaction', rollbackError as Error);\n            }\n\n            this.handleError(error, 'Failed to record practice result');\n            ErrorHandler.handleError(error as Error, 'Failed to record practice result', eventBus);\n            throw new StateError('Failed to record practice result', { itemId, error });\n        }\n    }\n\n    // Enhanced localStorage integration\n    /**\n     * Save progress data to localStorage\n     * @param eventBus Optional event bus for error handling\n     * @throws StorageError if saving fails\n     */\n    private async saveProgress(eventBus?: EventBus): Promise<void> {\n        if (!browser) return;\n\n        try {\n            // Validate data before saving\n            if (!(this.practiceStats instanceof Map)) {\n                throw new Error('Invalid practice stats: expected Map');\n            }\n            if (!Array.isArray(this.favorites)) {\n                throw new Error('Invalid favorites: expected array');\n            }\n            if (!Array.isArray(this.recentSearches)) {\n                throw new Error('Invalid recent searches: expected array');\n            }\n\n            LocalStorageManager.saveUserProgress({\n                stats: this.practiceStats,\n                favorites: this.favorites,\n                recentSearches: this.recentSearches\n            }, eventBus);\n        } catch (error) {\n            this.handleError(error, 'Failed to save progress data');\n            ErrorHandler.handleError(error as Error, 'Failed to save app data state', eventBus);\n            throw new StorageError('Failed to save app data state', {\n                error,\n                statsType: typeof this.practiceStats,\n                favoritesType: typeof this.favorites,\n                searchesType: typeof this.recentSearches\n            });\n        }\n    }\n\n    /**\n     * Load progress data from localStorage\n     * @param eventBus Optional event bus for error handling\n     * @throws StorageError if loading fails\n     */\n    private loadProgress(eventBus?: EventBus): void {\n        if (!browser) return;\n\n        try {\n            const progress = LocalStorageManager.loadUserProgress(eventBus);\n            if (progress) {\n                // Validate loaded data\n                if (progress.stats && typeof progress.stats === 'object') {\n                    this.practiceStats = new Map(Object.entries(progress.stats));\n                } else {\n                    this.practiceStats = new Map();\n                }\n\n                this.favorites = Array.isArray(progress.favorites) ? progress.favorites : [];\n                this.recentSearches = Array.isArray(progress.recentSearches) ? progress.recentSearches : [];\n            }\n        } catch (error) {\n            this.handleError(error, 'Failed to load progress data');\n            ErrorHandler.handleError(error as Error, 'Failed to load app data state', eventBus);\n            // Provide basic error context without progress data\n            throw new StorageError('Failed to load app data state', {\n                error,\n                hasStats: false,\n                hasFavorites: false,\n                hasSearches: false\n            });\n        }\n    }\n\n    // Utility methods for enhanced functionality\n    /**\n     * Clear all user data\n     * @param eventBus Optional event bus for error handling\n     * @throws StorageError if clearing fails\n     */\n    /**\n     * Clear all user data\n     * @param eventBus Optional event bus for error handling\n     * @throws StorageError if clearing fails\n     */\n    async clearAllData(eventBus?: EventBus): Promise<void> {\n        try {\n            // Clear state with proper typing\n            this.practiceStats = new Map();\n            this.favorites = [];\n            this.recentSearches = [];\n            await this.saveProgress(eventBus);\n\n            // Clear vocabulary cache\n            if (typeof localStorage !== 'undefined') {\n                localStorage.removeItem('vocabulary-cache');\n            }\n            LocalStorageManager.clearAllData(eventBus);\n        } catch (error) {\n            this.handleError(error, 'Failed to clear all user data');\n            ErrorHandler.handleError(error as Error, 'Failed to clear all app data', eventBus);\n            throw new StorageError('Failed to clear all app data', { error });\n        }\n    }\n\n    /**\n     * Export user data as JSON\n     * @param eventBus Optional event bus for error handling\n     * @returns JSON string of user data\n     * @throws StorageError if export fails\n     */\n    exportData(eventBus?: EventBus): string {\n        try {\n            return LocalStorageManager.exportUserData(eventBus);\n        } catch (error) {\n            this.handleError(error, 'Failed to export user data');\n            ErrorHandler.handleError(error as Error, 'Failed to export app data', eventBus);\n            throw new StorageError('Failed to export app data', { error });\n        }\n    }\n\n    /**\n     * Import user data from JSON\n     * @param jsonData JSON string of user data\n     * @param eventBus Optional event bus for error handling\n     * @throws StateError if import fails\n     */\n    /**\n     * Import user data from JSON\n     * @param jsonData JSON string of user data\n     * @param eventBus Optional event bus for error handling\n     * @throws StateError if import fails\n     */\n    importData(jsonData: string, eventBus?: EventBus): void {\n        try {\n            // Validate input with type guard\n            if (typeof jsonData !== 'string' || !jsonData.trim()) {\n                throw new Error('Invalid JSON data: must be a non-empty string');\n            }\n\n            LocalStorageManager.importUserData(jsonData, eventBus);\n            this.loadProgress(eventBus);\n        } catch (error) {\n            this.handleError(error, 'Failed to import user data');\n            ErrorHandler.handleError(error as Error, 'Failed to import app data', eventBus);\n            throw new StateError('Failed to import app data', {\n                error,\n                jsonDataType: typeof jsonData,\n                jsonDataLength: jsonData?.length\n            });\n        }\n    }\n\n    /**\n     * Initialize the AppDataState\n     * @param eventBus Optional event bus for error handling\n     * @throws StateError if initialization fails\n     */\n    init(eventBus?: EventBus) {\n        if (browser) {\n            try {\n                // Load user progress\n                this.loadProgress(eventBus);\n            } catch (error) {\n                this.handleError(error, 'Failed to initialize application data');\n                ErrorHandler.handleError(error as Error, 'Failed to initialize AppDataState', eventBus);\n                // Re-throw to allow application to handle initialization failure\n                throw new StateError('Failed to initialize AppDataState', { error });\n            }\n        }\n    }\n\n    /**\n     * Handle errors and provide user feedback\n     * @param error The error to handle\n     * @param context Context for the error\n     */\n    private handleError(error: unknown, context: string): void {\n        this.isError = true;\n        this.lastError = `${context}: ${error instanceof Error ? error.message : String(error)}`;\n\n        // Clear error after 5 seconds\n        setTimeout(() => {\n            this.isError = false;\n            this.lastError = null;\n        }, 5000);\n    }\n\n    /**\n     * Clear the current error state\n     */\n    clearError(): void {\n        this.isError = false;\n        this.lastError = null;\n    }\n}","import { browser } from '$app/environment';\nimport { Debug } from '$lib/utils';\nimport type { VocabularyItem } from '$lib/types/vocabulary';\nimport type { AppDataState } from './app-data.svelte';\nimport { StateError, ErrorHandler } from '../services/errors';\n\nexport type LanguageMode = 'DE_BG' | 'BG_DE';\n\nexport class AppUIState {\n    // Reference to the data state\n    private dataState: AppDataState;\n\n    // UI State\n    languageMode = $state<LanguageMode>('DE_BG');\n    searchQuery = $state('');\n    currentItem = $state<VocabularyItem | null>(null);\n    showAnswer = $state(false);\n    practiceMode = $state(false);\n    isLoading = $state(false);\n    error = $state<string | null>(null);\n\n    // Derived state\n    displayDirection = $derived(\n        this.languageMode === 'DE_BG' ? 'German  Bulgarian' : 'Bulgarian  German'\n    );\n\n    constructor(dataState: AppDataState) {\n        this.dataState = dataState;\n    }\n\n    toggleLanguageMode() {\n        this.languageMode = this.languageMode === 'DE_BG' ? 'BG_DE' : 'DE_BG';\n        this.triggerLanguageModePersistence();\n  \n        // Notify localization service about language change\n        if (browser) {\n            try {\n                // Import the LocalizationService dynamically to avoid circular dependencies\n                import('../services/localization').then(({ LocalizationService }) => {\n                    LocalizationService.notifyLanguageChange();\n                });\n            } catch (error) {\n                console.error('Failed to notify language change:', error);\n            }\n        }\n    }\n\n    // Legacy support alias for compatibility\n    toggleDirection() {\n        this.toggleLanguageMode();\n    }\n\n    setSearchQuery(query: string) {\n        this.searchQuery = query;\n\n        // Add to recent searches if not empty and not already in list\n        if (query.trim() && !this.dataState.recentSearches.includes(query)) {\n            this.dataState.recentSearches = [query, ...this.dataState.recentSearches.slice(0, 9)]; // Keep last 10\n        }\n    }\n\n    /**\n     * Trigger language mode persistence to localStorage\n     * @throws StateError if saving fails\n     */\n    private triggerLanguageModePersistence(): void {\n        if (browser) {\n            try {\n                localStorage.setItem('app-language-mode', this.languageMode);\n                // Clean up old storage key if it exists\n                if (localStorage.getItem('tandem-direction')) {\n                    localStorage.removeItem('tandem-direction');\n                }\n            } catch (error) {\n                ErrorHandler.handleError(error, 'Failed to save language mode');\n                throw new StateError('Failed to save language mode', { error });\n            }\n        }\n    }\n\n    setCurrentItem(item: VocabularyItem | null) {\n        this.currentItem = item;\n        this.showAnswer = false;\n    }\n\n    togglePracticeMode() {\n        this.practiceMode = !this.practiceMode;\n        if (!this.practiceMode) {\n            this.setCurrentItem(null);\n        }\n    }\n\n    /**\n     * Enhanced practice session management for \"Practice This\" quick actions\n     * This method provides a seamless way to start practicing a specific item\n     */\n    startPracticeSession(item: VocabularyItem) {\n        // Set up the practice session\n        this.practiceMode = true;\n        this.setCurrentItem(item);\n        this.showAnswer = false;\n\n        // Clear any existing search query to focus on practice\n        this.searchQuery = '';\n    }\n\n    toggleShowAnswer() {\n        this.showAnswer = !this.showAnswer;\n    }\n\n    setError(error: string | null) {\n        Debug.log('AppUIState', 'Setting error', { error });\n        this.error = error;\n    }\n\n    // Derived state for filtered items\n    filteredItems = $derived.by(() => {\n        const query = this.searchQuery.trim();\n        if (!query) return this.dataState.allItems;\n\n        const q = query.toLowerCase();\n        return this.dataState.allItems.filter((item: VocabularyItem) => {\n            return item.german.toLowerCase().includes(q) ||\n                   item.bulgarian.toLowerCase().includes(q) ||\n                   item.category.toLowerCase().includes(q) ||\n                   item.tags.some(tag => tag.toLowerCase().includes(q));\n        });\n    });\n\n    // Enhanced derived state for practice recommendations\n    practiceRecommendations = $derived.by(() => {\n        // Memoize the filtering logic to optimize performance\n        const recommendations = this.dataState.allItems\n            .filter((item: VocabularyItem) => {\n                const stats = this.dataState.practiceStats.get(item.id);\n                if (!stats) return true; // Include new items\n\n                // Prioritize items that need more practice\n                const totalAttempts = stats.correct + stats.incorrect;\n                const successRate = totalAttempts > 0 ? stats.correct / totalAttempts : 0;\n\n                // Include items with low success rate or few attempts\n                return successRate < 0.8 || totalAttempts < 3;\n            });\n\n        // Limit to top 10 recommendations and ensure we don't exceed array bounds\n        return recommendations.slice(0, Math.min(10, recommendations.length));\n    });\n\n    /**\n     * Initialize the UI state\n     * @throws StateError if initialization fails\n     */\n    init(): void {\n        if (browser) {\n            try {\n                // Load initial language mode\n                const saved = localStorage.getItem('app-language-mode');\n                const oldSaved = localStorage.getItem('tandem-direction');\n  \n                // Set default language if no preference exists\n                if (saved === 'DE_BG' || saved === 'BG_DE') {\n                    this.languageMode = saved as LanguageMode;\n                } else if (oldSaved === 'DE->BG') {\n                    this.languageMode = 'DE_BG';\n                    // Migrate from old format to new format\n                    localStorage.setItem('app-language-mode', 'DE_BG');\n                    localStorage.removeItem('tandem-direction');\n                } else if (oldSaved === 'BG->DE') {\n                    this.languageMode = 'BG_DE';\n                    // Migrate from old format to new format\n                    localStorage.setItem('app-language-mode', 'BG_DE');\n                    localStorage.removeItem('tandem-direction');\n                } else {\n                    // Set default language (DE_BG) when no saved preference exists\n                    this.languageMode = 'DE_BG';\n                    localStorage.setItem('app-language-mode', 'DE_BG');\n                }\n  \n                // Set up automatic syncing with event listener\n                window.addEventListener('storage', (e) => {\n                    if (e.key === 'app-language-mode') {\n                        const saved = localStorage.getItem('app-language-mode');\n                        if (saved === 'DE_BG' || saved === 'BG_DE') {\n                            this.languageMode = saved as LanguageMode;\n                        }\n                    }\n                });\n            } catch (error) {\n                ErrorHandler.handleError(error, 'Failed to initialize UI state');\n                throw new StateError('Failed to initialize UI state', { error });\n            }\n        }\n    }\n}"],"file":"BiyrdzXm.js"}