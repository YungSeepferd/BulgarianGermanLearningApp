import{b as t}from"./DkyakVTW.js";import{a as n}from"./wr4fSOtw.js";let a="de",o={},e=!0;const r=[],i=[];class s{static isLoading(){return e}static notifyTranslationChange(){for(const n of r)try{n()}catch(t){console.error("Error in translation change listener:",t)}}static async init(){this.updateCurrentLanguage(),this.loadTranslations(),this.onLanguageChange(()=>{this.updateCurrentLanguage(),this.loadTranslations()})}static updateCurrentLanguage(){a="de","BG_DE"===n.languageMode&&(a="bg")}static async loadTranslations(){e=!0;try{const n=a,e=await fetch(`${t}/translations/${n}.json`);if(!e.ok)throw new Error(`Failed to load translations for ${n}`);const r=await e.json();console.log("Loaded translations:",JSON.stringify(r,null,2)),o=r,this.notifyTranslationChange()}catch(n){console.error("Failed to load translations:",n),a="de";try{const n=await fetch(`${t}/translations/de.json`);n.ok&&(o=await n.json(),this.notifyTranslationChange())}catch(r){console.error("Failed to load fallback translations:",r)}}finally{e=!1,this.notifyTranslationChange()}}static getCurrentLanguage(){return a}static t(t,n){try{if(e)return"";if(!o||0===Object.keys(o).length)return console.warn(`Translation key '${t}' not available - no translations loaded`),t;const a=t.split(".");let r=o;for(const n of a){if(!r||"object"!=typeof r||!(n in r))return console.warn(`Translation key '${t}' not found`),t;r=r[n]}if("string"==typeof r){if(n){let t=r;for(const[a,o]of Object.entries(n))t=t.replace(`{${a}}`,o);return t}return r}return console.warn(`Translation key '${t}' is not a string`),t}catch(a){return console.error(`Error getting translation for key '${t}':`,a),t}}static getDirectionText(){return"DE_BG"===n.languageMode?this.t("directions.de_to_bg"):this.t("directions.bg_to_de")}static getOppositeDirectionText(){return"DE_BG"===n.languageMode?this.t("directions.bg_to_de"):this.t("directions.de_to_bg")}static onLanguageChange(t){i.push(t)}static offLanguageChange(t){const n=i.indexOf(t);-1!==n&&i.splice(n,1)}static notifyLanguageChange(){for(const n of i)try{n(a)}catch(t){console.error("Error in language change listener:",t)}this.notifyTranslationChange()}static getHtmlLang(){return a}}function c(t,n){return s.t(t,n)}function l(){return e}function g(t){r.push(t)}function u(t){const n=r.indexOf(t);-1!==n&&r.splice(n,1)}function f(){return s.getCurrentLanguage()}s.init();export{s as LocalizationService,f as getCurrentLanguage,l as isTranslationsLoading,u as offTranslationsChange,g as onTranslationsChange,c as t};
//# sourceMappingURL=BlaiXEvI.js.map
